import{S as je,i as Le,s as Oe,d as q,v as Me,h as S,b,t as F,c as C,e as N,aa as Ye,l as V,g as U,r as Ne,w as J,k as Ue,f as T,m as wt,n as fe,K as Ge,I as W,L as de,y as he,ab as Y,a as ee,B as oe,q as bt,C as re,M as ge,D as Z,E as Q,F as se,o as x,ac as $,G as pe,ad as ye,ae as ke,H as ve,T as pt,R as We,U as yt,V as kt}from"./index.b0283b9c.js";import{U as Xe}from"./Upload.f574e8e9.js";import{d as Ie}from"./dsv.7fe76a93.js";var Je=Object.prototype.hasOwnProperty;function ne(o,e){var t,r;if(o===e)return!0;if(o&&e&&(t=o.constructor)===e.constructor){if(t===Date)return o.getTime()===e.getTime();if(t===RegExp)return o.toString()===e.toString();if(t===Array){if((r=o.length)===e.length)for(;r--&&ne(o[r],e[r]););return r===-1}if(!t||typeof o=="object"){r=0;for(t in o)if(Je.call(o,t)&&++r&&!Je.call(e,t)||!(t in e)||!ne(o[t],e[t]))return!1;return Object.keys(e).length===r}}return o!==o&&e!==e}const xe="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/table/src/EditableCell.svelte";function Ee(o){let e,t,r;const i={c:function(){e=S("input"),b(e,"class","absolute outline-none inset-2 bg-transparent border-0 translate-x-px flex-1 "),b(e,"tabindex","-1"),F(e,"translate-x-px",!o[3]),F(e,"font-bold",o[3]),C(e,xe,7,1,123)},m:function(c,s){N(c,e,s),Ye(e,o[0]),o[7](e),t||(r=[V(e,"input",o[6]),V(e,"keydown",o[5],!1,!1,!1),V(e,"blur",vt,!1,!1,!1)],t=!0)},p:function(c,s){s&1&&e.value!==c[0]&&Ye(e,c[0]),s&8&&F(e,"translate-x-px",!c[3]),s&8&&F(e,"font-bold",c[3])},d:function(c){c&&U(e),o[7](null),t=!1,Ne(r)}};return q("SvelteRegisterBlock",{block:i,id:Ee.name,type:"if",source:"(7:0) {#if edit}",ctx:o}),i}function De(o){let e,t,r,i,d,c=o[2]&&Ee(o);const s={c:function(){c&&c.c(),e=J(),t=S("span"),r=Ue(o[0]),b(t,"tabindex","-1"),b(t,"role","button"),b(t,"class","p-2 outline-none border-0 flex-1"),F(t,"opacity-0",o[2]),F(t,"pointer-events-none",o[2]),C(t,xe,19,0,429)},l:function(_){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(_,g){c&&c.m(_,g),N(_,e,g),N(_,t,g),T(t,r),i||(d=V(t,"dblclick",o[4],!1,!1,!1),i=!0)},p:function(_,[g]){_[2]?c?c.p(_,g):(c=Ee(_),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),g&1&&wt(r,_[0]),g&4&&F(t,"opacity-0",_[2]),g&4&&F(t,"pointer-events-none",_[2])},i:fe,o:fe,d:function(_){c&&c.d(_),_&&U(e),_&&U(t),i=!1,d()}};return q("SvelteRegisterBlock",{block:s,id:De.name,type:"component",source:"",ctx:o}),s}const vt=({currentTarget:o})=>o.setAttribute("tabindex","-1");function Et(o,e,t){let{$$slots:r={},$$scope:i}=e;Me("EditableCell",r,[]);let{edit:d}=e,{value:c=""}=e,{el:s}=e,{header:f=!1}=e;const _=["edit","value","el","header"];Object.keys(e).forEach(h=>{!~_.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<EditableCell> was created with unknown prop '${h}'`)});function g(h){Ge.call(this,o,h)}function l(h){Ge.call(this,o,h)}function m(){c=this.value,t(0,c)}function a(h){W[h?"unshift":"push"](()=>{s=h,t(1,s)})}return o.$$set=h=>{"edit"in h&&t(2,d=h.edit),"value"in h&&t(0,c=h.value),"el"in h&&t(1,s=h.el),"header"in h&&t(3,f=h.header)},o.$capture_state=()=>({edit:d,value:c,el:s,header:f}),o.$inject_state=h=>{"edit"in h&&t(2,d=h.edit),"value"in h&&t(0,c=h.value),"el"in h&&t(1,s=h.el),"header"in h&&t(3,f=h.header)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[c,s,d,f,g,l,m,a]}class qe extends je{constructor(e){super(e),Le(this,e,Et,De,Oe,{edit:2,value:0,el:1,header:3}),q("SvelteRegisterComponent",{component:this,tagName:"EditableCell",options:e,id:De.name});const{ctx:t}=this.$$,r=e.props||{};t[2]===void 0&&!("edit"in r)&&console.warn("<EditableCell> was created without expected prop 'edit'"),t[1]===void 0&&!("el"in r)&&console.warn("<EditableCell> was created without expected prop 'el'")}get edit(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set edit(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get el(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set el(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get header(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set header(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const A="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/table/src/Table.svelte";function ae(o,e,t){const r=o.slice();return r[48]=e[t],r[50]=t,r}function ce(o,e,t){const r=o.slice();return r[51]=e[t].value,r[52]=e[t].id,r[53]=e,r[54]=t,r}function ue(o,e,t){const r=o.slice();return r[51]=e[t].value,r[52]=e[t].id,r[55]=e,r[50]=t,r}function Pe(o,e){let t,r,i,d,c,s,f,_,g,l,m,a=e[52],h,P,u;function v(L){e[27](L,e[52])}function p(){return e[28](e[52])}let y={value:e[51],edit:e[10]===e[52],header:!0};e[7][e[52]].input!==void 0&&(y.el=e[7][e[52]].input),i=new qe({props:y,$$inline:!0}),W.push(()=>de(i,"el",v)),i.$on("keydown",e[18]),i.$on("dblclick",p);function H(){return e[29](e[50])}const R=()=>e[30](t,a),B=()=>e[30](null,a),j={key:o,first:null,c:function(){t=S("th"),r=S("div"),oe(i.$$.fragment),c=J(),s=S("div"),f=ee("svg"),_=ee("path"),l=J(),b(_,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),C(_,A,432,10,13094),b(f,"width","1em"),b(f,"height","1em"),b(f,"class","fill-current text-[10px]"),b(f,"viewBox","0 0 9 7"),b(f,"fill","none"),b(f,"xmlns","http://www.w3.org/2000/svg"),C(f,A,424,9,12885),b(s,"class",g="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[9]!==e[50]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[9]===e[50]&&e[8]==="des"?"-scale-y-[1]":"")),F(s,"text-gray-200",e[9]!==e[50]),C(s,A,413,8,12459),b(r,"class","min-h-[2.3rem] flex outline-none"),C(r,A,403,7,12186),b(t,"class","p-0 relative focus-within:ring-1 ring-orange-500 ring-inset outline-none "),b(t,"aria-sort",m=e[12](e[51],e[9],e[8])),F(t,"bg-orange-50",e[10]===e[52]),F(t,"dark:bg-transparent",e[10]===e[52]),F(t,"rounded-tl-lg",e[50]===0),F(t,"rounded-tr-lg",e[50]===e[5].length-1),C(t,A,394,6,11786),this.first=t},m:function(z,O){N(z,t,O),T(t,r),re(i,r,null),T(r,c),T(r,s),T(s,f),T(f,_),T(t,l),R(),h=!0,P||(u=V(s,"click",H,!1,!1,!1),P=!0)},p:function(z,O){e=z;const M={};O[0]&32&&(M.value=e[51]),O[0]&1056&&(M.edit=e[10]===e[52]),!d&&O[0]&160&&(d=!0,M.el=e[7][e[52]].input,ge(()=>d=!1)),i.$set(M),(!h||O[0]&800&&g!==(g="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[9]!==e[50]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[9]===e[50]&&e[8]==="des"?"-scale-y-[1]":"")))&&b(s,"class",g),O[0]&800&&F(s,"text-gray-200",e[9]!==e[50]),(!h||O[0]&800&&m!==(m=e[12](e[51],e[9],e[8])))&&b(t,"aria-sort",m),a!==e[52]&&(B(),a=e[52],R()),O[0]&1056&&F(t,"bg-orange-50",e[10]===e[52]),O[0]&1056&&F(t,"dark:bg-transparent",e[10]===e[52]),O[0]&32&&F(t,"rounded-tl-lg",e[50]===0),O[0]&32&&F(t,"rounded-tr-lg",e[50]===e[5].length-1)},i:function(z){h||(Z(i.$$.fragment,z),h=!0)},o:function(z){Q(i.$$.fragment,z),h=!1},d:function(z){z&&U(t),se(i),B(),P=!1,u()}};return q("SvelteRegisterBlock",{block:j,id:Pe.name,type:"each",source:"(394:5) {#each _headers as { value, id }",ctx:e}),j}function Fe(o,e){let t,r,i,d,c,s=e[52],f,_,g;function l(R){e[31](R,e[51],e[53],e[54])}function m(R){e[32](R,e[52])}let a={edit:e[3]===e[52]};e[51]!==void 0&&(a.value=e[51]),e[7][e[52]].input!==void 0&&(a.el=e[7][e[52]].input),i=new qe({props:a,$$inline:!0}),W.push(()=>de(i,"value",l)),W.push(()=>de(i,"el",m));const h=()=>e[33](t,s),P=()=>e[33](null,s);function u(){return e[34](e[52])}function v(){return e[35](e[52])}function p(){return e[36](e[52])}function y(...R){return e[37](e[50],e[54],e[52],...R)}const H={key:o,first:null,c:function(){t=S("td"),r=S("div"),oe(i.$$.fragment),b(r,"class","min-h-[2.3rem] h-full outline-none flex items-center"),F(r,"border-transparent",e[4]!==e[52]),C(r,A,456,8,14124),b(t,"tabindex","0"),b(t,"class","outline-none focus-within:ring-1 ring-orange-500 ring-inset focus-within:bg-orange-50 dark:focus-within:bg-gray-800 group-last:first:rounded-bl-lg group-last:last:rounded-br-lg relative"),C(t,A,447,7,13655),this.first=t},m:function(B,j){N(B,t,j),T(t,r),re(i,r,null),h(),f=!0,_||(g=[V(t,"touchstart",u,{passive:!0},!1,!1),V(t,"click",v,!1,!1,!1),V(t,"dblclick",p,!1,!1,!1),V(t,"keydown",y,!1,!1,!1)],_=!0)},p:function(B,j){e=B;const L={};j[0]&72&&(L.edit=e[3]===e[52]),!d&&j[0]&64&&(d=!0,L.value=e[51],ge(()=>d=!1)),!c&&j[0]&192&&(c=!0,L.el=e[7][e[52]].input,ge(()=>c=!1)),i.$set(L),j[0]&80&&F(r,"border-transparent",e[4]!==e[52]),s!==e[52]&&(P(),s=e[52],h())},i:function(B){f||(Z(i.$$.fragment,B),f=!0)},o:function(B){Q(i.$$.fragment,B),f=!1},d:function(B){B&&U(t),se(i),P(),_=!1,Ne(g)}};return q("SvelteRegisterBlock",{block:H,id:Fe.name,type:"each",source:"(447:6) {#each row as { value, id }",ctx:e}),H}function Ce(o,e){let t,r=[],i=new Map,d,c,s=e[48];x(s);const f=g=>g[52];$(e,s,ce,f);for(let g=0;g<s.length;g+=1){let l=ce(e,s,g),m=f(l);i.set(m,r[g]=Fe(m,l))}const _={key:o,first:null,c:function(){t=S("tr");for(let l=0;l<r.length;l+=1)r[l].c();d=J(),b(t,"class","group border-b dark:border-gray-700 last:border-none divide-x dark:divide-gray-700 space-x-4 odd:bg-gray-50 dark:odd:bg-gray-900 group focus:bg-gradient-to-b focus:from-blue-100 dark:focus:from-blue-900 focus:to-blue-50 dark:focus:to-gray-900 focus:odd:bg-white"),C(t,A,443,5,13318),this.first=t},m:function(l,m){N(l,t,m);for(let a=0;a<r.length;a+=1)r[a].m(t,null);T(t,d),c=!0},p:function(l,m){e=l,m[0]&57560&&(s=e[48],x(s),pe(),$(e,s,ce,f),r=ye(r,m,f,1,e,s,i,t,ke,Fe,d,ce),ve())},i:function(l){if(!c){for(let m=0;m<s.length;m+=1)Z(r[m]);c=!0}},o:function(l){for(let m=0;m<r.length;m+=1)Q(r[m]);c=!1},d:function(l){l&&U(t);for(let m=0;m<r.length;m+=1)r[m].d()}};return q("SvelteRegisterBlock",{block:_,id:Ce.name,type:"each",source:"(443:4) {#each data as row, i (row)}",ctx:e}),_}function $e(o){let e,t,r,i=[],d=new Map,c,s,f=[],_=new Map,g,l=o[5];x(l);const m=u=>u[52];$(o,l,ue,m);for(let u=0;u<l.length;u+=1){let v=ue(o,l,u),p=m(v);d.set(p,i[u]=Pe(p,v))}let a=o[6];x(a);const h=u=>u[48];$(o,a,ae,h);for(let u=0;u<a.length;u+=1){let v=ae(o,a,u),p=h(v);_.set(p,f[u]=Ce(p,v))}const P={c:function(){e=S("table"),t=S("thead"),r=S("tr");for(let v=0;v<i.length;v+=1)i[v].c();c=J(),s=S("tbody");for(let v=0;v<f.length;v+=1)f[v].c();b(r,"class","border-b dark:border-gray-700 divide-x dark:divide-gray-700 text-left"),C(r,A,390,4,11639),b(t,"class","sticky top-0 left-0 right-0 bg-white shadow-sm z-10"),C(t,A,389,3,11567),b(s,"class","overflow-y-scroll"),C(s,A,441,3,13246),b(e,"class","table-auto font-mono w-full text-gray-900 text-sm transition-opacity overflow-hidden "),F(e,"opacity-40",o[11]),C(e,A,385,2,11425)},m:function(v,p){N(v,e,p),T(e,t),T(t,r);for(let y=0;y<i.length;y+=1)i[y].m(r,null);T(e,c),T(e,s);for(let y=0;y<f.length;y+=1)f[y].m(s,null);g=!0},p:function(v,p){p[0]&464800&&(l=v[5],x(l),pe(),$(v,l,ue,m),i=ye(i,p,m,1,v,l,d,r,ke,Pe,null,ue),ve()),p[0]&57560&&(a=v[6],x(a),pe(),$(v,a,ae,h),f=ye(f,p,h,1,v,a,_,s,ke,Ce,null,ae),ve()),p[0]&2048&&F(e,"opacity-40",v[11])},i:function(v){if(!g){for(let p=0;p<l.length;p+=1)Z(i[p]);for(let p=0;p<a.length;p+=1)Z(f[p]);g=!0}},o:function(v){for(let p=0;p<i.length;p+=1)Q(i[p]);for(let p=0;p<f.length;p+=1)Q(f[p]);g=!1},d:function(v){v&&U(e);for(let p=0;p<i.length;p+=1)i[p].d();for(let p=0;p<f.length;p+=1)f[p].d()}};return q("SvelteRegisterBlock",{block:P,id:$e.name,type:"slot",source:"(378:1) <Upload   flex={false}   center={false}   boundedheight={false}   click={false}   on:load={(e) => blob_to_string(data_uri_to_blob(e.detail.data))}   bind:dragging  >",ctx:o}),P}function Te(o){let e,t,r=o[1][1]==="dynamic"&&Ae(o),i=o[0][1]==="dynamic"&&Re(o);const d={c:function(){e=S("div"),r&&r.c(),t=J(),i&&i.c(),b(e,"class","flex justify-end space-x-1 pt-2 text-gray-800"),C(e,A,475,1,14506)},m:function(s,f){N(s,e,f),r&&r.m(e,null),T(e,t),i&&i.m(e,null)},p:function(s,f){s[1][1]==="dynamic"?r?r.p(s,f):(r=Ae(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),s[0][1]==="dynamic"?i?i.p(s,f):(i=Re(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d:function(s){s&&U(e),r&&r.d(),i&&i.d()}};return q("SvelteRegisterBlock",{block:d,id:Te.name,type:"if",source:"(475:0) {#if editable}",ctx:o}),d}function Ae(o){let e,t,r,i,d,c;const s={c:function(){e=S("button"),t=ee("svg"),r=ee("path"),i=Ue("New row"),b(r,"fill","currentColor"),b(r,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),C(r,A,488,6,14965),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(t,"aria-hidden","true"),b(t,"role","img"),b(t,"class","mr-1 group-hover:text-orange-500"),b(t,"width","1em"),b(t,"height","1em"),b(t,"preserveAspectRatio","xMidYMid meet"),b(t,"viewBox","0 0 32 32"),C(t,A,478,5,14679),b(e,"class","!flex-none gr-button group"),C(e,A,477,3,14604)},m:function(_,g){N(_,e,g),T(e,t),T(t,r),T(e,i),d||(c=V(e,"click",o[40],!1,!1,!1),d=!0)},p:fe,d:function(_){_&&U(e),d=!1,c()}};return q("SvelteRegisterBlock",{block:s,id:Ae.name,type:"if",source:'(477:2) {#if row_count[1] === \\"dynamic\\"}',ctx:o}),s}function Re(o){let e,t,r,i,d,c;const s={c:function(){e=S("button"),t=ee("svg"),r=ee("path"),i=Ue(`
				New column`),b(r,"fill","currentColor"),b(r,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),C(r,A,507,6,15518),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(t,"aria-hidden","true"),b(t,"role","img"),b(t,"class","mr-1 group-hover:text-orange-500"),b(t,"width","1em"),b(t,"height","1em"),b(t,"preserveAspectRatio","xMidYMid meet"),b(t,"viewBox","0 0 32 32"),C(t,A,497,4,15232),b(e,"class","!flex-none gr-button group"),C(e,A,496,3,15165)},m:function(_,g){N(_,e,g),T(e,t),T(t,r),T(e,i),d||(c=V(e,"click",o[20],!1,!1,!1),d=!0)},p:fe,d:function(_){_&&U(e),d=!1,c()}};return q("SvelteRegisterBlock",{block:s,id:Re.name,type:"if",source:'(496:2) {#if col_count[1] === \\"dynamic\\"}',ctx:o}),s}function Se(o){let e,t,r,i,d,c,s,f;function _(a){o[38](a)}let g={flex:!1,center:!1,boundedheight:!1,click:!1,$$slots:{default:[$e]},$$scope:{ctx:o}};o[11]!==void 0&&(g.dragging=o[11]),t=new Xe({props:g,$$inline:!0}),W.push(()=>de(t,"dragging",_)),t.$on("load",o[39]);let l=o[2]&&Te(o);const m={c:function(){e=S("div"),oe(t.$$.fragment),i=J(),l&&l.c(),d=bt(),b(e,"class","scroll-hide whitespace-nowrap overflow-hidden rounded-lg relative border transition-colors overflow-x-scroll"),F(e,"border-green-400",o[11]),C(e,A,373,0,11096)},l:function(h){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(h,P){N(h,e,P),re(t,e,null),N(h,i,P),l&&l.m(h,P),N(h,d,P),c=!0,s||(f=[V(window,"click",o[21],!1,!1,!1),V(window,"touchstart",o[21],!1,!1,!1)],s=!0)},p:function(h,P){const u={};P[0]&4088|P[1]&33554432&&(u.$$scope={dirty:P,ctx:h}),!r&&P[0]&2048&&(r=!0,u.dragging=h[11],ge(()=>r=!1)),t.$set(u),P[0]&2048&&F(e,"border-green-400",h[11]),h[2]?l?l.p(h,P):(l=Te(h),l.c(),l.m(d.parentNode,d)):l&&(l.d(1),l=null)},i:function(h){c||(Z(t.$$.fragment,h),c=!0)},o:function(h){Q(t.$$.fragment,h),c=!1},d:function(h){h&&U(e),se(t),h&&U(i),l&&l.d(h),h&&U(d),s=!1,Ne(f)}};return q("SvelteRegisterBlock",{block:m,id:Se.name,type:"component",source:"",ctx:o}),m}function Ze(o,e){return e.filter(t);function t(r){var i=-1;return o.split(`
`).every(d);function d(c){if(!c)return!0;var s=c.split(r).length;return i<0&&(i=s),i===s&&s>1}}}function Qe(o){const e=atob(o.split(",")[1]),t=o.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r);for(let d=0;d<e.length;d++)i[d]=e.charCodeAt(d);return new Blob([r],{type:t})}function Dt(o,e,t){let{$$slots:r={},$$scope:i}=e;Me("Table",r,[]);let{headers:d=[]}=e,{values:c=[[]]}=e,{col_count:s}=e,{row_count:f}=e,{editable:_=!0}=e;const g=he();let l=!1,m=!1,a={};function h(n){let w=n||[];if(s[1]==="fixed"&&w.length<s[0]){const k=Array(s[0]-w.length).fill("").map((E,D)=>`${D+w.length}`);w=w.concat(k)}return!w||w.length===0?Array(s[0]).fill(0).map((k,E)=>{const D=`h-${E}`;return t(7,a[D]={cell:null,input:null},a),{id:D,value:JSON.stringify(E+1)}}):w.map((k,E)=>{const D=`h-${E}`;return t(7,a[D]={cell:null,input:null},a),{id:D,value:k??""}})}function P(n){const w=n.length>0?n.length:f[0];return Array(f[1]==="fixed"||w<f[0]?f[0]:w).fill(0).map((k,E)=>Array(s[1]==="fixed"?s[0]:n[0].length).fill(0).map((D,G)=>{const I=`${E}-${G}`;return t(7,a[I]={input:null,cell:null},a),{value:n?.[E]?.[G]??"",id:I}}))}let u=h(d),v;async function p(){typeof l=="string"?(await Y(),a[l]?.input?.focus()):typeof m=="string"&&(await Y(),a[m]?.input?.focus())}let y=[[]],H;function R(n,w,k){if(!w)return"none";if(d[w]===n){if(k==="asc")return"ascending";if(k==="des")return"descending"}}function B(n){return y.reduce((w,k,E)=>{const D=k.reduce((G,I,we)=>n===I.id?we:G,-1);return D===-1?w:[E,D]},[-1,-1])}async function j(n,w){if(!_||l===n)return;if(w){const[E,D]=B(n);t(6,y[E][D].value="",y)}t(3,l=n),await Y();const{input:k}=a[n];k?.focus()}async function L(n,w,k,E){let D;switch(n.key){case"ArrowRight":if(l)break;n.preventDefault(),D=y[w][k+1],t(4,m=D?D.id:m);break;case"ArrowLeft":if(l)break;n.preventDefault(),D=y[w][k-1],t(4,m=D?D.id:m);break;case"ArrowDown":if(l)break;n.preventDefault(),D=y[w+1],t(4,m=D?D[k].id:m);break;case"ArrowUp":if(l)break;n.preventDefault(),D=y[w-1],t(4,m=D?D[k].id:m);break;case"Escape":if(!_)break;n.preventDefault(),t(4,m=l),t(3,l=!1);break;case"Enter":if(!_)break;if(n.preventDefault(),n.shiftKey){ie(w),await Y();const[mt]=B(E);t(4,m=y[mt+1][k].id)}else l===E?t(3,l=!1):j(E);break;case"Backspace":if(!_)break;l||(n.preventDefault(),t(6,y[w][k].value="",y));break;case"Delete":if(!_)break;l||(n.preventDefault(),t(6,y[w][k].value="",y));break;case"Tab":let G=n.shiftKey?-1:1,I=y[w][k+G],we=y?.[w+G]?.[G>0?0:u.length-1],be=I||we;be&&(n.preventDefault(),t(4,m=be?be.id:m)),t(3,l=!1);break;default:(!l||l&&l!==E)&&n.key.length===1&&j(E,!0);break}}async function z(n){l!==n&&m!==n&&(t(3,l=!1),t(4,m=n))}async function O(n,w){if(w==="edit"&&typeof n=="string"&&(await Y(),a[n].input?.focus()),w==="edit"&&typeof n=="boolean"&&typeof m=="string"){let k=a[m]?.cell;await Y(),k?.focus()}if(w==="select"&&typeof n=="string"){const{cell:k}=a[n];await Y(),k?.focus()}}let M,X;function He(n,w){w==="asc"?t(6,y=y.sort((k,E)=>k[n].value<E[n].value?-1:1)):w==="des"&&t(6,y=y.sort((k,E)=>k[n].value>E[n].value?-1:1))}function _e(n){typeof X!="number"||X!==n?(t(8,M="asc"),t(9,X=n)):M==="asc"?t(8,M="des"):M==="des"&&t(8,M="asc"),He(n,M)}let K;async function le(n,w){!_||s[1]!=="dynamic"||l===n||(t(10,K=n),await Y(),a[n].input?.focus(),w&&a[n].input?.select())}function ze(n){if(!!_)switch(n.key){case"Escape":n.preventDefault(),t(4,m=K),t(10,K=!1);break;case"Enter":n.preventDefault(),t(4,m=K),t(10,K=!1)}}function ie(n){f[1]==="dynamic"&&(y.splice(n?n+1:y.length,0,Array(s[0]).fill(0).map((w,k)=>{const E=`${y.length}-${k}`;return t(7,a[E]={cell:null,input:null},a),{id:E,value:""}})),t(6,y),t(23,c),t(26,H))}async function Ke(){if(s[1]!=="dynamic")return;for(let w=0;w<y.length;w++){const k=`${w}-${y[w].length}`;t(7,a[k]={cell:null,input:null},a),y[w].push({id:k,value:""})}const n=`h-${u.length}`;t(7,a[n]={cell:null,input:null},a),u.push({id:n,value:`Header ${u.length+1}`}),t(6,y),t(23,c),t(26,H),t(5,u),t(24,d),t(25,v),await Y(),le(n,!0)}function Ve(n){typeof l=="string"&&a[l]&&a[l].cell!==n.target&&!a[l].cell?.contains(n?.target)&&t(3,l=!1),typeof K=="string"&&a[K]&&a[K].cell!==n.target&&!a[K].cell?.contains(n.target)&&t(10,K=!1)}function me(n){const w=new FileReader;function k(E){if(!E?.target?.result||typeof E.target.result!="string")return;const[D]=Ze(E.target.result,[",","	"]),[G,...I]=Ie(D).parseRows(E.target.result);t(5,u=h(s[1]==="fixed"?G.slice(0,s[0]):G)),t(23,c=I),w.removeEventListener("loadend",k)}w.addEventListener("loadend",k),w.readAsText(n)}let te=!1;const tt=["headers","values","col_count","row_count","editable"];Object.keys(e).forEach(n=>{!~tt.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<Table> was created with unknown prop '${n}'`)});function nt(n,w){o.$$.not_equal(a[w].input,n)&&(a[w].input=n,t(7,a))}const ot=n=>le(n),rt=n=>_e(n);function st(n,w){W[n?"unshift":"push"](()=>{a[w].cell=n,t(7,a)})}function lt(n,w,k,E){k[E].value=n,t(6,y),t(23,c),t(26,H)}function it(n,w){o.$$.not_equal(a[w].input,n)&&(a[w].input=n,t(7,a))}function at(n,w){W[n?"unshift":"push"](()=>{a[w].cell=n,t(7,a)})}const ct=n=>j(n),ut=n=>z(n),ft=n=>j(n),dt=(n,w,k,E)=>L(E,n,w,k);function ht(n){te=n,t(11,te)}const gt=n=>me(Qe(n.detail.data)),_t=()=>ie();return o.$$set=n=>{"headers"in n&&t(24,d=n.headers),"values"in n&&t(23,c=n.values),"col_count"in n&&t(0,s=n.col_count),"row_count"in n&&t(1,f=n.row_count),"editable"in n&&t(2,_=n.editable)},o.$capture_state=()=>({createEventDispatcher:he,tick:Y,dsvFormat:Ie,dequal:ne,Upload:Xe,EditableCell:qe,headers:d,values:c,col_count:s,row_count:f,editable:_,dispatch:g,editing:l,selected:m,els:a,make_headers:h,process_data:P,_headers:u,old_headers:v,refresh_focus:p,data:y,old_val:H,get_sort_status:R,get_current_indices:B,start_edit:j,handle_keydown:L,handle_cell_click:z,set_focus:O,sort_direction:M,sort_by:X,sort:He,handle_sort:_e,header_edit:K,edit_header:le,end_header_edit:ze,add_row:ie,add_col:Ke,handle_click_outside:Ve,guess_delimitaor:Ze,data_uri_to_blob:Qe,blob_to_string:me,dragging:te}),o.$inject_state=n=>{"headers"in n&&t(24,d=n.headers),"values"in n&&t(23,c=n.values),"col_count"in n&&t(0,s=n.col_count),"row_count"in n&&t(1,f=n.row_count),"editable"in n&&t(2,_=n.editable),"editing"in n&&t(3,l=n.editing),"selected"in n&&t(4,m=n.selected),"els"in n&&t(7,a=n.els),"_headers"in n&&t(5,u=n._headers),"old_headers"in n&&t(25,v=n.old_headers),"data"in n&&t(6,y=n.data),"old_val"in n&&t(26,H=n.old_val),"sort_direction"in n&&t(8,M=n.sort_direction),"sort_by"in n&&t(9,X=n.sort_by),"header_edit"in n&&t(10,K=n.header_edit),"dragging"in n&&t(11,te=n.dragging)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty[0]&50331648&&(ne(d,v)||(t(5,u=h(d)),t(25,v=d),p())),o.$$.dirty[0]&75497472&&(ne(c,H)||(t(6,y=P(c)),t(26,H=c),p())),o.$$.dirty[0]&96&&u&&g("change",y.map(n=>n.map(({value:w})=>w))),o.$$.dirty[0]&8&&O(l,"edit"),o.$$.dirty[0]&16&&O(m,"select")},[s,f,_,l,m,u,y,a,M,X,K,te,R,j,L,z,_e,le,ze,ie,Ke,Ve,me,c,d,v,H,nt,ot,rt,st,lt,it,at,ct,ut,ft,dt,ht,gt,_t]}class et extends je{constructor(e){super(e),Le(this,e,Dt,Se,Oe,{headers:24,values:23,col_count:0,row_count:1,editable:2},null,[-1,-1]),q("SvelteRegisterComponent",{component:this,tagName:"Table",options:e,id:Se.name});const{ctx:t}=this.$$,r=e.props||{};t[0]===void 0&&!("col_count"in r)&&console.warn("<Table> was created without expected prop 'col_count'"),t[1]===void 0&&!("row_count"in r)&&console.warn("<Table> was created without expected prop 'row_count'")}get headers(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set headers(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get values(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set values(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get col_count(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set col_count(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get row_count(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set row_count(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Pt="src/components/DataFrame/DataFrame.svelte";function Be(o){let e,t,r,i,d;const c=[o[7]];let s={};for(let _=0;_<c.length;_+=1)s=pt(s,c[_]);t=new We({props:s,$$inline:!0}),i=new et({props:{row_count:o[5],col_count:o[4],values:o[1],headers:o[0],editable:o[3]==="dynamic"},$$inline:!0}),i.$on("change",o[8]);const f={c:function(){e=S("div"),oe(t.$$.fragment),r=J(),oe(i.$$.fragment),b(e,"id",o[2]),b(e,"class","relative overflow-hidden"),F(e,"flex-1",o[6]==="row"||!o[6]),C(e,Pt,30,0,811)},l:function(g){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(g,l){N(g,e,l),re(t,e,null),T(e,r),re(i,e,null),d=!0},p:function(g,[l]){const m=l&128?yt(c,[kt(g[7])]):{};t.$set(m);const a={};l&32&&(a.row_count=g[5]),l&16&&(a.col_count=g[4]),l&2&&(a.values=g[1]),l&1&&(a.headers=g[0]),l&8&&(a.editable=g[3]==="dynamic"),i.$set(a),(!d||l&4)&&b(e,"id",g[2]),l&64&&F(e,"flex-1",g[6]==="row"||!g[6])},i:function(g){d||(Z(t.$$.fragment,g),Z(i.$$.fragment,g),d=!0)},o:function(g){Q(t.$$.fragment,g),Q(i.$$.fragment,g),d=!1},d:function(g){g&&U(e),se(t),se(i)}};return q("SvelteRegisterBlock",{block:f,id:Be.name,type:"component",source:"",ctx:o}),f}function Ft(o,e,t){let{$$slots:r={},$$scope:i}=e;Me("DataFrame",r,[]);let{headers:d=[]}=e,{elem_id:c=""}=e,{value:s=[["","",""]]}=e,{mode:f}=e,{col_count:_}=e,{row_count:g}=e,{parent:l=null}=e;const m=he();let{loading_status:a}=e;async function h({detail:u}){t(1,s=u),await Y(),m("change",u)}const P=["headers","elem_id","value","mode","col_count","row_count","parent","loading_status"];return Object.keys(e).forEach(u=>{!~P.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<DataFrame> was created with unknown prop '${u}'`)}),o.$$set=u=>{"headers"in u&&t(0,d=u.headers),"elem_id"in u&&t(2,c=u.elem_id),"value"in u&&t(1,s=u.value),"mode"in u&&t(3,f=u.mode),"col_count"in u&&t(4,_=u.col_count),"row_count"in u&&t(5,g=u.row_count),"parent"in u&&t(6,l=u.parent),"loading_status"in u&&t(7,a=u.loading_status)},o.$capture_state=()=>({Table:et,StatusTracker:We,createEventDispatcher:he,tick:Y,headers:d,elem_id:c,value:s,mode:f,col_count:_,row_count:g,parent:l,dispatch:m,loading_status:a,handle_change:h}),o.$inject_state=u=>{"headers"in u&&t(0,d=u.headers),"elem_id"in u&&t(2,c=u.elem_id),"value"in u&&t(1,s=u.value),"mode"in u&&t(3,f=u.mode),"col_count"in u&&t(4,_=u.col_count),"row_count"in u&&t(5,g=u.row_count),"parent"in u&&t(6,l=u.parent),"loading_status"in u&&t(7,a=u.loading_status)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&3&&(Array.isArray(s)?(t(1,s),t(0,d)):(Array.isArray(s.headers)&&t(0,d=s.headers),t(1,s=s.data.length===0?[Array(d.length).fill("")]:s.data)))},[d,s,c,f,_,g,l,a,h]}class Ct extends je{constructor(e){super(e),Le(this,e,Ft,Be,Oe,{headers:0,elem_id:2,value:1,mode:3,col_count:4,row_count:5,parent:6,loading_status:7}),q("SvelteRegisterComponent",{component:this,tagName:"DataFrame",options:e,id:Be.name});const{ctx:t}=this.$$,r=e.props||{};t[3]===void 0&&!("mode"in r)&&console.warn("<DataFrame> was created without expected prop 'mode'"),t[4]===void 0&&!("col_count"in r)&&console.warn("<DataFrame> was created without expected prop 'col_count'"),t[5]===void 0&&!("row_count"in r)&&console.warn("<DataFrame> was created without expected prop 'row_count'"),t[7]===void 0&&!("loading_status"in r)&&console.warn("<DataFrame> was created without expected prop 'loading_status'")}get headers(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set headers(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem_id(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem_id(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get col_count(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set col_count(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get row_count(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set row_count(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get parent(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set parent(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get loading_status(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set loading_status(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var St=Ct;const Bt=["static","dynamic"];export{St as Component,Bt as modes};
