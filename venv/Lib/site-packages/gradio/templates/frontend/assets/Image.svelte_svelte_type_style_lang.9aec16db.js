import{S as jn,i as Rn,s as zn,d as Ye,v as Bn,a as bi,b as ie,c as He,e as ai,f as Di,n as qe,g as oi,y as Ua,ak as Wa,x as af,h as Oi,l as of,j as sf,G as pr,E as ri,H as mr,D as ti,w as lf,I as cf,B as yr,C as Cr,F as br,q as uf}from"./index.66004ba3.js";import{c as hf,g as ff}from"./_commonjsHelpers.88e99c8f.js";const $n="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/icons/src/Camera.svelte";function er(W){let A,O,j;const P={c:function(){A=bi("svg"),O=bi("path"),j=bi("circle"),ie(O,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),He(O,$n,11,2,230),ie(j,"cx","12"),ie(j,"cy","13"),ie(j,"r","4"),He(j,$n,13,3,327),ie(A,"xmlns","http://www.w3.org/2000/svg"),ie(A,"width","100%"),ie(A,"height","100%"),ie(A,"viewBox","0 0 24 24"),ie(A,"fill","none"),ie(A,"stroke","currentColor"),ie(A,"stroke-width","1.5"),ie(A,"stroke-linecap","round"),ie(A,"stroke-linejoin","round"),ie(A,"class","feather feather-camera"),He(A,$n,0,0,0)},l:function(R){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(R,Y){ai(R,A,Y),Di(A,O),Di(A,j)},p:qe,i:qe,o:qe,d:function(R){R&&oi(A)}};return Ye("SvelteRegisterBlock",{block:P,id:er.name,type:"component",source:"",ctx:W}),P}function df(W,A){let{$$slots:O={},$$scope:j}=A;Bn("Camera",O,[]);const P=[];return Object.keys(A).forEach(k=>{!~P.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<Camera> was created with unknown prop '${k}'`)}),[]}class uo extends jn{constructor(A){super(A),Rn(this,A,df,er,zn,{}),Ye("SvelteRegisterComponent",{component:this,tagName:"Camera",options:A,id:er.name})}}const Ga="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/icons/src/Circle.svelte";function ir(W){let A,O;const j={c:function(){A=bi("svg"),O=bi("circle"),ie(O,"cx","12"),ie(O,"cy","12"),ie(O,"r","10"),He(O,Ga,10,32,218),ie(A,"xmlns","http://www.w3.org/2000/svg"),ie(A,"width","100%"),ie(A,"height","100%"),ie(A,"viewBox","0 0 24 24"),ie(A,"fill","red"),ie(A,"stroke","red"),ie(A,"stroke-width","1.5"),ie(A,"stroke-linecap","round"),ie(A,"stroke-linejoin","round"),ie(A,"class","feather feather-circle"),He(A,Ga,0,0,0)},l:function(k){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(k,R){ai(k,A,R),Di(A,O)},p:qe,i:qe,o:qe,d:function(k){k&&oi(A)}};return Ye("SvelteRegisterBlock",{block:j,id:ir.name,type:"component",source:"",ctx:W}),j}function gf(W,A){let{$$slots:O={},$$scope:j}=A;Bn("Circle",O,[]);const P=[];return Object.keys(A).forEach(k=>{!~P.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<Circle> was created with unknown prop '${k}'`)}),[]}class ho extends jn{constructor(A){super(A),Rn(this,A,gf,ir,zn,{}),Ye("SvelteRegisterComponent",{component:this,tagName:"Circle",options:A,id:ir.name})}}const Xa="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/icons/src/Square.svelte";function nr(W){let A,O;const j={c:function(){A=bi("svg"),O=bi("rect"),ie(O,"x","3"),ie(O,"y","3"),ie(O,"width","18"),ie(O,"height","18"),ie(O,"rx","2"),ie(O,"ry","2"),He(O,Xa,11,2,220),ie(A,"xmlns","http://www.w3.org/2000/svg"),ie(A,"width","100%"),ie(A,"height","100%"),ie(A,"viewBox","0 0 24 24"),ie(A,"fill","red"),ie(A,"stroke","red"),ie(A,"stroke-width","1.5"),ie(A,"stroke-linecap","round"),ie(A,"stroke-linejoin","round"),ie(A,"class","feather feather-square"),He(A,Xa,0,0,0)},l:function(k){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(k,R){ai(k,A,R),Di(A,O)},p:qe,i:qe,o:qe,d:function(k){k&&oi(A)}};return Ye("SvelteRegisterBlock",{block:j,id:nr.name,type:"component",source:"",ctx:W}),j}function vf(W,A){let{$$slots:O={},$$scope:j}=A;Bn("Square",O,[]);const P=[];return Object.keys(A).forEach(k=>{!~P.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<Square> was created with unknown prop '${k}'`)}),[]}class fo extends jn{constructor(A){super(A),Rn(this,A,vf,nr,zn,{}),Ye("SvelteRegisterComponent",{component:this,tagName:"Square",options:A,id:nr.name})}}/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function Za(W,A){var O=Object.keys(W);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(W);A&&(j=j.filter(function(P){return Object.getOwnPropertyDescriptor(W,P).enumerable})),O.push.apply(O,j)}return O}function go(W){for(var A=1;A<arguments.length;A++){var O=arguments[A]!=null?arguments[A]:{};A%2?Za(Object(O),!0).forEach(function(j){yf(W,j,O[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(O)):Za(Object(O)).forEach(function(j){Object.defineProperty(W,j,Object.getOwnPropertyDescriptor(O,j))})}return W}function kn(W){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kn=function(A){return typeof A}:kn=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},kn(W)}function pf(W,A){if(!(W instanceof A))throw new TypeError("Cannot call a class as a function")}function Va(W,A){for(var O=0;O<A.length;O++){var j=A[O];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(W,j.key,j)}}function mf(W,A,O){return A&&Va(W.prototype,A),O&&Va(W,O),W}function yf(W,A,O){return A in W?Object.defineProperty(W,A,{value:O,enumerable:!0,configurable:!0,writable:!0}):W[A]=O,W}function vo(W){return Cf(W)||bf(W)||xf(W)||Sf()}function Cf(W){if(Array.isArray(W))return rr(W)}function bf(W){if(typeof Symbol<"u"&&W[Symbol.iterator]!=null||W["@@iterator"]!=null)return Array.from(W)}function xf(W,A){if(!!W){if(typeof W=="string")return rr(W,A);var O=Object.prototype.toString.call(W).slice(8,-1);if(O==="Object"&&W.constructor&&(O=W.constructor.name),O==="Map"||O==="Set")return Array.from(W);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return rr(W,A)}}function rr(W,A){(A==null||A>W.length)&&(A=W.length);for(var O=0,j=new Array(A);O<A;O++)j[O]=W[O];return j}function Sf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fn=typeof window<"u"&&typeof window.document<"u",ii=Fn?window:{},xr=Fn&&ii.document.documentElement?"ontouchstart"in ii.document.documentElement:!1,Sr=Fn?"PointerEvent"in ii:!1,be="cropper",Ir="all",po="crop",mo="move",yo="zoom",yi="e",Ci="w",Mi="s",hi="n",Ui="ne",Wi="nw",Gi="se",Xi="sw",ar="".concat(be,"-crop"),Ja="".concat(be,"-disabled"),Fe="".concat(be,"-hidden"),Qa="".concat(be,"-hide"),If="".concat(be,"-invisible"),Pn="".concat(be,"-modal"),or="".concat(be,"-move"),Vi="".concat(be,"Action"),On="".concat(be,"Preview"),Mr="crop",Co="move",bo="none",sr="crop",lr="cropend",cr="cropmove",ur="cropstart",Ka="dblclick",Mf=xr?"touchstart":"mousedown",_f=xr?"touchmove":"mousemove",Ef=xr?"touchend touchcancel":"mouseup",$a=Sr?"pointerdown":Mf,qa=Sr?"pointermove":_f,to=Sr?"pointerup pointercancel":Ef,eo="ready",io="resize",no="wheel",hr="zoom",ro="image/jpeg",Tf=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,wf=/^data:/,Df=/^data:image\/jpeg;base64,/,Of=/^img|canvas$/i,xo=200,So=100,ao={viewMode:0,dragMode:Mr,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:xo,minContainerHeight:So,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Af='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',kf=Number.isNaN||ii.isNaN;function le(W){return typeof W=="number"&&!kf(W)}var oo=function(A){return A>0&&A<1/0};function qn(W){return typeof W>"u"}function xi(W){return kn(W)==="object"&&W!==null}var Pf=Object.prototype.hasOwnProperty;function _i(W){if(!xi(W))return!1;try{var A=W.constructor,O=A.prototype;return A&&O&&Pf.call(O,"isPrototypeOf")}catch{return!1}}function Be(W){return typeof W=="function"}var Lf=Array.prototype.slice;function Io(W){return Array.from?Array.from(W):Lf.call(W)}function we(W,A){return W&&Be(A)&&(Array.isArray(W)||le(W.length)?Io(W).forEach(function(O,j){A.call(W,O,j,W)}):xi(W)&&Object.keys(W).forEach(function(O){A.call(W,W[O],O,W)})),W}var xe=Object.assign||function(A){for(var O=arguments.length,j=new Array(O>1?O-1:0),P=1;P<O;P++)j[P-1]=arguments[P];return xi(A)&&j.length>0&&j.forEach(function(k){xi(k)&&Object.keys(k).forEach(function(R){A[R]=k[R]})}),A},Nf=/\.\d*(?:0|9){12}\d*$/;function Ti(W){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Nf.test(W)?Math.round(W*A)/A:W}var jf=/^width|height|left|top|marginLeft|marginTop$/;function fi(W,A){var O=W.style;we(A,function(j,P){jf.test(P)&&le(j)&&(j="".concat(j,"px")),O[P]=j})}function Rf(W,A){return W.classList?W.classList.contains(A):W.className.indexOf(A)>-1}function De(W,A){if(!!A){if(le(W.length)){we(W,function(j){De(j,A)});return}if(W.classList){W.classList.add(A);return}var O=W.className.trim();O?O.indexOf(A)<0&&(W.className="".concat(O," ").concat(A)):W.className=A}}function ei(W,A){if(!!A){if(le(W.length)){we(W,function(O){ei(O,A)});return}if(W.classList){W.classList.remove(A);return}W.className.indexOf(A)>=0&&(W.className=W.className.replace(A,""))}}function Ei(W,A,O){if(!!A){if(le(W.length)){we(W,function(j){Ei(j,A,O)});return}O?De(W,A):ei(W,A)}}var zf=/([a-z\d])([A-Z])/g;function _r(W){return W.replace(zf,"$1-$2").toLowerCase()}function fr(W,A){return xi(W[A])?W[A]:W.dataset?W.dataset[A]:W.getAttribute("data-".concat(_r(A)))}function Ji(W,A,O){xi(O)?W[A]=O:W.dataset?W.dataset[A]=O:W.setAttribute("data-".concat(_r(A)),O)}function Bf(W,A){if(xi(W[A]))try{delete W[A]}catch{W[A]=void 0}else if(W.dataset)try{delete W.dataset[A]}catch{W.dataset[A]=void 0}else W.removeAttribute("data-".concat(_r(A)))}var Mo=/\s\s*/,_o=function(){var W=!1;if(Fn){var A=!1,O=function(){},j=Object.defineProperty({},"once",{get:function(){return W=!0,A},set:function(k){A=k}});ii.addEventListener("test",O,j),ii.removeEventListener("test",O,j)}return W}();function Qe(W,A,O){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=O;A.trim().split(Mo).forEach(function(k){if(!_o){var R=W.listeners;R&&R[k]&&R[k][O]&&(P=R[k][O],delete R[k][O],Object.keys(R[k]).length===0&&delete R[k],Object.keys(R).length===0&&delete W.listeners)}W.removeEventListener(k,P,j)})}function Xe(W,A,O){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=O;A.trim().split(Mo).forEach(function(k){if(j.once&&!_o){var R=W.listeners,Y=R===void 0?{}:R;P=function(){delete Y[k][O],W.removeEventListener(k,P,j);for(var x=arguments.length,h=new Array(x),o=0;o<x;o++)h[o]=arguments[o];O.apply(W,h)},Y[k]||(Y[k]={}),Y[k][O]&&W.removeEventListener(k,Y[k][O],j),Y[k][O]=P,W.listeners=Y}W.addEventListener(k,P,j)})}function wi(W,A,O){var j;return Be(Event)&&Be(CustomEvent)?j=new CustomEvent(A,{detail:O,bubbles:!0,cancelable:!0}):(j=document.createEvent("CustomEvent"),j.initCustomEvent(A,!0,!0,O)),W.dispatchEvent(j)}function Eo(W){var A=W.getBoundingClientRect();return{left:A.left+(window.pageXOffset-document.documentElement.clientLeft),top:A.top+(window.pageYOffset-document.documentElement.clientTop)}}var tr=ii.location,Ff=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function so(W){var A=W.match(Ff);return A!==null&&(A[1]!==tr.protocol||A[2]!==tr.hostname||A[3]!==tr.port)}function lo(W){var A="timestamp=".concat(new Date().getTime());return W+(W.indexOf("?")===-1?"?":"&")+A}function Zi(W){var A=W.rotate,O=W.scaleX,j=W.scaleY,P=W.translateX,k=W.translateY,R=[];le(P)&&P!==0&&R.push("translateX(".concat(P,"px)")),le(k)&&k!==0&&R.push("translateY(".concat(k,"px)")),le(A)&&A!==0&&R.push("rotate(".concat(A,"deg)")),le(O)&&O!==1&&R.push("scaleX(".concat(O,")")),le(j)&&j!==1&&R.push("scaleY(".concat(j,")"));var Y=R.length?R.join(" "):"none";return{WebkitTransform:Y,msTransform:Y,transform:Y}}function Hf(W){var A=go({},W),O=0;return we(W,function(j,P){delete A[P],we(A,function(k){var R=Math.abs(j.startX-k.startX),Y=Math.abs(j.startY-k.startY),C=Math.abs(j.endX-k.endX),x=Math.abs(j.endY-k.endY),h=Math.sqrt(R*R+Y*Y),o=Math.sqrt(C*C+x*x),S=(o-h)/h;Math.abs(S)>Math.abs(O)&&(O=S)})}),O}function An(W,A){var O=W.pageX,j=W.pageY,P={endX:O,endY:j};return A?P:go({startX:O,startY:j},P)}function Yf(W){var A=0,O=0,j=0;return we(W,function(P){var k=P.startX,R=P.startY;A+=k,O+=R,j+=1}),A/=j,O/=j,{pageX:A,pageY:O}}function di(W){var A=W.aspectRatio,O=W.height,j=W.width,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",k=oo(j),R=oo(O);if(k&&R){var Y=O*A;P==="contain"&&Y>j||P==="cover"&&Y<j?O=j/A:j=O*A}else k?O=j/A:R&&(j=O*A);return{width:j,height:O}}function Uf(W){var A=W.width,O=W.height,j=W.degree;if(j=Math.abs(j)%180,j===90)return{width:O,height:A};var P=j%90*Math.PI/180,k=Math.sin(P),R=Math.cos(P),Y=A*R+O*k,C=A*k+O*R;return j>90?{width:C,height:Y}:{width:Y,height:C}}function Wf(W,A,O,j){var P=A.aspectRatio,k=A.naturalWidth,R=A.naturalHeight,Y=A.rotate,C=Y===void 0?0:Y,x=A.scaleX,h=x===void 0?1:x,o=A.scaleY,S=o===void 0?1:o,M=O.aspectRatio,E=O.naturalWidth,w=O.naturalHeight,L=j.fillColor,g=L===void 0?"transparent":L,i=j.imageSmoothingEnabled,d=i===void 0?!0:i,f=j.imageSmoothingQuality,t=f===void 0?"low":f,e=j.maxWidth,r=e===void 0?1/0:e,c=j.maxHeight,p=c===void 0?1/0:c,s=j.minWidth,m=s===void 0?0:s,y=j.minHeight,_=y===void 0?0:y,I=document.createElement("canvas"),z=I.getContext("2d"),F=di({aspectRatio:M,width:r,height:p}),U=di({aspectRatio:M,width:m,height:_},"cover"),X=Math.min(F.width,Math.max(U.width,E)),J=Math.min(F.height,Math.max(U.height,w)),lt=di({aspectRatio:P,width:r,height:p}),st=di({aspectRatio:P,width:m,height:_},"cover"),Mt=Math.min(lt.width,Math.max(st.width,k)),It=Math.min(lt.height,Math.max(st.height,R)),_t=[-Mt/2,-It/2,Mt,It];return I.width=Ti(X),I.height=Ti(J),z.fillStyle=g,z.fillRect(0,0,X,J),z.save(),z.translate(X/2,J/2),z.rotate(C*Math.PI/180),z.scale(h,S),z.imageSmoothingEnabled=d,z.imageSmoothingQuality=t,z.drawImage.apply(z,[W].concat(vo(_t.map(function(rt){return Math.floor(Ti(rt))})))),z.restore(),I}var To=String.fromCharCode;function Gf(W,A,O){var j="";O+=A;for(var P=A;P<O;P+=1)j+=To(W.getUint8(P));return j}var Xf=/^data:.*,/;function Zf(W){var A=W.replace(Xf,""),O=atob(A),j=new ArrayBuffer(O.length),P=new Uint8Array(j);return we(P,function(k,R){P[R]=O.charCodeAt(R)}),j}function Vf(W,A){for(var O=[],j=8192,P=new Uint8Array(W);P.length>0;)O.push(To.apply(null,Io(P.subarray(0,j)))),P=P.subarray(j);return"data:".concat(A,";base64,").concat(btoa(O.join("")))}function Jf(W){var A=new DataView(W),O;try{var j,P,k;if(A.getUint8(0)===255&&A.getUint8(1)===216)for(var R=A.byteLength,Y=2;Y+1<R;){if(A.getUint8(Y)===255&&A.getUint8(Y+1)===225){P=Y;break}Y+=1}if(P){var C=P+4,x=P+10;if(Gf(A,C,4)==="Exif"){var h=A.getUint16(x);if(j=h===18761,(j||h===19789)&&A.getUint16(x+2,j)===42){var o=A.getUint32(x+4,j);o>=8&&(k=x+o)}}}if(k){var S=A.getUint16(k,j),M,E;for(E=0;E<S;E+=1)if(M=k+E*12+2,A.getUint16(M,j)===274){M+=8,O=A.getUint16(M,j),A.setUint16(M,1,j);break}}}catch{O=1}return O}function Qf(W){var A=0,O=1,j=1;switch(W){case 2:O=-1;break;case 3:A=-180;break;case 4:j=-1;break;case 5:A=90,j=-1;break;case 6:A=90;break;case 7:A=90,O=-1;break;case 8:A=-90;break}return{rotate:A,scaleX:O,scaleY:j}}var Kf={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var A=this.element,O=this.options,j=this.container,P=this.cropper,k=Number(O.minContainerWidth),R=Number(O.minContainerHeight);De(P,Fe),ei(A,Fe);var Y={width:Math.max(j.offsetWidth,k>=0?k:xo),height:Math.max(j.offsetHeight,R>=0?R:So)};this.containerData=Y,fi(P,{width:Y.width,height:Y.height}),De(A,Fe),ei(P,Fe)},initCanvas:function(){var A=this.containerData,O=this.imageData,j=this.options.viewMode,P=Math.abs(O.rotate)%180===90,k=P?O.naturalHeight:O.naturalWidth,R=P?O.naturalWidth:O.naturalHeight,Y=k/R,C=A.width,x=A.height;A.height*Y>A.width?j===3?C=A.height*Y:x=A.width/Y:j===3?x=A.width/Y:C=A.height*Y;var h={aspectRatio:Y,naturalWidth:k,naturalHeight:R,width:C,height:x};this.canvasData=h,this.limited=j===1||j===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(A.width-h.width)/2,h.top=(A.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=xe({},h)},limitCanvas:function(A,O){var j=this.options,P=this.containerData,k=this.canvasData,R=this.cropBoxData,Y=j.viewMode,C=k.aspectRatio,x=this.cropped&&R;if(A){var h=Number(j.minCanvasWidth)||0,o=Number(j.minCanvasHeight)||0;Y>1?(h=Math.max(h,P.width),o=Math.max(o,P.height),Y===3&&(o*C>h?h=o*C:o=h/C)):Y>0&&(h?h=Math.max(h,x?R.width:0):o?o=Math.max(o,x?R.height:0):x&&(h=R.width,o=R.height,o*C>h?h=o*C:o=h/C));var S=di({aspectRatio:C,width:h,height:o});h=S.width,o=S.height,k.minWidth=h,k.minHeight=o,k.maxWidth=1/0,k.maxHeight=1/0}if(O)if(Y>(x?0:1)){var M=P.width-k.width,E=P.height-k.height;k.minLeft=Math.min(0,M),k.minTop=Math.min(0,E),k.maxLeft=Math.max(0,M),k.maxTop=Math.max(0,E),x&&this.limited&&(k.minLeft=Math.min(R.left,R.left+(R.width-k.width)),k.minTop=Math.min(R.top,R.top+(R.height-k.height)),k.maxLeft=R.left,k.maxTop=R.top,Y===2&&(k.width>=P.width&&(k.minLeft=Math.min(0,M),k.maxLeft=Math.max(0,M)),k.height>=P.height&&(k.minTop=Math.min(0,E),k.maxTop=Math.max(0,E))))}else k.minLeft=-k.width,k.minTop=-k.height,k.maxLeft=P.width,k.maxTop=P.height},renderCanvas:function(A,O){var j=this.canvasData,P=this.imageData;if(O){var k=Uf({width:P.naturalWidth*Math.abs(P.scaleX||1),height:P.naturalHeight*Math.abs(P.scaleY||1),degree:P.rotate||0}),R=k.width,Y=k.height,C=j.width*(R/j.naturalWidth),x=j.height*(Y/j.naturalHeight);j.left-=(C-j.width)/2,j.top-=(x-j.height)/2,j.width=C,j.height=x,j.aspectRatio=R/Y,j.naturalWidth=R,j.naturalHeight=Y,this.limitCanvas(!0,!1)}(j.width>j.maxWidth||j.width<j.minWidth)&&(j.left=j.oldLeft),(j.height>j.maxHeight||j.height<j.minHeight)&&(j.top=j.oldTop),j.width=Math.min(Math.max(j.width,j.minWidth),j.maxWidth),j.height=Math.min(Math.max(j.height,j.minHeight),j.maxHeight),this.limitCanvas(!1,!0),j.left=Math.min(Math.max(j.left,j.minLeft),j.maxLeft),j.top=Math.min(Math.max(j.top,j.minTop),j.maxTop),j.oldLeft=j.left,j.oldTop=j.top,fi(this.canvas,xe({width:j.width,height:j.height},Zi({translateX:j.left,translateY:j.top}))),this.renderImage(A),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(A){var O=this.canvasData,j=this.imageData,P=j.naturalWidth*(O.width/O.naturalWidth),k=j.naturalHeight*(O.height/O.naturalHeight);xe(j,{width:P,height:k,left:(O.width-P)/2,top:(O.height-k)/2}),fi(this.image,xe({width:j.width,height:j.height},Zi(xe({translateX:j.left,translateY:j.top},j)))),A&&this.output()},initCropBox:function(){var A=this.options,O=this.canvasData,j=A.aspectRatio||A.initialAspectRatio,P=Number(A.autoCropArea)||.8,k={width:O.width,height:O.height};j&&(O.height*j>O.width?k.height=k.width/j:k.width=k.height*j),this.cropBoxData=k,this.limitCropBox(!0,!0),k.width=Math.min(Math.max(k.width,k.minWidth),k.maxWidth),k.height=Math.min(Math.max(k.height,k.minHeight),k.maxHeight),k.width=Math.max(k.minWidth,k.width*P),k.height=Math.max(k.minHeight,k.height*P),k.left=O.left+(O.width-k.width)/2,k.top=O.top+(O.height-k.height)/2,k.oldLeft=k.left,k.oldTop=k.top,this.initialCropBoxData=xe({},k)},limitCropBox:function(A,O){var j=this.options,P=this.containerData,k=this.canvasData,R=this.cropBoxData,Y=this.limited,C=j.aspectRatio;if(A){var x=Number(j.minCropBoxWidth)||0,h=Number(j.minCropBoxHeight)||0,o=Y?Math.min(P.width,k.width,k.width+k.left,P.width-k.left):P.width,S=Y?Math.min(P.height,k.height,k.height+k.top,P.height-k.top):P.height;x=Math.min(x,P.width),h=Math.min(h,P.height),C&&(x&&h?h*C>x?h=x/C:x=h*C:x?h=x/C:h&&(x=h*C),S*C>o?S=o/C:o=S*C),R.minWidth=Math.min(x,o),R.minHeight=Math.min(h,S),R.maxWidth=o,R.maxHeight=S}O&&(Y?(R.minLeft=Math.max(0,k.left),R.minTop=Math.max(0,k.top),R.maxLeft=Math.min(P.width,k.left+k.width)-R.width,R.maxTop=Math.min(P.height,k.top+k.height)-R.height):(R.minLeft=0,R.minTop=0,R.maxLeft=P.width-R.width,R.maxTop=P.height-R.height))},renderCropBox:function(){var A=this.options,O=this.containerData,j=this.cropBoxData;(j.width>j.maxWidth||j.width<j.minWidth)&&(j.left=j.oldLeft),(j.height>j.maxHeight||j.height<j.minHeight)&&(j.top=j.oldTop),j.width=Math.min(Math.max(j.width,j.minWidth),j.maxWidth),j.height=Math.min(Math.max(j.height,j.minHeight),j.maxHeight),this.limitCropBox(!1,!0),j.left=Math.min(Math.max(j.left,j.minLeft),j.maxLeft),j.top=Math.min(Math.max(j.top,j.minTop),j.maxTop),j.oldLeft=j.left,j.oldTop=j.top,A.movable&&A.cropBoxMovable&&Ji(this.face,Vi,j.width>=O.width&&j.height>=O.height?mo:Ir),fi(this.cropBox,xe({width:j.width,height:j.height},Zi({translateX:j.left,translateY:j.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),wi(this.element,sr,this.getData())}},$f={initPreview:function(){var A=this.element,O=this.crossOrigin,j=this.options.preview,P=O?this.crossOriginUrl:this.url,k=A.alt||"The image to preview",R=document.createElement("img");if(O&&(R.crossOrigin=O),R.src=P,R.alt=k,this.viewBox.appendChild(R),this.viewBoxImage=R,!!j){var Y=j;typeof j=="string"?Y=A.ownerDocument.querySelectorAll(j):j.querySelector&&(Y=[j]),this.previews=Y,we(Y,function(C){var x=document.createElement("img");Ji(C,On,{width:C.offsetWidth,height:C.offsetHeight,html:C.innerHTML}),O&&(x.crossOrigin=O),x.src=P,x.alt=k,x.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',C.innerHTML="",C.appendChild(x)})}},resetPreview:function(){we(this.previews,function(A){var O=fr(A,On);fi(A,{width:O.width,height:O.height}),A.innerHTML=O.html,Bf(A,On)})},preview:function(){var A=this.imageData,O=this.canvasData,j=this.cropBoxData,P=j.width,k=j.height,R=A.width,Y=A.height,C=j.left-O.left-A.left,x=j.top-O.top-A.top;!this.cropped||this.disabled||(fi(this.viewBoxImage,xe({width:R,height:Y},Zi(xe({translateX:-C,translateY:-x},A)))),we(this.previews,function(h){var o=fr(h,On),S=o.width,M=o.height,E=S,w=M,L=1;P&&(L=S/P,w=k*L),k&&w>M&&(L=M/k,E=P*L,w=M),fi(h,{width:E,height:w}),fi(h.getElementsByTagName("img")[0],xe({width:R*L,height:Y*L},Zi(xe({translateX:-C*L,translateY:-x*L},A))))}))}},qf={bind:function(){var A=this.element,O=this.options,j=this.cropper;Be(O.cropstart)&&Xe(A,ur,O.cropstart),Be(O.cropmove)&&Xe(A,cr,O.cropmove),Be(O.cropend)&&Xe(A,lr,O.cropend),Be(O.crop)&&Xe(A,sr,O.crop),Be(O.zoom)&&Xe(A,hr,O.zoom),Xe(j,$a,this.onCropStart=this.cropStart.bind(this)),O.zoomable&&O.zoomOnWheel&&Xe(j,no,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),O.toggleDragModeOnDblclick&&Xe(j,Ka,this.onDblclick=this.dblclick.bind(this)),Xe(A.ownerDocument,qa,this.onCropMove=this.cropMove.bind(this)),Xe(A.ownerDocument,to,this.onCropEnd=this.cropEnd.bind(this)),O.responsive&&Xe(window,io,this.onResize=this.resize.bind(this))},unbind:function(){var A=this.element,O=this.options,j=this.cropper;Be(O.cropstart)&&Qe(A,ur,O.cropstart),Be(O.cropmove)&&Qe(A,cr,O.cropmove),Be(O.cropend)&&Qe(A,lr,O.cropend),Be(O.crop)&&Qe(A,sr,O.crop),Be(O.zoom)&&Qe(A,hr,O.zoom),Qe(j,$a,this.onCropStart),O.zoomable&&O.zoomOnWheel&&Qe(j,no,this.onWheel,{passive:!1,capture:!0}),O.toggleDragModeOnDblclick&&Qe(j,Ka,this.onDblclick),Qe(A.ownerDocument,qa,this.onCropMove),Qe(A.ownerDocument,to,this.onCropEnd),O.responsive&&Qe(window,io,this.onResize)}},td={resize:function(){if(!this.disabled){var A=this.options,O=this.container,j=this.containerData,P=O.offsetWidth/j.width,k=O.offsetHeight/j.height,R=Math.abs(P-1)>Math.abs(k-1)?P:k;if(R!==1){var Y,C;A.restore&&(Y=this.getCanvasData(),C=this.getCropBoxData()),this.render(),A.restore&&(this.setCanvasData(we(Y,function(x,h){Y[h]=x*R})),this.setCropBoxData(we(C,function(x,h){C[h]=x*R})))}}},dblclick:function(){this.disabled||this.options.dragMode===bo||this.setDragMode(Rf(this.dragBox,ar)?Co:Mr)},wheel:function(A){var O=this,j=Number(this.options.wheelZoomRatio)||.1,P=1;this.disabled||(A.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){O.wheeling=!1},50),A.deltaY?P=A.deltaY>0?1:-1:A.wheelDelta?P=-A.wheelDelta/120:A.detail&&(P=A.detail>0?1:-1),this.zoom(-P*j,A)))},cropStart:function(A){var O=A.buttons,j=A.button;if(!(this.disabled||(A.type==="mousedown"||A.type==="pointerdown"&&A.pointerType==="mouse")&&(le(O)&&O!==1||le(j)&&j!==0||A.ctrlKey))){var P=this.options,k=this.pointers,R;A.changedTouches?we(A.changedTouches,function(Y){k[Y.identifier]=An(Y)}):k[A.pointerId||0]=An(A),Object.keys(k).length>1&&P.zoomable&&P.zoomOnTouch?R=yo:R=fr(A.target,Vi),!!Tf.test(R)&&wi(this.element,ur,{originalEvent:A,action:R})!==!1&&(A.preventDefault(),this.action=R,this.cropping=!1,R===po&&(this.cropping=!0,De(this.dragBox,Pn)))}},cropMove:function(A){var O=this.action;if(!(this.disabled||!O)){var j=this.pointers;A.preventDefault(),wi(this.element,cr,{originalEvent:A,action:O})!==!1&&(A.changedTouches?we(A.changedTouches,function(P){xe(j[P.identifier]||{},An(P,!0))}):xe(j[A.pointerId||0]||{},An(A,!0)),this.change(A))}},cropEnd:function(A){if(!this.disabled){var O=this.action,j=this.pointers;A.changedTouches?we(A.changedTouches,function(P){delete j[P.identifier]}):delete j[A.pointerId||0],O&&(A.preventDefault(),Object.keys(j).length||(this.action=""),this.cropping&&(this.cropping=!1,Ei(this.dragBox,Pn,this.cropped&&this.options.modal)),wi(this.element,lr,{originalEvent:A,action:O}))}}},ed={change:function(A){var O=this.options,j=this.canvasData,P=this.containerData,k=this.cropBoxData,R=this.pointers,Y=this.action,C=O.aspectRatio,x=k.left,h=k.top,o=k.width,S=k.height,M=x+o,E=h+S,w=0,L=0,g=P.width,i=P.height,d=!0,f;!C&&A.shiftKey&&(C=o&&S?o/S:1),this.limited&&(w=k.minLeft,L=k.minTop,g=w+Math.min(P.width,j.width,j.left+j.width),i=L+Math.min(P.height,j.height,j.top+j.height));var t=R[Object.keys(R)[0]],e={x:t.endX-t.startX,y:t.endY-t.startY},r=function(p){switch(p){case yi:M+e.x>g&&(e.x=g-M);break;case Ci:x+e.x<w&&(e.x=w-x);break;case hi:h+e.y<L&&(e.y=L-h);break;case Mi:E+e.y>i&&(e.y=i-E);break}};switch(Y){case Ir:x+=e.x,h+=e.y;break;case yi:if(e.x>=0&&(M>=g||C&&(h<=L||E>=i))){d=!1;break}r(yi),o+=e.x,o<0&&(Y=Ci,o=-o,x-=o),C&&(S=o/C,h+=(k.height-S)/2);break;case hi:if(e.y<=0&&(h<=L||C&&(x<=w||M>=g))){d=!1;break}r(hi),S-=e.y,h+=e.y,S<0&&(Y=Mi,S=-S,h-=S),C&&(o=S*C,x+=(k.width-o)/2);break;case Ci:if(e.x<=0&&(x<=w||C&&(h<=L||E>=i))){d=!1;break}r(Ci),o-=e.x,x+=e.x,o<0&&(Y=yi,o=-o,x-=o),C&&(S=o/C,h+=(k.height-S)/2);break;case Mi:if(e.y>=0&&(E>=i||C&&(x<=w||M>=g))){d=!1;break}r(Mi),S+=e.y,S<0&&(Y=hi,S=-S,h-=S),C&&(o=S*C,x+=(k.width-o)/2);break;case Ui:if(C){if(e.y<=0&&(h<=L||M>=g)){d=!1;break}r(hi),S-=e.y,h+=e.y,o=S*C}else r(hi),r(yi),e.x>=0?M<g?o+=e.x:e.y<=0&&h<=L&&(d=!1):o+=e.x,e.y<=0?h>L&&(S-=e.y,h+=e.y):(S-=e.y,h+=e.y);o<0&&S<0?(Y=Xi,S=-S,o=-o,h-=S,x-=o):o<0?(Y=Wi,o=-o,x-=o):S<0&&(Y=Gi,S=-S,h-=S);break;case Wi:if(C){if(e.y<=0&&(h<=L||x<=w)){d=!1;break}r(hi),S-=e.y,h+=e.y,o=S*C,x+=k.width-o}else r(hi),r(Ci),e.x<=0?x>w?(o-=e.x,x+=e.x):e.y<=0&&h<=L&&(d=!1):(o-=e.x,x+=e.x),e.y<=0?h>L&&(S-=e.y,h+=e.y):(S-=e.y,h+=e.y);o<0&&S<0?(Y=Gi,S=-S,o=-o,h-=S,x-=o):o<0?(Y=Ui,o=-o,x-=o):S<0&&(Y=Xi,S=-S,h-=S);break;case Xi:if(C){if(e.x<=0&&(x<=w||E>=i)){d=!1;break}r(Ci),o-=e.x,x+=e.x,S=o/C}else r(Mi),r(Ci),e.x<=0?x>w?(o-=e.x,x+=e.x):e.y>=0&&E>=i&&(d=!1):(o-=e.x,x+=e.x),e.y>=0?E<i&&(S+=e.y):S+=e.y;o<0&&S<0?(Y=Ui,S=-S,o=-o,h-=S,x-=o):o<0?(Y=Gi,o=-o,x-=o):S<0&&(Y=Wi,S=-S,h-=S);break;case Gi:if(C){if(e.x>=0&&(M>=g||E>=i)){d=!1;break}r(yi),o+=e.x,S=o/C}else r(Mi),r(yi),e.x>=0?M<g?o+=e.x:e.y>=0&&E>=i&&(d=!1):o+=e.x,e.y>=0?E<i&&(S+=e.y):S+=e.y;o<0&&S<0?(Y=Wi,S=-S,o=-o,h-=S,x-=o):o<0?(Y=Xi,o=-o,x-=o):S<0&&(Y=Ui,S=-S,h-=S);break;case mo:this.move(e.x,e.y),d=!1;break;case yo:this.zoom(Hf(R),A),d=!1;break;case po:if(!e.x||!e.y){d=!1;break}f=Eo(this.cropper),x=t.startX-f.left,h=t.startY-f.top,o=k.minWidth,S=k.minHeight,e.x>0?Y=e.y>0?Gi:Ui:e.x<0&&(x-=o,Y=e.y>0?Xi:Wi),e.y<0&&(h-=S),this.cropped||(ei(this.cropBox,Fe),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}d&&(k.width=o,k.height=S,k.left=x,k.top=h,this.action=Y,this.renderCropBox()),we(R,function(c){c.startX=c.endX,c.startY=c.endY})}},id={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&De(this.dragBox,Pn),ei(this.cropBox,Fe),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=xe({},this.initialImageData),this.canvasData=xe({},this.initialCanvasData),this.cropBoxData=xe({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(xe(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ei(this.dragBox,Pn),De(this.cropBox,Fe)),this},replace:function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&A&&(this.isImg&&(this.element.src=A),O?(this.url=A,this.image.src=A,this.ready&&(this.viewBoxImage.src=A,we(this.previews,function(j){j.getElementsByTagName("img")[0].src=A}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(A))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ei(this.cropper,Ja)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,De(this.cropper,Ja)),this},destroy:function(){var A=this.element;return A[be]?(A[be]=void 0,this.isImg&&this.replaced&&(A.src=this.originalUrl),this.uncreate(),this):this},move:function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A,j=this.canvasData,P=j.left,k=j.top;return this.moveTo(qn(A)?A:P+Number(A),qn(O)?O:k+Number(O))},moveTo:function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A,j=this.canvasData,P=!1;return A=Number(A),O=Number(O),this.ready&&!this.disabled&&this.options.movable&&(le(A)&&(j.left=A,P=!0),le(O)&&(j.top=O,P=!0),P&&this.renderCanvas(!0)),this},zoom:function(A,O){var j=this.canvasData;return A=Number(A),A<0?A=1/(1-A):A=1+A,this.zoomTo(j.width*A/j.naturalWidth,null,O)},zoomTo:function(A,O,j){var P=this.options,k=this.canvasData,R=k.width,Y=k.height,C=k.naturalWidth,x=k.naturalHeight;if(A=Number(A),A>=0&&this.ready&&!this.disabled&&P.zoomable){var h=C*A,o=x*A;if(wi(this.element,hr,{ratio:A,oldRatio:R/C,originalEvent:j})===!1)return this;if(j){var S=this.pointers,M=Eo(this.cropper),E=S&&Object.keys(S).length?Yf(S):{pageX:j.pageX,pageY:j.pageY};k.left-=(h-R)*((E.pageX-M.left-k.left)/R),k.top-=(o-Y)*((E.pageY-M.top-k.top)/Y)}else _i(O)&&le(O.x)&&le(O.y)?(k.left-=(h-R)*((O.x-k.left)/R),k.top-=(o-Y)*((O.y-k.top)/Y)):(k.left-=(h-R)/2,k.top-=(o-Y)/2);k.width=h,k.height=o,this.renderCanvas(!0)}return this},rotate:function(A){return this.rotateTo((this.imageData.rotate||0)+Number(A))},rotateTo:function(A){return A=Number(A),le(A)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=A%360,this.renderCanvas(!0,!0)),this},scaleX:function(A){var O=this.imageData.scaleY;return this.scale(A,le(O)?O:1)},scaleY:function(A){var O=this.imageData.scaleX;return this.scale(le(O)?O:1,A)},scale:function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A,j=this.imageData,P=!1;return A=Number(A),O=Number(O),this.ready&&!this.disabled&&this.options.scalable&&(le(A)&&(j.scaleX=A,P=!0),le(O)&&(j.scaleY=O,P=!0),P&&this.renderCanvas(!0,!0)),this},getData:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,O=this.options,j=this.imageData,P=this.canvasData,k=this.cropBoxData,R;if(this.ready&&this.cropped){R={x:k.left-P.left,y:k.top-P.top,width:k.width,height:k.height};var Y=j.width/j.naturalWidth;if(we(R,function(h,o){R[o]=h/Y}),A){var C=Math.round(R.y+R.height),x=Math.round(R.x+R.width);R.x=Math.round(R.x),R.y=Math.round(R.y),R.width=x-R.x,R.height=C-R.y}}else R={x:0,y:0,width:0,height:0};return O.rotatable&&(R.rotate=j.rotate||0),O.scalable&&(R.scaleX=j.scaleX||1,R.scaleY=j.scaleY||1),R},setData:function(A){var O=this.options,j=this.imageData,P=this.canvasData,k={};if(this.ready&&!this.disabled&&_i(A)){var R=!1;O.rotatable&&le(A.rotate)&&A.rotate!==j.rotate&&(j.rotate=A.rotate,R=!0),O.scalable&&(le(A.scaleX)&&A.scaleX!==j.scaleX&&(j.scaleX=A.scaleX,R=!0),le(A.scaleY)&&A.scaleY!==j.scaleY&&(j.scaleY=A.scaleY,R=!0)),R&&this.renderCanvas(!0,!0);var Y=j.width/j.naturalWidth;le(A.x)&&(k.left=A.x*Y+P.left),le(A.y)&&(k.top=A.y*Y+P.top),le(A.width)&&(k.width=A.width*Y),le(A.height)&&(k.height=A.height*Y),this.setCropBoxData(k)}return this},getContainerData:function(){return this.ready?xe({},this.containerData):{}},getImageData:function(){return this.sized?xe({},this.imageData):{}},getCanvasData:function(){var A=this.canvasData,O={};return this.ready&&we(["left","top","width","height","naturalWidth","naturalHeight"],function(j){O[j]=A[j]}),O},setCanvasData:function(A){var O=this.canvasData,j=O.aspectRatio;return this.ready&&!this.disabled&&_i(A)&&(le(A.left)&&(O.left=A.left),le(A.top)&&(O.top=A.top),le(A.width)?(O.width=A.width,O.height=A.width/j):le(A.height)&&(O.height=A.height,O.width=A.height*j),this.renderCanvas(!0)),this},getCropBoxData:function(){var A=this.cropBoxData,O;return this.ready&&this.cropped&&(O={left:A.left,top:A.top,width:A.width,height:A.height}),O||{}},setCropBoxData:function(A){var O=this.cropBoxData,j=this.options.aspectRatio,P,k;return this.ready&&this.cropped&&!this.disabled&&_i(A)&&(le(A.left)&&(O.left=A.left),le(A.top)&&(O.top=A.top),le(A.width)&&A.width!==O.width&&(P=!0,O.width=A.width),le(A.height)&&A.height!==O.height&&(k=!0,O.height=A.height),j&&(P?O.height=O.width/j:k&&(O.width=O.height*j)),this.renderCropBox()),this},getCroppedCanvas:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var O=this.canvasData,j=Wf(this.image,this.imageData,O,A);if(!this.cropped)return j;var P=this.getData(),k=P.x,R=P.y,Y=P.width,C=P.height,x=j.width/Math.floor(O.naturalWidth);x!==1&&(k*=x,R*=x,Y*=x,C*=x);var h=Y/C,o=di({aspectRatio:h,width:A.maxWidth||1/0,height:A.maxHeight||1/0}),S=di({aspectRatio:h,width:A.minWidth||0,height:A.minHeight||0},"cover"),M=di({aspectRatio:h,width:A.width||(x!==1?j.width:Y),height:A.height||(x!==1?j.height:C)}),E=M.width,w=M.height;E=Math.min(o.width,Math.max(S.width,E)),w=Math.min(o.height,Math.max(S.height,w));var L=document.createElement("canvas"),g=L.getContext("2d");L.width=Ti(E),L.height=Ti(w),g.fillStyle=A.fillColor||"transparent",g.fillRect(0,0,E,w);var i=A.imageSmoothingEnabled,d=i===void 0?!0:i,f=A.imageSmoothingQuality;g.imageSmoothingEnabled=d,f&&(g.imageSmoothingQuality=f);var t=j.width,e=j.height,r=k,c=R,p,s,m,y,_,I;r<=-Y||r>t?(r=0,p=0,m=0,_=0):r<=0?(m=-r,r=0,p=Math.min(t,Y+r),_=p):r<=t&&(m=0,p=Math.min(Y,t-r),_=p),p<=0||c<=-C||c>e?(c=0,s=0,y=0,I=0):c<=0?(y=-c,c=0,s=Math.min(e,C+c),I=s):c<=e&&(y=0,s=Math.min(C,e-c),I=s);var z=[r,c,p,s];if(_>0&&I>0){var F=E/Y;z.push(m*F,y*F,_*F,I*F)}return g.drawImage.apply(g,[j].concat(vo(z.map(function(U){return Math.floor(Ti(U))})))),L},setAspectRatio:function(A){var O=this.options;return!this.disabled&&!qn(A)&&(O.aspectRatio=Math.max(0,A)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(A){var O=this.options,j=this.dragBox,P=this.face;if(this.ready&&!this.disabled){var k=A===Mr,R=O.movable&&A===Co;A=k||R?A:bo,O.dragMode=A,Ji(j,Vi,A),Ei(j,ar,k),Ei(j,or,R),O.cropBoxMovable||(Ji(P,Vi,A),Ei(P,ar,k),Ei(P,or,R))}return this}},nd=ii.Cropper,rd=function(){function W(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pf(this,W),!A||!Of.test(A.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=A,this.options=xe({},ao,_i(O)&&O),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return mf(W,[{key:"init",value:function(){var O=this.element,j=O.tagName.toLowerCase(),P;if(!O[be]){if(O[be]=this,j==="img"){if(this.isImg=!0,P=O.getAttribute("src")||"",this.originalUrl=P,!P)return;P=O.src}else j==="canvas"&&window.HTMLCanvasElement&&(P=O.toDataURL());this.load(P)}}},{key:"load",value:function(O){var j=this;if(!!O){this.url=O,this.imageData={};var P=this.element,k=this.options;if(!k.rotatable&&!k.scalable&&(k.checkOrientation=!1),!k.checkOrientation||!window.ArrayBuffer){this.clone();return}if(wf.test(O)){Df.test(O)?this.read(Zf(O)):this.clone();return}var R=new XMLHttpRequest,Y=this.clone.bind(this);this.reloading=!0,this.xhr=R,R.onabort=Y,R.onerror=Y,R.ontimeout=Y,R.onprogress=function(){R.getResponseHeader("content-type")!==ro&&R.abort()},R.onload=function(){j.read(R.response)},R.onloadend=function(){j.reloading=!1,j.xhr=null},k.checkCrossOrigin&&so(O)&&P.crossOrigin&&(O=lo(O)),R.open("GET",O,!0),R.responseType="arraybuffer",R.withCredentials=P.crossOrigin==="use-credentials",R.send()}}},{key:"read",value:function(O){var j=this.options,P=this.imageData,k=Jf(O),R=0,Y=1,C=1;if(k>1){this.url=Vf(O,ro);var x=Qf(k);R=x.rotate,Y=x.scaleX,C=x.scaleY}j.rotatable&&(P.rotate=R),j.scalable&&(P.scaleX=Y,P.scaleY=C),this.clone()}},{key:"clone",value:function(){var O=this.element,j=this.url,P=O.crossOrigin,k=j;this.options.checkCrossOrigin&&so(j)&&(P||(P="anonymous"),k=lo(j)),this.crossOrigin=P,this.crossOriginUrl=k;var R=document.createElement("img");P&&(R.crossOrigin=P),R.src=k||j,R.alt=O.alt||"The image to crop",this.image=R,R.onload=this.start.bind(this),R.onerror=this.stop.bind(this),De(R,Qa),O.parentNode.insertBefore(R,O.nextSibling)}},{key:"start",value:function(){var O=this,j=this.image;j.onload=null,j.onerror=null,this.sizing=!0;var P=ii.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ii.navigator.userAgent),k=function(x,h){xe(O.imageData,{naturalWidth:x,naturalHeight:h,aspectRatio:x/h}),O.initialImageData=xe({},O.imageData),O.sizing=!1,O.sized=!0,O.build()};if(j.naturalWidth&&!P){k(j.naturalWidth,j.naturalHeight);return}var R=document.createElement("img"),Y=document.body||document.documentElement;this.sizingImage=R,R.onload=function(){k(R.width,R.height),P||Y.removeChild(R)},R.src=j.src,P||(R.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",Y.appendChild(R))}},{key:"stop",value:function(){var O=this.image;O.onload=null,O.onerror=null,O.parentNode.removeChild(O),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var O=this.element,j=this.options,P=this.image,k=O.parentNode,R=document.createElement("div");R.innerHTML=Af;var Y=R.querySelector(".".concat(be,"-container")),C=Y.querySelector(".".concat(be,"-canvas")),x=Y.querySelector(".".concat(be,"-drag-box")),h=Y.querySelector(".".concat(be,"-crop-box")),o=h.querySelector(".".concat(be,"-face"));this.container=k,this.cropper=Y,this.canvas=C,this.dragBox=x,this.cropBox=h,this.viewBox=Y.querySelector(".".concat(be,"-view-box")),this.face=o,C.appendChild(P),De(O,Fe),k.insertBefore(Y,O.nextSibling),this.isImg||ei(P,Qa),this.initPreview(),this.bind(),j.initialAspectRatio=Math.max(0,j.initialAspectRatio)||NaN,j.aspectRatio=Math.max(0,j.aspectRatio)||NaN,j.viewMode=Math.max(0,Math.min(3,Math.round(j.viewMode)))||0,De(h,Fe),j.guides||De(h.getElementsByClassName("".concat(be,"-dashed")),Fe),j.center||De(h.getElementsByClassName("".concat(be,"-center")),Fe),j.background&&De(Y,"".concat(be,"-bg")),j.highlight||De(o,If),j.cropBoxMovable&&(De(o,or),Ji(o,Vi,Ir)),j.cropBoxResizable||(De(h.getElementsByClassName("".concat(be,"-line")),Fe),De(h.getElementsByClassName("".concat(be,"-point")),Fe)),this.render(),this.ready=!0,this.setDragMode(j.dragMode),j.autoCrop&&this.crop(),this.setData(j.data),Be(j.ready)&&Xe(O,eo,j.ready,{once:!0}),wi(O,eo)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),ei(this.element,Fe))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=nd,W}},{key:"setDefaults",value:function(O){xe(ao,_i(O)&&O)}}]),W}();xe(rd.prototype,Kf,$f,qf,td,ed,id);var wo=function(){if(typeof Map<"u")return Map;function W(A,O){var j=-1;return A.some(function(P,k){return P[0]===O?(j=k,!0):!1}),j}return function(){function A(){this.__entries__=[]}return Object.defineProperty(A.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),A.prototype.get=function(O){var j=W(this.__entries__,O),P=this.__entries__[j];return P&&P[1]},A.prototype.set=function(O,j){var P=W(this.__entries__,O);~P?this.__entries__[P][1]=j:this.__entries__.push([O,j])},A.prototype.delete=function(O){var j=this.__entries__,P=W(j,O);~P&&j.splice(P,1)},A.prototype.has=function(O){return!!~W(this.__entries__,O)},A.prototype.clear=function(){this.__entries__.splice(0)},A.prototype.forEach=function(O,j){j===void 0&&(j=null);for(var P=0,k=this.__entries__;P<k.length;P++){var R=k[P];O.call(j,R[1],R[0])}},A}()}(),dr=typeof window<"u"&&typeof document<"u"&&window.document===document,Ln=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ad=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ln):function(W){return setTimeout(function(){return W(Date.now())},1e3/60)}}(),od=2;function sd(W,A){var O=!1,j=!1,P=0;function k(){O&&(O=!1,W()),j&&Y()}function R(){ad(k)}function Y(){var C=Date.now();if(O){if(C-P<od)return;j=!0}else O=!0,j=!1,setTimeout(R,A);P=C}return Y}var ld=20,cd=["top","right","bottom","left","width","height","size","weight"],ud=typeof MutationObserver<"u",hd=function(){function W(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=sd(this.refresh.bind(this),ld)}return W.prototype.addObserver=function(A){~this.observers_.indexOf(A)||this.observers_.push(A),this.connected_||this.connect_()},W.prototype.removeObserver=function(A){var O=this.observers_,j=O.indexOf(A);~j&&O.splice(j,1),!O.length&&this.connected_&&this.disconnect_()},W.prototype.refresh=function(){var A=this.updateObservers_();A&&this.refresh()},W.prototype.updateObservers_=function(){var A=this.observers_.filter(function(O){return O.gatherActive(),O.hasActive()});return A.forEach(function(O){return O.broadcastActive()}),A.length>0},W.prototype.connect_=function(){!dr||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ud?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},W.prototype.disconnect_=function(){!dr||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},W.prototype.onTransitionEnd_=function(A){var O=A.propertyName,j=O===void 0?"":O,P=cd.some(function(k){return!!~j.indexOf(k)});P&&this.refresh()},W.getInstance=function(){return this.instance_||(this.instance_=new W),this.instance_},W.instance_=null,W}(),Do=function(W,A){for(var O=0,j=Object.keys(A);O<j.length;O++){var P=j[O];Object.defineProperty(W,P,{value:A[P],enumerable:!1,writable:!1,configurable:!0})}return W},Ai=function(W){var A=W&&W.ownerDocument&&W.ownerDocument.defaultView;return A||Ln},Oo=Hn(0,0,0,0);function Nn(W){return parseFloat(W)||0}function co(W){for(var A=[],O=1;O<arguments.length;O++)A[O-1]=arguments[O];return A.reduce(function(j,P){var k=W["border-"+P+"-width"];return j+Nn(k)},0)}function fd(W){for(var A=["top","right","bottom","left"],O={},j=0,P=A;j<P.length;j++){var k=P[j],R=W["padding-"+k];O[k]=Nn(R)}return O}function dd(W){var A=W.getBBox();return Hn(0,0,A.width,A.height)}function gd(W){var A=W.clientWidth,O=W.clientHeight;if(!A&&!O)return Oo;var j=Ai(W).getComputedStyle(W),P=fd(j),k=P.left+P.right,R=P.top+P.bottom,Y=Nn(j.width),C=Nn(j.height);if(j.boxSizing==="border-box"&&(Math.round(Y+k)!==A&&(Y-=co(j,"left","right")+k),Math.round(C+R)!==O&&(C-=co(j,"top","bottom")+R)),!pd(W)){var x=Math.round(Y+k)-A,h=Math.round(C+R)-O;Math.abs(x)!==1&&(Y-=x),Math.abs(h)!==1&&(C-=h)}return Hn(P.left,P.top,Y,C)}var vd=function(){return typeof SVGGraphicsElement<"u"?function(W){return W instanceof Ai(W).SVGGraphicsElement}:function(W){return W instanceof Ai(W).SVGElement&&typeof W.getBBox=="function"}}();function pd(W){return W===Ai(W).document.documentElement}function md(W){return dr?vd(W)?dd(W):gd(W):Oo}function yd(W){var A=W.x,O=W.y,j=W.width,P=W.height,k=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,R=Object.create(k.prototype);return Do(R,{x:A,y:O,width:j,height:P,top:O,right:A+j,bottom:P+O,left:A}),R}function Hn(W,A,O,j){return{x:W,y:A,width:O,height:j}}var Cd=function(){function W(A){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Hn(0,0,0,0),this.target=A}return W.prototype.isActive=function(){var A=md(this.target);return this.contentRect_=A,A.width!==this.broadcastWidth||A.height!==this.broadcastHeight},W.prototype.broadcastRect=function(){var A=this.contentRect_;return this.broadcastWidth=A.width,this.broadcastHeight=A.height,A},W}(),bd=function(){function W(A,O){var j=yd(O);Do(this,{target:A,contentRect:j})}return W}(),xd=function(){function W(A,O,j){if(this.activeObservations_=[],this.observations_=new wo,typeof A!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=A,this.controller_=O,this.callbackCtx_=j}return W.prototype.observe=function(A){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(A instanceof Ai(A).Element))throw new TypeError('parameter 1 is not of type "Element".');var O=this.observations_;O.has(A)||(O.set(A,new Cd(A)),this.controller_.addObserver(this),this.controller_.refresh())}},W.prototype.unobserve=function(A){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(A instanceof Ai(A).Element))throw new TypeError('parameter 1 is not of type "Element".');var O=this.observations_;!O.has(A)||(O.delete(A),O.size||this.controller_.removeObserver(this))}},W.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},W.prototype.gatherActive=function(){var A=this;this.clearActive(),this.observations_.forEach(function(O){O.isActive()&&A.activeObservations_.push(O)})},W.prototype.broadcastActive=function(){if(!!this.hasActive()){var A=this.callbackCtx_,O=this.activeObservations_.map(function(j){return new bd(j.target,j.broadcastRect())});this.callback_.call(A,O,A),this.clearActive()}},W.prototype.clearActive=function(){this.activeObservations_.splice(0)},W.prototype.hasActive=function(){return this.activeObservations_.length>0},W}(),Ao=typeof WeakMap<"u"?new WeakMap:new wo,ko=function(){function W(A){if(!(this instanceof W))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var O=hd.getInstance(),j=new xd(A,O,this);Ao.set(this,j)}return W}();["observe","unobserve","disconnect"].forEach(function(W){ko.prototype[W]=function(){var A;return(A=Ao.get(this))[W].apply(A,arguments)}});var Ed=function(){return typeof Ln.ResizeObserver<"u"?Ln.ResizeObserver:ko}();const{console:Sd}=af,ki="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/image/src/Webcam.svelte";function gr(W){let A,O,j,P,k,R;const Y=[Lo,Po],C=[];function x(o,S){return o[1]==="video"?0:1}O=x(W),j=C[O]=Y[O](W);const h={c:function(){A=Oi("button"),j.c(),ie(A,"class","rounded-xl w-10 h-10 flex justify-center items-center absolute inset-x-0 bottom-2 md:bottom-4 xl:bottom-8 m-auto drop-shadow-lg bg-black/90"),He(A,ki,89,2,2789)},m:function(S,M){ai(S,A,M),C[O].m(A,null),P=!0,k||(R=of(A,"click",function(){sf(W[1]==="image"?W[4]:W[5])&&(W[1]==="image"?W[4]:W[5]).apply(this,arguments)},!1,!1,!1),k=!0)},p:function(S,M){W=S;let E=O;O=x(W),O===E?C[O].p(W,M):(pr(),ri(C[E],1,1,()=>{C[E]=null}),mr(),j=C[O],j?j.p(W,M):(j=C[O]=Y[O](W),j.c()),ti(j,1),j.m(A,null))},i:function(S){P||(ti(j),P=!0)},o:function(S){ri(j),P=!1},d:function(S){S&&oi(A),C[O].d(),k=!1,R()}};return Ye("SvelteRegisterBlock",{block:h,id:gr.name,type:"if",source:"(89:1) {#if !streaming}",ctx:W}),h}function Po(W){let A,O,j;O=new uo({$$inline:!0});const P={c:function(){A=Oi("div"),yr(O.$$.fragment),ie(A,"class","w-2/4 h-2/4 dark:text-white opacity-80"),He(A,ki,104,4,3272)},m:function(R,Y){ai(R,A,Y),Cr(O,A,null),j=!0},p:qe,i:function(R){j||(ti(O.$$.fragment,R),j=!0)},o:function(R){ri(O.$$.fragment,R),j=!1},d:function(R){R&&oi(A),br(O)}};return Ye("SvelteRegisterBlock",{block:P,id:Po.name,type:"else",source:"(104:3) {:else}",ctx:W}),P}function Lo(W){let A,O,j,P;const k=[jo,No],R=[];function Y(x,h){return x[3]?0:1}A=Y(W),O=R[A]=k[A](W);const C={c:function(){O.c(),j=uf()},m:function(h,o){R[A].m(h,o),ai(h,j,o),P=!0},p:function(h,o){let S=A;A=Y(h),A!==S&&(pr(),ri(R[S],1,1,()=>{R[S]=null}),mr(),O=R[A],O||(O=R[A]=k[A](h),O.c()),ti(O,1),O.m(j.parentNode,j))},i:function(h){P||(ti(O),P=!0)},o:function(h){ri(O),P=!1},d:function(h){R[A].d(h),h&&oi(j)}};return Ye("SvelteRegisterBlock",{block:C,id:Lo.name,type:"if",source:'(94:3) {#if mode === \\"video\\"}',ctx:W}),C}function No(W){let A,O,j;O=new ho({$$inline:!0});const P={c:function(){A=Oi("div"),yr(O.$$.fragment),ie(A,"class","w-2/4 h-2/4 dark:text-white opacity-80"),He(A,ki,99,5,3165)},m:function(R,Y){ai(R,A,Y),Cr(O,A,null),j=!0},i:function(R){j||(ti(O.$$.fragment,R),j=!0)},o:function(R){ri(O.$$.fragment,R),j=!1},d:function(R){R&&oi(A),br(O)}};return Ye("SvelteRegisterBlock",{block:P,id:No.name,type:"else",source:"(99:4) {:else}",ctx:W}),P}function jo(W){let A,O,j;O=new fo({$$inline:!0});const P={c:function(){A=Oi("div"),yr(O.$$.fragment),ie(A,"class","w-2/4 h-2/4 dark:text-white opacity-80"),He(A,ki,95,5,3066)},m:function(R,Y){ai(R,A,Y),Cr(O,A,null),j=!0},i:function(R){j||(ti(O.$$.fragment,R),j=!0)},o:function(R){ri(O.$$.fragment,R),j=!1},d:function(R){R&&oi(A),br(O)}};return Ye("SvelteRegisterBlock",{block:P,id:jo.name,type:"if",source:"(95:4) {#if recording}",ctx:W}),P}function vr(W){let A,O,j,P,k=!W[0]&&gr(W);const R={c:function(){A=Oi("div"),O=Oi("video"),j=lf(),k&&k.c(),ie(O,"class","h-full w-full "),He(O,ki,87,1,2711),ie(A,"class","h-full min-h-[15rem] w-full relative"),He(A,ki,85,0,2612)},l:function(C){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(C,x){ai(C,A,x),Di(A,O),W[7](O),Di(A,j),k&&k.m(A,null),P=!0},p:function(C,[x]){C[0]?k&&(pr(),ri(k,1,1,()=>{k=null}),mr()):k?(k.p(C,x),x&1&&ti(k,1)):(k=gr(C),k.c(),ti(k,1),k.m(A,null))},i:function(C){P||(ti(k),P=!0)},o:function(C){ri(k),P=!1},d:function(C){C&&oi(A),W[7](null),k&&k.d()}};return Ye("SvelteRegisterBlock",{block:R,id:vr.name,type:"component",source:"",ctx:W}),R}function Id(W,A,O){let{$$slots:j={},$$scope:P}=A;Bn("Webcam",j,[]);let k,R,{streaming:Y=!1}=A,{pending:C=!1}=A,{mode:x="image"}=A;const h=Ua();Wa(()=>R=document.createElement("canvas"));async function o(){try{w=await navigator.mediaDevices.getUserMedia({video:!0}),O(2,k.srcObject=w,k),k.play()}catch(t){console.error(t)}}function S(){var t=R.getContext("2d");if(k.videoWidth&&k.videoHeight){R.width=k.videoWidth,R.height=k.videoHeight,t.drawImage(k,0,0,k.videoWidth,k.videoHeight);var e=R.toDataURL("image/png");h(Y?"stream":"capture",e)}}let M=!1,E=[],w,L,g;function i(){if(M){g.stop();let t=new Blob(E,{type:L}),e=new FileReader;e.onload=function(r){r.target&&h("capture",{data:r.target.result,name:"sample."+L.substring(6),is_example:!1})},e.readAsDataURL(t)}else{E=[];let t=["video/webm","video/mp4"];for(let e of t)if(MediaRecorder.isTypeSupported(e)){L=e;break}if(L===null){console.error("No supported MediaRecorder mimeType");return}g=new MediaRecorder(w,{mimeType:L}),g.addEventListener("dataavailable",function(e){E.push(e.data)}),g.start(200)}O(3,M=!M)}o(),Y&&x==="image"&&window.setInterval(()=>{k&&!C&&S()},500);const d=["streaming","pending","mode"];Object.keys(A).forEach(t=>{!~d.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&Sd.warn(`<Webcam> was created with unknown prop '${t}'`)});function f(t){cf[t?"unshift":"push"](()=>{k=t,O(2,k)})}return W.$$set=t=>{"streaming"in t&&O(0,Y=t.streaming),"pending"in t&&O(6,C=t.pending),"mode"in t&&O(1,x=t.mode)},W.$capture_state=()=>({createEventDispatcher:Ua,onMount:Wa,Camera:uo,Circle:ho,Square:fo,video_source:k,canvas:R,streaming:Y,pending:C,mode:x,dispatch:h,access_webcam:o,take_picture:S,recording:M,recorded_blobs:E,stream:w,mimeType:L,media_recorder:g,take_recording:i}),W.$inject_state=t=>{"video_source"in t&&O(2,k=t.video_source),"canvas"in t&&(R=t.canvas),"streaming"in t&&O(0,Y=t.streaming),"pending"in t&&O(6,C=t.pending),"mode"in t&&O(1,x=t.mode),"recording"in t&&O(3,M=t.recording),"recorded_blobs"in t&&(E=t.recorded_blobs),"stream"in t&&(w=t.stream),"mimeType"in t&&(L=t.mimeType),"media_recorder"in t&&(g=t.media_recorder)},A&&"$$inject"in A&&W.$inject_state(A.$$inject),[Y,x,k,M,S,i,C,f]}class Td extends jn{constructor(A){super(A),Rn(this,A,Id,vr,zn,{streaming:0,pending:6,mode:1}),Ye("SvelteRegisterComponent",{component:this,tagName:"Webcam",options:A,id:vr.name})}get streaming(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set streaming(A){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pending(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pending(A){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<Webcam>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(A){throw new Error("<Webcam>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Ro={exports:{}},zo={exports:{}};/*!
 * tui-code-snippet.js
 * @version 1.5.2
 * @author NHN. FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 */(function(W,A){(function(j,P){W.exports=P()})(hf,function(){return function(O){var j={};function P(k){if(j[k])return j[k].exports;var R=j[k]={exports:{},id:k,loaded:!1};return O[k].call(R.exports,R,R.exports,P),R.loaded=!0,R.exports}return P.m=O,P.c=j,P.p="dist",P(0)}([function(O,j,P){var k={},R=P(1),Y=R.extend;Y(k,R),Y(k,P(3)),Y(k,P(2)),Y(k,P(4)),Y(k,P(5)),Y(k,P(6)),Y(k,P(7)),Y(k,P(8)),Y(k,P(9)),k.browser=P(10),k.popup=P(11),k.formatDate=P(12),k.defineClass=P(13),k.defineModule=P(14),k.defineNamespace=P(15),k.CustomEvents=P(16),k.Enum=P(17),k.ExMap=P(18),k.HashMap=P(20),k.Map=P(19),O.exports=k},function(O,j,P){var k=P(2),R=P(3),Y=0;function C(L,g){var i=Object.prototype.hasOwnProperty,d,f,t,e;for(t=1,e=arguments.length;t<e;t+=1){d=arguments[t];for(f in d)i.call(d,f)&&(L[f]=d[f])}return L}function x(L){return L.__fe_id||(Y+=1,L.__fe_id=Y),L.__fe_id}function h(L){return k.isExisty(w(L,"__fe_id"))}function o(){Y=0}function S(L){var g=[],i;for(i in L)L.hasOwnProperty(i)&&g.push(i);return g}function M(L){var g=arguments.length,i=1;if(g<1)return!0;for(;i<g;i+=1)if(!E(L,arguments[i]))return!1;return!0}function E(L,g){var i=[],d=[],f;if(isNaN(L)&&isNaN(g)&&k.isNumber(L)&&k.isNumber(g)||L===g)return!0;if(k.isFunction(L)&&k.isFunction(g)||L instanceof Date&&g instanceof Date||L instanceof RegExp&&g instanceof RegExp||L instanceof String&&g instanceof String||L instanceof Number&&g instanceof Number)return L.toString()===g.toString();if(!(L instanceof Object&&g instanceof Object)||L.isPrototypeOf(g)||g.isPrototypeOf(L)||L.constructor!==g.constructor||L.prototype!==g.prototype||R.inArray(L,i)>-1||R.inArray(g,d)>-1)return!1;for(f in g){if(g.hasOwnProperty(f)!==L.hasOwnProperty(f))return!1;if(typeof g[f]!=typeof L[f])return!1}for(f in L){if(g.hasOwnProperty(f)!==L.hasOwnProperty(f))return!1;if(typeof g[f]!=typeof L[f])return!1;if(typeof L[f]=="object"||typeof L[f]=="function"){if(i.push(L),d.push(g),!E(L[f],g[f]))return!1;i.pop(),d.pop()}else if(L[f]!==g[f])return!1}return!0}function w(L,g){for(var i=arguments,d=i[0],f=1,t=i.length;f<t;f+=1){if(k.isUndefined(d)||k.isNull(d))return;d=d[i[f]]}return d}O.exports={extend:C,stamp:x,hasStamp:h,resetLastId:o,keys:Object.prototype.keys||S,compareJSON:M,pick:w}},function(O,j){var P=Object.prototype.toString;function k(I){return!R(I)&&!Y(I)}function R(I){return I===void 0}function Y(I){return I===null}function C(I){return k(I)&&I!==!1}function x(I){return!C(I)}function h(I){var z=k(I)&&(P.call(I)==="[object Arguments]"||!!I.callee);return z}function o(I){return I instanceof Array}function S(I){return I===Object(I)}function M(I){return I instanceof Function}function E(I){return typeof I=="number"||I instanceof Number}function w(I){return typeof I=="string"||I instanceof String}function L(I){return typeof I=="boolean"||I instanceof Boolean}function g(I){return P.call(I)==="[object Array]"}function i(I){return P.call(I)==="[object Function]"}function d(I){return P.call(I)==="[object Number]"}function f(I){return P.call(I)==="[object String]"}function t(I){return P.call(I)==="[object Boolean]"}function e(I){return typeof HTMLElement=="object"?I&&(I instanceof HTMLElement||!!I.nodeType):!!(I&&I.nodeType)}function r(I){return typeof HTMLElement=="object"?I&&I instanceof HTMLElement:!!(I&&I.nodeType&&I.nodeType===1)}function c(I){return!k(I)||p(I)?!0:o(I)||h(I)?I.length===0:S(I)&&!M(I)?!s(I):!0}function p(I){return w(I)&&I===""}function s(I){var z;for(z in I)if(I.hasOwnProperty(z))return!0;return!1}function m(I){return!c(I)}function y(I){return I instanceof Date}function _(I){return P.call(I)==="[object Date]"}O.exports={isExisty:k,isUndefined:R,isNull:Y,isTruthy:C,isFalsy:x,isArguments:h,isArray:o,isArraySafe:g,isObject:S,isFunction:M,isFunctionSafe:i,isNumber:E,isNumberSafe:d,isDate:y,isDateSafe:_,isString:w,isStringSafe:f,isBoolean:L,isBooleanSafe:t,isHTMLNode:e,isHTMLTag:r,isEmpty:c,isNotEmpty:m}},function(O,j,P){var k=P(4),R=P(2),Y=Array.prototype.slice,C,x=function(S,M,E){var w=[],L;for(R.isUndefined(M)&&(M=S||0,S=0),E=E||1,L=E<0?-1:1,M*=L;S*L<M;S+=E)w.push(S);return w},h=function(){var S=Y.call(arguments),M=[];return k.forEach(S,function(E){k.forEach(E,function(w,L){M[L]||(M[L]=[]),M[L].push(w)})}),M},o=function(S,M,E){var w,L;if(E=E||0,!R.isArray(M))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(M,S,E);for(L=M.length,w=E;E>=0&&w<L;w+=1)if(M[w]===S)return w;return-1};C={inArray:o,range:x,zip:h},O.exports=C},function(O,j,P){var k=P(2),R=P(1);function Y(w,L,g){var i=0,d=w.length;for(g=g||null;i<d&&L.call(g,w[i],i,w)!==!1;i+=1);}function C(w,L,g){var i;g=g||null;for(i in w)if(w.hasOwnProperty(i)&&L.call(g,w[i],i,w)===!1)break}function x(w,L,g){k.isArray(w)?Y(w,L,g):C(w,L,g)}function h(w,L,g){var i=[];return g=g||null,x(w,function(){i.push(L.apply(g,arguments))}),i}function o(w,L,g){var i=0,d,f,t;for(g=g||null,k.isArray(w)?(f=w.length,t=w[i]):(d=R.keys(w),f=d.length,t=w[d[i+=1]]),i+=1;i<f;i+=1)t=L.call(g,t,w[d?d[i]:i]);return t}function S(w){var L;try{L=Array.prototype.slice.call(w)}catch{L=[],Y(w,function(i){L.push(i)})}return L}function M(w,L,g){var i,d;if(g=g||null,!k.isObject(w)||!k.isFunction(L))throw new Error("wrong parameter");return k.isArray(w)?(i=[],d=function(f,t){f.push(t[0])}):(i={},d=function(f,t){f[t[1]]=t[0]}),x(w,function(){L.apply(g,arguments)&&d(i,arguments)},g),i}function E(w,L){var g=h(w,function(i){return i[L]});return g}O.exports={forEachOwnProperties:C,forEachArray:Y,forEach:x,toArray:S,map:h,reduce:o,filter:M,pluck:E}},function(O,j){function P(k,R){var Y=Array.prototype.slice,C;return k.bind?k.bind.apply(k,Y.call(arguments,1)):(C=Y.call(arguments,2),function(){return k.apply(R,C.length?C.concat(Y.call(arguments)):arguments)})}O.exports={bind:P}},function(O,j){function P(R){function Y(){}return Y.prototype=R,new Y}function k(R,Y){var C=P(Y.prototype);C.constructor=R,R.prototype=C}O.exports={createObject:P,inherit:k}},function(O,j,P){var k=P(4),R=P(1);function Y(o){var S={"&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&nbsp;":" "};return o.replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&nbsp;/g,function(M){return S[M]?S[M]:M})}function C(o){var S={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"};return o.replace(/[<>&"']/g,function(M){return S[M]?"&"+S[M]+";":M})}function x(o){return/[<>&"']/.test(o)}function h(o,S){for(var M=0,E=o.length,w={},L,g;M<E;M+=1)g=o.charAt(M),w[g]=1;for(M=0,E=S.length;M<E;M+=1)g=S.charAt(M),w[g]&&(w[g]+=1);return w=k.filter(w,function(i){return i>1}),w=R.keys(w).sort(),L=w.join(""),L}O.exports={decodeHTMLEntity:Y,encodeHTMLEntity:C,hasEncodableString:x,getDuplicatedChar:h}},function(O,j){var P={},k=Array.prototype.slice;function R(x,h){var o,S;h=h||0;function M(){S=k.call(arguments),window.clearTimeout(o),o=window.setTimeout(function(){x.apply(null,S)},h)}return M}function Y(){return Number(new Date)}function C(x,h){var o,S=!0,M=function(d){x.apply(null,d),o=null},E,w,L;h=h||0,E=P.debounce(M,h);function g(){if(L=k.call(arguments),S){M(L),S=!1;return}w=P.timestamp(),o=o||w,E(L),w-o>=h&&M(L)}function i(){S=!0,o=null}return g.reset=i,g}P.timestamp=Y,P.debounce=R,P.throttle=C,O.exports=P},function(O,j,P){var k=P(1),R=P(4),Y=P(2),C=7*24*60*60*1e3;function x(S){var M=new Date().getTime();return M-S>C}function h(S,M){var E="https://www.google-analytics.com/collect",w=location.hostname,L="event",g="use",i="TOAST UI "+S+" for "+w+": Statistics",d=window.localStorage.getItem(i);!Y.isUndefined(window.tui)&&window.tui.usageStatistics===!1||d&&!x(d)||(window.localStorage.setItem(i,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&o(E,{v:1,t:L,tid:M,cid:w,dp:w,dh:S,el:S,ec:g})},1e3))}function o(S,M){var E=R.map(k.keys(M),function(L,g){var i=g===0?"":"&";return i+L+"="+M[L]}).join(""),w=document.createElement("img");return w.src=S+"?"+E,w.style.display="none",document.body.appendChild(w),document.body.removeChild(w),w}O.exports={imagePing:o,sendHostname:h}},function(O,j){var P={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};window&&window.navigator&&k();function k(){var R=window.navigator,Y=R.appName.replace(/\s/g,"_"),C=R.userAgent,x=/MSIE\s([0-9]+[.0-9]*)/,h=/Trident.*rv:11\./,o=/Edge\/(\d+)\./,S={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},M,E,w={Microsoft_Internet_Explorer:function(){var g=C.match(x);g?(P.msie=!0,P.version=parseFloat(g[1])):P.others=!0},Netscape:function(){var g=!1;if(h.exec(C))P.msie=!0,P.version=11,g=!0;else if(o.exec(C))P.edge=!0,P.version=C.match(o)[1],g=!0;else for(M in S)if(S.hasOwnProperty(M)&&(E=C.match(S[M]),E&&E.length>1)){P[M]=g=!0,P.version=parseFloat(E[1]||0);break}g||(P.others=!0)}},L=w[Y];L&&w[Y]()}O.exports=P},function(O,j,P){var k=P(4),R=P(2),Y=P(5),C=P(10),x=P(1),h=0;function o(){this.openedPopup={},this.closeWithParentPopup={},this.postBridgeUrl=""}o.prototype.getPopupList=function(S){var M;return R.isExisty(S)?M=this.openedPopup[S]:M=this.openedPopup,M},o.prototype.openPopup=function(S,M){var E,w,L;if(M=x.extend({popupName:"popup_"+h+"_"+Number(new Date),popupOptionStr:"",useReload:!0,closeWithParent:!0,method:"get",param:{}},M||{}),M.method=M.method.toUpperCase(),this.postBridgeUrl=M.postBridgeUrl||this.postBridgeUrl,L=M.method==="POST"&&M.param&&C.msie&&C.version===11,!R.isExisty(S))throw new Error("Popup#open() need popup url.");h+=1,M.param&&(M.method==="GET"?S=S+(/\?/.test(S)?"&":"?")+this._parameterize(M.param):M.method==="POST"&&(L||(w=this.createForm(S,M.param,M.method,M.popupName),S="about:blank"))),E=this.openedPopup[M.popupName],R.isExisty(E)?E.closed?this.openedPopup[M.popupName]=E=this._open(L,M.param,S,M.popupName,M.popupOptionStr):(M.useReload&&E.location.replace(S),E.focus()):this.openedPopup[M.popupName]=E=this._open(L,M.param,S,M.popupName,M.popupOptionStr),this.closeWithParentPopup[M.popupName]=M.closeWithParent,(!E||E.closed||R.isUndefined(E.closed))&&alert("please enable popup windows for this website"),M.param&&M.method==="POST"&&!L&&(E&&w.submit(),w.parentNode&&w.parentNode.removeChild(w)),window.onunload=Y.bind(this.closeAllPopup,this)},o.prototype.close=function(S,M){var E=M||window;S=R.isExisty(S)?S:!1,S&&(window.onunload=null),E.closed||(E.opener=window.location.href,E.close())},o.prototype.closeAllPopup=function(S){var M=R.isExisty(S);k.forEachOwnProperties(this.openedPopup,function(E,w){(M&&this.closeWithParentPopup[w]||!M)&&this.close(!1,E)},this)},o.prototype.focus=function(S){this.getPopupList(S).focus()},o.prototype.parseQuery=function(){var S={},M,E;return M=window.location.search.substr(1),k.forEachArray(M.split("&"),function(w){E=w.split("="),S[decodeURIComponent(E[0])]=decodeURIComponent(E[1])}),S},o.prototype.createForm=function(S,M,E,w,L){var g=document.createElement("form"),i;return L=L||document.body,g.method=E||"POST",g.action=S||"",g.target=w||"",g.style.display="none",k.forEachOwnProperties(M,function(d,f){i=document.createElement("input"),i.name=f,i.type="hidden",i.value=d,g.appendChild(i)}),L.appendChild(g),g},o.prototype._parameterize=function(S){var M=[];return k.forEachOwnProperties(S,function(E,w){M.push(encodeURIComponent(w)+"="+encodeURIComponent(E))}),M.join("&")},o.prototype._open=function(S,M,E,w,L){var g;return S?(g=window.open(this.postBridgeUrl,w,L),setTimeout(function(){g.redirect(E,M)},100)):g=window.open(E,w,L),g},O.exports=new o},function(O,j,P){var k=P(2),R=P(1),Y=/[\\]*YYYY|[\\]*YY|[\\]*MMMM|[\\]*MMM|[\\]*MM|[\\]*M|[\\]*DD|[\\]*D|[\\]*HH|[\\]*H|[\\]*A/gi,C=["Invalid month","January","February","March","April","May","June","July","August","September","October","November","December"],x=[0,31,28,31,30,31,30,31,31,30,31,30,31],h={M:function(M){return Number(M.month)},MM:function(M){var E=M.month;return Number(E)<10?"0"+E:E},MMM:function(M){return C[Number(M.month)].substr(0,3)},MMMM:function(M){return C[Number(M.month)]},D:function(M){return Number(M.date)},d:function(M){return h.D(M)},DD:function(M){var E=M.date;return Number(E)<10?"0"+E:E},dd:function(M){return h.DD(M)},YY:function(M){return Number(M.year)%100},yy:function(M){return h.YY(M)},YYYY:function(M){var E="20",w=M.year;return w>69&&w<100&&(E="19"),Number(w)<100?E+String(w):w},yyyy:function(M){return h.YYYY(M)},A:function(M){return M.meridiem},a:function(M){return M.meridiem},hh:function(M){var E=M.hour;return Number(E)<10?"0"+E:E},HH:function(M){return h.hh(M)},h:function(M){return String(Number(M.hour))},H:function(M){return h.h(M)},m:function(M){return String(Number(M.minute))},mm:function(M){var E=M.minute;return Number(E)<10?"0"+E:E}};function o(M,E,w){var L,g,i,d;return M=Number(M),E=Number(E),w=Number(w),L=M>-1&&M<100||M>1969&&M<2070,g=E>0&&E<13,!L||!g?!1:(d=x[E],E===2&&M%4===0&&(M%100!==0||M%400===0)&&(d=29),i=w>0&&w<=d,i)}function S(M,E,w){var L=R.pick(w,"meridiemSet","AM")||"AM",g=R.pick(w,"meridiemSet","PM")||"PM",i,d,f;return k.isDate(E)?d={year:E.getFullYear(),month:E.getMonth()+1,date:E.getDate(),hour:E.getHours(),minute:E.getMinutes()}:d={year:E.year,month:E.month,date:E.date,hour:E.hour,minute:E.minute},o(d.year,d.month,d.date)?(d.meridiem="",/([^\\]|^)[aA]\b/.test(M)&&(i=d.hour>11?g:L,d.hour>12&&(d.hour%=12),d.hour===0&&(d.hour=12),d.meridiem=i),f=M.replace(Y,function(t){return t.indexOf("\\")>-1?t.replace(/\\/,""):h[t](d)||""}),f):!1}O.exports=S},function(O,j,P){var k=P(6).inherit,R=P(1).extend;function Y(C,x){var h;return x||(x=C,C=null),h=x.init||function(){},C&&k(h,C),x.hasOwnProperty("static")&&(R(h,x.static),delete x.static),R(h.prototype,x),h}O.exports=Y},function(O,j,P){var k=P(15),R=P(2),Y="initialize";function C(x,h){var o=h||{};return R.isFunction(o[Y])&&o[Y](),k(x,o)}O.exports=C},function(O,j,P){var k=P(4),R=P(1);function Y(C,x,h){var o,S,M,E;return o=C.split("."),o.unshift(window),S=k.reduce(o,function(w,L){return w[L]=w[L]||{},w[L]}),h?(E=o.pop(),M=R.pick.apply(null,o),S=M[E]=x):R.extend(S,x),S}O.exports=Y},function(O,j,P){var k=P(4),R=P(2),Y=P(1),C=/\s+/g;function x(){this.events=null,this.contexts=null}x.mixin=function(h){Y.extend(h.prototype,x.prototype)},x.prototype._getHandlerItem=function(h,o){var S={handler:h};return o&&(S.context=o),S},x.prototype._safeEvent=function(h){var o=this.events,S;return o||(o=this.events={}),h&&(S=o[h],S||(S=[],o[h]=S),o=S),o},x.prototype._safeContext=function(){var h=this.contexts;return h||(h=this.contexts=[]),h},x.prototype._indexOfContext=function(h){for(var o=this._safeContext(),S=0;o[S];){if(h===o[S][0])return S;S+=1}return-1},x.prototype._memorizeContext=function(h){var o,S;!R.isExisty(h)||(o=this._safeContext(),S=this._indexOfContext(h),S>-1?o[S][1]+=1:o.push([h,1]))},x.prototype._forgetContext=function(h){var o,S;!R.isExisty(h)||(o=this._safeContext(),S=this._indexOfContext(h),S>-1&&(o[S][1]-=1,o[S][1]<=0&&o.splice(S,1)))},x.prototype._bindEvent=function(h,o,S){var M=this._safeEvent(h);this._memorizeContext(S),M.push(this._getHandlerItem(o,S))},x.prototype.on=function(h,o,S){var M=this;R.isString(h)?(h=h.split(C),k.forEach(h,function(E){M._bindEvent(E,o,S)})):R.isObject(h)&&(S=o,k.forEach(h,function(E,w){M.on(w,E,S)}))},x.prototype.once=function(h,o,S){var M=this;if(R.isObject(h)){S=o,k.forEach(h,function(w,L){M.once(L,w,S)});return}function E(){o.apply(S,arguments),M.off(h,E,S)}this.on(h,E,S)},x.prototype._spliceMatches=function(h,o){var S=0,M;if(!!R.isArray(h))for(M=h.length;S<M;S+=1)o(h[S])===!0&&(h.splice(S,1),M-=1,S-=1)},x.prototype._matchHandler=function(h){var o=this;return function(S){var M=h===S.handler;return M&&o._forgetContext(S.context),M}},x.prototype._matchContext=function(h){var o=this;return function(S){var M=h===S.context;return M&&o._forgetContext(S.context),M}},x.prototype._matchHandlerAndContext=function(h,o){var S=this;return function(M){var E=h===M.handler,w=o===M.context,L=E&&w;return L&&S._forgetContext(M.context),L}},x.prototype._offByEventName=function(h,o){var S=this,M=k.forEachArray,E=R.isFunction(o),w=S._matchHandler(o);h=h.split(C),M(h,function(L){var g=S._safeEvent(L);E?S._spliceMatches(g,w):(M(g,function(i){S._forgetContext(i.context)}),S.events[L]=[])})},x.prototype._offByHandler=function(h){var o=this,S=this._matchHandler(h);k.forEach(this._safeEvent(),function(M){o._spliceMatches(M,S)})},x.prototype._offByObject=function(h,o){var S=this,M;this._indexOfContext(h)<0?k.forEach(h,function(E,w){S.off(w,E)}):R.isString(o)?(M=this._matchContext(h),S._spliceMatches(this._safeEvent(o),M)):R.isFunction(o)?(M=this._matchHandlerAndContext(o,h),k.forEach(this._safeEvent(),function(E){S._spliceMatches(E,M)})):(M=this._matchContext(h),k.forEach(this._safeEvent(),function(E){S._spliceMatches(E,M)}))},x.prototype.off=function(h,o){R.isString(h)?this._offByEventName(h,o):arguments.length?R.isFunction(h)?this._offByHandler(h):R.isObject(h)&&this._offByObject(h,o):(this.events={},this.contexts=[])},x.prototype.fire=function(h){this.invoke.apply(this,arguments)},x.prototype.invoke=function(h){var o,S,M,E;if(!this.hasListener(h))return!0;for(o=this._safeEvent(h),S=Array.prototype.slice.call(arguments,1),M=0;o[M];){if(E=o[M],E.handler.apply(E.context,S)===!1)return!1;M+=1}return!0},x.prototype.hasListener=function(h){return this.getListenerLength(h)>0},x.prototype.getListenerLength=function(h){var o=this._safeEvent(h);return o.length},O.exports=x},function(O,j,P){var k=P(4),R=P(2),Y=function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),C=0;function x(h){h&&this.set.apply(this,arguments)}x.prototype.set=function(h){var o=this;R.isArray(h)||(h=k.toArray(arguments)),k.forEach(h,function(M){o._addItem(M)})},x.prototype.getName=function(h){var o=this,S;return k.forEach(this,function(M,E){if(o._isEnumItem(E)&&h===M)return S=E,!1}),S},x.prototype._addItem=function(h){var o;this.hasOwnProperty(h)||(o=this._makeEnumValue(),Y?Object.defineProperty(this,h,{enumerable:!0,configurable:!1,writable:!1,value:o}):this[h]=o)},x.prototype._makeEnumValue=function(){var h;return h=C,C+=1,h},x.prototype._isEnumItem=function(h){return R.isNumber(this[h])},O.exports=x},function(O,j,P){var k=P(4),R=P(19),Y=["get","has","forEach","keys","values","entries"],C=["delete","clear"];function x(h){this._map=new R(h),this.size=this._map.size}k.forEachArray(Y,function(h){x.prototype[h]=function(){return this._map[h].apply(this._map,arguments)}}),k.forEachArray(C,function(h){x.prototype[h]=function(){var o=this._map[h].apply(this._map,arguments);return this.size=this._map.size,o}}),x.prototype.set=function(){return this._map.set.apply(this._map,arguments),this.size=this._map.size,this},x.prototype.setObject=function(h){k.forEachOwnProperties(h,function(o,S){this.set(S,o)},this)},x.prototype.deleteByKeys=function(h){k.forEachArray(h,function(o){this.delete(o)},this)},x.prototype.merge=function(h){h.forEach(function(o,S){this.set(S,o)},this)},x.prototype.filter=function(h){var o=new x;return this.forEach(function(S,M){h(S,M)&&o.set(M,S)}),o},O.exports=x},function(O,j,P){var k=P(4),R=P(2),Y=P(3),C=P(10),x=P(5),h={},o={};function S(E,w){this._keys=E,this._valueGetter=w,this._length=this._keys.length,this._index=-1,this._done=!1}S.prototype.next=function(){var E={};do this._index+=1;while(R.isUndefined(this._keys[this._index])&&this._index<this._length);return this._index>=this._length?E.done=!0:(E.done=!1,E.value=this._valueGetter(this._keys[this._index],this._index)),E};function M(E){this._valuesForString={},this._valuesForIndex={},this._keys=[],E&&this._setInitData(E),this.size=0}M.prototype._setInitData=function(E){if(!R.isArray(E))throw new Error("Only Array is supported.");k.forEachArray(E,function(w){this.set(w[0],w[1])},this)},M.prototype._isNaN=function(E){return typeof E=="number"&&E!==E},M.prototype._getKeyIndex=function(E){var w=-1,L;return R.isString(E)?(L=this._valuesForString[E],L&&(w=L.keyIndex)):w=Y.inArray(E,this._keys),w},M.prototype._getOriginKey=function(E){var w=E;return E===h?w=void 0:E===o&&(w=NaN),w},M.prototype._getUniqueKey=function(E){var w=E;return R.isUndefined(E)?w=h:this._isNaN(E)&&(w=o),w},M.prototype._getValueObject=function(E,w){if(R.isString(E))return this._valuesForString[E];if(R.isUndefined(w)&&(w=this._getKeyIndex(E)),w>=0)return this._valuesForIndex[w]},M.prototype._getOriginValue=function(E,w){return this._getValueObject(E,w).origin},M.prototype._getKeyValuePair=function(E,w){return[this._getOriginKey(E),this._getOriginValue(E,w)]},M.prototype._createValueObject=function(E,w){return{keyIndex:w,origin:E}},M.prototype.set=function(E,w){var L=this._getUniqueKey(E),g=this._getKeyIndex(L),i;return g<0&&(g=this._keys.push(L)-1,this.size+=1),i=this._createValueObject(w,g),R.isString(E)?this._valuesForString[E]=i:this._valuesForIndex[g]=i,this},M.prototype.get=function(E){var w=this._getUniqueKey(E),L=this._getValueObject(w);return L&&L.origin},M.prototype.keys=function(){return new S(this._keys,x.bind(this._getOriginKey,this))},M.prototype.values=function(){return new S(this._keys,x.bind(this._getOriginValue,this))},M.prototype.entries=function(){return new S(this._keys,x.bind(this._getKeyValuePair,this))},M.prototype.has=function(E){return!!this._getValueObject(E)},M.prototype.delete=function(E){var w;R.isString(E)?this._valuesForString[E]&&(w=this._valuesForString[E].keyIndex,delete this._valuesForString[E]):(w=this._getKeyIndex(E),w>=0&&delete this._valuesForIndex[w]),w>=0&&(delete this._keys[w],this.size-=1)},M.prototype.forEach=function(E,w){w=w||this,k.forEachArray(this._keys,function(L){R.isUndefined(L)||E.call(w,this._getValueObject(L).origin,L,this)},this)},M.prototype.clear=function(){M.call(this)},function(){window.Map&&(C.firefox&&C.version>=37||C.chrome&&C.version>=42)&&(M=window.Map)}(),O.exports=M},function(O,j,P){var k=P(4),R=P(2),Y="\xE5";function C(x){this.length=0,x&&this.setObject(x)}C.prototype.set=function(x,h){arguments.length===2?this.setKeyValue(x,h):this.setObject(x)},C.prototype.setKeyValue=function(x,h){this.has(x)||(this.length+=1),this[this.encodeKey(x)]=h},C.prototype.setObject=function(x){var h=this;k.forEachOwnProperties(x,function(o,S){h.setKeyValue(S,o)})},C.prototype.merge=function(x){var h=this;x.each(function(o,S){h.setKeyValue(S,o)})},C.prototype.encodeKey=function(x){return Y+x},C.prototype.decodeKey=function(x){var h=x.split(Y);return h[h.length-1]},C.prototype.get=function(x){return this[this.encodeKey(x)]},C.prototype.has=function(x){return this.hasOwnProperty(this.encodeKey(x))},C.prototype.remove=function(x){return arguments.length>1&&(x=k.toArray(arguments)),R.isArray(x)?this.removeByKeyArray(x):this.removeByKey(x)},C.prototype.removeByKey=function(x){var h=this.has(x)?this.get(x):null;return h!==null&&(delete this[this.encodeKey(x)],this.length-=1),h},C.prototype.removeByKeyArray=function(x){var h=[],o=this;return k.forEach(x,function(S){h.push(o.removeByKey(S))}),h},C.prototype.removeAll=function(){var x=this;this.each(function(h,o){x.remove(o)})},C.prototype.each=function(x){var h=this,o;k.forEachOwnProperties(this,function(S,M){if(M.charAt(0)===Y&&(o=x(S,h.decodeKey(M))),o===!1)return o})},C.prototype.keys=function(){var x=[],h=this;return this.each(function(o,S){x.push(h.decodeKey(S))}),x},C.prototype.find=function(x){var h=[];return this.each(function(o,S){x(o,S)&&h.push(o)}),h},C.prototype.toArray=function(){var x=[];return this.each(function(h){x.push(h)}),x},O.exports=C}])})})(zo);var Bo={exports:{}};/*!
 * TOAST UI Color Picker
 * @version 2.2.7
 * @author NHN FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */(function(W,A){(function(j,P){W.exports=P()})(window,function(){return function(O){var j={};function P(k){if(j[k])return j[k].exports;var R=j[k]={i:k,l:!1,exports:{}};return O[k].call(R.exports,R,R.exports,P),R.l=!0,R.exports}return P.m=O,P.c=j,P.d=function(k,R,Y){P.o(k,R)||Object.defineProperty(k,R,{enumerable:!0,get:Y})},P.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},P.t=function(k,R){if(R&1&&(k=P(k)),R&8||R&4&&typeof k=="object"&&k&&k.__esModule)return k;var Y=Object.create(null);if(P.r(Y),Object.defineProperty(Y,"default",{enumerable:!0,value:k}),R&2&&typeof k!="string")for(var C in k)P.d(Y,C,function(x){return k[x]}.bind(null,C));return Y},P.n=function(k){var R=k&&k.__esModule?function(){return k.default}:function(){return k};return P.d(R,"a",R),R},P.o=function(k,R){return Object.prototype.hasOwnProperty.call(k,R)},P.p="dist",P(P.s=33)}([function(O,j,P){function k(R,Y){var C=Object.prototype.hasOwnProperty,x,h,o,S;for(o=1,S=arguments.length;o<S;o+=1){x=arguments[o];for(h in x)C.call(x,h)&&(R[h]=x[h])}return R}O.exports=k},function(O,j,P){function k(R){return R instanceof Array}O.exports=k},function(O,j,P){var k=P(1),R=P(6),Y=P(7);function C(x,h,o){k(x)?R(x,h,o):Y(x,h,o)}O.exports=C},function(O,j,P){function k(R){return R===void 0}O.exports=k},function(O,j,P){var k=P(22),R=P(2),Y=P(6),C=P(7),x=P(37),h=0,o={getLength:function(S){var M=0;return C(S,function(){M+=1}),M},map:function(S,M,E){var w=[];return R(S,function(){w.push(M.apply(E||null,arguments))}),w},filter:function(S,M,E){var w=[];return Y(S,function(L){M.apply(E||null,arguments)&&w.push(L)}),w},generateId:function(){return h+=1,h},isOldBrowser:function(){return k.msie&&k.version<9}(),sendHostName:function(){x("color-picker","UA-129987462-1")}};O.exports=o},function(O,j,P){var k=P(1);function R(Y,C,x){var h,o;if(x=x||0,!k(C))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(C,Y,x);for(o=C.length,h=x;x>=0&&h<o;h+=1)if(C[h]===Y)return h;return-1}O.exports=R},function(O,j,P){function k(R,Y,C){var x=0,h=R.length;for(C=C||null;x<h&&Y.call(C,R[x],x,R)!==!1;x+=1);}O.exports=k},function(O,j,P){function k(R,Y,C){var x;C=C||null;for(x in R)if(R.hasOwnProperty(x)&&Y.call(C,R[x],x,R)===!1)break}O.exports=k},function(O,j,P){var k=P(39),R=P(13),Y=P(41),C=P(3),x=P(9),h=P(19),o=P(4);function S(M,E){var w=o.generateId();C(E)&&(E=x.appendHTMLElement("div")),k(E,"tui-view-"+w),this.id=w,this.container=E,this.childs=new h(function(L){return L.id}),this.parent=null}S.prototype.addChild=function(M,E){E&&E.call(M,this),M.parent=this,this.childs.add(M)},S.prototype.removeChild=function(M,E){var w=Y(M)?this.childs.items[M]:M;E&&E.call(w,this),this.childs.remove(w.id)},S.prototype.render=function(){this.childs.each(function(M){M.render()})},S.prototype.recursive=function(M,E){!R(M)||(E||M(this),this.childs.each(function(w){w.recursive(M)}))},S.prototype.resize=function(){for(var M=Array.prototype.slice.call(arguments),E=this.parent;E;)R(E._onResize)&&E._onResize.apply(E,M),E=E.parent},S.prototype._beforeDestroy=function(){},S.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},S.prototype.destroy=function(M){this.childs&&(this.childs.each(function(E){E.destroy(!0),E._destroy()}),this.childs.clear()),!M&&this._destroy()},S.prototype.getViewBound=function(){var M=this.container.getBoundingClientRect();return{x:M.left,y:M.top,width:M.right-M.left,height:M.bottom-M.top}},O.exports=S},function(O,j,P){var k={appendHTMLElement:function(R,Y,C){var x=document.createElement(R);return x.className=C||"",Y?Y.appendChild(x):document.body.appendChild(x),x}};O.exports=k},function(O,j,P){var k=P(0),R=P(20),Y=P(11),C=P(21),x=P(1),h=P(13),o=P(2),S=/\s+/g;function M(){this.events=null,this.contexts=null}M.mixin=function(E){k(E.prototype,M.prototype)},M.prototype._getHandlerItem=function(E,w){var L={handler:E};return w&&(L.context=w),L},M.prototype._safeEvent=function(E){var w=this.events,L;return w||(w=this.events={}),E&&(L=w[E],L||(L=[],w[E]=L),w=L),w},M.prototype._safeContext=function(){var E=this.contexts;return E||(E=this.contexts=[]),E},M.prototype._indexOfContext=function(E){for(var w=this._safeContext(),L=0;w[L];){if(E===w[L][0])return L;L+=1}return-1},M.prototype._memorizeContext=function(E){var w,L;!R(E)||(w=this._safeContext(),L=this._indexOfContext(E),L>-1?w[L][1]+=1:w.push([E,1]))},M.prototype._forgetContext=function(E){var w,L;!R(E)||(w=this._safeContext(),L=this._indexOfContext(E),L>-1&&(w[L][1]-=1,w[L][1]<=0&&w.splice(L,1)))},M.prototype._bindEvent=function(E,w,L){var g=this._safeEvent(E);this._memorizeContext(L),g.push(this._getHandlerItem(w,L))},M.prototype.on=function(E,w,L){var g=this;Y(E)?(E=E.split(S),o(E,function(i){g._bindEvent(i,w,L)})):C(E)&&(L=w,o(E,function(i,d){g.on(d,i,L)}))},M.prototype.once=function(E,w,L){var g=this;if(C(E)){L=w,o(E,function(d,f){g.once(f,d,L)});return}function i(){w.apply(L,arguments),g.off(E,i,L)}this.on(E,i,L)},M.prototype._spliceMatches=function(E,w){var L=0,g;if(!!x(E))for(g=E.length;L<g;L+=1)w(E[L])===!0&&(E.splice(L,1),g-=1,L-=1)},M.prototype._matchHandler=function(E){var w=this;return function(L){var g=E===L.handler;return g&&w._forgetContext(L.context),g}},M.prototype._matchContext=function(E){var w=this;return function(L){var g=E===L.context;return g&&w._forgetContext(L.context),g}},M.prototype._matchHandlerAndContext=function(E,w){var L=this;return function(g){var i=E===g.handler,d=w===g.context,f=i&&d;return f&&L._forgetContext(g.context),f}},M.prototype._offByEventName=function(E,w){var L=this,g=h(w),i=L._matchHandler(w);E=E.split(S),o(E,function(d){var f=L._safeEvent(d);g?L._spliceMatches(f,i):(o(f,function(t){L._forgetContext(t.context)}),L.events[d]=[])})},M.prototype._offByHandler=function(E){var w=this,L=this._matchHandler(E);o(this._safeEvent(),function(g){w._spliceMatches(g,L)})},M.prototype._offByObject=function(E,w){var L=this,g;this._indexOfContext(E)<0?o(E,function(i,d){L.off(d,i)}):Y(w)?(g=this._matchContext(E),L._spliceMatches(this._safeEvent(w),g)):h(w)?(g=this._matchHandlerAndContext(w,E),o(this._safeEvent(),function(i){L._spliceMatches(i,g)})):(g=this._matchContext(E),o(this._safeEvent(),function(i){L._spliceMatches(i,g)}))},M.prototype.off=function(E,w){Y(E)?this._offByEventName(E,w):arguments.length?h(E)?this._offByHandler(E):C(E)&&this._offByObject(E,w):(this.events={},this.contexts=[])},M.prototype.fire=function(E){this.invoke.apply(this,arguments)},M.prototype.invoke=function(E){var w,L,g,i;if(!this.hasListener(E))return!0;for(w=this._safeEvent(E),L=Array.prototype.slice.call(arguments,1),g=0;w[g];){if(i=w[g],i.handler.apply(i.context,L)===!1)return!1;g+=1}return!0},M.prototype.hasListener=function(E){return this.getListenerLength(E)>0},M.prototype.getListenerLength=function(E){var w=this._safeEvent(E);return w.length},O.exports=M},function(O,j,P){function k(R){return typeof R=="string"||R instanceof String}O.exports=k},function(O,j,P){var k=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,R={leadingZero:function(Y,C){var x="",h=0;if((Y+"").length>C)return Y+"";for(;h<C-1;h+=1)x+="0";return(x+Y).slice(C*-1)},isValidRGB:function(Y){return k.test(Y)},hexToRGB:function(Y){var C,x,h;return R.isValidRGB(Y)?(Y=Y.substring(1),C=parseInt(Y.substr(0,2),16),x=parseInt(Y.substr(2,2),16),h=parseInt(Y.substr(4,2),16),[C,x,h]):!1},rgbToHEX:function(Y,C,x){var h="#"+R.leadingZero(Y.toString(16),2)+R.leadingZero(C.toString(16),2)+R.leadingZero(x.toString(16),2);return R.isValidRGB(h)?h:!1},rgbToHSV:function(Y,C,x){var h,o,S,M,E,w;if(Y/=255,C/=255,x/=255,h=Math.max(Y,C,x),o=Math.min(Y,C,x),E=h,w=h-o,M=h===0?0:w/h,h===o)S=0;else{switch(h){case Y:S=(C-x)/w+(C<x?6:0);break;case C:S=(x-Y)/w+2;break;case x:S=(Y-C)/w+4;break}S/=6}return[Math.round(S*360),Math.round(M*100),Math.round(E*100)]},hsvToRGB:function(Y,C,x){var h,o,S,M,E,w,L,g;if(Y=Math.max(0,Math.min(360,Y)),C=Math.max(0,Math.min(100,C)),x=Math.max(0,Math.min(100,x)),C/=100,x/=100,C===0)return h=o=S=x,[Math.round(h*255),Math.round(o*255),Math.round(S*255)];switch(Y/=60,M=Math.floor(Y),E=Y-M,w=x*(1-C),L=x*(1-C*E),g=x*(1-C*(1-E)),M){case 0:h=x,o=g,S=w;break;case 1:h=L,o=x,S=w;break;case 2:h=w,o=x,S=g;break;case 3:h=w,o=L,S=x;break;case 4:h=g,o=w,S=x;break;default:h=x,o=w,S=L;break}return[Math.round(h*255),Math.round(o*255),Math.round(S*255)]}};O.exports=R},function(O,j,P){function k(R){return R instanceof Function}O.exports=k},function(O,j,P){var k=P(11),R=P(2),Y=P(26);function C(o,S,M,E){if(k(S)){R(S.split(/\s+/g),function(w){x(o,w,M,E)});return}R(S,function(w,L){x(o,L,w,M)})}function x(o,S,M,E){function w(L){M.call(E||o,L||window.event)}"addEventListener"in o?o.addEventListener(S,w):"attachEvent"in o&&o.attachEvent("on"+S,w),h(o,S,M,w)}function h(o,S,M,E){var w=Y(o,S),L=!1;R(w,function(g){return g.handler===M?(L=!0,!1):!0}),L||w.push({handler:M,wrappedHandler:E})}O.exports=C},function(O,j,P){function k(R){if(R.preventDefault){R.preventDefault();return}R.returnValue=!1}O.exports=k},function(O,j,P){function k(R){return R.replace(/([A-Z])/g,function(Y){return"-"+Y.toLowerCase()})}O.exports=k},function(O,j,P){var k=P(11),R=P(2),Y=P(26);function C(o,S,M){if(k(S)){R(S.split(/\s+/g),function(E){x(o,E,M)});return}R(S,function(E,w){x(o,w,E)})}function x(o,S,M){var E=Y(o,S),w;M?(R(E,function(L,g){return M===L.handler?(h(o,S,L.wrappedHandler),w=g,!1):!0}),E.splice(w,1)):(R(E,function(L){h(o,S,L.wrappedHandler)}),E.splice(0,E.length))}function h(o,S,M){"removeEventListener"in o?o.removeEventListener(S,M):"detachEvent"in o&&o.detachEvent("on"+S,M)}O.exports=C},function(O,j,P){var k=P(50);function R(Y,C){var x=k(C.prototype);x.constructor=Y,Y.prototype=x}O.exports=R},function(O,j,P){var k=P(6),R=P(7),Y=P(0),C=P(1),x=P(20),h=P(13),o=P(21),S=P(4),M=Array.prototype.slice;function E(w){this.items={},this.length=0,h(w)&&(this.getItemID=w)}E.and=function(w){var L;return w=M.call(arguments),L=w.length,function(g){for(var i=0;i<L;i+=1)if(!w[i].call(null,g))return!1;return!0}},E.or=function(w){var L;return w=M.call(arguments),L=w.length,function(g){for(var i=1,d=w[0].call(null,g);i<L;i+=1)d=d||w[i].call(null,g);return d}},E.merge=function(w){var L={},g=new E(w.getItemID);return k(arguments,function(i){Y(L,i.items)}),g.items=L,g.length=S.getLength(g.items),g},E.prototype.getItemID=function(w){return w._id+""},E.prototype.add=function(w){var L,g;if(arguments.length>1){k(M.call(arguments),function(i){this.add(i)},this);return}L=this.getItemID(w),g=this.items,g[L]||(this.length+=1),g[L]=w},E.prototype.remove=function(w){var L=[],g,i;return this.length?arguments.length>1?(L=S.map(M.call(arguments),function(d){return this.remove(d)},this),L):(g=this.items,o(w)&&(w=this.getItemID(w)),g[w]?(this.length-=1,i=g[w],delete g[w],i):L):L},E.prototype.clear=function(){this.items={},this.length=0},E.prototype.has=function(w){var L,g;return this.length?(L=h(w),g=!1,L?this.each(function(i){return w(i)===!0?(g=!0,!1):!0}):(w=o(w)?this.getItemID(w):w,g=x(this.items[w])),g):!1},E.prototype.doWhenHas=function(w,L,g){var i=this.items[w];!x(i)||L.call(g||this,i)},E.prototype.find=function(w){var L=new E;return this.hasOwnProperty("getItemID")&&(L.getItemID=this.getItemID),this.each(function(g){w(g)===!0&&L.add(g)}),L},E.prototype.groupBy=function(w,L){var g={},i=h(w),d=this.getItemID,f,t;if(C(w)){if(k(w,function(e){g[e+""]=new E(d)}),!L)return g;w=L,i=!0}return this.each(function(e){i?t=w(e):(t=e[w],h(t)&&(t=t.apply(e))),f=g[t],f||(f=g[t]=new E(d)),f.add(e)}),g},E.prototype.single=function(){var w;return this.each(function(L){return w=L,!1},this),w},E.prototype.sort=function(w){var L=[];return this.each(function(g){L.push(g)}),h(w)&&(L=L.sort(w)),L},E.prototype.each=function(w,L){R(this.items,w,L||this)},E.prototype.toArray=function(){return this.length?S.map(this.items,function(w){return w}):[]},O.exports=E},function(O,j,P){var k=P(3),R=P(36);function Y(C){return!k(C)&&!R(C)}O.exports=Y},function(O,j,P){function k(R){return R===Object(R)}O.exports=k},function(O,j,P){var k={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&R();function R(){var Y=window.navigator,C=Y.appName.replace(/\s/g,"_"),x=Y.userAgent,h=/MSIE\s([0-9]+[.0-9]*)/,o=/Trident.*rv:11\./,S=/Edge\/(\d+)\./,M={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},E,w,L={Microsoft_Internet_Explorer:function(){var i=x.match(h);i?(k.msie=!0,k.version=parseFloat(i[1])):k.others=!0},Netscape:function(){var i=!1;if(o.exec(x))k.msie=!0,k.version=11,i=!0;else if(S.exec(x))k.edge=!0,k.version=x.match(S)[1],i=!0;else for(E in M)if(M.hasOwnProperty(E)&&(w=x.match(M[E]),w&&w.length>1)){k[E]=i=!0,k.version=parseFloat(w[1]||0);break}i||(k.others=!0)}},g=L[C];g&&L[C]()}O.exports=k},function(O,j,P){var k=P(3);function R(Y){return!Y||!Y.className?"":k(Y.className.baseVal)?Y.className:Y.className.baseVal}O.exports=R},function(O,j,P){(function(k){var R=P(10),Y=P(42),C=P(44),x=P(47),h=P(28),o=P(17),S=P(14),M=P(15),E=P(0);function w(L,g){S(g,"mousedown",this._onMouseDown,this),this.options=E({distance:10},L),this.container=g,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}w.prototype.destroy=function(){o(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},w.prototype._toggleDragEvent=function(L){var g=this.container;L?(Y(g),S(window,"dragstart",M),S(k.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(C(g),o(window,"dragstart",M),o(k.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},w.prototype._getEventData=function(L){return{target:h(L),originEvent:L}},w.prototype._onMouseDown=function(L){x(L)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(L),this._toggleDragEvent(!0))},w.prototype._onMouseMove=function(L){var g=this.options.distance;if(M(L),this._isMoved=!0,this._distance<g){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(L))},w.prototype._onMouseUp=function(L){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(L));return}this.fire("click",this._getEventData(L))},R.mixin(w),O.exports=w}).call(this,P(25))},function(O,j){var P;P=function(){return this}();try{P=P||new Function("return this")()}catch{typeof window=="object"&&(P=window)}O.exports=P},function(O,j,P){var k="_feEventKey";function R(Y,C){var x=Y[k],h;return x||(x=Y[k]={}),h=x[C],h||(h=x[C]=[]),h}O.exports=R},function(O,j,P){function k(R){var Y=document.documentElement.style,C,x;for(C=0,x=R.length;C<x;C+=1)if(R[C]in Y)return R[C];return!1}O.exports=k},function(O,j,P){function k(R){return R.target||R.srcElement}O.exports=k},function(O,j,P){var k=P(10),R=P(28),Y=P(17),C=P(14),x=P(30),h=P(0),o=P(18),S=P(9),M=P(12),E=P(8),w=P(51);function L(g,i){this.options=h({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},g),i=S.appendHTMLElement("div",i,this.options.cssPrefix+"palette-container"),E.call(this,g,i)}o(L,E),L.prototype._onClick=function(g){var i=this.options,d=R(g),f={};if(x(d,i.cssPrefix+"palette-button")){f.color=d.value,this.fire("_selectColor",f);return}x(d,i.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},L.prototype._onChange=function(g){var i=this.options,d=R(g),f={};x(d,i.cssPrefix+"palette-hex")&&(f.color=d.value,this.fire("_selectColor",f))},L.prototype._beforeDestroy=function(){this._toggleEvent(!1)},L.prototype._toggleEvent=function(g){var i=this.options,d=this.container,f=g?C:Y,t;f(d,"click",this._onClick,this),t=d.querySelector("."+i.cssPrefix+"palette-hex",d),t&&f(t,"change",this._onChange,this)},L.prototype.render=function(g){var i=this.options,d="";this._toggleEvent(!1),d=w({cssPrefix:i.cssPrefix,preset:i.preset,detailTxt:i.detailTxt,color:g,isValidRGB:M.isValidRGB,getItemClass:function(f){return f?"":" "+i.cssPrefix+"color-transparent"},isSelected:function(f){return f===g?" "+i.cssPrefix+"selected":""}}),this.container.innerHTML=d,this._toggleEvent(!0)},k.mixin(L),O.exports=L},function(O,j,P){var k=P(5),R=P(23);function Y(C,x){var h;return C.classList?C.classList.contains(x):(h=R(C).split(/\s+/),k(x,h)>-1)}O.exports=Y},function(O,j,P){var k=P(10),R=P(53),Y=P(54),C=P(30),x=P(0),h=P(18),o=P(9),S=P(32),M=P(12),E=P(8),w=P(24),L=P(57),g=[-7,112],i=[-3,115],d=359.99;function f(t,e){e=o.appendHTMLElement("div",e,t.cssPrefix+"slider-container"),e.style.display="none",E.call(this,t,e),this.options=x({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},t),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new w({distance:0},e),this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}h(f,E),f.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},f.prototype.toggle=function(t){this.container.style.display=t?"block":"none"},f.prototype.isVisible=function(){return this.container.style.display==="block"},f.prototype.render=function(t){var e=this.container,r=this.options,c=L.layout,p,s;!M.isValidRGB(t)||(c=c.replace(/{{slider}}/,L.slider),c=c.replace(/{{huebar}}/,L.huebar),c=c.replace(/{{cssPrefix}}/g,r.cssPrefix),c=c.replace(/{{id}}/g,r.id),this.container.innerHTML=c,this.sliderHandleElement=e.querySelector("."+r.cssPrefix+"slider-handle"),this.huebarHandleElement=e.querySelector("."+r.cssPrefix+"huebar-handle"),this.baseColorElement=e.querySelector("."+r.cssPrefix+"slider-basecolor"),p=M.hexToRGB(t),s=M.rgbToHSV.apply(null,p),this.moveHue(s[0],!0),this.moveSaturationAndValue(s[1],s[2],!0))},f.prototype._moveColorSliderHandle=function(t,e,r){var c=this.sliderHandleElement,p;e=Math.max(g[0],e),e=Math.min(g[1],e),t=Math.max(g[0],t),t=Math.min(g[1],t),S.setTranslateXY(c,t,e),p=e>50?"white":"black",S.setStrokeColor(c,p),r||this.fire("_selectColor",{color:M.rgbToHEX.apply(null,this.getRGB())})},f.prototype.moveSaturationAndValue=function(t,e,r){var c,p,s,m;t=t||0,e=e||0,c=Math.abs(g[0]),p=g[1],s=t*p/100-c,m=p-e*p/100-c,this._moveColorSliderHandle(s,m,r)},f.prototype._moveColorSliderByPosition=function(t,e){var r=g[0];this._moveColorSliderHandle(t+r,e+r)},f.prototype.getSaturationAndValue=function(){var t=Math.abs(g[0]),e=t+g[1],r=S.getTranslateXY(this.sliderHandleElement),c,p;return c=(r[1]+t)/e*100,p=100-(r[0]+t)/e*100,[c,p]},f.prototype._moveHueHandle=function(t,e){var r=this.huebarHandleElement,c=this.baseColorElement,p,s;t=Math.max(i[0],t),t=Math.min(i[1],t),S.setTranslateY(r,t),p=M.hsvToRGB(this.getHue(),100,100),s=M.rgbToHEX.apply(null,p),S.setGradientColorStop(c,s),e||this.fire("_selectColor",{color:M.rgbToHEX.apply(null,this.getRGB())})},f.prototype.moveHue=function(t,e){var r=0,c,p;c=Math.abs(i[0]),p=c+i[1],t=t||0,r=p*t/d-c,this._moveHueHandle(r,e)},f.prototype._moveHueByPosition=function(t){var e=i[0];this._moveHueHandle(t+e)},f.prototype.getHue=function(){var t=this.huebarHandleElement,e=S.getTranslateXY(t),r,c;return r=Math.abs(i[0]),c=r+i[1],(e[0]+r)*d/c},f.prototype.getHSV=function(){var t=this.getSaturationAndValue(),e=this.getHue();return[e].concat(t)},f.prototype.getRGB=function(){return M.hsvToRGB.apply(null,this.getHSV())},f.prototype._prepareColorSliderForMouseEvent=function(t){var e=this.options,r=Y(t.target,"."+e.cssPrefix+"slider-part"),c;return c=this._dragDataCache={isColorSlider:C(r,e.cssPrefix+"slider-left"),parentElement:r},c},f.prototype._onClick=function(t){var e=this._prepareColorSliderForMouseEvent(t),r=R(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(r[0],r[1]):this._moveHueByPosition(r[1]),this._dragDataCache=null},f.prototype._onDragStart=function(t){this._prepareColorSliderForMouseEvent(t)},f.prototype._onDrag=function(t){var e=this._dragDataCache,r=R(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(r[0],r[1]):this._moveHueByPosition(r[1])},f.prototype._onDragEnd=function(){this._dragDataCache=null},k.mixin(f),O.exports=f},function(O,j,P){var k=P(4).isOldBrowser,R=/[\.\-0-9]+/g,Y=-6,C={getTranslateXY:function(x){var h;return k?(h=x.style,[parseFloat(h.top),parseFloat(h.left)]):(h=x.getAttribute("transform"),h?(h=h.match(R),[parseFloat(h[1]),parseFloat(h[0])]):[0,0])},setTranslateXY:function(x,h,o){k?(x.style.left=h+"px",x.style.top=o+"px"):x.setAttribute("transform","translate("+h+","+o+")")},setTranslateY:function(x,h){k?x.style.top=h+"px":x.setAttribute("transform","translate("+Y+","+h+")")},setStrokeColor:function(x,h){k?x.strokecolor=h:x.setAttribute("stroke",h)},setGradientColorStop:function(x,h){k?x.color=h:x.setAttribute("stop-color",h)}};O.exports=C},function(O,j,P){P(34),O.exports=P(35)},function(O,j,P){},function(O,j,P){var k=P(19),R=P(8),Y=P(24),C=P(48),x=P(29),h=P(31),o=P(12),S=P(32),M={Collection:k,View:R,Drag:Y,create:C,Palette:x,Slider:h,colorutil:o,svgvml:S};O.exports=M},function(O,j,P){function k(R){return R===null}O.exports=k},function(O,j,P){var k=P(3),R=P(38),Y=7*24*60*60*1e3;function C(h){var o=new Date().getTime();return o-h>Y}function x(h,o){var S="https://www.google-analytics.com/collect",M=location.hostname,E="event",w="use",L="TOAST UI "+h+" for "+M+": Statistics",g=window.localStorage.getItem(L);!k(window.tui)&&window.tui.usageStatistics===!1||g&&!C(g)||(window.localStorage.setItem(L,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&R(S,{v:1,t:E,tid:o,cid:M,dp:M,dh:h,el:h,ec:w})},1e3))}O.exports=x},function(O,j,P){var k=P(7);function R(Y,C){var x=document.createElement("img"),h="";return k(C,function(o,S){h+="&"+S+"="+o}),h=h.substring(1),x.src=Y+"?"+h,x.style.display="none",document.body.appendChild(x),document.body.removeChild(x),x}O.exports=R},function(O,j,P){var k=P(2),R=P(5),Y=P(23),C=P(40);function x(h){var o=Array.prototype.slice.call(arguments,1),S=h.classList,M=[],E;if(S){k(o,function(w){h.classList.add(w)});return}E=Y(h),E&&(o=[].concat(E.split(/\s+/),o)),k(o,function(w){R(w,M)<0&&M.push(w)}),C(h,M)}O.exports=x},function(O,j,P){var k=P(1),R=P(3);function Y(C,x){if(x=k(x)?x.join(" "):x,x=x.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),R(C.className.baseVal)){C.className=x;return}C.className.baseVal=x}O.exports=Y},function(O,j,P){function k(R){return typeof R=="number"||R instanceof Number}O.exports=k},function(O,j,P){var k=P(14),R=P(15),Y=P(43),C=P(27),x="onselectstart"in document,h="prevUserSelect",o=C(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function S(M){M||(M=document),x?k(M,"selectstart",R):(M=M===document?document.documentElement:M,Y(M,h,M.style[o]),M.style[o]="none")}O.exports=S},function(O,j,P){var k=P(16);function R(Y,C,x){if(Y.dataset){Y.dataset[C]=x;return}Y.setAttribute("data-"+k(C),x)}O.exports=R},function(O,j,P){var k=P(17),R=P(15),Y=P(45),C=P(46),x=P(27),h="onselectstart"in document,o="prevUserSelect",S=x(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function M(E){E||(E=document),h?k(E,"selectstart",R):(E=E===document?document.documentElement:E,E.style[S]=Y(E,o)||"auto",C(E,o))}O.exports=M},function(O,j,P){var k=P(16);function R(Y,C){return Y.dataset?Y.dataset[C]:Y.getAttribute("data-"+k(C))}O.exports=R},function(O,j,P){var k=P(16);function R(Y,C){if(Y.dataset){delete Y.dataset[C];return}Y.removeAttribute("data-"+k(C))}O.exports=R},function(O,j,P){var k=P(22),R=P(5),Y=["0","1","3","5","7"],C=["2","6"],x=["4"];function h(S){return k.msie&&k.version<=8?o(S):S.button}function o(S){var M=String(S.button);return R(M,Y)>-1?0:R(M,C)>-1?2:R(M,x)>-1?1:null}O.exports=h},function(O,j,P){var k=P(10),R=P(0),Y=P(4),C=P(12),x=P(49),h=P(29),o=P(31),S=0;function M(){return S+=1,S}function E(w){var L;if(!(this instanceof E))return new E(w);if(w=this.options=R({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:M(),usageStatistics:!0},w),!w.container)throw new Error("ColorPicker(): need container option.");L=this.layout=new x(w,w.container),this.palette=new h(w,L.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new o(w,L.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),L.addChild(this.palette),L.addChild(this.slider),this.render(w.color),w.usageStatistics&&Y.sendHostName()}E.prototype._onSelectColorInPalette=function(w){var L=w.color,g=this.options;if(!C.isValidRGB(L)&&L!==""){this.render();return}this.fire("selectColor",{color:L,origin:"palette"}),g.color!==L&&(g.color=L,this.render(L))},E.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},E.prototype._onSelectColorInSlider=function(w){var L=w.color,g=this.options;this.fire("selectColor",{color:L,origin:"slider"}),g.color!==L&&(g.color=L,this.palette.render(L))},E.prototype.setColor=function(w){if(!C.isValidRGB(w))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=w,this.render(w)},E.prototype.getColor=function(){return this.options.color},E.prototype.toggle=function(w){this.layout.container.style.display=w?"block":"none"},E.prototype.render=function(w){this.layout.render(w||this.options.color)},E.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},k.mixin(E),O.exports=E},function(O,j,P){var k=P(0),R=P(18),Y=P(9),C=P(8);function x(h,o){this.options=k({cssPrefix:"tui-colorpicker-"},h),o=Y.appendHTMLElement("div",o,this.options.cssPrefix+"container"),C.call(this,h,o),this.render()}R(x,C),x.prototype.render=function(h){this.recursive(function(o){o.render(h)},!0)},O.exports=x},function(O,j,P){function k(R){function Y(){}return Y.prototype=R,new Y}O.exports=k},function(O,j,P){var k=P(52);O.exports=function(R){var Y=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),C=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",Y,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return k(C,R)}},function(O,j,P){var k=P(5),R=P(2),Y=P(1),C=P(11),x=P(0),h=/{{\s?|\s?}}/g,o=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,S=/\[\s?|\s?\]/,M=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,E=/\./,w=/^["']\w+["']$/,L=/"|'/g,g=/^-?\d+\.?\d*$/,i=2,d={if:c,each:p,with:s},f="a".split(/a/).length===3,t=function(){return f?function(U,X){return U.split(X)}:function(U,X){var J=[],lt=0,st,Mt;for(X.global||(X=new RegExp(X,"g")),st=X.exec(U);st!==null;)Mt=st.index,J.push(U.slice(lt,Mt)),lt=Mt+st[0].length,st=X.exec(U);return J.push(U.slice(lt)),J}}();function e(U,X){var J,lt=X[U];return U==="true"?lt=!0:U==="false"?lt=!1:w.test(U)?lt=U.replace(L,""):o.test(U)?(J=U.split(S),lt=e(J[0],X)[e(J[1],X)]):M.test(U)?(J=U.split(E),lt=e(J[0],X)[J[1]]):g.test(U)&&(lt=parseFloat(U)),lt}function r(U,X){var J=[U],lt=[],st=0,Mt=0;return R(X,function(It,_t){It.indexOf("if")===0?st+=1:It==="/if"?st-=1:!st&&(It.indexOf("elseif")===0||It==="else")&&(J.push(It==="else"?["true"]:It.split(" ").slice(1)),lt.push(X.slice(Mt,_t)),Mt=_t+1)}),lt.push(X.slice(Mt)),{exps:J,sourcesInsideIf:lt}}function c(U,X,J){var lt=r(U,X),st=!1,Mt="";return R(lt.exps,function(It,_t){return st=_(It,J),st&&(Mt=z(lt.sourcesInsideIf[_t],J)),!st}),Mt}function p(U,X,J){var lt=_(U,J),st=Y(lt)?"@index":"@key",Mt={},It="";return R(lt,function(_t,rt){Mt[st]=rt,Mt["@this"]=_t,x(J,Mt),It+=z(X.slice(),J)}),It}function s(U,X,J){var lt=k("as",U),st=U[lt+1],Mt=_(U.slice(0,lt),J),It={};return It[st]=Mt,z(X,x(J,It))||""}function m(U,X,J){var lt=U.splice(X+1,J-X);return lt.pop(),lt}function y(U,X,J){for(var lt=d[U],st=1,Mt=0,It,_t=Mt+i,rt=X[_t];st&&C(rt);)rt.indexOf(U)===0?st+=1:rt.indexOf("/"+U)===0&&(st-=1,It=_t),_t+=i,rt=X[_t];if(st)throw Error(U+" needs {{/"+U+"}} expression.");return X[Mt]=lt(X[Mt].split(" ").slice(1),m(X,Mt,It),J),X}function _(U,X){var J=e(U[0],X);return J instanceof Function?I(J,U.slice(1),X):J}function I(U,X,J){var lt=[];return R(X,function(st){lt.push(e(st,J))}),U.apply(null,lt)}function z(U,X){for(var J=1,lt=U[J],st,Mt,It;C(lt);)st=lt.split(" "),Mt=st[0],d[Mt]?(It=y(Mt,U.splice(J,U.length-J),X),U=U.concat(It)):U[J]=_(st,X),J+=i,lt=U[J];return U.join("")}function F(U,X){return z(t(U,h),X)}O.exports=F},function(O,j,P){var k=P(1);function R(Y,C){var x=k(Y),h=x?Y[0]:Y.clientX,o=x?Y[1]:Y.clientY,S;return C?(S=C.getBoundingClientRect(),[h-S.left-C.clientLeft,o-S.top-C.clientTop]):[h,o]}O.exports=R},function(O,j,P){var k=P(55);function R(Y,C){var x=Y.parentNode;if(k(Y,C))return Y;for(;x&&x!==document;){if(k(x,C))return x;x=x.parentNode}return null}O.exports=R},function(O,j,P){var k=P(5),R=P(56),Y=Element.prototype,C=Y.matches||Y.webkitMatchesSelector||Y.mozMatchesSelector||Y.msMatchesSelector||function(h){var o=this.document||this.ownerDocument;return k(this,R(o.querySelectorAll(h)))>-1};function x(h,o){return C.call(h,o)}O.exports=x},function(O,j,P){var k=P(6);function R(Y){var C;try{C=Array.prototype.slice.call(Y)}catch{C=[],k(Y,function(h){C.push(h)})}return C}O.exports=R},function(O,j,P){(function(k){var R=P(4).isOldBrowser,Y=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),C=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),x=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),h=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),o=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);R&&k.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),O.exports={layout:Y,slider:R?x:C,huebar:R?o:h}}).call(this,P(25))}])})})(Bo);/*!
 * TOAST UI ImageEditor
 * @version 3.15.2
 * @author NHN. FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */(function(W,A){(function(j,P){W.exports=P(zo.exports,Bo.exports)})(self,function(O,j){return function(){var P={2777:function(C,x,h){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var o=o||{version:"4.6.0"};if(x.fabric=o,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?o.document=document:o.document=document.implementation.createHTMLDocument(""),o.window=window;else{var S=h(4960),M=new S.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;o.document=M.document,o.jsdomImplForWrapper=h(6759).implForWrapper,o.nodeCanvas=h(6272).Canvas,o.window=M,DOMParser=o.window.DOMParser}o.isTouchSupported="ontouchstart"in o.window||"ontouchstart"in o.document||o.window&&o.window.navigator&&o.window.navigator.maxTouchPoints>0,o.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",o.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],o.DPI=96,o.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",o.commaWsp="(?:\\s+,?\\s*|,\\s*)",o.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,o.reNonWord=/[ \n\.,;!\?\-]/,o.fontPaths={},o.iMatrix=[1,0,0,1,0,0],o.svgNS="http://www.w3.org/2000/svg",o.perfLimitSizeTotal=2097152,o.maxCacheSideLimit=4096,o.minCacheSideLimit=256,o.charWidthsCache={},o.textureSize=2048,o.disableStyleCopyPaste=!1,o.enableGLFiltering=!0,o.devicePixelRatio=o.window.devicePixelRatio||o.window.webkitDevicePixelRatio||o.window.mozDevicePixelRatio||1,o.browserShadowBlurConstant=1,o.arcToSegmentsCache={},o.boundsOfCurveCache={},o.cachesBoundsOfCurve=!0,o.forceGLPutImageData=!1,o.initFilterBackend=function(){if(o.enableGLFiltering&&o.isWebglSupported&&o.isWebglSupported(o.textureSize))return console.log("max texture size: "+o.maxTextureSize),new o.WebglFilterBackend({tileSize:o.textureSize});if(o.Canvas2dFilterBackend)return new o.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=o),function(){function g(r,c){if(!!this.__eventListeners[r]){var p=this.__eventListeners[r];c?p[p.indexOf(c)]=!1:o.util.array.fill(p,!1)}}function i(r,c){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in r)this.on(p,r[p]);else this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(c);return this}function d(r,c){var p=function(){c.apply(this,arguments),this.off(r,p)}.bind(this);this.on(r,p)}function f(r,c){if(arguments.length===1)for(var p in r)d.call(this,p,r[p]);else d.call(this,r,c);return this}function t(r,c){if(!this.__eventListeners)return this;if(arguments.length===0)for(r in this.__eventListeners)g.call(this,r);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in r)g.call(this,p,r[p]);else g.call(this,r,c);return this}function e(r,c){if(!this.__eventListeners)return this;var p=this.__eventListeners[r];if(!p)return this;for(var s=0,m=p.length;s<m;s++)p[s]&&p[s].call(this,c||{});return this.__eventListeners[r]=p.filter(function(y){return y!==!1}),this}o.Observable={fire:e,on:i,once:f,off:t}}(),o.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var g=0,i=arguments.length;g<i;g++)this._onObjectAdded(arguments[g]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(g,i,d){var f=this._objects;return d?f[i]=g:f.splice(i,0,g),this._onObjectAdded&&this._onObjectAdded(g),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var g=this._objects,i,d=!1,f=0,t=arguments.length;f<t;f++)i=g.indexOf(arguments[f]),i!==-1&&(d=!0,g.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&d&&this.requestRenderAll(),this},forEachObject:function(g,i){for(var d=this.getObjects(),f=0,t=d.length;f<t;f++)g.call(i,d[f],f,d);return this},getObjects:function(g){return typeof g>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===g})},item:function(g){return this._objects[g]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(g,i){return this._objects.indexOf(g)>-1?!0:i?this._objects.some(function(d){return typeof d.contains=="function"&&d.contains(g,!0)}):!1},complexity:function(){return this._objects.reduce(function(g,i){return g+=i.complexity?i.complexity():0,g},0)}},o.CommonMethods={_setOptions:function(g){for(var i in g)this.set(i,g[i])},_initGradient:function(g,i){g&&g.colorStops&&!(g instanceof o.Gradient)&&this.set(i,new o.Gradient(g))},_initPattern:function(g,i,d){g&&g.source&&!(g instanceof o.Pattern)?this.set(i,new o.Pattern(g,d)):d&&d()},_setObject:function(g){for(var i in g)this._set(i,g[i])},set:function(g,i){return typeof g=="object"?this._setObject(g):this._set(g,i),this},_set:function(g,i){this[g]=i},toggle:function(g){var i=this.get(g);return typeof i=="boolean"&&this.set(g,!i),this},get:function(g){return this[g]}},function(g){var i=Math.sqrt,d=Math.atan2,f=Math.pow,t=Math.PI/180,e=Math.PI/2;o.util={cos:function(r){if(r===0)return 1;r<0&&(r=-r);var c=r/e;switch(c){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},sin:function(r){if(r===0)return 0;var c=r/e,p=1;switch(r<0&&(p=-1),c){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(r)},removeFromArray:function(r,c){var p=r.indexOf(c);return p!==-1&&r.splice(p,1),r},getRandomInt:function(r,c){return Math.floor(Math.random()*(c-r+1))+r},degreesToRadians:function(r){return r*t},radiansToDegrees:function(r){return r/t},rotatePoint:function(r,c,p){var s=new o.Point(r.x-c.x,r.y-c.y),m=o.util.rotateVector(s,p);return new o.Point(m.x,m.y).addEquals(c)},rotateVector:function(r,c){var p=o.util.sin(c),s=o.util.cos(c),m=r.x*s-r.y*p,y=r.x*p+r.y*s;return{x:m,y}},transformPoint:function(r,c,p){return p?new o.Point(c[0]*r.x+c[2]*r.y,c[1]*r.x+c[3]*r.y):new o.Point(c[0]*r.x+c[2]*r.y+c[4],c[1]*r.x+c[3]*r.y+c[5])},makeBoundingBoxFromPoints:function(r,c){if(c)for(var p=0;p<r.length;p++)r[p]=o.util.transformPoint(r[p],c);var s=[r[0].x,r[1].x,r[2].x,r[3].x],m=o.util.array.min(s),y=o.util.array.max(s),_=y-m,I=[r[0].y,r[1].y,r[2].y,r[3].y],z=o.util.array.min(I),F=o.util.array.max(I),U=F-z;return{left:m,top:z,width:_,height:U}},invertTransform:function(r){var c=1/(r[0]*r[3]-r[1]*r[2]),p=[c*r[3],-c*r[1],-c*r[2],c*r[0]],s=o.util.transformPoint({x:r[4],y:r[5]},p,!0);return p[4]=-s.x,p[5]=-s.y,p},toFixed:function(r,c){return parseFloat(Number(r).toFixed(c))},parseUnit:function(r,c){var p=/\D{0,2}$/.exec(r),s=parseFloat(r);switch(c||(c=o.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return s*o.DPI/25.4;case"cm":return s*o.DPI/2.54;case"in":return s*o.DPI;case"pt":return s*o.DPI/72;case"pc":return s*o.DPI/72*12;case"em":return s*c;default:return s}},falseFunction:function(){return!1},getKlass:function(r,c){return r=o.util.string.camelize(r.charAt(0).toUpperCase()+r.slice(1)),o.util.resolveNamespace(c)[r]},getSvgAttributes:function(r){var c=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"]);break}return c},resolveNamespace:function(r){if(!r)return o;var c=r.split("."),p=c.length,s,m=g||o.window;for(s=0;s<p;++s)m=m[c[s]];return m},loadImage:function(r,c,p,s){if(!r){c&&c.call(p,r);return}var m=o.util.createImage(),y=function(){c&&c.call(p,m,!1),m=m.onload=m.onerror=null};m.onload=y,m.onerror=function(){o.log("Error loading "+m.src),c&&c.call(p,null,!0),m=m.onload=m.onerror=null},r.indexOf("data")!==0&&s!==void 0&&s!==null&&(m.crossOrigin=s),r.substring(0,14)==="data:image/svg"&&(m.onload=null,o.util.loadImageInDom(m,y)),m.src=r},loadImageInDom:function(r,c){var p=o.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(r),o.document.querySelector("body").appendChild(p),r.onload=function(){c(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(r,c,p,s){r=r||[];var m=[],y=0,_=r.length;function I(){++y===_&&c&&c(m.filter(function(z){return z}))}if(!_){c&&c(m);return}r.forEach(function(z,F){if(!z||!z.type){I();return}var U=o.util.getKlass(z.type,p);U.fromObject(z,function(X,J){J||(m[F]=X),s&&s(z,X,J),I()})})},enlivenPatterns:function(r,c){r=r||[];function p(){++m===y&&c&&c(s)}var s=[],m=0,y=r.length;if(!y){c&&c(s);return}r.forEach(function(_,I){_&&_.source?new o.Pattern(_,function(z){s[I]=z,p()}):(s[I]=_,p())})},groupSVGElements:function(r,c,p){var s;return r&&r.length===1?r[0]:(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),s=new o.Group(r,c),typeof p<"u"&&(s.sourcePath=p),s)},populateWithProperties:function(r,c,p){if(p&&Object.prototype.toString.call(p)==="[object Array]")for(var s=0,m=p.length;s<m;s++)p[s]in r&&(c[p[s]]=r[p[s]])},drawDashedLine:function(r,c,p,s,m,y){var _=s-c,I=m-p,z=i(_*_+I*I),F=d(I,_),U=y.length,X=0,J=!0;for(r.save(),r.translate(c,p),r.moveTo(0,0),r.rotate(F),c=0;z>c;)c+=y[X++%U],c>z&&(c=z),r[J?"lineTo":"moveTo"](c,0),J=!J;r.restore()},createCanvasElement:function(){return o.document.createElement("canvas")},copyCanvasElement:function(r){var c=o.util.createCanvasElement();return c.width=r.width,c.height=r.height,c.getContext("2d").drawImage(r,0,0),c},toDataURL:function(r,c,p){return r.toDataURL("image/"+c,p)},createImage:function(){return o.document.createElement("img")},multiplyTransformMatrices:function(r,c,p){return[r[0]*c[0]+r[2]*c[1],r[1]*c[0]+r[3]*c[1],r[0]*c[2]+r[2]*c[3],r[1]*c[2]+r[3]*c[3],p?0:r[0]*c[4]+r[2]*c[5]+r[4],p?0:r[1]*c[4]+r[3]*c[5]+r[5]]},qrDecompose:function(r){var c=d(r[1],r[0]),p=f(r[0],2)+f(r[1],2),s=i(p),m=(r[0]*r[3]-r[2]*r[1])/s,y=d(r[0]*r[2]+r[1]*r[3],p);return{angle:c/t,scaleX:s,scaleY:m,skewX:y/t,skewY:0,translateX:r[4],translateY:r[5]}},calcRotateMatrix:function(r){if(!r.angle)return o.iMatrix.concat();var c=o.util.degreesToRadians(r.angle),p=o.util.cos(c),s=o.util.sin(c);return[p,s,-s,p,0,0]},calcDimensionsMatrix:function(r){var c=typeof r.scaleX>"u"?1:r.scaleX,p=typeof r.scaleY>"u"?1:r.scaleY,s=[r.flipX?-c:c,0,0,r.flipY?-p:p,0,0],m=o.util.multiplyTransformMatrices,y=o.util.degreesToRadians;return r.skewX&&(s=m(s,[1,0,Math.tan(y(r.skewX)),1],!0)),r.skewY&&(s=m(s,[1,Math.tan(y(r.skewY)),0,1],!0)),s},composeMatrix:function(r){var c=[1,0,0,1,r.translateX||0,r.translateY||0],p=o.util.multiplyTransformMatrices;return r.angle&&(c=p(c,o.util.calcRotateMatrix(r))),(r.scaleX!==1||r.scaleY!==1||r.skewX||r.skewY||r.flipX||r.flipY)&&(c=p(c,o.util.calcDimensionsMatrix(r))),c},resetObjectTransform:function(r){r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},saveObjectTransform:function(r){return{scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}},isTransparent:function(r,c,p,s){s>0&&(c>s?c-=s:c=0,p>s?p-=s:p=0);var m=!0,y,_,I=r.getImageData(c,p,s*2||1,s*2||1),z=I.data.length;for(y=3;y<z&&(_=I.data[y],m=_<=0,m!==!1);y+=4);return I=null,m},parsePreserveAspectRatioAttribute:function(r){var c="meet",p="Mid",s="Mid",m=r.split(" "),y;return m&&m.length&&(c=m.pop(),c!=="meet"&&c!=="slice"?(y=c,c="meet"):m.length&&(y=m.pop())),p=y!=="none"?y.slice(1,4):"none",s=y!=="none"?y.slice(5,8):"none",{meetOrSlice:c,alignX:p,alignY:s}},clearFabricFontCache:function(r){r=(r||"").toLowerCase(),r?o.charWidthsCache[r]&&delete o.charWidthsCache[r]:o.charWidthsCache={}},limitDimsByArea:function(r,c){var p=Math.sqrt(c*r),s=Math.floor(c/p);return{x:Math.floor(p),y:s}},capValue:function(r,c,p){return Math.max(r,Math.min(c,p))},findScaleToFit:function(r,c){return Math.min(c.width/r.width,c.height/r.height)},findScaleToCover:function(r,c){return Math.max(c.width/r.width,c.height/r.height)},matrixToSVG:function(r){return"matrix("+r.map(function(c){return o.util.toFixed(c,o.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(r,c){var p=o.util.invertTransform(c),s=o.util.multiplyTransformMatrices(p,r.calcOwnMatrix());o.util.applyTransformToObject(r,s)},addTransformToObject:function(r,c){o.util.applyTransformToObject(r,o.util.multiplyTransformMatrices(c,r.calcOwnMatrix()))},applyTransformToObject:function(r,c){var p=o.util.qrDecompose(c),s=new o.Point(p.translateX,p.translateY);r.flipX=!1,r.flipY=!1,r.set("scaleX",p.scaleX),r.set("scaleY",p.scaleY),r.skewX=p.skewX,r.skewY=p.skewY,r.angle=p.angle,r.setPositionByOrigin(s,"center","center")},sizeAfterTransform:function(r,c,p){var s=r/2,m=c/2,y=[{x:-s,y:-m},{x:s,y:-m},{x:-s,y:m},{x:s,y:m}],_=o.util.calcDimensionsMatrix(p),I=o.util.makeBoundingBoxFromPoints(y,_);return{x:I.width,y:I.height}}}}(x),function(){var g=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},d={m:"l",M:"L"};function f(nt,$,K,G,q,at,et,Ct,dt,yt,Ot){var Tt=o.util.cos(nt),ct=o.util.sin(nt),it=o.util.cos($),ot=o.util.sin($),mt=K*q*it-G*at*ot+et,ft=G*q*it+K*at*ot+Ct,bt=yt+dt*(-K*q*ct-G*at*Tt),jt=Ot+dt*(-G*q*ct+K*at*Tt),Vt=mt+dt*(K*q*ot+G*at*it),Gt=ft+dt*(G*q*ot-K*at*it);return["C",bt,jt,Vt,Gt,mt,ft]}function t(nt,$,K,G,q,at,et){var Ct=Math.PI,dt=et*Ct/180,yt=o.util.sin(dt),Ot=o.util.cos(dt),Tt=0,ct=0;K=Math.abs(K),G=Math.abs(G);var it=-Ot*nt*.5-yt*$*.5,ot=-Ot*$*.5+yt*nt*.5,mt=K*K,ft=G*G,bt=ot*ot,jt=it*it,Vt=mt*ft-mt*bt-ft*jt,Gt=0;if(Vt<0){var Et=Math.sqrt(1-Vt/(mt*ft));K*=Et,G*=Et}else Gt=(q===at?-1:1)*Math.sqrt(Vt/(mt*bt+ft*jt));var Xt=Gt*K*ot/G,wt=-Gt*G*it/K,ee=Ot*Xt-yt*wt+nt*.5,ge=yt*Xt+Ot*wt+$*.5,Yt=e(1,0,(it-Xt)/K,(ot-wt)/G),xt=e((it-Xt)/K,(ot-wt)/G,(-it-Xt)/K,(-ot-wt)/G);at===0&&xt>0?xt-=2*Ct:at===1&&xt<0&&(xt+=2*Ct);for(var ne=Math.ceil(Math.abs(xt/Ct*2)),ae=[],oe=xt/ne,Se=8/3*Math.sin(oe/4)*Math.sin(oe/4)/Math.sin(oe/2),kt=Yt+oe,Dt=0;Dt<ne;Dt++)ae[Dt]=f(Yt,kt,Ot,yt,K,G,ee,ge,Se,Tt,ct),Tt=ae[Dt][5],ct=ae[Dt][6],Yt=kt,kt+=oe;return ae}function e(nt,$,K,G){var q=Math.atan2($,nt),at=Math.atan2(G,K);return at>=q?at-q:2*Math.PI-(q-at)}function r(nt,$,K,G,q,at,et,Ct){var dt;if(o.cachesBoundsOfCurve&&(dt=g.call(arguments),o.boundsOfCurveCache[dt]))return o.boundsOfCurveCache[dt];var yt=Math.sqrt,Ot=Math.min,Tt=Math.max,ct=Math.abs,it=[],ot=[[],[]],mt,ft,bt,jt,Vt,Gt,Et,Xt;ft=6*nt-12*K+6*q,mt=-3*nt+9*K-9*q+3*et,bt=3*K-3*nt;for(var wt=0;wt<2;++wt){if(wt>0&&(ft=6*$-12*G+6*at,mt=-3*$+9*G-9*at+3*Ct,bt=3*G-3*$),ct(mt)<1e-12){if(ct(ft)<1e-12)continue;jt=-bt/ft,0<jt&&jt<1&&it.push(jt);continue}Et=ft*ft-4*bt*mt,!(Et<0)&&(Xt=yt(Et),Vt=(-ft+Xt)/(2*mt),0<Vt&&Vt<1&&it.push(Vt),Gt=(-ft-Xt)/(2*mt),0<Gt&&Gt<1&&it.push(Gt))}for(var ee,ge,Yt=it.length,xt=Yt,ne;Yt--;)jt=it[Yt],ne=1-jt,ee=ne*ne*ne*nt+3*ne*ne*jt*K+3*ne*jt*jt*q+jt*jt*jt*et,ot[0][Yt]=ee,ge=ne*ne*ne*$+3*ne*ne*jt*G+3*ne*jt*jt*at+jt*jt*jt*Ct,ot[1][Yt]=ge;ot[0][xt]=nt,ot[1][xt]=$,ot[0][xt+1]=et,ot[1][xt+1]=Ct;var ae=[{x:Ot.apply(null,ot[0]),y:Ot.apply(null,ot[1])},{x:Tt.apply(null,ot[0]),y:Tt.apply(null,ot[1])}];return o.cachesBoundsOfCurve&&(o.boundsOfCurveCache[dt]=ae),ae}function c(nt,$,K){for(var G=K[1],q=K[2],at=K[3],et=K[4],Ct=K[5],dt=K[6],yt=K[7],Ot=t(dt-nt,yt-$,G,q,et,Ct,at),Tt=0,ct=Ot.length;Tt<ct;Tt++)Ot[Tt][1]+=nt,Ot[Tt][2]+=$,Ot[Tt][3]+=nt,Ot[Tt][4]+=$,Ot[Tt][5]+=nt,Ot[Tt][6]+=$;return Ot}function p(nt){var $=0,K=0,G=nt.length,q=0,at=0,et,Ct,dt,yt=[],Ot,Tt,ct;for(Ct=0;Ct<G;++Ct){switch(dt=!1,et=nt[Ct].slice(0),et[0]){case"l":et[0]="L",et[1]+=$,et[2]+=K;case"L":$=et[1],K=et[2];break;case"h":et[1]+=$;case"H":et[0]="L",et[2]=K,$=et[1];break;case"v":et[1]+=K;case"V":et[0]="L",K=et[1],et[1]=$,et[2]=K;break;case"m":et[0]="M",et[1]+=$,et[2]+=K;case"M":$=et[1],K=et[2],q=et[1],at=et[2];break;case"c":et[0]="C",et[1]+=$,et[2]+=K,et[3]+=$,et[4]+=K,et[5]+=$,et[6]+=K;case"C":Tt=et[3],ct=et[4],$=et[5],K=et[6];break;case"s":et[0]="S",et[1]+=$,et[2]+=K,et[3]+=$,et[4]+=K;case"S":Ot==="C"?(Tt=2*$-Tt,ct=2*K-ct):(Tt=$,ct=K),$=et[3],K=et[4],et[0]="C",et[5]=et[3],et[6]=et[4],et[3]=et[1],et[4]=et[2],et[1]=Tt,et[2]=ct,Tt=et[3],ct=et[4];break;case"q":et[0]="Q",et[1]+=$,et[2]+=K,et[3]+=$,et[4]+=K;case"Q":Tt=et[1],ct=et[2],$=et[3],K=et[4];break;case"t":et[0]="T",et[1]+=$,et[2]+=K;case"T":Ot==="Q"?(Tt=2*$-Tt,ct=2*K-ct):(Tt=$,ct=K),et[0]="Q",$=et[1],K=et[2],et[1]=Tt,et[2]=ct,et[3]=$,et[4]=K;break;case"a":et[0]="A",et[6]+=$,et[7]+=K;case"A":dt=!0,yt=yt.concat(c($,K,et)),$=et[6],K=et[7];break;case"z":case"Z":$=q,K=at;break}dt||yt.push(et),Ot=et[0]}return yt}function s(nt,$,K,G){return Math.sqrt((K-nt)*(K-nt)+(G-$)*(G-$))}function m(nt){return nt*nt*nt}function y(nt){return 3*nt*nt*(1-nt)}function _(nt){return 3*nt*(1-nt)*(1-nt)}function I(nt){return(1-nt)*(1-nt)*(1-nt)}function z(nt,$,K,G,q,at,et,Ct){return function(dt){var yt=m(dt),Ot=y(dt),Tt=_(dt),ct=I(dt);return{x:et*yt+q*Ot+K*Tt+nt*ct,y:Ct*yt+at*Ot+G*Tt+$*ct}}}function F(nt,$,K,G,q,at,et,Ct){return function(dt){var yt=1-dt,Ot=3*yt*yt*(K-nt)+6*yt*dt*(q-K)+3*dt*dt*(et-q),Tt=3*yt*yt*(G-$)+6*yt*dt*(at-G)+3*dt*dt*(Ct-at);return Math.atan2(Tt,Ot)}}function U(nt){return nt*nt}function X(nt){return 2*nt*(1-nt)}function J(nt){return(1-nt)*(1-nt)}function lt(nt,$,K,G,q,at){return function(et){var Ct=U(et),dt=X(et),yt=J(et);return{x:q*Ct+K*dt+nt*yt,y:at*Ct+G*dt+$*yt}}}function st(nt,$,K,G,q,at){return function(et){var Ct=1-et,dt=2*Ct*(K-nt)+2*et*(q-K),yt=2*Ct*(G-$)+2*et*(at-G);return Math.atan2(yt,dt)}}function Mt(nt,$,K){var G={x:$,y:K},q,at=0,et;for(et=1;et<=100;et+=1)q=nt(et/100),at+=s(G.x,G.y,q.x,q.y),G=q;return at}function It(nt,$){for(var K=0,G=0,q=nt.iterator,at={x:nt.x,y:nt.y},et,Ct,dt=.01,yt=nt.angleFinder,Ot;G<$&&K<=1&&dt>1e-4;)et=q(K),Ot=K,Ct=s(at.x,at.y,et.x,et.y),Ct+G>$?(dt/=2,K-=dt):(at=et,K+=dt,G+=Ct);return et.angle=yt(Ot),et}function _t(nt){for(var $=0,K=nt.length,G,q=0,at=0,et=0,Ct=0,dt=[],yt,Ot,Tt,ct=0;ct<K;ct++){switch(G=nt[ct],Ot={x:q,y:at,command:G[0]},G[0]){case"M":Ot.length=0,et=q=G[1],Ct=at=G[2];break;case"L":Ot.length=s(q,at,G[1],G[2]),q=G[1],at=G[2];break;case"C":yt=z(q,at,G[1],G[2],G[3],G[4],G[5],G[6]),Tt=F(q,at,G[1],G[2],G[3],G[4],G[5],G[6]),Ot.iterator=yt,Ot.angleFinder=Tt,Ot.length=Mt(yt,q,at),q=G[5],at=G[6];break;case"Q":yt=lt(q,at,G[1],G[2],G[3],G[4]),Tt=st(q,at,G[1],G[2],G[3],G[4]),Ot.iterator=yt,Ot.angleFinder=Tt,Ot.length=Mt(yt,q,at),q=G[3],at=G[4];break;case"Z":case"z":Ot.destX=et,Ot.destY=Ct,Ot.length=s(q,at,et,Ct),q=et,at=Ct;break}$+=Ot.length,dt.push(Ot)}return dt.push({length:$,x:q,y:at}),dt}function rt(nt,$,K){K||(K=_t(nt));for(var G=0;$-K[G].length>0&&G<K.length-2;)$-=K[G].length,G++;var q=K[G],at=$/q.length,et=q.command,Ct=nt[G],dt;switch(et){case"M":return{x:q.x,y:q.y,angle:0};case"Z":case"z":return dt=new o.Point(q.x,q.y).lerp(new o.Point(q.destX,q.destY),at),dt.angle=Math.atan2(q.destY-q.y,q.destX-q.x),dt;case"L":return dt=new o.Point(q.x,q.y).lerp(new o.Point(Ct[1],Ct[2]),at),dt.angle=Math.atan2(Ct[2]-q.y,Ct[1]-q.x),dt;case"C":return It(q,$);case"Q":return It(q,$)}}function Wt(nt){var $=[],K=[],G,q,at=o.rePathCommand,et="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Ct="("+et+")"+o.commaWsp,dt="([01])"+o.commaWsp+"?",yt=Ct+"?"+Ct+"?"+Ct+dt+dt+Ct+"?("+et+")",Ot=new RegExp(yt,"g"),Tt,ct,it;if(!nt||!nt.match)return $;it=nt.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ot=0,mt,ft=it.length;ot<ft;ot++){G=it[ot],ct=G.slice(1).trim(),K.length=0;var bt=G.charAt(0);if(mt=[bt],bt.toLowerCase()==="a")for(var jt;jt=Ot.exec(ct);)for(var Vt=1;Vt<jt.length;Vt++)K.push(jt[Vt]);else for(;Tt=at.exec(ct);)K.push(Tt[0]);for(var Vt=0,Gt=K.length;Vt<Gt;Vt++)q=parseFloat(K[Vt]),isNaN(q)||mt.push(q);var Et=i[bt.toLowerCase()],Xt=d[bt]||bt;if(mt.length-1>Et)for(var wt=1,ee=mt.length;wt<ee;wt+=Et)$.push([bt].concat(mt.slice(wt,wt+Et))),bt=Xt;else $.push(mt)}return $}function V(nt,$){var K=[],G,q=new o.Point(nt[0].x,nt[0].y),at=new o.Point(nt[1].x,nt[1].y),et=nt.length,Ct=1,dt=0,yt=et>2;for($=$||0,yt&&(Ct=nt[2].x<at.x?-1:nt[2].x===at.x?0:1,dt=nt[2].y<at.y?-1:nt[2].y===at.y?0:1),K.push(["M",q.x-Ct*$,q.y-dt*$]),G=1;G<et;G++){if(!q.eq(at)){var Ot=q.midPointFrom(at);K.push(["Q",q.x,q.y,Ot.x,Ot.y])}q=nt[G],G+1<nt.length&&(at=nt[G+1])}return yt&&(Ct=q.x>nt[G-2].x?1:q.x===nt[G-2].x?0:-1,dt=q.y>nt[G-2].y?1:q.y===nt[G-2].y?0:-1),K.push(["L",q.x+Ct*$,q.y+dt*$]),K}function Zt(nt,$,K){return K&&($=o.util.multiplyTransformMatrices($,[1,0,0,1,-K.x,-K.y])),nt.map(function(G){for(var q=G.slice(0),at={},et=1;et<G.length-1;et+=2)at.x=G[et],at.y=G[et+1],at=o.util.transformPoint(at,$),q[et]=at.x,q[et+1]=at.y;return q})}function Q(nt,$,K,G,q,at,et,Ct,dt){for(var yt=0,Ot=0,Tt,ct=[],it=t(Ct-nt,dt-$,K,G,at,et,q),ot=0,mt=it.length;ot<mt;ot++)Tt=r(yt,Ot,it[ot][1],it[ot][2],it[ot][3],it[ot][4],it[ot][5],it[ot][6]),ct.push({x:Tt[0].x+nt,y:Tt[0].y+$}),ct.push({x:Tt[1].x+nt,y:Tt[1].y+$}),yt=it[ot][5],Ot=it[ot][6];return ct}function St(nt,$,K,G){G=G.slice(0).unshift("X");var q=c($,K,G);q.forEach(function(at){nt.bezierCurveTo.apply(nt,at.slice(1))})}o.util.joinPath=function(nt){return nt.map(function($){return $.join(" ")}).join(" ")},o.util.parsePath=Wt,o.util.makePathSimpler=p,o.util.getSmoothPathFromPoints=V,o.util.getPathSegmentsInfo=_t,o.util.getBoundsOfCurve=r,o.util.getPointOnPath=rt,o.util.transformPath=Zt,o.util.fromArcToBeizers=c,o.util.getBoundsOfArc=Q,o.util.drawArc=St}(),function(){var g=Array.prototype.slice;function i(r,c){for(var p=g.call(arguments,2),s=[],m=0,y=r.length;m<y;m++)s[m]=p.length?r[m][c].apply(r[m],p):r[m][c].call(r[m]);return s}function d(r,c){return e(r,c,function(p,s){return p>=s})}function f(r,c){return e(r,c,function(p,s){return p<s})}function t(r,c){for(var p=r.length;p--;)r[p]=c;return r}function e(r,c,p){if(!(!r||r.length===0)){var s=r.length-1,m=c?r[s][c]:r[s];if(c)for(;s--;)p(r[s][c],m)&&(m=r[s][c]);else for(;s--;)p(r[s],m)&&(m=r[s]);return m}}o.util.array={fill:t,invoke:i,min:f,max:d}}(),function(){function g(d,f,t){if(t)if(!o.isLikelyNode&&f instanceof Element)d=f;else if(f instanceof Array){d=[];for(var e=0,r=f.length;e<r;e++)d[e]=g({},f[e],t)}else if(f&&typeof f=="object")for(var c in f)c==="canvas"||c==="group"?d[c]=null:f.hasOwnProperty(c)&&(d[c]=g({},f[c],t));else d=f;else for(var c in f)d[c]=f[c];return d}function i(d,f){return g({},d,f)}o.util.object={extend:g,clone:i},o.util.object.extend(o.util,o.Observable)}(),function(){function g(e){return e.replace(/-+(.)?/g,function(r,c){return c?c.toUpperCase():""})}function i(e,r){return e.charAt(0).toUpperCase()+(r?e.slice(1):e.slice(1).toLowerCase())}function d(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(e){var r=0,c,p=[];for(r=0,c;r<e.length;r++)(c=t(e,r))!==!1&&p.push(c);return p}function t(e,r){var c=e.charCodeAt(r);if(isNaN(c))return"";if(c<55296||c>57343)return e.charAt(r);if(55296<=c&&c<=56319){if(e.length<=r+1)throw"High surrogate without following low surrogate";var p=e.charCodeAt(r+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return e.charAt(r)+e.charAt(r+1)}if(r===0)throw"Low surrogate without preceding high surrogate";var s=e.charCodeAt(r-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}o.util.string={camelize:g,capitalize:i,escapeXml:d,graphemeSplit:f}}(),function(){var g=Array.prototype.slice,i=function(){},d=function(){for(var c in{toString:1})if(c==="toString")return!1;return!0}(),f=function(c,p,s){for(var m in p)m in c.prototype&&typeof c.prototype[m]=="function"&&(p[m]+"").indexOf("callSuper")>-1?c.prototype[m]=function(y){return function(){var _=this.constructor.superclass;this.constructor.superclass=s;var I=p[y].apply(this,arguments);if(this.constructor.superclass=_,y!=="initialize")return I}}(m):c.prototype[m]=p[m],d&&(p.toString!==Object.prototype.toString&&(c.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=p.valueOf))};function t(){}function e(c){for(var p=null,s=this;s.constructor.superclass;){var m=s.constructor.superclass.prototype[c];if(s[c]!==m){p=m;break}s=s.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,g.call(arguments,1)):p.call(this):console.log("tried to callSuper "+c+", method not found in prototype chain",this)}function r(){var c=null,p=g.call(arguments,0);typeof p[0]=="function"&&(c=p.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=c,s.subclasses=[],c&&(t.prototype=c.prototype,s.prototype=new t,c.subclasses.push(s));for(var m=0,y=p.length;m<y;m++)f(s,p[m],c);return s.prototype.initialize||(s.prototype.initialize=i),s.prototype.constructor=s,s.prototype.callSuper=e,s}o.util.createClass=r}(),function(){var g=!!o.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];o.util.addListener=function(f,t,e,r){f&&f.addEventListener(t,e,g?!1:r)},o.util.removeListener=function(f,t,e,r){f&&f.removeEventListener(t,e,g?!1:r)};function d(f){var t=f.changedTouches;return t&&t[0]?t[0]:f}o.util.getPointer=function(f){var t=f.target,e=o.util.getScrollLeftTop(t),r=d(f);return{x:r.clientX+e.left,y:r.clientY+e.top}},o.util.isTouchEvent=function(f){return i.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function g(r,c){var p=r.style;if(!p)return r;if(typeof c=="string")return r.style.cssText+=";"+c,c.indexOf("opacity")>-1?e(r,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):r;for(var s in c)if(s==="opacity")e(r,c[s]);else{var m=s==="float"||s==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":s;p[m]=c[s]}return r}var i=o.document.createElement("div"),d=typeof i.style.opacity=="string",f=typeof i.style.filter=="string",t=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,e=function(r){return r};d?e=function(r,c){return r.style.opacity=c,r}:f&&(e=function(r,c){var p=r.style;return r.currentStyle&&!r.currentStyle.hasLayout&&(p.zoom=1),t.test(p.filter)?(c=c>=.9999?"":"alpha(opacity="+c*100+")",p.filter=p.filter.replace(t,c)):p.filter+=" alpha(opacity="+c*100+")",r}),o.util.setStyle=g}(),function(){var g=Array.prototype.slice;function i(I){return typeof I=="string"?o.document.getElementById(I):I}var d,f=function(I){return g.call(I,0)};try{d=f(o.document.childNodes)instanceof Array}catch{}d||(f=function(I){for(var z=new Array(I.length),F=I.length;F--;)z[F]=I[F];return z});function t(I,z){var F=o.document.createElement(I);for(var U in z)U==="class"?F.className=z[U]:U==="for"?F.htmlFor=z[U]:F.setAttribute(U,z[U]);return F}function e(I,z){I&&(" "+I.className+" ").indexOf(" "+z+" ")===-1&&(I.className+=(I.className?" ":"")+z)}function r(I,z,F){return typeof z=="string"&&(z=t(z,F)),I.parentNode&&I.parentNode.replaceChild(z,I),z.appendChild(I),z}function c(I){for(var z=0,F=0,U=o.document.documentElement,X=o.document.body||{scrollLeft:0,scrollTop:0};I&&(I.parentNode||I.host)&&(I=I.parentNode||I.host,I===o.document?(z=X.scrollLeft||U.scrollLeft||0,F=X.scrollTop||U.scrollTop||0):(z+=I.scrollLeft||0,F+=I.scrollTop||0),!(I.nodeType===1&&I.style.position==="fixed")););return{left:z,top:F}}function p(I){var z,F=I&&I.ownerDocument,U={left:0,top:0},X={left:0,top:0},J,lt={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!F)return X;for(var st in lt)X[lt[st]]+=parseInt(s(I,st),10)||0;return z=F.documentElement,typeof I.getBoundingClientRect<"u"&&(U=I.getBoundingClientRect()),J=c(I),{left:U.left+J.left-(z.clientLeft||0)+X.left,top:U.top+J.top-(z.clientTop||0)+X.top}}var s;o.document.defaultView&&o.document.defaultView.getComputedStyle?s=function(I,z){var F=o.document.defaultView.getComputedStyle(I,null);return F?F[z]:void 0}:s=function(I,z){var F=I.style[z];return!F&&I.currentStyle&&(F=I.currentStyle[z]),F},function(){var I=o.document.documentElement.style,z="userSelect"in I?"userSelect":"MozUserSelect"in I?"MozUserSelect":"WebkitUserSelect"in I?"WebkitUserSelect":"KhtmlUserSelect"in I?"KhtmlUserSelect":"";function F(X){return typeof X.onselectstart<"u"&&(X.onselectstart=o.util.falseFunction),z?X.style[z]="none":typeof X.unselectable=="string"&&(X.unselectable="on"),X}function U(X){return typeof X.onselectstart<"u"&&(X.onselectstart=null),z?X.style[z]="":typeof X.unselectable=="string"&&(X.unselectable=""),X}o.util.makeElementUnselectable=F,o.util.makeElementSelectable=U}();function m(I){var z=o.jsdomImplForWrapper(I);return z._canvas||z._image}function y(I){if(!!o.isLikelyNode){var z=o.jsdomImplForWrapper(I);z&&(z._image=null,z._canvas=null,z._currentSrc=null,z._attributes=null,z._classList=null)}}function _(I,z){I.imageSmoothingEnabled=I.imageSmoothingEnabled||I.webkitImageSmoothingEnabled||I.mozImageSmoothingEnabled||I.msImageSmoothingEnabled||I.oImageSmoothingEnabled,I.imageSmoothingEnabled=z}o.util.setImageSmoothing=_,o.util.getById=i,o.util.toArray=f,o.util.addClass=e,o.util.makeElement=t,o.util.wrapElement=r,o.util.getScrollLeftTop=c,o.util.getElementOffset=p,o.util.getNodeCanvas=m,o.util.cleanUpJsdomNode=y}(),function(){function g(f,t){return f+(/\?/.test(f)?"&":"?")+t}function i(){}function d(f,t){t||(t={});var e=t.method?t.method.toUpperCase():"GET",r=t.onComplete||function(){},c=new o.window.XMLHttpRequest,p=t.body||t.parameters;return c.onreadystatechange=function(){c.readyState===4&&(r(c),c.onreadystatechange=i)},e==="GET"&&(p=null,typeof t.parameters=="string"&&(f=g(f,t.parameters))),c.open(e,f,!0),(e==="POST"||e==="PUT")&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(p),c}o.util.request=d}(),o.log=console.log,o.warn=console.warn,function(){function g(){return!1}function i(c,p,s,m){return-s*Math.cos(c/m*(Math.PI/2))+s+p}function d(c){var p=!1;return e(function(s){c||(c={});var m=s||+new Date,y=c.duration||500,_=m+y,I,z=c.onChange||g,F=c.abort||g,U=c.onComplete||g,X=c.easing||i,J="startValue"in c?c.startValue:0,lt="endValue"in c?c.endValue:100,st=c.byValue||lt-J;c.onStart&&c.onStart(),function Mt(It){I=It||+new Date;var _t=I>_?y:I-m,rt=_t/y,Wt=X(_t,J,st,y),V=Math.abs((Wt-J)/st);if(!p){if(F(Wt,V,rt)){U(lt,1,1);return}if(I>_){z(lt,1,1),U(lt,1,1);return}else z(Wt,V,rt),e(Mt)}}(m)}),function(){p=!0}}var f=o.window.requestAnimationFrame||o.window.webkitRequestAnimationFrame||o.window.mozRequestAnimationFrame||o.window.oRequestAnimationFrame||o.window.msRequestAnimationFrame||function(c){return o.window.setTimeout(c,1e3/60)},t=o.window.cancelAnimationFrame||o.window.clearTimeout;function e(){return f.apply(o.window,arguments)}function r(){return t.apply(o.window,arguments)}o.util.animate=d,o.util.requestAnimFrame=e,o.util.cancelAnimFrame=r}(),function(){function g(d,f,t){var e="rgba("+parseInt(d[0]+t*(f[0]-d[0]),10)+","+parseInt(d[1]+t*(f[1]-d[1]),10)+","+parseInt(d[2]+t*(f[2]-d[2]),10);return e+=","+(d&&f?parseFloat(d[3]+t*(f[3]-d[3])):1),e+=")",e}function i(d,f,t,e){var r=new o.Color(d).getSource(),c=new o.Color(f).getSource(),p=e.onComplete,s=e.onChange;return e=e||{},o.util.animate(o.util.object.extend(e,{duration:t||500,startValue:r,endValue:c,byValue:c,easing:function(m,y,_,I){var z=e.colorEasing?e.colorEasing(m,I):1-Math.cos(m/I*(Math.PI/2));return g(y,_,z)},onComplete:function(m,y,_){if(p)return p(g(c,c,0),y,_)},onChange:function(m,y,_){if(s){if(Array.isArray(m))return s(g(m,m,0),y,_);s(m,y,_)}}}))}o.util.animateColor=i}(),function(){function g(Q,St,nt,$){return Q<Math.abs(St)?(Q=St,$=nt/4):St===0&&Q===0?$=nt/(2*Math.PI)*Math.asin(1):$=nt/(2*Math.PI)*Math.asin(St/Q),{a:Q,c:St,p:nt,s:$}}function i(Q,St,nt){return Q.a*Math.pow(2,10*(St-=1))*Math.sin((St*nt-Q.s)*(2*Math.PI)/Q.p)}function d(Q,St,nt,$){return nt*((Q=Q/$-1)*Q*Q+1)+St}function f(Q,St,nt,$){return Q/=$/2,Q<1?nt/2*Q*Q*Q+St:nt/2*((Q-=2)*Q*Q+2)+St}function t(Q,St,nt,$){return nt*(Q/=$)*Q*Q*Q+St}function e(Q,St,nt,$){return-nt*((Q=Q/$-1)*Q*Q*Q-1)+St}function r(Q,St,nt,$){return Q/=$/2,Q<1?nt/2*Q*Q*Q*Q+St:-nt/2*((Q-=2)*Q*Q*Q-2)+St}function c(Q,St,nt,$){return nt*(Q/=$)*Q*Q*Q*Q+St}function p(Q,St,nt,$){return nt*((Q=Q/$-1)*Q*Q*Q*Q+1)+St}function s(Q,St,nt,$){return Q/=$/2,Q<1?nt/2*Q*Q*Q*Q*Q+St:nt/2*((Q-=2)*Q*Q*Q*Q+2)+St}function m(Q,St,nt,$){return-nt*Math.cos(Q/$*(Math.PI/2))+nt+St}function y(Q,St,nt,$){return nt*Math.sin(Q/$*(Math.PI/2))+St}function _(Q,St,nt,$){return-nt/2*(Math.cos(Math.PI*Q/$)-1)+St}function I(Q,St,nt,$){return Q===0?St:nt*Math.pow(2,10*(Q/$-1))+St}function z(Q,St,nt,$){return Q===$?St+nt:nt*(-Math.pow(2,-10*Q/$)+1)+St}function F(Q,St,nt,$){return Q===0?St:Q===$?St+nt:(Q/=$/2,Q<1?nt/2*Math.pow(2,10*(Q-1))+St:nt/2*(-Math.pow(2,-10*--Q)+2)+St)}function U(Q,St,nt,$){return-nt*(Math.sqrt(1-(Q/=$)*Q)-1)+St}function X(Q,St,nt,$){return nt*Math.sqrt(1-(Q=Q/$-1)*Q)+St}function J(Q,St,nt,$){return Q/=$/2,Q<1?-nt/2*(Math.sqrt(1-Q*Q)-1)+St:nt/2*(Math.sqrt(1-(Q-=2)*Q)+1)+St}function lt(Q,St,nt,$){var K=1.70158,G=0,q=nt;if(Q===0)return St;if(Q/=$,Q===1)return St+nt;G||(G=$*.3);var at=g(q,nt,G,K);return-i(at,Q,$)+St}function st(Q,St,nt,$){var K=1.70158,G=0,q=nt;if(Q===0)return St;if(Q/=$,Q===1)return St+nt;G||(G=$*.3);var at=g(q,nt,G,K);return at.a*Math.pow(2,-10*Q)*Math.sin((Q*$-at.s)*(2*Math.PI)/at.p)+at.c+St}function Mt(Q,St,nt,$){var K=1.70158,G=0,q=nt;if(Q===0)return St;if(Q/=$/2,Q===2)return St+nt;G||(G=$*.44999999999999996);var at=g(q,nt,G,K);return Q<1?-.5*i(at,Q,$)+St:at.a*Math.pow(2,-10*(Q-=1))*Math.sin((Q*$-at.s)*(2*Math.PI)/at.p)*.5+at.c+St}function It(Q,St,nt,$,K){return K===void 0&&(K=1.70158),nt*(Q/=$)*Q*((K+1)*Q-K)+St}function _t(Q,St,nt,$,K){return K===void 0&&(K=1.70158),nt*((Q=Q/$-1)*Q*((K+1)*Q+K)+1)+St}function rt(Q,St,nt,$,K){return K===void 0&&(K=1.70158),Q/=$/2,Q<1?nt/2*(Q*Q*(((K*=1.525)+1)*Q-K))+St:nt/2*((Q-=2)*Q*(((K*=1.525)+1)*Q+K)+2)+St}function Wt(Q,St,nt,$){return nt-V($-Q,0,nt,$)+St}function V(Q,St,nt,$){return(Q/=$)<.36363636363636365?nt*(7.5625*Q*Q)+St:Q<.7272727272727273?nt*(7.5625*(Q-=.5454545454545454)*Q+.75)+St:Q<.9090909090909091?nt*(7.5625*(Q-=.8181818181818182)*Q+.9375)+St:nt*(7.5625*(Q-=.9545454545454546)*Q+.984375)+St}function Zt(Q,St,nt,$){return Q<$/2?Wt(Q*2,0,nt,$)*.5+St:V(Q*2-$,0,nt,$)*.5+nt*.5+St}o.util.ease={easeInQuad:function(Q,St,nt,$){return nt*(Q/=$)*Q+St},easeOutQuad:function(Q,St,nt,$){return-nt*(Q/=$)*(Q-2)+St},easeInOutQuad:function(Q,St,nt,$){return Q/=$/2,Q<1?nt/2*Q*Q+St:-nt/2*(--Q*(Q-2)-1)+St},easeInCubic:function(Q,St,nt,$){return nt*(Q/=$)*Q*Q+St},easeOutCubic:d,easeInOutCubic:f,easeInQuart:t,easeOutQuart:e,easeInOutQuart:r,easeInQuint:c,easeOutQuint:p,easeInOutQuint:s,easeInSine:m,easeOutSine:y,easeInOutSine:_,easeInExpo:I,easeOutExpo:z,easeInOutExpo:F,easeInCirc:U,easeOutCirc:X,easeInOutCirc:J,easeInElastic:lt,easeOutElastic:st,easeInOutElastic:Mt,easeInBack:It,easeOutBack:_t,easeInOutBack:rt,easeInBounce:Wt,easeOutBounce:V,easeInOutBounce:Zt}}(),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.util.object.clone,t=i.util.toFixed,e=i.util.parseUnit,r=i.util.multiplyTransformMatrices,c=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},I="font-size",z="clip-path";i.svgValidTagNamesRegEx=X(c),i.svgViewBoxElementsRegEx=X(p),i.svgInvalidAncestorsRegEx=X(s),i.svgValidParentsRegEx=X(m),i.cssRules={},i.gradientDefs={},i.clipPaths={};function F(G){return G in y?y[G]:G}function U(G,q,at,et){var Ct=Object.prototype.toString.call(q)==="[object Array]",dt;if((G==="fill"||G==="stroke")&&q==="none")q="";else{if(G==="strokeUniform")return q==="non-scaling-stroke";if(G==="strokeDashArray")q==="none"?q=null:q=q.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(G==="transformMatrix")at&&at.transformMatrix?q=r(at.transformMatrix,i.parseTransformAttribute(q)):q=i.parseTransformAttribute(q);else if(G==="visible")q=q!=="none"&&q!=="hidden",at&&at.visible===!1&&(q=!1);else if(G==="opacity")q=parseFloat(q),at&&typeof at.opacity<"u"&&(q*=at.opacity);else if(G==="textAnchor")q=q==="start"?"left":q==="end"?"right":"center";else if(G==="charSpacing")dt=e(q,et)/et*1e3;else if(G==="paintFirst"){var yt=q.indexOf("fill"),Ot=q.indexOf("stroke"),q="fill";(yt>-1&&Ot>-1&&Ot<yt||yt===-1&&Ot>-1)&&(q="stroke")}else{if(G==="href"||G==="xlink:href"||G==="font")return q;if(G==="imageSmoothing")return q==="optimizeQuality";dt=Ct?q.map(e):e(q,et)}}return!Ct&&isNaN(dt)?q:dt}function X(G){return new RegExp("^("+G.join("|")+")\\b","i")}function J(G){for(var q in _)if(!(typeof G[_[q]]>"u"||G[q]==="")){if(typeof G[q]>"u"){if(!i.Object.prototype[q])continue;G[q]=i.Object.prototype[q]}if(G[q].indexOf("url(")!==0){var at=new i.Color(G[q]);G[q]=at.setAlpha(t(at.getAlpha()*G[_[q]],2)).toRgba()}}return G}function lt(G,q){var at,et=[],Ct,dt,yt;for(dt=0,yt=q.length;dt<yt;dt++)at=q[dt],Ct=G.getElementsByTagName(at),et=et.concat(Array.prototype.slice.call(Ct));return et}i.parseTransformAttribute=function(){function G(Et,Xt){var wt=i.util.cos(Xt[0]),ee=i.util.sin(Xt[0]),ge=0,Yt=0;Xt.length===3&&(ge=Xt[1],Yt=Xt[2]),Et[0]=wt,Et[1]=ee,Et[2]=-ee,Et[3]=wt,Et[4]=ge-(wt*ge-ee*Yt),Et[5]=Yt-(ee*ge+wt*Yt)}function q(Et,Xt){var wt=Xt[0],ee=Xt.length===2?Xt[1]:Xt[0];Et[0]=wt,Et[3]=ee}function at(Et,Xt,wt){Et[wt]=Math.tan(i.util.degreesToRadians(Xt[0]))}function et(Et,Xt){Et[4]=Xt[0],Xt.length===2&&(Et[5]=Xt[1])}var Ct=i.iMatrix,dt=i.reNum,yt=i.commaWsp,Ot="(?:(skewX)\\s*\\(\\s*("+dt+")\\s*\\))",Tt="(?:(skewY)\\s*\\(\\s*("+dt+")\\s*\\))",ct="(?:(rotate)\\s*\\(\\s*("+dt+")(?:"+yt+"("+dt+")"+yt+"("+dt+"))?\\s*\\))",it="(?:(scale)\\s*\\(\\s*("+dt+")(?:"+yt+"("+dt+"))?\\s*\\))",ot="(?:(translate)\\s*\\(\\s*("+dt+")(?:"+yt+"("+dt+"))?\\s*\\))",mt="(?:(matrix)\\s*\\(\\s*("+dt+")"+yt+"("+dt+")"+yt+"("+dt+")"+yt+"("+dt+")"+yt+"("+dt+")"+yt+"("+dt+")\\s*\\))",ft="(?:"+mt+"|"+ot+"|"+it+"|"+ct+"|"+Ot+"|"+Tt+")",bt="(?:"+ft+"(?:"+yt+"*"+ft+")*)",jt="^\\s*(?:"+bt+"?)\\s*$",Vt=new RegExp(jt),Gt=new RegExp(ft,"g");return function(Et){var Xt=Ct.concat(),wt=[];if(!Et||Et&&!Vt.test(Et))return Xt;Et.replace(Gt,function(ge){var Yt=new RegExp(ft).exec(ge).filter(function(ae){return!!ae}),xt=Yt[1],ne=Yt.slice(2).map(parseFloat);switch(xt){case"translate":et(Xt,ne);break;case"rotate":ne[0]=i.util.degreesToRadians(ne[0]),G(Xt,ne);break;case"scale":q(Xt,ne);break;case"skewX":at(Xt,ne,2);break;case"skewY":at(Xt,ne,1);break;case"matrix":Xt=ne;break}wt.push(Xt.concat()),Xt=Ct.concat()});for(var ee=wt[0];wt.length>1;)wt.shift(),ee=i.util.multiplyTransformMatrices(ee,wt[0]);return ee}}();function st(G,q){var at,et;G.replace(/;\s*$/,"").split(";").forEach(function(Ct){var dt=Ct.split(":");at=dt[0].trim().toLowerCase(),et=dt[1].trim(),q[at]=et})}function Mt(G,q){var at,et;for(var Ct in G)typeof G[Ct]>"u"||(at=Ct.toLowerCase(),et=G[Ct],q[at]=et)}function It(G,q){var at={};for(var et in i.cssRules[q])if(_t(G,et.split(" ")))for(var Ct in i.cssRules[q][et])at[Ct]=i.cssRules[q][et][Ct];return at}function _t(G,q){var at,et=!0;return at=Wt(G,q.pop()),at&&q.length&&(et=rt(G,q)),at&&et&&q.length===0}function rt(G,q){for(var at,et=!0;G.parentNode&&G.parentNode.nodeType===1&&q.length;)et&&(at=q.pop()),G=G.parentNode,et=Wt(G,at);return q.length===0}function Wt(G,q){var at=G.nodeName,et=G.getAttribute("class"),Ct=G.getAttribute("id"),dt,yt;if(dt=new RegExp("^"+at,"i"),q=q.replace(dt,""),Ct&&q.length&&(dt=new RegExp("#"+Ct+"(?![a-zA-Z\\-]+)","i"),q=q.replace(dt,"")),et&&q.length)for(et=et.split(" "),yt=et.length;yt--;)dt=new RegExp("\\."+et[yt]+"(?![a-zA-Z\\-]+)","i"),q=q.replace(dt,"");return q.length===0}function V(G,q){var at;if(G.getElementById&&(at=G.getElementById(q)),at)return at;var et,Ct,dt,yt=G.getElementsByTagName("*");for(Ct=0,dt=yt.length;Ct<dt;Ct++)if(et=yt[Ct],q===et.getAttribute("id"))return et}function Zt(G){for(var q=lt(G,["use","svg:use"]),at=0;q.length&&at<q.length;){var et=q[at],Ct=et.getAttribute("xlink:href")||et.getAttribute("href");if(Ct===null)return;var dt=Ct.substr(1),yt=et.getAttribute("x")||0,Ot=et.getAttribute("y")||0,Tt=V(G,dt).cloneNode(!0),ct=(Tt.getAttribute("transform")||"")+" translate("+yt+", "+Ot+")",it,ot=q.length,mt,ft,bt,jt,Vt=i.svgNS;if(St(Tt),/^svg$/i.test(Tt.nodeName)){var Gt=Tt.ownerDocument.createElementNS(Vt,"g");for(ft=0,bt=Tt.attributes,jt=bt.length;ft<jt;ft++)mt=bt.item(ft),Gt.setAttributeNS(Vt,mt.nodeName,mt.nodeValue);for(;Tt.firstChild;)Gt.appendChild(Tt.firstChild);Tt=Gt}for(ft=0,bt=et.attributes,jt=bt.length;ft<jt;ft++)mt=bt.item(ft),!(mt.nodeName==="x"||mt.nodeName==="y"||mt.nodeName==="xlink:href"||mt.nodeName==="href")&&(mt.nodeName==="transform"?ct=mt.nodeValue+" "+ct:Tt.setAttribute(mt.nodeName,mt.nodeValue));Tt.setAttribute("transform",ct),Tt.setAttribute("instantiated_by_use","1"),Tt.removeAttribute("id"),it=et.parentNode,it.replaceChild(Tt,et),q.length===ot&&at++}}var Q=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function St(G){if(!i.svgViewBoxElementsRegEx.test(G.nodeName))return{};var q=G.getAttribute("viewBox"),at=1,et=1,Ct=0,dt=0,yt,Ot,Tt,ct,it=G.getAttribute("width"),ot=G.getAttribute("height"),mt=G.getAttribute("x")||0,ft=G.getAttribute("y")||0,bt=G.getAttribute("preserveAspectRatio")||"",jt=!q||!(q=q.match(Q)),Vt=!it||!ot||it==="100%"||ot==="100%",Gt=jt&&Vt,Et={},Xt="",wt=0,ee=0;if(Et.width=0,Et.height=0,Et.toBeParsed=Gt,jt&&(mt||ft)&&G.parentNode&&G.parentNode.nodeName!=="#document"&&(Xt=" translate("+e(mt)+" "+e(ft)+") ",Tt=(G.getAttribute("transform")||"")+Xt,G.setAttribute("transform",Tt),G.removeAttribute("x"),G.removeAttribute("y")),Gt)return Et;if(jt)return Et.width=e(it),Et.height=e(ot),Et;if(Ct=-parseFloat(q[1]),dt=-parseFloat(q[2]),yt=parseFloat(q[3]),Ot=parseFloat(q[4]),Et.minX=Ct,Et.minY=dt,Et.viewBoxWidth=yt,Et.viewBoxHeight=Ot,Vt?(Et.width=yt,Et.height=Ot):(Et.width=e(it),Et.height=e(ot),at=Et.width/yt,et=Et.height/Ot),bt=i.util.parsePreserveAspectRatioAttribute(bt),bt.alignX!=="none"&&(bt.meetOrSlice==="meet"&&(et=at=at>et?et:at),bt.meetOrSlice==="slice"&&(et=at=at>et?at:et),wt=Et.width-yt*at,ee=Et.height-Ot*at,bt.alignX==="Mid"&&(wt/=2),bt.alignY==="Mid"&&(ee/=2),bt.alignX==="Min"&&(wt=0),bt.alignY==="Min"&&(ee=0)),at===1&&et===1&&Ct===0&&dt===0&&mt===0&&ft===0)return Et;if((mt||ft)&&G.parentNode.nodeName!=="#document"&&(Xt=" translate("+e(mt)+" "+e(ft)+") "),Tt=Xt+" matrix("+at+" 0 0 "+et+" "+(Ct*at+wt)+" "+(dt*et+ee)+") ",G.nodeName==="svg"){for(ct=G.ownerDocument.createElementNS(i.svgNS,"g");G.firstChild;)ct.appendChild(G.firstChild);G.appendChild(ct)}else ct=G,ct.removeAttribute("x"),ct.removeAttribute("y"),Tt=ct.getAttribute("transform")+Tt;return ct.setAttribute("transform",Tt),Et}function nt(G,q){for(;G&&(G=G.parentNode);)if(G.nodeName&&q.test(G.nodeName.replace("svg:",""))&&!G.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(G,q,at,et){if(!!G){Zt(G);var Ct=i.Object.__uid++,dt,yt,Ot=St(G),Tt=i.util.toArray(G.getElementsByTagName("*"));if(Ot.crossOrigin=et&&et.crossOrigin,Ot.svgUid=Ct,Tt.length===0&&i.isLikelyNode){Tt=G.selectNodes('//*[name(.)!="svg"]');var ct=[];for(dt=0,yt=Tt.length;dt<yt;dt++)ct[dt]=Tt[dt];Tt=ct}var it=Tt.filter(function(mt){return St(mt),i.svgValidTagNamesRegEx.test(mt.nodeName.replace("svg:",""))&&!nt(mt,i.svgInvalidAncestorsRegEx)});if(!it||it&&!it.length){q&&q([],{});return}var ot={};Tt.filter(function(mt){return mt.nodeName.replace("svg:","")==="clipPath"}).forEach(function(mt){var ft=mt.getAttribute("id");ot[ft]=i.util.toArray(mt.getElementsByTagName("*")).filter(function(bt){return i.svgValidTagNamesRegEx.test(bt.nodeName.replace("svg:",""))})}),i.gradientDefs[Ct]=i.getGradientDefs(G),i.cssRules[Ct]=i.getCSSRules(G),i.clipPaths[Ct]=ot,i.parseElements(it,function(mt,ft){q&&(q(mt,Ot,ft,Tt),delete i.gradientDefs[Ct],delete i.cssRules[Ct],delete i.clipPaths[Ct])},f(Ot),at,et)}};function $(G,q){var at=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],et="xlink:href",Ct=q.getAttribute(et).substr(1),dt=V(G,Ct);if(dt&&dt.getAttribute(et)&&$(G,dt),at.forEach(function(Ot){dt&&!q.hasAttribute(Ot)&&dt.hasAttribute(Ot)&&q.setAttribute(Ot,dt.getAttribute(Ot))}),!q.children.length)for(var yt=dt.cloneNode(!0);yt.firstChild;)q.appendChild(yt.firstChild);q.removeAttribute(et)}var K=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");d(i,{parseFontDeclaration:function(G,q){var at=G.match(K);if(!!at){var et=at[1],Ct=at[3],dt=at[4],yt=at[5],Ot=at[6];et&&(q.fontStyle=et),Ct&&(q.fontWeight=isNaN(parseFloat(Ct))?Ct:parseFloat(Ct)),dt&&(q.fontSize=e(dt)),Ot&&(q.fontFamily=Ot),yt&&(q.lineHeight=yt==="normal"?1:yt)}},getGradientDefs:function(G){var q=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],at=lt(G,q),et,Ct=0,dt={};for(Ct=at.length;Ct--;)et=at[Ct],et.getAttribute("xlink:href")&&$(G,et),dt[et.getAttribute("id")]=et;return dt},parseAttributes:function(G,q,at){if(!!G){var et,Ct={},dt,yt;typeof at>"u"&&(at=G.getAttribute("svgUid")),G.parentNode&&i.svgValidParentsRegEx.test(G.parentNode.nodeName)&&(Ct=i.parseAttributes(G.parentNode,q,at));var Ot=q.reduce(function(bt,jt){return et=G.getAttribute(jt),et&&(bt[jt]=et),bt},{}),Tt=d(It(G,at),i.parseStyleAttribute(G));Ot=d(Ot,Tt),Tt[z]&&G.setAttribute(z,Tt[z]),dt=yt=Ct.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,Ot[I]&&(Ot[I]=dt=e(Ot[I],yt));var ct,it,ot={};for(var mt in Ot)ct=F(mt),it=U(ct,Ot[mt],Ct,dt),ot[ct]=it;ot&&ot.font&&i.parseFontDeclaration(ot.font,ot);var ft=d(Ct,ot);return i.svgValidParentsRegEx.test(G.nodeName)?ft:J(ft)}},parseElements:function(G,q,at,et,Ct){new i.ElementsParser(G,q,at,et,Ct).parse()},parseStyleAttribute:function(G){var q={},at=G.getAttribute("style");return at&&(typeof at=="string"?st(at,q):Mt(at,q)),q},parsePointsAttribute:function(G){if(!G)return null;G=G.replace(/,/g," ").trim(),G=G.split(/\s+/);var q=[],at,et;for(at=0,et=G.length;at<et;at+=2)q.push({x:parseFloat(G[at]),y:parseFloat(G[at+1])});return q},getCSSRules:function(G){var q=G.getElementsByTagName("style"),at,et,Ct={},dt;for(at=0,et=q.length;at<et;at++){var yt=q[at].textContent;yt=yt.replace(/\/\*[\s\S]*?\*\//g,""),yt.trim()!==""&&(dt=yt.match(/[^{]*\{[\s\S]*?\}/g),dt=dt.map(function(Ot){return Ot.trim()}),dt.forEach(function(Ot){var Tt=Ot.match(/([\s\S]*?)\s*\{([^}]*)\}/),ct={},it=Tt[2].trim(),ot=it.replace(/;$/,"").split(/\s*;\s*/);for(at=0,et=ot.length;at<et;at++){var mt=ot[at].split(/\s*:\s*/),ft=mt[0],bt=mt[1];ct[ft]=bt}Ot=Tt[1],Ot.split(",").forEach(function(jt){jt=jt.replace(/^svg/i,"").trim(),jt!==""&&(Ct[jt]?i.util.object.extend(Ct[jt],ct):Ct[jt]=i.util.object.clone(ct))})}))}return Ct},loadSVGFromURL:function(G,q,at,et){G=G.replace(/^\n\s*/,"").trim(),new i.util.request(G,{method:"get",onComplete:Ct});function Ct(dt){var yt=dt.responseXML;if(!yt||!yt.documentElement)return q&&q(null),!1;i.parseSVGDocument(yt.documentElement,function(Ot,Tt,ct,it){q&&q(Ot,Tt,ct,it)},at,et)}},loadSVGFromString:function(G,q,at,et){var Ct=new i.window.DOMParser,dt=Ct.parseFromString(G.trim(),"text/xml");i.parseSVGDocument(dt.documentElement,function(yt,Ot,Tt,ct){q(yt,Ot,Tt,ct)},at,et)}})}(x),o.ElementsParser=function(g,i,d,f,t,e){this.elements=g,this.callback=i,this.options=d,this.reviver=f,this.svgUid=d&&d.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=e},function(g){g.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var i=this;this.elements.forEach(function(d,f){d.setAttribute("svgUid",i.svgUid),i.createObject(d,f)})},g.findTag=function(i){return o[o.util.string.capitalize(i.tagName.replace("svg:",""))]},g.createObject=function(i,d){var f=this.findTag(i);if(f&&f.fromElement)try{f.fromElement(i,this.createCallback(d,i),this.options)}catch(t){o.log(t)}else this.checkIfDone()},g.createCallback=function(i,d){var f=this;return function(t){var e;f.resolveGradient(t,d,"fill"),f.resolveGradient(t,d,"stroke"),t instanceof o.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(d)),t._removeTransformMatrix(e),f.resolveClipPath(t,d),f.reviver&&f.reviver(d,t),f.instances[i]=t,f.checkIfDone()}},g.extractPropertyDefinition=function(i,d,f){var t=i[d],e=this.regexUrl;if(!!e.test(t)){e.lastIndex=0;var r=e.exec(t)[1];return e.lastIndex=0,o[f][this.svgUid][r]}},g.resolveGradient=function(i,d,f){var t=this.extractPropertyDefinition(i,f,"gradientDefs");if(t){var e=d.getAttribute(f+"-opacity"),r=o.Gradient.fromElement(t,i,e,this.options);i.set(f,r)}},g.createClipPathCallback=function(i,d){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,d.push(f)}},g.resolveClipPath=function(i,d){var f=this.extractPropertyDefinition(i,"clipPath","clipPaths"),t,e,r,c,p,s;if(f){c=[],r=o.util.invertTransform(i.calcTransformMatrix());for(var m=f[0].parentNode,y=d;y.parentNode&&y.getAttribute("clip-path")!==i.clipPath;)y=y.parentNode;y.parentNode.appendChild(m);for(var _=0;_<f.length;_++)t=f[_],e=this.findTag(t),e.fromElement(t,this.createClipPathCallback(i,c),this.options);c.length===1?f=c[0]:f=new o.Group(c),p=o.util.multiplyTransformMatrices(r,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,y);var s=o.util.qrDecompose(p);f.flipX=!1,f.flipY=!1,f.set("scaleX",s.scaleX),f.set("scaleY",s.scaleY),f.angle=s.angle,f.skewX=s.skewX,f.skewY=0,f.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),i.clipPath=f}else delete i.clipPath},g.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(o.ElementsParser.prototype),function(g){var i=g.fabric||(g.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=d;function d(f,t){this.x=f,this.y=t}d.prototype={type:"point",constructor:d,add:function(f){return new d(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new d(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new d(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new d(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new d(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new d(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,t){return typeof t>"u"&&(t=.5),t=Math.max(Math.min(1,t),0),new d(this.x+(f.x-this.x)*t,this.y+(f.y-this.y)*t)},distanceFrom:function(f){var t=this.x-f.x,e=this.y-f.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new d(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new d(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,t){return this.x=f,this.y=t,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var t=this.x,e=this.y;this.x=f.x,this.y=f.y,f.x=t,f.y=e},clone:function(){return new d(this.x,this.y)}}}(x),function(g){var i=g.fabric||(g.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function d(f){this.status=f,this.points=[]}i.Intersection=d,i.Intersection.prototype={constructor:d,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},i.Intersection.intersectLineLine=function(f,t,e,r){var c,p=(r.x-e.x)*(f.y-e.y)-(r.y-e.y)*(f.x-e.x),s=(t.x-f.x)*(f.y-e.y)-(t.y-f.y)*(f.x-e.x),m=(r.y-e.y)*(t.x-f.x)-(r.x-e.x)*(t.y-f.y);if(m!==0){var y=p/m,_=s/m;0<=y&&y<=1&&0<=_&&_<=1?(c=new d("Intersection"),c.appendPoint(new i.Point(f.x+y*(t.x-f.x),f.y+y*(t.y-f.y)))):c=new d}else p===0||s===0?c=new d("Coincident"):c=new d("Parallel");return c},i.Intersection.intersectLinePolygon=function(f,t,e){var r=new d,c=e.length,p,s,m,y;for(y=0;y<c;y++)p=e[y],s=e[(y+1)%c],m=d.intersectLineLine(f,t,p,s),r.appendPoints(m.points);return r.points.length>0&&(r.status="Intersection"),r},i.Intersection.intersectPolygonPolygon=function(f,t){var e=new d,r=f.length,c;for(c=0;c<r;c++){var p=f[c],s=f[(c+1)%r],m=d.intersectLinePolygon(p,s,t);e.appendPoints(m.points)}return e.points.length>0&&(e.status="Intersection"),e},i.Intersection.intersectPolygonRectangle=function(f,t,e){var r=t.min(e),c=t.max(e),p=new i.Point(c.x,r.y),s=new i.Point(r.x,c.y),m=d.intersectLinePolygon(r,p,f),y=d.intersectLinePolygon(p,c,f),_=d.intersectLinePolygon(c,s,f),I=d.intersectLinePolygon(s,r,f),z=new d;return z.appendPoints(m.points),z.appendPoints(y.points),z.appendPoints(_.points),z.appendPoints(I.points),z.points.length>0&&(z.status="Intersection"),z}}(x),function(g){var i=g.fabric||(g.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function d(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}i.Color=d,i.Color.prototype={_tryParsingColor:function(t){var e;t in d.colorNameMap&&(t=d.colorNameMap[t]),t==="transparent"&&(e=[255,255,255,0]),e||(e=d.sourceFromHex(t)),e||(e=d.sourceFromRgb(t)),e||(e=d.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,r){t/=255,e/=255,r/=255;var c,p,s,m=i.util.array.max([t,e,r]),y=i.util.array.min([t,e,r]);if(s=(m+y)/2,m===y)c=p=0;else{var _=m-y;switch(p=s>.5?_/(2-m-y):_/(m+y),m){case t:c=(e-r)/_+(e<r?6:0);break;case e:c=(r-t)/_+2;break;case r:c=(t-e)/_+4;break}c/=6}return[Math.round(c*360),Math.round(p*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),e,r,c;return e=t[0].toString(16),e=e.length===1?"0"+e:e,r=t[1].toString(16),r=r.length===1?"0"+r:r,c=t[2].toString(16),c=c.length===1?"0"+c:c,e.toUpperCase()+r.toUpperCase()+c.toUpperCase()},toHexa:function(){var t=this.getSource(),e;return e=Math.round(t[3]*255),e=e.toString(16),e=e.length===1?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((t[0]*.3+t[1]*.59+t[2]*.11).toFixed(0),10),r=t[3];return this.setSource([e,e,e,r]),this},toBlackWhite:function(t){var e=this.getSource(),r=(e[0]*.3+e[1]*.59+e[2]*.11).toFixed(0),c=e[3];return t=t||127,r=Number(r)<Number(t)?0:255,this.setSource([r,r,r,c]),this},overlayWith:function(t){t instanceof d||(t=new d(t));var e=[],r=this.getAlpha(),c=.5,p=this.getSource(),s=t.getSource(),m;for(m=0;m<3;m++)e.push(Math.round(p[m]*(1-c)+s[m]*c));return e[3]=r,this.setSource(e),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?t+(e-t)*6*r:r<.5?e:r<.6666666666666666?t+(e-t)*(.6666666666666666-r)*6:t}i.Color.fromRgb=function(t){return d.fromSource(d.sourceFromRgb(t))},i.Color.sourceFromRgb=function(t){var e=t.match(d.reRGBa);if(e){var r=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),c=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),p=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(r,10),parseInt(c,10),parseInt(p,10),e[4]?parseFloat(e[4]):1]}},i.Color.fromRgba=d.fromRgb,i.Color.fromHsl=function(t){return d.fromSource(d.sourceFromHsl(t))},i.Color.sourceFromHsl=function(t){var e=t.match(d.reHSLa);if(!!e){var r=(parseFloat(e[1])%360+360)%360/360,c=parseFloat(e[2])/(/%$/.test(e[2])?100:1),p=parseFloat(e[3])/(/%$/.test(e[3])?100:1),s,m,y;if(c===0)s=m=y=p;else{var _=p<=.5?p*(c+1):p+c-p*c,I=p*2-_;s=f(I,_,r+.3333333333333333),m=f(I,_,r),y=f(I,_,r-.3333333333333333)}return[Math.round(s*255),Math.round(m*255),Math.round(y*255),e[4]?parseFloat(e[4]):1]}},i.Color.fromHsla=d.fromHsl,i.Color.fromHex=function(t){return d.fromSource(d.sourceFromHex(t))},i.Color.sourceFromHex=function(t){if(t.match(d.reHex)){var e=t.slice(t.indexOf("#")+1),r=e.length===3||e.length===4,c=e.length===8||e.length===4,p=r?e.charAt(0)+e.charAt(0):e.substring(0,2),s=r?e.charAt(1)+e.charAt(1):e.substring(2,4),m=r?e.charAt(2)+e.charAt(2):e.substring(4,6),y=c?r?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(p,16),parseInt(s,16),parseInt(m,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},i.Color.fromSource=function(t){var e=new d;return e.setSource(t),e}}(x),function(g){var i=g.fabric||(g.fabric={}),d=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],t={},e="left",r="top",c="right",p="bottom",s="center",m={top:p,bottom:r,left:c,right:e,center:s},y=i.util.radiansToDegrees,_=Math.sign||function(ct){return(ct>0)-(ct<0)||+ct};function I(ct,it){var ot=ct.angle+y(Math.atan2(it.y,it.x))+360;return Math.round(ot%360/45)}function z(ct,it){var ot=it.transform.target,mt=ot.canvas,ft=i.util.object.clone(it);ft.target=ot,mt&&mt.fire("object:"+ct,ft),ot.fire(ct,it)}function F(ct,it){var ot=it.canvas,mt=ot.uniScaleKey,ft=ct[mt];return ot.uniformScaling&&!ft||!ot.uniformScaling&&ft}function U(ct){return ct.originX===s&&ct.originY===s}function X(ct,it,ot){var mt=ct.lockScalingX,ft=ct.lockScalingY;return!!(mt&&ft||!it&&(mt||ft)&&ot||mt&&it==="x"||ft&&it==="y")}function J(ct,it,ot){var mt="not-allowed",ft=F(ct,ot),bt="";if(it.x!==0&&it.y===0?bt="x":it.x===0&&it.y!==0&&(bt="y"),X(ot,bt,ft))return mt;var jt=I(ot,it);return d[jt]+"-resize"}function lt(ct,it,ot){var mt="not-allowed";if(it.x!==0&&ot.lockSkewingY||it.y!==0&&ot.lockSkewingX)return mt;var ft=I(ot,it)%4;return f[ft]+"-resize"}function st(ct,it,ot){return ct[ot.canvas.altActionKey]?t.skewCursorStyleHandler(ct,it,ot):t.scaleCursorStyleHandler(ct,it,ot)}function Mt(ct,it,ot){var mt=ct[ot.canvas.altActionKey];if(it.x===0)return mt?"skewX":"scaleY";if(it.y===0)return mt?"skewY":"scaleX"}function It(ct,it,ot){return ot.lockRotation?"not-allowed":it.cursorStyle}function _t(ct,it,ot,mt){return{e:ct,transform:it,pointer:{x:ot,y:mt}}}function rt(ct){return function(it,ot,mt,ft){var bt=ot.target,jt=bt.getCenterPoint(),Vt=bt.translateToOriginPoint(jt,ot.originX,ot.originY),Gt=ct(it,ot,mt,ft);return bt.setPositionByOrigin(Vt,ot.originX,ot.originY),Gt}}function Wt(ct,it){return function(ot,mt,ft,bt){var jt=it(ot,mt,ft,bt);return jt&&z(ct,_t(ot,mt,ft,bt)),jt}}function V(ct,it,ot,mt,ft){var bt=ct.target,jt=bt.controls[ct.corner],Vt=bt.canvas.getZoom(),Gt=bt.padding/Vt,Et=bt.toLocalPoint(new i.Point(mt,ft),it,ot);return Et.x>=Gt&&(Et.x-=Gt),Et.x<=-Gt&&(Et.x+=Gt),Et.y>=Gt&&(Et.y-=Gt),Et.y<=Gt&&(Et.y+=Gt),Et.x-=jt.offsetX,Et.y-=jt.offsetY,Et}function Zt(ct){return ct.flipX!==ct.flipY}function Q(ct,it,ot,mt,ft){if(ct[it]!==0){var bt=ct._getTransformedDimensions()[mt],jt=ft/bt*ct[ot];ct.set(ot,jt)}}function St(ct,it,ot,mt){var ft=it.target,bt=ft._getTransformedDimensions(0,ft.skewY),jt=V(it,it.originX,it.originY,ot,mt),Vt=Math.abs(jt.x*2)-bt.x,Gt=ft.skewX,Et;Vt<2?Et=0:(Et=y(Math.atan2(Vt/ft.scaleX,bt.y/ft.scaleY)),it.originX===e&&it.originY===p&&(Et=-Et),it.originX===c&&it.originY===r&&(Et=-Et),Zt(ft)&&(Et=-Et));var Xt=Gt!==Et;if(Xt){var wt=ft._getTransformedDimensions().y;ft.set("skewX",Et),Q(ft,"skewY","scaleY","y",wt)}return Xt}function nt(ct,it,ot,mt){var ft=it.target,bt=ft._getTransformedDimensions(ft.skewX,0),jt=V(it,it.originX,it.originY,ot,mt),Vt=Math.abs(jt.y*2)-bt.y,Gt=ft.skewY,Et;Vt<2?Et=0:(Et=y(Math.atan2(Vt/ft.scaleY,bt.x/ft.scaleX)),it.originX===e&&it.originY===p&&(Et=-Et),it.originX===c&&it.originY===r&&(Et=-Et),Zt(ft)&&(Et=-Et));var Xt=Gt!==Et;if(Xt){var wt=ft._getTransformedDimensions().x;ft.set("skewY",Et),Q(ft,"skewX","scaleX","x",wt)}return Xt}function $(ct,it,ot,mt){var ft=it.target,bt=ft.skewX,jt,Vt=it.originY;if(ft.lockSkewingX)return!1;if(bt===0){var Gt=V(it,s,s,ot,mt);Gt.x>0?jt=e:jt=c}else bt>0&&(jt=Vt===r?e:c),bt<0&&(jt=Vt===r?c:e),Zt(ft)&&(jt=jt===e?c:e);it.originX=jt;var Et=Wt("skewing",rt(St));return Et(ct,it,ot,mt)}function K(ct,it,ot,mt){var ft=it.target,bt=ft.skewY,jt,Vt=it.originX;if(ft.lockSkewingY)return!1;if(bt===0){var Gt=V(it,s,s,ot,mt);Gt.y>0?jt=r:jt=p}else bt>0&&(jt=Vt===e?r:p),bt<0&&(jt=Vt===e?p:r),Zt(ft)&&(jt=jt===r?p:r);it.originY=jt;var Et=Wt("skewing",rt(nt));return Et(ct,it,ot,mt)}function G(ct,it,ot,mt){var ft=it,bt=ft.target,jt=bt.translateToOriginPoint(bt.getCenterPoint(),ft.originX,ft.originY);if(bt.lockRotation)return!1;var Vt=Math.atan2(ft.ey-jt.y,ft.ex-jt.x),Gt=Math.atan2(mt-jt.y,ot-jt.x),Et=y(Gt-Vt+ft.theta),Xt=!0;if(bt.snapAngle>0){var wt=bt.snapAngle,ee=bt.snapThreshold||wt,ge=Math.ceil(Et/wt)*wt,Yt=Math.floor(Et/wt)*wt;Math.abs(Et-Yt)<ee?Et=Yt:Math.abs(Et-ge)<ee&&(Et=ge)}return Et<0&&(Et=360+Et),Et%=360,Xt=bt.angle!==Et,bt.angle=Et,Xt}function q(ct,it,ot,mt,ft){ft=ft||{};var bt=it.target,jt=bt.lockScalingX,Vt=bt.lockScalingY,Gt=ft.by,Et,Xt,wt,ee,ge=F(ct,bt),Yt=X(bt,Gt,ge),xt,ne,ae=it.gestureScale;if(Yt)return!1;if(ae)Xt=it.scaleX*ae,wt=it.scaleY*ae;else{if(Et=V(it,it.originX,it.originY,ot,mt),xt=Gt!=="y"?_(Et.x):1,ne=Gt!=="x"?_(Et.y):1,it.signX||(it.signX=xt),it.signY||(it.signY=ne),bt.lockScalingFlip&&(it.signX!==xt||it.signY!==ne))return!1;if(ee=bt._getTransformedDimensions(),ge&&!Gt){var oe=Math.abs(Et.x)+Math.abs(Et.y),Se=it.original,kt=Math.abs(ee.x*Se.scaleX/bt.scaleX)+Math.abs(ee.y*Se.scaleY/bt.scaleY),Dt=oe/kt;Xt=Se.scaleX*Dt,wt=Se.scaleY*Dt}else Xt=Math.abs(Et.x*bt.scaleX/ee.x),wt=Math.abs(Et.y*bt.scaleY/ee.y);U(it)&&(Xt*=2,wt*=2),it.signX!==xt&&Gt!=="y"&&(it.originX=m[it.originX],Xt*=-1,it.signX=xt),it.signY!==ne&&Gt!=="x"&&(it.originY=m[it.originY],wt*=-1,it.signY=ne)}var Ft=bt.scaleX,Rt=bt.scaleY;return Gt?(Gt==="x"&&bt.set("scaleX",Xt),Gt==="y"&&bt.set("scaleY",wt)):(!jt&&bt.set("scaleX",Xt),!Vt&&bt.set("scaleY",wt)),Ft!==bt.scaleX||Rt!==bt.scaleY}function at(ct,it,ot,mt){return q(ct,it,ot,mt)}function et(ct,it,ot,mt){return q(ct,it,ot,mt,{by:"x"})}function Ct(ct,it,ot,mt){return q(ct,it,ot,mt,{by:"y"})}function dt(ct,it,ot,mt){return ct[it.target.canvas.altActionKey]?t.skewHandlerX(ct,it,ot,mt):t.scalingY(ct,it,ot,mt)}function yt(ct,it,ot,mt){return ct[it.target.canvas.altActionKey]?t.skewHandlerY(ct,it,ot,mt):t.scalingX(ct,it,ot,mt)}function Ot(ct,it,ot,mt){var ft=it.target,bt=V(it,it.originX,it.originY,ot,mt),jt=ft.strokeWidth/(ft.strokeUniform?ft.scaleX:1),Vt=U(it)?2:1,Gt=ft.width,Et=Math.abs(bt.x*Vt/ft.scaleX)-jt;return ft.set("width",Math.max(Et,0)),Gt!==Et}function Tt(ct,it,ot,mt){var ft=it.target,bt=ot-it.offsetX,jt=mt-it.offsetY,Vt=!ft.get("lockMovementX")&&ft.left!==bt,Gt=!ft.get("lockMovementY")&&ft.top!==jt;return Vt&&ft.set("left",bt),Gt&&ft.set("top",jt),(Vt||Gt)&&z("moving",_t(ct,it,ot,mt)),Vt||Gt}t.scaleCursorStyleHandler=J,t.skewCursorStyleHandler=lt,t.scaleSkewCursorStyleHandler=st,t.rotationWithSnapping=Wt("rotating",rt(G)),t.scalingEqually=Wt("scaling",rt(at)),t.scalingX=Wt("scaling",rt(et)),t.scalingY=Wt("scaling",rt(Ct)),t.scalingYOrSkewingX=dt,t.scalingXOrSkewingY=yt,t.changeWidth=Wt("resizing",rt(Ot)),t.skewHandlerX=$,t.skewHandlerY=K,t.dragHandler=Tt,t.scaleOrSkewActionName=Mt,t.rotationStyleHandler=It,t.fireEvent=z,t.wrapWithFixedAnchor=rt,t.wrapWithFireEvent=Wt,t.getLocalPoint=V,i.controlsUtils=t}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.degreesToRadians,f=i.controlsUtils;function t(r,c,p,s,m){s=s||{};var y=this.sizeX||s.cornerSize||m.cornerSize,_=this.sizeY||s.cornerSize||m.cornerSize,I=typeof s.transparentCorners<"u"?s.transparentCorners:m.transparentCorners,z=I?"stroke":"fill",F=!I&&(s.cornerStrokeColor||m.cornerStrokeColor),U=c,X=p,J;r.save(),r.fillStyle=s.cornerColor||m.cornerColor,r.strokeStyle=s.cornerStrokeColor||m.cornerStrokeColor,y>_?(J=y,r.scale(1,_/y),X=p*y/_):_>y?(J=_,r.scale(y/_,1),U=c*_/y):J=y,r.lineWidth=1,r.beginPath(),r.arc(U,X,J/2,0,2*Math.PI,!1),r[z](),F&&r.stroke(),r.restore()}function e(r,c,p,s,m){s=s||{};var y=this.sizeX||s.cornerSize||m.cornerSize,_=this.sizeY||s.cornerSize||m.cornerSize,I=typeof s.transparentCorners<"u"?s.transparentCorners:m.transparentCorners,z=I?"stroke":"fill",F=!I&&(s.cornerStrokeColor||m.cornerStrokeColor),U=y/2,X=_/2;r.save(),r.fillStyle=s.cornerColor||m.cornerColor,r.strokeStyle=s.cornerStrokeColor||m.cornerStrokeColor,r.lineWidth=1,r.translate(c,p),r.rotate(d(m.angle)),r[z+"Rect"](-U,-X,y,_),F&&r.strokeRect(-U,-X,y,_),r.restore()}f.renderCircleControl=t,f.renderSquareControl=e}(x),function(g){var i=g.fabric||(g.fabric={});function d(f){for(var t in f)this[t]=f[t]}i.Control=d,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,t){return t.cursorStyle},getActionName:function(f,t){return t.actionName},getVisibility:function(f,t){var e=f._controlsVisibility;return e&&typeof e[t]<"u"?e[t]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,t){var e=i.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},t);return e},calcCornerCoords:function(f,t,e,r,c){var p,s,m,y,_=c?this.touchSizeX:this.sizeX,I=c?this.touchSizeY:this.sizeY;if(_&&I&&_!==I){var z=Math.atan2(I,_),F=Math.sqrt(_*_+I*I)/2,U=z-i.util.degreesToRadians(f),X=Math.PI/2-z-i.util.degreesToRadians(f);p=F*i.util.cos(U),s=F*i.util.sin(U),m=F*i.util.cos(X),y=F*i.util.sin(X)}else{var J=_&&I?_:t;F=J*.7071067812;var U=i.util.degreesToRadians(45-f);p=m=F*i.util.cos(U),s=y=F*i.util.sin(U)}return{tl:{x:e-y,y:r-m},tr:{x:e+p,y:r-s},bl:{x:e-p,y:r+s},br:{x:e+y,y:r+m}}},render:function(f,t,e,r,c){switch(r=r||{},r.cornerStyle||c.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,f,t,e,r,c);break;default:i.controlsUtils.renderSquareControl.call(this,f,t,e,r,c)}}}}(x),function(){function g(e,r){var c=e.getAttribute("style"),p=e.getAttribute("offset")||0,s,m,y,_;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,c){var I=c.split(/\s*;\s*/);for(I[I.length-1]===""&&I.pop(),_=I.length;_--;){var z=I[_].split(/\s*:\s*/),F=z[0].trim(),U=z[1].trim();F==="stop-color"?s=U:F==="stop-opacity"&&(y=U)}}return s||(s=e.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=e.getAttribute("stop-opacity")),s=new o.Color(s),m=s.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=m*r,{offset:p,color:s.toRgb(),opacity:y}}function i(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}function d(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}var f=o.util.object.clone;o.Gradient=o.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var r,c=this;Object.keys(e).forEach(function(p){c[p]=e[p]}),this.id?this.id+="_"+o.Object.__uid++:this.id=o.Object.__uid++,r={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},this.type==="radial"&&(r.r1=e.coords.r1||0,r.r2=e.coords.r2||0),this.coords=r,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var r in e){var c=new o.Color(e[r]);this.colorStops.push({offset:parseFloat(r),color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(e){var r={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return o.util.populateWithProperties(this,r,e),r},toSVG:function(e,m){var c=f(this.coords,!0),p,s,m=m||{},y,_,I=f(this.colorStops,!0),z=c.r1>c.r2,F=this.gradientTransform?this.gradientTransform.concat():o.iMatrix.concat(),U=-this.offsetX,X=-this.offsetY,J=!!m.additionalTransform,lt=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(I.sort(function(rt,Wt){return rt.offset-Wt.offset}),lt==="objectBoundingBox"?(U/=e.width,X/=e.height):(U+=e.width/2,X+=e.height/2),e.type==="path"&&this.gradientUnits!=="percentage"&&(U-=e.pathOffset.x,X-=e.pathOffset.y),F[4]-=U,F[5]-=X,_='id="SVGID_'+this.id+'" gradientUnits="'+lt+'"',_+=' gradientTransform="'+(J?m.additionalTransform+" ":"")+o.util.matrixToSVG(F)+'" ',this.type==="linear"?y=["<linearGradient ",_,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",_,' cx="',z?c.x1:c.x2,'" cy="',z?c.y1:c.y2,'" r="',z?c.r1:c.r2,'" fx="',z?c.x2:c.x1,'" fy="',z?c.y2:c.y1,`">
`]),this.type==="radial"){if(z)for(I=I.concat(),I.reverse(),p=0,s=I.length;p<s;p++)I[p].offset=1-I[p].offset;var st=Math.min(c.r1,c.r2);if(st>0){var Mt=Math.max(c.r1,c.r2),It=st/Mt;for(p=0,s=I.length;p<s;p++)I[p].offset+=It*(1-I[p].offset)}}for(p=0,s=I.length;p<s;p++){var _t=I[p];y.push("<stop ",'offset="',_t.offset*100+"%",'" style="stop-color:',_t.color,typeof _t.opacity<"u"?";stop-opacity: "+_t.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(e){var r,c=o.util.object.clone(this.coords),p,s;if(!!this.type){for(this.type==="linear"?r=e.createLinearGradient(c.x1,c.y1,c.x2,c.y2):this.type==="radial"&&(r=e.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),p=0,s=this.colorStops.length;p<s;p++){var m=this.colorStops[p].color,y=this.colorStops[p].opacity,_=this.colorStops[p].offset;typeof y<"u"&&(m=new o.Color(m).setAlpha(y).toRgba()),r.addColorStop(_,m)}return r}}}),o.util.object.extend(o.Gradient,{fromElement:function(e,r,c,p){var s=parseFloat(c)/(/%$/.test(c)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var m=e.getElementsByTagName("stop"),y,_=e.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",I=e.getAttribute("gradientTransform")||"",z=[],F,U,X=0,J=0,lt;for(e.nodeName==="linearGradient"||e.nodeName==="LINEARGRADIENT"?(y="linear",F=i(e)):(y="radial",F=d(e)),U=m.length;U--;)z.push(g(m[U],s));lt=o.parseTransformAttribute(I),t(r,F,p,_),_==="pixels"&&(X=-r.left,J=-r.top);var st=new o.Gradient({id:e.getAttribute("id"),type:y,coords:F,colorStops:z,gradientUnits:_,gradientTransform:lt,offsetX:X,offsetY:J});return st}});function t(e,r,c,p){var s,m;Object.keys(r).forEach(function(y){s=r[y],s==="Infinity"?m=1:s==="-Infinity"?m=0:(m=parseFloat(r[y],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(m*=.01,p==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(m*=c.viewBoxWidth||c.width),(y==="y1"||y==="y2")&&(m*=c.viewBoxHeight||c.height)))),r[y]=m})}}(),function(){var g=o.util.toFixed;o.Pattern=o.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,d){if(i||(i={}),this.id=o.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){d&&d(this);return}else{var f=this;this.source=o.util.createImage(),o.util.loadImage(i.source,function(t,e){f.source=t,d&&d(f,e)},null,this.crossOrigin)}},toObject:function(i){var d=o.Object.NUM_FRACTION_DIGITS,f,t;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),t={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,d),offsetY:g(this.offsetY,d),patternTransform:this.patternTransform?this.patternTransform.concat():null},o.util.populateWithProperties(this,t,i),t},toSVG:function(i){var d=typeof this.source=="function"?this.source():this.source,f=d.width/i.width,t=d.height/i.height,e=this.offsetX/i.width,r=this.offsetY/i.height,c="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(t=1,r&&(t+=Math.abs(r))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,e&&(f+=Math.abs(e))),d.src?c=d.src:d.toDataURL&&(c=d.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+r+'" width="'+f+'" height="'+t+`">
<image x="0" y="0" width="`+d.width+'" height="'+d.height+'" xlink:href="'+c+`"></image>
</pattern>
`},setOptions:function(i){for(var d in i)this[d]=i[d]},toLive:function(i){var d=this.source;return!d||typeof d.src<"u"&&(!d.complete||d.naturalWidth===0||d.naturalHeight===0)?"":i.createPattern(d,this.repeat)}})}(),function(g){var i=g.fabric||(g.fabric={}),d=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var t in f)this[t]=f[t];this.id=i.Object.__uid++},_parseShadow:function(f){var t=f.trim(),e=i.Shadow.reOffsetsAndBlur.exec(t)||[],r=t.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var t=40,e=40,r=i.Object.NUM_FRACTION_DIGITS,c=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-f.angle)),p=20,s=new i.Color(this.color);return f.width&&f.height&&(t=d((Math.abs(c.x)+this.blur)/f.width,r)*100+p,e=d((Math.abs(c.y)+this.blur)/f.height,r)*100+p),f.flipX&&(c.x*=-1),f.flipY&&(c.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+t+'%" width="'+(100+2*t)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+d(this.blur?this.blur/2:0,r)+`"></feGaussianBlur>
	<feOffset dx="`+d(c.x,r)+'" dy="'+d(c.y,r)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},t=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==t[e]&&(f[e]=this[e])},this),f}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(x),function(){if(o.StaticCanvas){o.warn("fabric.StaticCanvas is already defined.");return}var g=o.util.object.extend,i=o.util.getElementOffset,d=o.util.removeFromArray,f=o.util.toFixed,t=o.util.transformPoint,e=o.util.invertTransform,r=o.util.getNodeCanvas,c=o.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");o.StaticCanvas=o.util.createClass(o.CommonMethods,{initialize:function(s,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:o.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,m){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,y),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,y),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,y),m.overlayColor&&this.setOverlayColor(m.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return o.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?o.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var s=o.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,m,y){m.setAttribute("width",this.width*s),m.setAttribute("height",this.height*s),y.scale(s,s)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(s,m,y){return this.__setBgOverlayImage("overlayImage",s,m,y)},setBackgroundImage:function(s,m,y){return this.__setBgOverlayImage("backgroundImage",s,m,y)},setOverlayColor:function(s,m){return this.__setBgOverlayColor("overlayColor",s,m)},setBackgroundColor:function(s,m){return this.__setBgOverlayColor("backgroundColor",s,m)},__setBgOverlayImage:function(s,m,y,_){return typeof m=="string"?o.util.loadImage(m,function(I,z){if(I){var F=new o.Image(I,_);this[s]=F,F.canvas=this}y&&y(I,z)},this,_&&_.crossOrigin):(_&&m.setOptions(_),this[s]=m,m&&(m.canvas=this),y&&y(m,!1)),this},__setBgOverlayColor:function(s,m,y){return this[s]=m,this._initGradient(m,s),this._initPattern(m,s,y),this},_createCanvasElement:function(){var s=c();if(!s||(s.style||(s.style={}),typeof s.getContext>"u"))throw p;return s},_initOptions:function(s){var m=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=o.util.getById(s)||this._createCanvasElement(),o.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,m){return this.setDimensions({width:s},m)},setHeight:function(s,m){return this.setDimensions({height:s},m)},setDimensions:function(s,m){var y;m=m||{};for(var _ in s)y=s[_],m.cssOnly||(this._setBackstoreDimension(_,s[_]),y+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(_,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,m){return this.lowerCanvasEl[s]=m,this.upperCanvasEl&&(this.upperCanvasEl[s]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=m),this[s]=m,this},_setCssDimension:function(s,m){return this.lowerCanvasEl.style[s]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=m),this.wrapperEl&&(this.wrapperEl.style[s]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var m=this._activeObject,y=this.backgroundImage,_=this.overlayImage,I,z,F;for(this.viewportTransform=s,z=0,F=this._objects.length;z<F;z++)I=this._objects[z],I.group||I.setCoords(!0);return m&&m.setCoords(),y&&y.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,m){var y=s,_=this.viewportTransform.slice(0);s=t(s,e(this.viewportTransform)),_[0]=m,_[3]=m;var I=t(s,_);return _[4]+=y.x-I.x,_[5]+=y.y-I.y,this.setViewportTransform(_)},setZoom:function(s){return this.zoomToPoint(new o.Point(0,0),s),this},absolutePan:function(s){var m=this.viewportTransform.slice(0);return m[4]=-s.x,m[5]=-s.y,this.setViewportTransform(m)},relativePan:function(s){return this.absolutePan(new o.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=o.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},m=this.width,y=this.height,_=e(this.viewportTransform);return s.tl=t({x:0,y:0},_),s.br=t({x:m,y},_),s.tr=new o.Point(s.br.x,s.tl.y),s.bl=new o.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,m){var y=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),o.util.setImageSmoothing(s,this.imageSmoothingEnabled),this.fire("before:render",{ctx:s}),this._renderBackground(s),s.save(),s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(s,m),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var m=this.viewportTransform,y=this.clipPath;s.save(),s.transform(m[0],m[1],m[2],m[3],m[4],m[5]),s.globalCompositeOperation="destination-in",y.transform(s),s.scale(1/y.zoomX,1/y.zoomY),s.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),s.restore()},_renderObjects:function(s,m){var y,_;for(y=0,_=m.length;y<_;++y)m[y]&&m[y].render(s)},_renderBackgroundOrOverlay:function(s,m){var y=this[m+"Color"],_=this[m+"Image"],I=this.viewportTransform,z=this[m+"Vpt"];if(!(!y&&!_)){if(y){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=y.toLive?y.toLive(s,this):y,z&&s.transform(I[0],I[1],I[2],I[3],I[4],I[5]),s.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var F=y.gradientTransform||y.patternTransform;F&&s.transform(F[0],F[1],F[2],F[3],F[4],F[5]),s.fill(),s.restore()}_&&(s.save(),z&&s.transform(I[0],I[1],I[2],I[3],I[4],I[5]),_.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(s){return this._centerObject(s,new o.Point(this.getCenter().left,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new o.Point(s.getCenterPoint().x,this.getCenter().top))},centerObject:function(s){var m=this.getCenter();return this._centerObject(s,new o.Point(m.left,m.top))},viewportCenterObject:function(s){var m=this.getVpCenter();return this._centerObject(s,m)},viewportCenterObjectH:function(s){var m=this.getVpCenter();return this._centerObject(s,new o.Point(m.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var m=this.getVpCenter();return this._centerObject(s,new o.Point(s.getCenterPoint().x,m.y))},getVpCenter:function(){var s=this.getCenter(),m=e(this.viewportTransform);return t({x:s.left,y:s.top},m)},_centerObject:function(s,m){return s.setPositionByOrigin(m,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,m){var y=this.clipPath,_={version:o.version,objects:this._toObjects(s,m)};return y&&!y.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,s,m)),g(_,this.__serializeBgOverlay(s,m)),o.util.populateWithProperties(this,_,m),_},_toObjects:function(s,m){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,s,m)},this)},_toObject:function(s,m,y){var _;this.includeDefaultValues||(_=s.includeDefaultValues,s.includeDefaultValues=!1);var I=s[m](y);return this.includeDefaultValues||(s.includeDefaultValues=_),I},__serializeBgOverlay:function(s,m){var y={},_=this.backgroundImage,I=this.overlayImage,z=this.backgroundColor,F=this.overlayColor;return z&&z.toObject?z.excludeFromExport||(y.background=z.toObject(m)):z&&(y.background=z),F&&F.toObject?F.excludeFromExport||(y.overlay=F.toObject(m)):F&&(y.overlay=F),_&&!_.excludeFromExport&&(y.backgroundImage=this._toObject(_,s,m)),I&&!I.excludeFromExport&&(y.overlayImage=this._toObject(I,s,m)),y},svgViewportTransformation:!0,toSVG:function(s,m){s||(s={}),s.reviver=m;var y=[];return this._setSVGPreamble(y,s),this._setSVGHeader(y,s),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",m),this._setSVGObjects(y,m),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",m),y.push("</svg>"),y.join("")},_setSVGPreamble:function(s,m){m.suppressPreamble||s.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,m){var y=m.width||this.width,_=m.height||this.height,I,z='viewBox="0 0 '+this.width+" "+this.height+'" ',F=o.Object.NUM_FRACTION_DIGITS;m.viewBox?z='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(I=this.viewportTransform,z='viewBox="'+f(-I[4]/I[0],F)+" "+f(-I[5]/I[3],F)+" "+f(this.width/I[0],F)+" "+f(this.height/I[3],F)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',_,'" ',z,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",o.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(s){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+o.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,m=["background","overlay"].map(function(y){var _=s[y+"Color"];if(_&&_.toLive){var I=s[y+"Vpt"],z=s.viewportTransform,F={width:s.width/(I?z[0]:1),height:s.height/(I?z[3]:1)};return _.toSVG(F,{additionalTransform:I?o.util.matrixToSVG(z):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var s="",m={},y,_,I,z,F,U,X,J,lt,st=o.fontPaths,Mt=[];for(this._objects.forEach(function _t(rt){Mt.push(rt),rt._objects&&rt._objects.forEach(_t)}),J=0,lt=Mt.length;J<lt;J++)if(y=Mt[J],_=y.fontFamily,!(y.type.indexOf("text")===-1||m[_]||!st[_])&&(m[_]=!0,!!y.styles)){I=y.styles;for(F in I){z=I[F];for(X in z)U=z[X],_=U.fontFamily,!m[_]&&st[_]&&(m[_]=!0)}}for(var It in m)s+=[`		@font-face {
`,"			font-family: '",It,`';
`,"			src: url('",st[It],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,m){var y,_,I,z=this._objects;for(_=0,I=z.length;_<I;_++)y=z[_],!y.excludeFromExport&&this._setSVGObject(s,y,m)},_setSVGObject:function(s,m,y){s.push(m.toSVG(y))},_setSVGBgOverlayImage:function(s,m,y){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&s.push(this[m].toSVG(y))},_setSVGBgOverlayColor:function(s,m){var y=this[m+"Color"],_=this.viewportTransform,I=this.width,z=this.height;if(!!y)if(y.toLive){var F=y.repeat,U=o.util.invertTransform(_),X=this[m+"Vpt"],J=X?o.util.matrixToSVG(U):"";s.push('<rect transform="'+J+" translate(",I/2,",",z/2,')"',' x="',y.offsetX-I/2,'" y="',y.offsetY-z/2,'" ','width="',F==="repeat-y"||F==="no-repeat"?y.source.width:I,'" height="',F==="repeat-x"||F==="no-repeat"?y.source.height:z,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var m=this._activeObject,y,_,I;if(s===m&&s.type==="activeSelection")for(I=m._objects,y=I.length;y--;)_=I[y],d(this._objects,_),this._objects.unshift(_);else d(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var m=this._activeObject,y,_,I;if(s===m&&s.type==="activeSelection")for(I=m._objects,y=0;y<I.length;y++)_=I[y],d(this._objects,_),this._objects.push(_);else d(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,m){if(!s)return this;var y=this._activeObject,_,I,z,F,U,X=0;if(s===y&&s.type==="activeSelection")for(U=y._objects,_=0;_<U.length;_++)I=U[_],z=this._objects.indexOf(I),z>0+X&&(F=z-1,d(this._objects,I),this._objects.splice(F,0,I)),X++;else z=this._objects.indexOf(s),z!==0&&(F=this._findNewLowerIndex(s,z,m),d(this._objects,s),this._objects.splice(F,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,m,y){var _,I;if(y)for(_=m,I=m-1;I>=0;--I){var z=s.intersectsWithObject(this._objects[I])||s.isContainedWithinObject(this._objects[I])||this._objects[I].isContainedWithinObject(s);if(z){_=I;break}}else _=m-1;return _},bringForward:function(s,m){if(!s)return this;var y=this._activeObject,_,I,z,F,U,X=0;if(s===y&&s.type==="activeSelection")for(U=y._objects,_=U.length;_--;)I=U[_],z=this._objects.indexOf(I),z<this._objects.length-1-X&&(F=z+1,d(this._objects,I),this._objects.splice(F,0,I)),X++;else z=this._objects.indexOf(s),z!==this._objects.length-1&&(F=this._findNewUpperIndex(s,z,m),d(this._objects,s),this._objects.splice(F,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,m,y){var _,I,z;if(y)for(_=m,I=m+1,z=this._objects.length;I<z;++I){var F=s.intersectsWithObject(this._objects[I])||s.isContainedWithinObject(this._objects[I])||this._objects[I].isContainedWithinObject(s);if(F){_=I;break}}else _=m+1;return _},moveTo:function(s,m){return d(this._objects,s),this._objects.splice(m,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(o.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),o.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),g(o.StaticCanvas.prototype,o.Observable),g(o.StaticCanvas.prototype,o.Collection),g(o.StaticCanvas.prototype,o.DataURLExporter),g(o.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var m=c();if(!m||!m.getContext)return null;var y=m.getContext("2d");if(!y)return null;switch(s){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),o.StaticCanvas.prototype.toJSON=o.StaticCanvas.prototype.toObject,o.isLikelyNode&&(o.StaticCanvas.prototype.createPNGStream=function(){var s=r(this.lowerCanvasEl);return s&&s.createPNGStream()},o.StaticCanvas.prototype.createJPEGStream=function(s){var m=r(this.lowerCanvasEl);return m&&m.createJPEGStream(s)})}(),o.BaseBrush=o.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var g=this.canvas.contextTop;g.strokeStyle=this.color,g.lineWidth=this.width,g.lineCap=this.strokeLineCap,g.miterLimit=this.strokeMiterLimit,g.lineJoin=this.strokeLineJoin,g.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(g){var i=this.canvas.viewportTransform;g.save(),g.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(!!this.shadow){var g=this.canvas,i=this.shadow,d=g.contextTop,f=g.getZoom();g&&g._isRetinaScaling()&&(f*=o.devicePixelRatio),d.shadowColor=i.color,d.shadowBlur=i.blur*f,d.shadowOffsetX=i.offsetX*f,d.shadowOffsetY=i.offsetY*f}},needsFullRender:function(){var g=new o.Color(this.color);return g.getAlpha()<1||!!this.shadow},_resetShadow:function(){var g=this.canvas.contextTop;g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0},_isOutSideCanvas:function(g){return g.x<0||g.x>this.canvas.getWidth()||g.y<0||g.y>this.canvas.getHeight()}}),function(){o.PencilBrush=o.util.createClass(o.BaseBrush,{decimate:.4,initialize:function(g){this.canvas=g,this._points=[]},_drawSegment:function(g,i,d){var f=i.midPointFrom(d);return g.quadraticCurveTo(i.x,i.y,f.x,f.y),f},onMouseDown:function(g,i){!this.canvas._isMainEvent(i.e)||(this._prepareForDrawing(g),this._captureDrawingPath(g),this._render())},onMouseMove:function(g,i){if(!!this.canvas._isMainEvent(i.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g))&&this._captureDrawingPath(g)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var d=this._points,f=d.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,d[f-2],d[f-1],!0),t.stroke(),t.restore()}},onMouseUp:function(g){return this.canvas._isMainEvent(g.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(g){var i=new o.Point(g.x,g.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(g){return this._points.length>1&&g.eq(this._points[this._points.length-1])?!1:(this._points.push(g),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(g){var i=new o.Point(g.x,g.y);return this._addPoint(i)},_render:function(){var g=this.canvas.contextTop,i,d,f=this._points[0],t=this._points[1];if(this._saveAndTransform(g),g.beginPath(),this._points.length===2&&f.x===t.x&&f.y===t.y){var e=this.width/1e3;f=new o.Point(f.x,f.y),t=new o.Point(t.x,t.y),f.x-=e,t.x+=e}for(g.moveTo(f.x,f.y),i=1,d=this._points.length;i<d;i++)this._drawSegment(g,f,t),f=this._points[i],t=this._points[i+1];g.lineTo(f.x,f.y),g.stroke(),g.restore()},convertPointsToSVGPath:function(g){var i=this.width/1e3;return o.util.getSmoothPathFromPoints(g,i)},_isEmptySVGPath:function(g){var i=o.util.joinPath(g);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(g){var i=new o.Path(g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new o.Shadow(this.shadow)),i},decimatePoints:function(g,i){if(g.length<=2)return g;var d=this.canvas.getZoom(),f=Math.pow(i/d,2),t,e=g.length-1,r=g[0],c=[r],p;for(t=1;t<e-1;t++)p=Math.pow(r.x-g[t].x,2)+Math.pow(r.y-g[t].y,2),p>=f&&(r=g[t],c.push(r));return c.push(g[e]),c},_finalizeAndAddPath:function(){var g=this.canvas.contextTop;g.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var d=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.requestRenderAll(),d.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:d})}})}(),o.CircleBrush=o.util.createClass(o.BaseBrush,{width:10,initialize:function(g){this.canvas=g,this.points=[]},drawDot:function(g){var i=this.addPoint(g),d=this.canvas.contextTop;this._saveAndTransform(d),this.dot(d,i),d.restore()},dot:function(g,i){g.fillStyle=i.fill,g.beginPath(),g.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),g.closePath(),g.fill()},onMouseDown:function(g){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(g)},_render:function(){var g=this.canvas.contextTop,i,d,f=this.points;for(this._saveAndTransform(g),i=0,d=f.length;i<d;i++)this.dot(g,f[i]);g.restore()},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(g),this._render()):this.drawDot(g))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove,i,d;this.canvas.renderOnAddRemove=!1;var f=[];for(i=0,d=this.points.length;i<d;i++){var t=this.points[i],e=new o.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(e.shadow=new o.Shadow(this.shadow)),f.push(e)}var r=new o.Group(f);r.canvas=this.canvas,this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},addPoint:function(g){var i=new o.Point(g.x,g.y),d=o.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new o.Color(this.color).setAlpha(o.util.getRandomInt(0,100)/100).toRgba();return i.radius=d,i.fill=f,this.points.push(i),i}}),o.SprayBrush=o.util.createClass(o.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(g){this.canvas=g,this.sprayChunks=[]},onMouseDown:function(g){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(g),this.render(this.sprayChunkPoints)},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.addSprayChunk(g),this.render(this.sprayChunkPoints))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],d=0,f=this.sprayChunks.length;d<f;d++)for(var t=this.sprayChunks[d],e=0,r=t.length;e<r;e++){var c=new o.Rect({width:t[e].width,height:t[e].width,left:t[e].x+1,top:t[e].y+1,originX:"center",originY:"center",fill:this.color});i.push(c)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var p=new o.Group(i);this.shadow&&p.set("shadow",new o.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},_getOptimizedRects:function(g){var i={},d,f,t;for(f=0,t=g.length;f<t;f++)d=g[f].left+""+g[f].top,i[d]||(i[d]=g[f]);var e=[];for(d in i)e.push(i[d]);return e},render:function(g){var i=this.canvas.contextTop,d,f;for(i.fillStyle=this.color,this._saveAndTransform(i),d=0,f=g.length;d<f;d++){var t=g[d];typeof t.opacity<"u"&&(i.globalAlpha=t.opacity),i.fillRect(t.x,t.y,t.width,t.width)}i.restore()},_render:function(){var g=this.canvas.contextTop,i,d;for(g.fillStyle=this.color,this._saveAndTransform(g),i=0,d=this.sprayChunks.length;i<d;i++)this.render(this.sprayChunks[i]);g.restore()},addSprayChunk:function(g){this.sprayChunkPoints=[];var i,d,f,t=this.width/2,e;for(e=0;e<this.density;e++){i=o.util.getRandomInt(g.x-t,g.x+t),d=o.util.getRandomInt(g.y-t,g.y+t),this.dotWidthVariance?f=o.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var r=new o.Point(i,d);r.width=f,this.randomOpacity&&(r.opacity=o.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),o.PatternBrush=o.util.createClass(o.PencilBrush,{getPatternSrc:function(){var g=20,i=5,d=o.util.createCanvasElement(),f=d.getContext("2d");return d.width=d.height=g+i,f.fillStyle=this.color,f.beginPath(),f.arc(g/2,g/2,g/2,0,Math.PI*2,!1),f.closePath(),f.fill(),d},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(g){var i=this.callSuper("createPath",g),d=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new o.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-d.x,offsetY:-d.y}),i}}),function(){var g=o.util.getPointer,i=o.util.degreesToRadians,d=o.util.isTouchEvent;o.Canvas=o.util.createClass(o.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=o.PencilBrush&&new o.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t=this.getActiveObjects(),e,r,c;if(t.length>0&&!this.preserveObjectStacking){r=[],c=[];for(var p=0,s=this._objects.length;p<s;p++)e=this._objects[p],t.indexOf(e)===-1?r.push(e):c.push(e);t.length>1&&(this._activeObject._objects=c),r.push.apply(r,c)}else r=this._objects;return r},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var r=t.calcTransformMatrix(),c=o.util.invertTransform(r),p=this.restorePointerVpt(e);return o.util.transformPoint(p,c)},isTargetTransparent:function(t,e,r){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var c=this._normalizePointer(t,{x:e,y:r}),p=Math.max(t.cacheTranslationX+c.x*t.zoomX,0),s=Math.max(t.cacheTranslationY+c.y*t.zoomY,0),I=o.util.isTransparent(t._cacheContext,Math.round(p),Math.round(s),this.targetFindTolerance);return I}var m=this.contextCache,y=t.selectionBackgroundColor,_=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(_[0],_[1],_[2],_[3],_[4],_[5]),t.render(m),m.restore(),t.selectionBackgroundColor=y;var I=o.util.isTransparent(m,e,r,this.targetFindTolerance);return I},_isSelectionKeyPressed:function(t){var e=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?e=!!this.selectionKey.find(function(r){return t[r]===!0}):e=t[this.selectionKey],e},_shouldClearSelection:function(t,e){var r=this.getActiveObjects(),c=this._activeObject;return!e||e&&c&&r.length>1&&r.indexOf(e)===-1&&c!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&c&&c!==e},_shouldCenterTransform:function(t,e,r){if(!!t){var c;return e==="scale"||e==="scaleX"||e==="scaleY"||e==="resizing"?c=this.centeredScaling||t.centeredScaling:e==="rotate"&&(c=this.centeredRotation||t.centeredRotation),c?!r:r}},_getOriginFromCorner:function(t,e){var r={x:t.originX,y:t.originY};return e==="ml"||e==="tl"||e==="bl"?r.x="right":(e==="mr"||e==="tr"||e==="br")&&(r.x="left"),e==="tl"||e==="mt"||e==="tr"?r.y="bottom":(e==="bl"||e==="mb"||e==="br")&&(r.y="top"),r},_getActionFromCorner:function(t,e,r,c){if(!e||!t)return"drag";var p=c.controls[e];return p.getActionName(r,p,c)},_setupCurrentTransform:function(t,e,r){if(!!e){var c=this.getPointer(t),p=e.__corner,s=e.controls[p],m=r&&p?s.getActionHandler(t,e,s):o.controlsUtils.dragHandler,y=this._getActionFromCorner(r,p,t,e),_=this._getOriginFromCorner(e,p),I=t[this.centeredKey],z={target:e,action:y,actionHandler:m,corner:p,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:c.x-e.left,offsetY:c.y-e.top,originX:_.x,originY:_.y,ex:c.x,ey:c.y,lastX:c.x,lastY:c.y,theta:i(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:I,original:o.util.saveObjectTransform(e)};this._shouldCenterTransform(e,y,I)&&(z.originX="center",z.originY="center"),z.original.originX=_.x,z.original.originY=_.y,this._currentTransform=z,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,r=new o.Point(e.ex,e.ey),c=o.util.transformPoint(r,this.viewportTransform),p=new o.Point(e.ex+e.left,e.ey+e.top),s=o.util.transformPoint(p,this.viewportTransform),m=Math.min(c.x,s.x),y=Math.min(c.y,s.y),_=Math.max(c.x,s.x),I=Math.max(c.y,s.y),z=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(m,y,_-m,I-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,m+=z,y+=z,_-=z,I-=z,o.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(m,y,_-m,I-y))},findTarget:function(t,e){if(!this.skipTargetFind){var r=!0,c=this.getPointer(t,r),p=this._activeObject,s=this.getActiveObjects(),m,y,_=d(t),I=s.length>1&&!e||s.length===1;if(this.targets=[],I&&p._findTargetCorner(c,_)||s.length>1&&!e&&p===this._searchPossibleTargets([p],c))return p;if(s.length===1&&p===this._searchPossibleTargets([p],c))if(this.preserveObjectStacking)m=p,y=this.targets,this.targets=[];else return p;var z=this._searchPossibleTargets(this._objects,c);return t[this.altSelectionKey]&&z&&m&&z!==m&&(z=m,this.targets=y),z}},_checkTarget:function(t,e,r){if(e&&e.visible&&e.evented&&e.containsPoint(t))if((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing){var c=this.isTargetTransparent(e,r.x,r.y);if(!c)return!0}else return!0},_searchPossibleTargets:function(t,e){for(var r,c=t.length,p;c--;){var s=t[c],m=s.group?this._normalizePointer(s.group,e):e;if(this._checkTarget(m,s,e)){r=t[c],r.subTargetCheck&&r instanceof o.Group&&(p=this._searchPossibleTargets(r._objects,e),p&&this.targets.push(p));break}}return r},restorePointerVpt:function(t){return o.util.transformPoint(t,o.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var r=g(t),c=this.upperCanvasEl,p=c.getBoundingClientRect(),s=p.width||0,m=p.height||0,y;(!s||!m)&&("top"in p&&"bottom"in p&&(m=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(s=Math.abs(p.right-p.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=this.restorePointerVpt(r));var _=this.getRetinaScaling();return _!==1&&(r.x/=_,r.y/=_),s===0||m===0?y={width:1,height:1}:y={width:c.width/s,height:c.height/m},{x:r.x*y.width,y:r.y*y.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,r=this.upperCanvasEl;r?r.className="":(r=this._createCanvasElement(),this.upperCanvasEl=r),o.util.addClass(r,"upper-canvas "+t),this.wrapperEl.appendChild(r),this._copyCanvasStyle(e,r),this._applyCanvasStyle(r),this.contextTop=r.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=o.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),o.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),o.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,r=this.height||t.height;o.util.setStyle(t,{position:"absolute",width:e+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=r,o.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?t.type==="activeSelection"&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var r=!1,c=this.getActiveObjects(),p=[],s=[];t.forEach(function(m){c.indexOf(m)===-1&&(r=!0,m.fire("deselected",{e,target:m}),s.push(m))}),c.forEach(function(m){t.indexOf(m)===-1&&(r=!0,m.fire("selected",{e,target:m}),p.push(m))}),t.length>0&&c.length>0?r&&this.fire("selection:updated",{e,selected:p,deselected:s,updated:p[0]||s[0],target:this._activeObject}):c.length>0?this.fire("selection:created",{e,selected:p,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e,deselected:s})},setActiveObject:function(t,e){var r=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(r,e),this},_setActiveObject:function(t,e){return this._activeObject===t||!this._discardActiveObject(e,t)||t.onSelect({e})?!1:(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var r=this._activeObject;if(r){if(r.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),r=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:r,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){o.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,o.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,r){var c=this._realizeGroupTransformOnObject(t),p=this.callSuper("_toObject",t,e,r);return this._unwindGroupTransformOnObject(t,c),p},_realizeGroupTransformOnObject:function(t){if(t.group&&t.group.type==="activeSelection"&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],r={};return e.forEach(function(c){r[c]=t[c]}),o.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),r}else return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,r){var c=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,r),this._unwindGroupTransformOnObject(e,c)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),o.StaticCanvas.prototype.setViewportTransform.call(this,t)}});for(var f in o.StaticCanvas)f!=="prototype"&&(o.Canvas[f]=o.StaticCanvas[f])}(),function(){var g=o.util.addListener,i=o.util.removeListener,d=3,f=2,t=1,e={passive:!1};function r(c,p){return c.button&&c.button===p-1}o.util.object.extend(o.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(g,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(c,p){var s=this.upperCanvasEl,m=this._getEventPrefix();c(o.window,"resize",this._onResize),c(s,m+"down",this._onMouseDown),c(s,m+"move",this._onMouseMove,e),c(s,m+"out",this._onMouseOut),c(s,m+"enter",this._onMouseEnter),c(s,"wheel",this._onMouseWheel),c(s,"contextmenu",this._onContextMenu),c(s,"dblclick",this._onDoubleClick),c(s,"dragover",this._onDragOver),c(s,"dragenter",this._onDragEnter),c(s,"dragleave",this._onDragLeave),c(s,"drop",this._onDrop),this.enablePointerEvents||c(s,"touchstart",this._onTouchStart,e),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](s,"gesture",this._onGesture),eventjs[p](s,"drag",this._onDrag),eventjs[p](s,"orientation",this._onOrientationChange),eventjs[p](s,"shake",this._onShake),eventjs[p](s,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var c=this._getEventPrefix();i(o.document,c+"up",this._onMouseUp),i(o.document,"touchend",this._onTouchEnd,e),i(o.document,c+"move",this._onMouseMove,e),i(o.document,"touchmove",this._onMouseMove,e)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(c,p){this.__onTransformGesture&&this.__onTransformGesture(c,p)},_onDrag:function(c,p){this.__onDrag&&this.__onDrag(c,p)},_onMouseWheel:function(c){this.__onMouseWheel(c)},_onMouseOut:function(c){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:c}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:c});var s=this;this._hoveredTargets.forEach(function(m){s.fire("mouse:out",{target:p,e:c}),m&&p.fire("mouseout",{e:c})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(m){m.isEditing&&m.hiddenTextarea.focus()})},_onMouseEnter:function(c){!this._currentTransform&&!this.findTarget(c)&&(this.fire("mouse:over",{target:null,e:c}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(c,p){this.__onOrientationChange&&this.__onOrientationChange(c,p)},_onShake:function(c,p){this.__onShake&&this.__onShake(c,p)},_onLongPress:function(c,p){this.__onLongPress&&this.__onLongPress(c,p)},_onDragOver:function(c){c.preventDefault();var p=this._simpleEventHandler("dragover",c);this._fireEnterLeaveEvents(p,c)},_onContextMenu:function(c){return this.stopContextMenu&&(c.stopPropagation(),c.preventDefault()),!1},_onDoubleClick:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"dblclick"),this._resetTransformEventData(c)},getPointerId:function(c){var p=c.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?c.pointerId:-1},_isMainEvent:function(c){return c.isPrimary===!0?!0:c.isPrimary===!1?!1:c.type==="touchend"&&c.touches.length===0?!0:c.changedTouches?c.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(c){c.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(c)),this.__onMouseDown(c),this._resetTransformEventData();var p=this.upperCanvasEl,s=this._getEventPrefix();g(o.document,"touchend",this._onTouchEnd,e),g(o.document,"touchmove",this._onMouseMove,e),i(p,s+"down",this._onMouseDown)},_onMouseDown:function(c){this.__onMouseDown(c),this._resetTransformEventData();var p=this.upperCanvasEl,s=this._getEventPrefix();i(p,s+"move",this._onMouseMove,e),g(o.document,s+"up",this._onMouseUp),g(o.document,s+"move",this._onMouseMove,e)},_onTouchEnd:function(c){if(!(c.touches.length>0)){this.__onMouseUp(c),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();i(o.document,"touchend",this._onTouchEnd,e),i(o.document,"touchmove",this._onMouseMove,e);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){g(s.upperCanvasEl,p+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(c){this.__onMouseUp(c),this._resetTransformEventData();var p=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(c)&&(i(o.document,s+"up",this._onMouseUp),i(o.document,s+"move",this._onMouseMove,e),g(p,s+"move",this._onMouseMove,e))},_onMouseMove:function(c){!this.allowTouchScrolling&&c.preventDefault&&c.preventDefault(),this.__onMouseMove(c)},_onResize:function(){this.calcOffset()},_shouldRender:function(c){var p=this._activeObject;return!!p!=!!c||p&&c&&p!==c?!0:(p&&p.isEditing,!1)},__onMouseUp:function(c){var p,s=this._currentTransform,m=this._groupSelector,y=!1,_=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(c),p=this._target,this._handleEvent(c,"up:before"),r(c,d)){this.fireRightClick&&this._handleEvent(c,"up",d,_);return}if(r(c,f)){this.fireMiddleClick&&this._handleEvent(c,"up",f,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(c);return}if(!!this._isMainEvent(c)){if(s&&(this._finalizeCurrentTransform(c),y=s.actionPerformed),!_){var I=p===this._activeObject;this._maybeGroupObjects(c),y||(y=this._shouldRender(p)||!I&&p===this._activeObject)}if(p){if(p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,c),y=!0;else{var z=p._findTargetCorner(this.getPointer(c,!0),o.util.isTouchEvent(c)),F=p.controls[z],U=F&&F.getMouseUpHandler(c,p,F);if(U){var X=this.getPointer(c);U(c,s,X.x,X.y)}}p.isMoving=!1}this._setCursorFromEvent(c,p),this._handleEvent(c,"up",t,_),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),y?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(c,p){var s=this.findTarget(p),m=this.targets,y={e:p,target:s,subTargets:m};if(this.fire(c,y),s&&s.fire(c,y),!m)return s;for(var _=0;_<m.length;_++)m[_].fire(c,y);return s},_handleEvent:function(c,p,s,m){var y=this._target,_=this.targets||[],I={e:c,target:y,subTargets:_,button:s||t,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(I.currentTarget=this.findTarget(c),I.currentSubTargets=this.targets),this.fire("mouse:"+p,I),y&&y.fire("mouse"+p,I);for(var z=0;z<_.length;z++)_[z].fire("mouse"+p,I)},_finalizeCurrentTransform:function(c){var p=this._currentTransform,s=p.target,m,y={e:c,target:s,transform:p,action:p.action};s._scaling&&(s._scaling=!1),s.setCoords(),(p.actionPerformed||this.stateful&&s.hasStateChanged())&&(p.actionPerformed&&(m=this._addEventOptions(y,p),this._fire(m,y)),this._fire("modified",y))},_addEventOptions:function(c,p){var s,m;switch(p.action){case"scaleX":s="scaled",m="x";break;case"scaleY":s="scaled",m="y";break;case"skewX":s="skewed",m="x";break;case"skewY":s="skewed",m="y";break;case"scale":s="scaled",m="equally";break;case"rotate":s="rotated";break;case"drag":s="moved";break}return c.by=m,s},_onMouseDownInDrawingMode:function(c){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(c).requestRenderAll();var p=this.getPointer(c);this.freeDrawingBrush.onMouseDown(p,{e:c,pointer:p}),this._handleEvent(c,"down")},_onMouseMoveInDrawingMode:function(c){if(this._isCurrentlyDrawing){var p=this.getPointer(c);this.freeDrawingBrush.onMouseMove(p,{e:c,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(c,"move")},_onMouseUpInDrawingMode:function(c){var p=this.getPointer(c);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:c,pointer:p}),this._handleEvent(c,"up")},__onMouseDown:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"down:before");var p=this._target;if(r(c,d)){this.fireRightClick&&this._handleEvent(c,"down",d);return}if(r(c,f)){this.fireMiddleClick&&this._handleEvent(c,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(c);return}if(!!this._isMainEvent(c)&&!this._currentTransform){var s=this._pointer;this._previousPointer=s;var m=this._shouldRender(p),y=this._shouldGroup(c,p);if(this._shouldClearSelection(c,p)?this.discardActiveObject(c):y&&(this._handleGrouping(c,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var _=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,c);var I=p._findTargetCorner(this.getPointer(c,!0),o.util.isTouchEvent(c));if(p.__corner=I,p===this._activeObject&&(I||!y)){this._setupCurrentTransform(c,p,_);var z=p.controls[I],s=this.getPointer(c),F=z&&z.getMouseDownHandler(c,p,z);F&&F(c,this._currentTransform,s.x,s.y)}}this._handleEvent(c,"down"),(m||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(c){this._resetTransformEventData(),this._pointer=this.getPointer(c,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(c)||null},_beforeTransform:function(c){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:c,transform:p})},__onMouseMove:function(c){this._handleEvent(c,"move:before"),this._cacheTransformEventData(c);var p,s;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(c);return}if(!!this._isMainEvent(c)){var m=this._groupSelector;m?(s=this._absolutePointer,m.left=s.x-m.ex,m.top=s.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(c):(p=this.findTarget(c)||null,this._setCursorFromEvent(c,p),this._fireOverOutEvents(p,c)),this._handleEvent(c,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(c,p){var s=this._hoveredTarget,m=this._hoveredTargets,y=this.targets,_=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(c,p,{oldTarget:s,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var I=0;I<_;I++)this.fireSyntheticInOutEvents(y[I],p,{oldTarget:m[I],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(c,p){var s=this._draggedoverTarget,m=this._hoveredTargets,y=this.targets,_=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(c,p,{oldTarget:s,evtOut:"dragleave",evtIn:"dragenter"});for(var I=0;I<_;I++)this.fireSyntheticInOutEvents(y[I],p,{oldTarget:m[I],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=c},fireSyntheticInOutEvents:function(c,p,s){var m,y,_=s.oldTarget,I,z,F=_!==c,U=s.canvasEvtIn,X=s.canvasEvtOut;F&&(m={e:p,target:c,previousTarget:_},y={e:p,target:_,nextTarget:c}),z=c&&F,I=_&&F,I&&(X&&this.fire(X,y),_.fire(s.evtOut,y)),z&&(U&&this.fire(U,m),c.fire(s.evtIn,m))},__onMouseWheel:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"wheel"),this._resetTransformEventData()},_transformObject:function(c){var p=this.getPointer(c),s=this._currentTransform;s.reset=!1,s.shiftKey=c.shiftKey,s.altKey=c[this.centeredKey],this._performTransformAction(c,s,p),s.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(c,p,s){var m=s.x,y=s.y,_=p.action,I=!1,z=p.actionHandler;z&&(I=z(c,p,m,y)),_==="drag"&&I&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||I},_fire:o.controlsUtils.fireEvent,_setCursorFromEvent:function(c,p){if(!p)return this.setCursor(this.defaultCursor),!1;var s=p.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!m||!m.contains(p))&&p._findTargetCorner(this.getPointer(c,!0));y?this.setCursor(this.getCornerCursor(y,p,c)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(_){s=_.hoverCursor||s}),this.setCursor(s))},getCornerCursor:function(c,p,s){var m=p.controls[c];return m.cursorStyleHandler(s,m,p)}})}(),function(){var g=Math.min,i=Math.max;o.util.object.extend(o.Canvas.prototype,{_shouldGroup:function(d,f){var t=this._activeObject;return t&&this._isSelectionKeyPressed(d)&&f&&f.selectable&&this.selection&&(t!==f||t.type==="activeSelection")&&!f.onSelect({e:d})},_handleGrouping:function(d,f){var t=this._activeObject;t.__corner||f===t&&(f=this.findTarget(d,!0),!f||!f.selectable)||(t&&t.type==="activeSelection"?this._updateActiveSelection(f,d):this._createActiveSelection(f,d))},_updateActiveSelection:function(d,f){var t=this._activeObject,e=t._objects.slice(0);t.contains(d)?(t.removeWithUpdate(d),this._hoveredTarget=d,this._hoveredTargets=this.targets.concat(),t.size()===1&&this._setActiveObject(t.item(0),f)):(t.addWithUpdate(d),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(e,f)},_createActiveSelection:function(d,f){var t=this.getActiveObjects(),e=this._createGroup(d);this._hoveredTarget=e,this._setActiveObject(e,f),this._fireSelectionEvents(t,f)},_createGroup:function(d){var f=this._objects,t=f.indexOf(this._activeObject)<f.indexOf(d),e=t?[this._activeObject,d]:[d,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new o.ActiveSelection(e,{canvas:this})},_groupSelectedObjects:function(d){var f=this._collectObjects(d),t;f.length===1?this.setActiveObject(f[0],d):f.length>1&&(t=new o.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(t,d))},_collectObjects:function(d){for(var f=[],t,e=this._groupSelector.ex,r=this._groupSelector.ey,c=e+this._groupSelector.left,p=r+this._groupSelector.top,s=new o.Point(g(e,c),g(r,p)),m=new o.Point(i(e,c),i(r,p)),y=!this.selectionFullyContained,_=e===c&&r===p,I=this._objects.length;I--&&(t=this._objects[I],!(!(!t||!t.selectable||!t.visible)&&(y&&t.intersectsWithRect(s,m,!0)||t.isContainedWithinRect(s,m,!0)||y&&t.containsPoint(s,null,!0)||y&&t.containsPoint(m,null,!0))&&(f.push(t),_))););return f.length>1&&(f=f.filter(function(z){return!z.onSelect({e:d})})),f},_maybeGroupObjects:function(d){this.selection&&this._groupSelector&&this._groupSelectedObjects(d),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){o.util.object.extend(o.StaticCanvas.prototype,{toDataURL:function(g){g||(g={});var i=g.format||"png",d=g.quality||1,f=(g.multiplier||1)*(g.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(f,g);return o.util.toDataURL(t,i,d)},toCanvasElement:function(g,i){g=g||1,i=i||{};var d=(i.width||this.width)*g,f=(i.height||this.height)*g,t=this.getZoom(),e=this.width,r=this.height,c=t*g,p=this.viewportTransform,s=(p[4]-(i.left||0))*g,m=(p[5]-(i.top||0))*g,y=this.interactive,_=[c,0,0,c,s,m],I=this.enableRetinaScaling,z=o.util.createCanvasElement(),F=this.contextTop;return z.width=d,z.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=d,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(z.getContext("2d"),this._objects),this.viewportTransform=p,this.width=e,this.height=r,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=I,this.contextTop=F,z}})}(),o.util.object.extend(o.StaticCanvas.prototype,{loadFromJSON:function(g,i,d){if(!!g){var f=typeof g=="string"?JSON.parse(g):o.util.object.clone(g),t=this,e=f.clipPath,r=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(c){t.clear(),t._setBgOverlay(f,function(){e?t._enlivenObjects([e],function(p){t.clipPath=p[0],t.__setupCanvas.call(t,f,c,r,i)}):t.__setupCanvas.call(t,f,c,r,i)})},d),this}},__setupCanvas:function(g,i,d,f){var t=this;i.forEach(function(e,r){t.insertAt(e,r)}),this.renderOnAddRemove=d,delete g.objects,delete g.backgroundImage,delete g.overlayImage,delete g.background,delete g.overlay,this._setOptions(g),this.renderAll(),f&&f()},_setBgOverlay:function(g,i){var d={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!g.backgroundImage&&!g.overlayImage&&!g.background&&!g.overlay){i&&i();return}var f=function(){d.backgroundImage&&d.overlayImage&&d.backgroundColor&&d.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",g.backgroundImage,d,f),this.__setBgOverlay("overlayImage",g.overlayImage,d,f),this.__setBgOverlay("backgroundColor",g.background,d,f),this.__setBgOverlay("overlayColor",g.overlay,d,f)},__setBgOverlay:function(g,i,d,f){var t=this;if(!i){d[g]=!0,f&&f();return}g==="backgroundImage"||g==="overlayImage"?o.util.enlivenObjects([i],function(e){t[g]=e[0],d[g]=!0,f&&f()}):this["set"+o.util.string.capitalize(g,!0)](i,function(){d[g]=!0,f&&f()})},_enlivenObjects:function(g,i,d){if(!g||g.length===0){i&&i([]);return}o.util.enlivenObjects(g,function(f){i&&i(f)},null,d)},_toDataURL:function(g,i){this.clone(function(d){i(d.toDataURL(g))})},_toDataURLWithMultiplier:function(g,i,d){this.clone(function(f){d(f.toDataURLWithMultiplier(g,i))})},clone:function(g,i){var d=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(f){f.loadFromJSON(d,function(){g&&g(f)})})},cloneWithoutData:function(g){var i=o.util.createCanvasElement();i.width=this.width,i.height=this.height;var d=new o.Canvas(i);this.backgroundImage?(d.setBackgroundImage(this.backgroundImage.src,function(){d.renderAll(),g&&g(d)}),d.backgroundImageOpacity=this.backgroundImageOpacity,d.backgroundImageStretch=this.backgroundImageStretch):g&&g(d)}}),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.util.object.clone,t=i.util.toFixed,e=i.util.string.capitalize,r=i.util.degreesToRadians,c=!i.isLikelyNode,p=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var m=i.perfLimitSizeTotal,y=s.width,_=s.height,I=i.maxCacheSideLimit,z=i.minCacheSideLimit;if(y<=I&&_<=I&&y*_<=m)return y<z&&(s.width=z),_<z&&(s.height=z),s;var F=y/_,U=i.util.limitDimsByArea(F,m),X=i.util.capValue,J=X(z,U.x,I),lt=X(z,U.y,I);return y>J&&(s.zoomX/=y/J,s.width=J,s.capped=!0),_>lt&&(s.zoomY/=_/lt,s.height=lt,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),y=m.x*s.scaleX/this.scaleX,_=m.y*s.scaleY/this.scaleY;return{width:y+p,height:_+p,zoomX:s.scaleX,zoomY:s.scaleY,x:y,y:_}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var m=s._currentTransform.target,y=s._currentTransform.action;if(this===m&&y.slice&&y.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,I=this._limitCacheSize(this._getCacheCanvasDimensions()),z=i.minCacheSideLimit,F=I.width,U=I.height,X,J,lt=I.zoomX,st=I.zoomY,Mt=F!==this.cacheWidth||U!==this.cacheHeight,It=this.zoomX!==lt||this.zoomY!==st,_t=Mt||It,rt=0,Wt=0,V=!1;if(Mt){var Zt=this._cacheCanvas.width,Q=this._cacheCanvas.height,St=F>Zt||U>Q,nt=(F<Zt*.9||U<Q*.9)&&Zt>z&&Q>z;V=St||nt,St&&!I.capped&&(F>z||U>z)&&(rt=F*.1,Wt=U*.1)}return this instanceof i.Text&&this.path&&(_t=!0,V=!0,rt+=this.getHeightOfLine(0)*this.zoomX,Wt+=this.getHeightOfLine(0)*this.zoomY),_t?(V?(_.width=Math.ceil(F+rt),_.height=Math.ceil(U+Wt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),X=I.x/2,J=I.y/2,this.cacheTranslationX=Math.round(_.width/2-X)+X,this.cacheTranslationY=Math.round(_.height/2-J)+J,this.cacheWidth=F,this.cacheHeight=U,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(lt,st),this.zoomX=lt,this.zoomY=st,!0):!1},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop,y=this.calcTransformMatrix(!m);s.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(s){var m=i.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:t(this.left,m),top:t(this.top,m),width:t(this.width,m),height:t(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,m),scaleX:t(this.scaleX,m),scaleY:t(this.scaleY,m),angle:t(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,m),skewY:t(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(s),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,y,s),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var m=i.util.getKlass(s.type).prototype,y=m.stateProperties;return y.forEach(function(_){if(!(_==="left"||_==="top")){s[_]===m[_]&&delete s[_];var I=Object.prototype.toString.call(s[_])==="[object Array]"&&Object.prototype.toString.call(m[_])==="[object Array]";I&&s[_].length===0&&m[_].length===0&&delete s[_]}}),s},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),m=s.scaleX,y=s.scaleY;if(this.canvas){var _=this.canvas.getZoom(),I=this.canvas.getRetinaScaling();m*=_*I,y*=_*I}return{scaleX:m,scaleY:y}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,m){var y=s==="scaleX"||s==="scaleY",_=this[s]!==m,I=!1;return y&&(m=this._constrainScale(m)),s==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):s==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):s==="shadow"&&m&&!(m instanceof i.Shadow)?m=new i.Shadow(m):s==="dirty"&&this.group&&this.group.set("dirty",m),this[s]=m,_&&(I=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(s)>-1?(this.dirty=!0,I&&this.group.set("dirty",!0)):I&&this.stateProperties.indexOf(s)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(s){var m=this.clipPath;if(s.save(),m.inverted?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="destination-in",m.absolutePositioned){var y=i.util.invertTransform(this.calcTransformMatrix());s.transform(y[0],y[1],y[2],y[3],y[4],y[5])}m.transform(s),s.scale(1/m.zoomX,1/m.zoomY),s.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),s.restore()},drawObject:function(s,m){var y=this.fill,_=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s),this.fill=y,this.stroke=_},_drawClipPath:function(s){var m=this.clipPath;!m||(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(s))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!s){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_renderBackground:function(s){if(!!this.backgroundColor){var m=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,m){var y=m.stroke;y&&(s.lineWidth=m.strokeWidth,s.lineCap=m.strokeLineCap,s.lineDashOffset=m.strokeDashOffset,s.lineJoin=m.strokeLineJoin,s.miterLimit=m.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(s,y):(s.strokeStyle=y.toLive(s,this),this._applyPatternGradientTransform(s,y)):s.strokeStyle=m.stroke)},_setFillStyles:function(s,m){var y=m.fill;y&&(y.toLive?(s.fillStyle=y.toLive(s,this),this._applyPatternGradientTransform(s,m.fill)):s.fillStyle=y)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),s.setLineDash(m))},_renderControls:function(s,m){var y=this.getViewportTransform(),_=this.calcTransformMatrix(),I,z,F;m=m||{},z=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,F=typeof m.hasControls<"u"?m.hasControls:this.hasControls,_=i.util.multiplyTransformMatrices(y,_),I=i.util.qrDecompose(_),s.save(),s.translate(I.translateX,I.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),s.rotate(r(I.angle)),m.forActiveSelection||this.group?z&&this.drawBordersInGroup(s,I,m):z&&this.drawBorders(s,m),F&&this.drawControls(s,m),s.restore()},_setShadow:function(s){if(!!this.shadow){var m=this.shadow,y=this.canvas,_,I=y&&y.viewportTransform[0]||1,z=y&&y.viewportTransform[3]||1;m.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),y&&y._isRetinaScaling()&&(I*=i.devicePixelRatio,z*=i.devicePixelRatio),s.shadowColor=m.color,s.shadowBlur=m.blur*i.browserShadowBlurConstant*(I+z)*(_.scaleX+_.scaleY)/4,s.shadowOffsetX=m.offsetX*I*_.scaleX,s.shadowOffsetY=m.offsetY*z*_.scaleY}},_removeShadow:function(s){!this.shadow||(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var y=m.gradientTransform||m.patternTransform,_=-this.width/2+m.offsetX||0,I=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?s.transform(this.width,0,0,this.height,_,I):s.transform(1,0,0,1,_,I),y&&s.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:_,offsetY:I}},_renderPaintInOrder:function(s){this.paintFirst==="stroke"?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){!this.fill||(s.save(),this._setFillStyles(s,this),this.fillRule==="evenodd"?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();s.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,m){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),_=i.util.createCanvasElement(),I,z=this.canvas.getRetinaScaling(),F=y.x/this.scaleX/z,U=y.y/this.scaleY/z;_.width=F,_.height=U,I=_.getContext("2d"),I.beginPath(),I.moveTo(0,0),I.lineTo(F,0),I.lineTo(F,U),I.lineTo(0,U),I.closePath(),I.translate(F/2,U/2),I.scale(y.zoomX/this.scaleX/z,y.zoomY/this.scaleY/z),this._applyPatternGradientTransform(I,m),I.fillStyle=m.toLive(s),I.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(z*this.scaleX/y.zoomX,z*this.scaleY/y.zoomY),s.strokeStyle=I.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=i.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,m.x+=s.offsetLeft,m.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(m,"center","center")},clone:function(s,m){var y=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(y,s):i.Object._fromObject("Object",y,s)},cloneAsImage:function(s,m){var y=this.toCanvasElement(m);return s&&s(new i.Image(y)),this},toCanvasElement:function(s){s||(s={});var m=i.util,y=m.saveObjectTransform(this),_=this.group,I=this.shadow,z=Math.abs,F=(s.multiplier||1)*(s.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,s.withoutTransform&&m.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var U=i.util.createCanvasElement(),X=this.getBoundingRect(!0,!0),J=this.shadow,lt,st={x:0,y:0},Mt,It,_t;J&&(Mt=J.blur,J.nonScaling?lt={scaleX:1,scaleY:1}:lt=this.getObjectScaling(),st.x=2*Math.round(z(J.offsetX)+Mt)*z(lt.scaleX),st.y=2*Math.round(z(J.offsetY)+Mt)*z(lt.scaleY)),It=X.width+st.x,_t=X.height+st.y,U.width=Math.ceil(It),U.height=Math.ceil(_t);var rt=new i.StaticCanvas(U,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});s.format==="jpeg"&&(rt.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(rt.width/2,rt.height/2),"center","center");var Wt=this.canvas;rt.add(this);var V=rt.toCanvasElement(F||1,s);return this.shadow=I,this.set("canvas",Wt),_&&(this.group=_),this.set(y).setCoords(),rt._objects=[],rt.dispose(),rt=null,V},toDataURL:function(s){return s||(s={}),i.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",s),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,m){m=m||this.canvas.getPointer(s);var y=new i.Point(m.x,m.y),_=this._getLeftTopCoords();return this.angle&&(y=i.util.rotatePoint(y,_,r(-this.angle))),{x:y.x-_.x,y:y.y-_.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),d(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object._fromObject=function(s,m,y,_){var I=i[s];m=f(m,!0),i.util.enlivenPatterns([m.fill,m.stroke],function(z){typeof z[0]<"u"&&(m.fill=z[0]),typeof z[1]<"u"&&(m.stroke=z[1]),i.util.enlivenObjects([m.clipPath],function(F){m.clipPath=F[0];var U=_?new I(m[_],m):new I(m);y&&y(U)})})},i.Object.__uid=0)}(x),function(){var g=o.util.degreesToRadians,i={left:-.5,center:0,right:.5},d={top:-.5,center:0,bottom:.5};o.util.object.extend(o.Object.prototype,{translateToGivenOrigin:function(f,t,e,r,c){var p=f.x,s=f.y,m,y,_;return typeof t=="string"?t=i[t]:t-=.5,typeof r=="string"?r=i[r]:r-=.5,m=r-t,typeof e=="string"?e=d[e]:e-=.5,typeof c=="string"?c=d[c]:c-=.5,y=c-e,(m||y)&&(_=this._getTransformedDimensions(),p=f.x+m*_.x,s=f.y+y*_.y),new o.Point(p,s)},translateToCenterPoint:function(f,t,e){var r=this.translateToGivenOrigin(f,t,e,"center","center");return this.angle?o.util.rotatePoint(r,f,g(this.angle)):r},translateToOriginPoint:function(f,t,e){var r=this.translateToGivenOrigin(f,"center","center",t,e);return this.angle?o.util.rotatePoint(r,f,g(this.angle)):r},getCenterPoint:function(){var f=new o.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,t){var e=this.getCenterPoint();return this.translateToOriginPoint(e,f,t)},toLocalPoint:function(f,t,e){var r=this.getCenterPoint(),c,p;return typeof t<"u"&&typeof e<"u"?c=this.translateToGivenOrigin(r,"center","center",t,e):c=new o.Point(this.left,this.top),p=new o.Point(f.x,f.y),this.angle&&(p=o.util.rotatePoint(p,r,-g(this.angle))),p.subtractEquals(c)},setPositionByOrigin:function(f,t,e){var r=this.translateToCenterPoint(f,t,e),c=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",c.x),this.set("top",c.y)},adjustPosition:function(f){var t=g(this.angle),e=this.getScaledWidth(),r=o.util.cos(t)*e,c=o.util.sin(t)*e,p,s;typeof this.originX=="string"?p=i[this.originX]:p=this.originX-.5,typeof f=="string"?s=i[f]:s=f-.5,this.left+=r*(s-p),this.top+=c*(s-p),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function g(e){return[new o.Point(e.tl.x,e.tl.y),new o.Point(e.tr.x,e.tr.y),new o.Point(e.br.x,e.br.y),new o.Point(e.bl.x,e.bl.y)]}var i=o.util,d=i.degreesToRadians,f=i.multiplyTransformMatrices,t=i.transformPoint;i.object.extend(o.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,r){return r?e?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,r){return g(this._getCoords(e,r))},intersectsWithRect:function(e,r,c,p){var s=this.getCoords(c,p),m=o.Intersection.intersectPolygonRectangle(s,e,r);return m.status==="Intersection"},intersectsWithObject:function(e,r,c){var p=o.Intersection.intersectPolygonPolygon(this.getCoords(r,c),e.getCoords(r,c));return p.status==="Intersection"||e.isContainedWithinObject(this,r,c)||this.isContainedWithinObject(e,r,c)},isContainedWithinObject:function(e,r,c){for(var p=this.getCoords(r,c),s=r?e.aCoords:e.lineCoords,m=0,y=e._getImageLines(s);m<4;m++)if(!e.containsPoint(p[m],y))return!1;return!0},isContainedWithinRect:function(e,r,c,p){var s=this.getBoundingRect(c,p);return s.left>=e.x&&s.left+s.width<=r.x&&s.top>=e.y&&s.top+s.height<=r.y},containsPoint:function(e,m,c,p){var s=this._getCoords(c,p),m=m||this._getImageLines(s),y=this._findCrossPoints(e,m);return y!==0&&y%2===1},isOnScreen:function(e){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br,p=this.getCoords(!0,e);return p.some(function(s){return s.x<=c.x&&s.x>=r.x&&s.y<=c.y&&s.y>=r.y})||this.intersectsWithRect(r,c,!0,e)?!0:this._containsCenterOfCanvas(r,c,e)},_containsCenterOfCanvas:function(e,r,c){var p={x:(e.x+r.x)/2,y:(e.y+r.y)/2};return!!this.containsPoint(p,null,!0,c)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;if(this.intersectsWithRect(r,c,!0,e))return!0;var p=this.getCoords(!0,e).every(function(s){return(s.x>=c.x||s.x<=r.x)&&(s.y>=c.y||s.y<=r.y)});return p&&this._containsCenterOfCanvas(r,c,e)},_getImageLines:function(e){var r={topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}};return r},_findCrossPoints:function(e,r){var c,p,s,m,y,_=0,I;for(var z in r)if(I=r[z],!(I.o.y<e.y&&I.d.y<e.y)&&!(I.o.y>=e.y&&I.d.y>=e.y)&&(I.o.x===I.d.x&&I.o.x>=e.x?y=I.o.x:(c=0,p=(I.d.y-I.o.y)/(I.d.x-I.o.x),s=e.y-c*e.x,m=I.o.y-p*I.o.x,y=-(s-m)/(c-p)),y>=e.x&&(_+=1),_===2))break;return _},getBoundingRect:function(e,r){var c=this.getCoords(e,r);return i.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,r){var c=this.getBoundingRect(r).width/this.getScaledWidth();return this.scale(e/this.width/c)},scaleToHeight:function(e,r){var c=this.getBoundingRect(r).height/this.getScaledHeight();return this.scale(e/this.height/c)},calcCoords:function(e){return e?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var e=this.getViewportTransform(),r=this.padding,c=d(this.angle),p=i.cos(c),s=i.sin(c),m=p*r,y=s*r,_=m+y,I=m-y,z=this.calcACoords(),F={tl:t(z.tl,e),tr:t(z.tr,e),bl:t(z.bl,e),br:t(z.br,e)};return r&&(F.tl.x-=I,F.tl.y-=_,F.tr.x+=_,F.tr.y-=I,F.bl.x-=_,F.bl.y+=I,F.br.x+=I,F.br.y+=_),F},calcOCoords:function(){var e=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),c=this.getViewportTransform(),p=f(c,r),s=f(p,e),s=f(s,[1/c[0],0,0,1/c[3],0,0]),m=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(_,I,z){y[I]=_.positionHandler(m,s,z)}),y},calcACoords:function(){var e=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),c=f(r,e),p=this._getTransformedDimensions(),s=p.x/2,m=p.y/2;return{tl:t({x:-s,y:-m},c),tr:t({x:s,y:-m},c),bl:t({x:-s,y:m},c),br:t({x:s,y:m},c)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var r="_",c="";return!e&&this.group&&(c=this.group.transformMatrixKey(e)+r),c+this.top+r+this.left+r+this.scaleX+r+this.scaleY+r+this.skewX+r+this.skewY+r+this.angle+r+this.originX+r+this.originY+r+this.width+r+this.height+r+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var r=this.calcOwnMatrix();if(e||!this.group)return r;var c=this.transformMatrixKey(e),p=this.matrixCache||(this.matrixCache={});return p.key===c?p.value:(this.group&&(r=f(this.group.calcTransformMatrix(!1),r)),p.key=c,p.value=r,r)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),r=this.ownMatrixCache||(this.ownMatrixCache={});if(r.key===e)return r.value;var c=this._calcTranslateMatrix(),p={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return r.key=e,r.value=i.composeMatrix(p),r.value},_calcDimensionsTransformMatrix:function(e,r,c){return i.calcDimensionsMatrix({skewX:e,skewY:r,scaleX:this.scaleX*(c&&this.flipX?-1:1),scaleY:this.scaleY*(c&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var e=this.strokeWidth,r=this.width+e,c=this.height+e;return{x:r,y:c}},_getTransformedDimensions:function(e,r){typeof e>"u"&&(e=this.skewX),typeof r>"u"&&(r=this.skewY);var c,p,s,m=e===0&&r===0;if(this.strokeUniform?(p=this.width,s=this.height):(c=this._getNonTransformedDimensions(),p=c.x,s=c.y),m)return this._finalizeDimensions(p*this.scaleX,s*this.scaleY);var y=i.sizeAfterTransform(p,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:r});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(e,r){return this.strokeUniform?{x:e+this.strokeWidth,y:r+this.strokeWidth}:{x:e,y:r}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),r=this._getTransformedDimensions(),c=t(r,e,!0);return c.scalarAdd(2*this.padding)}})}(),o.util.object.extend(o.Object.prototype,{sendToBack:function(){return this.group?o.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?o.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(g){return this.group?o.StaticCanvas.prototype.sendBackwards.call(this.group,this,g):this.canvas&&this.canvas.sendBackwards(this,g),this},bringForward:function(g){return this.group?o.StaticCanvas.prototype.bringForward.call(this.group,this,g):this.canvas&&this.canvas.bringForward(this,g),this},moveTo:function(g){return this.group&&this.group.type!=="activeSelection"?o.StaticCanvas.prototype.moveTo.call(this.group,this,g):this.canvas&&this.canvas.moveTo(this,g),this}}),function(){function g(d,f){if(f){if(f.toLive)return d+": url(#SVGID_"+f.id+"); ";var t=new o.Color(f),e=d+": "+t.toRgb()+"; ",r=t.getAlpha();return r!==1&&(e+=d+"-opacity: "+r.toString()+"; "),e}else return d+": none; "}var i=o.util.toFixed;o.util.object.extend(o.Object.prototype,{getSvgStyles:function(d){var f=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",_=d?"":this.getSvgFilter(),I=g("fill",this.fill),z=g("stroke",this.stroke);return[z,"stroke-width: ",t,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",s,"; ",I,"fill-rule: ",f,"; ","opacity: ",m,";",_,y].join("")},getSvgSpanStyles:function(d,f){var t="; ",r=d.fontFamily?"font-family: "+(d.fontFamily.indexOf("'")===-1&&d.fontFamily.indexOf('"')===-1?"'"+d.fontFamily+"'":d.fontFamily)+t:"",e=d.strokeWidth?"stroke-width: "+d.strokeWidth+t:"",r=r,c=d.fontSize?"font-size: "+d.fontSize+"px"+t:"",p=d.fontStyle?"font-style: "+d.fontStyle+t:"",s=d.fontWeight?"font-weight: "+d.fontWeight+t:"",m=d.fill?g("fill",d.fill):"",y=d.stroke?g("stroke",d.stroke):"",_=this.getSvgTextDecoration(d),I=d.deltaY?"baseline-shift: "+-d.deltaY+"; ":"";return _&&(_="text-decoration: "+_+t),[y,e,r,c,p,s,_,m,I,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(d){return["overline","underline","line-through"].filter(function(f){return d[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(d,f){var t=d?this.calcTransformMatrix():this.calcOwnMatrix(),e='transform="'+o.util.matrixToSVG(t);return e+(f||"")+'" '},_setSVGBg:function(d){if(this.backgroundColor){var f=o.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,f),'" y="',i(-this.height/2,f),'" width="',i(this.width,f),'" height="',i(this.height,f),`"></rect>
`)}},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(d),{reviver:d})},toClipPathSVG:function(d){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(d),{reviver:d})},_createBaseClipPathSVGMarkup:function(d,f){f=f||{};var t=f.reviver,e=f.additionalTransform||"",r=[this.getSvgTransform(!0,e),this.getSvgCommons()].join(""),c=d.indexOf("COMMON_PARTS");return d[c]=r,t?t(d.join("")):d.join("")},_createBaseSVGMarkup:function(d,f){f=f||{};var t=f.noStyle,e=f.reviver,r=t?"":'style="'+this.getSvgStyles()+'" ',c=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=p&&p.absolutePositioned,y=this.stroke,_=this.fill,I=this.shadow,z,F=[],U,X=d.indexOf("COMMON_PARTS"),J=f.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+o.Object.__uid++,U='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(e)+`</clipPath>
`),m&&F.push("<g ",c,this.getSvgCommons(),` >
`),F.push("<g ",this.getSvgTransform(!1),m?"":c+this.getSvgCommons(),` >
`),z=[r,s,t?"":this.addPaintOrder()," ",J?'transform="'+J+'" ':""].join(""),d[X]=z,_&&_.toLive&&F.push(_.toSVG(this)),y&&y.toLive&&F.push(y.toSVG(this)),I&&F.push(I.toSVG(this)),p&&F.push(U),F.push(d.join("")),F.push(`</g>
`),m&&F.push(`</g>
`),e?e(F.join("")):F.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var g=o.util.object.extend,i="stateProperties";function d(t,e,r){var c={},p=!0;r.forEach(function(s){c[s]=t[s]}),g(t[e],c,p)}function f(t,e,r){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var c=0,p=t.length;c<p;c++)if(!f(t[c],e[c]))return!1;return!0}else if(t&&typeof t=="object"){var s=Object.keys(t),m;if(!e||typeof e!="object"||!r&&s.length!==Object.keys(e).length)return!1;for(var c=0,p=s.length;c<p;c++)if(m=s[c],!(m==="canvas"||m==="group")&&!f(t[m],e[m]))return!1;return!0}}o.util.object.extend(o.Object.prototype,{hasStateChanged:function(t){t=t||i;var e="_"+t;return Object.keys(this[e]).length<this[t].length?!0:!f(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||i,r="_"+e;return this[r]?(d(this,r,this[e]),t&&t.stateProperties&&d(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var e=t.propertySet||i;return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var g=o.util.degreesToRadians;o.util.object.extend(o.Object.prototype,{_findTargetCorner:function(i,d){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=i.x,t=i.y,e,r,c=Object.keys(this.oCoords),p=c.length-1,s;for(this.__corner=0;p>=0;p--)if(s=c[p],!!this.isControlVisible(s)&&(r=this._getImageLines(d?this.oCoords[s].touchCorner:this.oCoords[s].corner),e=this._findCrossPoints({x:f,y:t},r),e!==0&&e%2===1))return this.__corner=s,s;return!1},forEachControl:function(i){for(var d in this.controls)i(this.controls[d],d,this)},_setCornerCoords:function(){var i=this.oCoords;for(var d in i){var f=this.controls[d];i[d].corner=f.calcCornerCoords(this.angle,this.cornerSize,i[d].x,i[d].y,!1),i[d].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,i[d].x,i[d].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var d=this.getCenterPoint(),f=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return i.translate(d.x,d.y),i.scale(1/t[0],1/t[3]),i.rotate(g(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-f.x/2,-f.y/2,f.x,f.y),i.restore(),this},drawBorders:function(i,d){d=d||{};var f=this._calculateCurrentDimensions(),t=this.borderScaleFactor,e=f.x+t,r=f.y+t,c=typeof d.hasControls<"u"?d.hasControls:this.hasControls,p=!1;return i.save(),i.strokeStyle=d.borderColor||this.borderColor,this._setLineDash(i,d.borderDashArray||this.borderDashArray),i.strokeRect(-e/2,-r/2,e,r),c&&(i.beginPath(),this.forEachControl(function(s,m,y){s.withConnection&&s.getVisibility(y,m)&&(p=!0,i.moveTo(s.x*e,s.y*r),i.lineTo(s.x*e+s.offsetX,s.y*r+s.offsetY))}),p&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,d,f){f=f||{};var t=o.util.sizeAfterTransform(this.width,this.height,d),e=this.strokeWidth,r=this.strokeUniform,c=this.borderScaleFactor,p=t.x+e*(r?this.canvas.getZoom():d.scaleX)+c,s=t.y+e*(r?this.canvas.getZoom():d.scaleY)+c;return i.save(),this._setLineDash(i,f.borderDashArray||this.borderDashArray),i.strokeStyle=f.borderColor||this.borderColor,i.strokeRect(-p/2,-s/2,p,s),i.restore(),this},drawControls:function(i,d){d=d||{},i.save();var f=this.canvas.getRetinaScaling(),t,e;return i.setTransform(f,0,0,f,0,0),i.strokeStyle=i.fillStyle=d.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=d.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,d.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(t=this.group.calcTransformMatrix()),this.forEachControl(function(r,c,p){e=p.oCoords[c],r.getVisibility(p,c)&&(t&&(e=o.util.transformPoint(e,t)),r.render(i,e.x,e.y,d,p))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,d){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=d,this},setControlsVisibility:function(i){i||(i={});for(var d in i)this.setControlVisible(d,i[d]);return this},onDeselect:function(){},onSelect:function(){}})}(),o.util.object.extend(o.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(g,i){i=i||{};var d=function(){},f=i.onComplete||d,t=i.onChange||d,e=this;return o.util.animate({startValue:g.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(r){g.set("left",r),e.requestRenderAll(),t()},onComplete:function(){g.setCoords(),f()}}),this},fxCenterObjectV:function(g,i){i=i||{};var d=function(){},f=i.onComplete||d,t=i.onChange||d,e=this;return o.util.animate({startValue:g.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(r){g.set("top",r),e.requestRenderAll(),t()},onComplete:function(){g.setCoords(),f()}}),this},fxRemove:function(g,i){i=i||{};var d=function(){},f=i.onComplete||d,t=i.onChange||d,e=this;return o.util.animate({startValue:g.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(r){g.set("opacity",r),e.requestRenderAll(),t()},onComplete:function(){e.remove(g),f()}}),this}}),o.util.object.extend(o.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var g=[],i,d;for(i in arguments[0])g.push(i);for(var f=0,t=g.length;f<t;f++)i=g[f],d=f!==t-1,this._animate(i,arguments[0][i],arguments[1],d)}else this._animate.apply(this,arguments);return this},_animate:function(g,i,d,f){var t=this,e;i=i.toString(),d?d=o.util.object.clone(d):d={},~g.indexOf(".")&&(e=g.split("."));var r=t.colorProperties.indexOf(g)>-1||e&&t.colorProperties.indexOf(e[1])>-1,c=e?this.get(e[0])[e[1]]:this.get(g);"from"in d||(d.from=c),r||(~i.indexOf("=")?i=c+parseFloat(i.replace("=","")):i=parseFloat(i));var p={startValue:d.from,endValue:i,byValue:d.by,easing:d.easing,duration:d.duration,abort:d.abort&&function(s,m,y){return d.abort.call(t,s,m,y)},onChange:function(s,m,y){e?t[e[0]][e[1]]=s:t.set(g,s),!f&&d.onChange&&d.onChange(s,m,y)},onComplete:function(s,m,y){f||(t.setCoords(),d.onComplete&&d.onComplete(s,m,y))}};return r?o.util.animateColor(p.startValue,p.endValue,p.duration,p):o.util.animate(p)}}),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(r,c){r||(r=[0,0,0,0]),this.callSuper("initialize",c),this.set("x1",r[0]),this.set("y1",r[1]),this.set("x2",r[2]),this.set("y2",r[3]),this._setWidthHeight(c)},_setWidthHeight:function(r){r||(r={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in r?r.left:this._getLeftToOriginX(),this.top="top"in r?r.top:this._getTopToOriginY()},_set:function(r,c){return this.callSuper("_set",r,c),typeof t[r]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(r){r.beginPath();var c=this.calcLinePoints();r.moveTo(c.x1,c.y1),r.lineTo(c.x2,c.y2),r.lineWidth=this.strokeWidth;var p=r.strokeStyle;r.strokeStyle=this.stroke||r.fillStyle,this.stroke&&this._renderStroke(r),r.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(r){return d(this.callSuper("toObject",r),this.calcLinePoints())},_getNonTransformedDimensions:function(){var r=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(r.y-=this.strokeWidth),this.height===0&&(r.x-=this.strokeWidth)),r},calcLinePoints:function(){var r=this.x1<=this.x2?-1:1,c=this.y1<=this.y2?-1:1,p=r*this.width*.5,s=c*this.height*.5,m=r*this.width*-.5,y=c*this.height*-.5;return{x1:p,x2:m,y1:s,y2:y}},_toSVG:function(){var r=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(r,c,p){p=p||{};var s=i.parseAttributes(r,i.Line.ATTRIBUTE_NAMES),m=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];c(new i.Line(m,d(s,p)))},i.Line.fromObject=function(r,c){function p(m){delete m.points,c&&c(m)}var s=f(r,!0);s.points=[r.x1,r.y1,r.x2,r.y2],i.Object._fromObject("Line",s,p,"points")};function e(r,c){var p=r.origin,s=r.axis1,m=r.axis2,y=r.dimension,_=c.nearest,I=c.center,z=c.farthest;return function(){switch(this.get(p)){case _:return Math.min(this.get(s),this.get(m));case I:return Math.min(this.get(s),this.get(m))+.5*this.get(y);case z:return Math.max(this.get(s),this.get(m))}}}}(x),function(g){var i=g.fabric||(g.fabric={}),d=Math.PI;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:d*2,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),t==="radius"&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,e=0,r=0,c=(this.endAngle-this.startAngle)%(2*d);if(c===0)t=["<circle ","COMMON_PARTS",'cx="'+e+'" cy="'+r+'" ','r="',this.radius,`" />
`];else{var p=i.util.cos(this.startAngle)*this.radius,s=i.util.sin(this.startAngle)*this.radius,m=i.util.cos(this.endAngle)*this.radius,y=i.util.sin(this.endAngle)*this.radius,_=c>d?"1":"0";t=['<path d="M '+p+" "+s," A "+this.radius+" "+this.radius," 0 ",+_+" 1"," "+m+" "+y,'" ',"COMMON_PARTS",` />
`]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",t*2).set("height",t*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,e){var r=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!f(r))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,e(new i.Circle(r))};function f(t){return"radius"in t&&t.radius>=0}i.Circle.fromObject=function(t,e){i.Object._fromObject("Circle",t,e)}}(x),function(g){var i=g.fabric||(g.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(d){var f=this.width/2,t=this.height/2;d.beginPath(),d.moveTo(-f,t),d.lineTo(0,-t),d.lineTo(f,t),d.closePath(),this._renderPaintInOrder(d)},_toSVG:function(){var d=this.width/2,f=this.height/2,t=[-d+" "+f,"0 "+-f,d+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',t,'" />']}}),i.Triangle.fromObject=function(d,f){return i.Object._fromObject("Triangle",d,f)}}(x),function(g){var i=g.fabric||(g.fabric={}),d=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,t){switch(this.callSuper("_set",f,t),f){case"rx":this.rx=t,this.set("width",t*2);break;case"ry":this.ry=t,this.set("height",t*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,d,!1),f.restore(),this._renderPaintInOrder(f)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(f,t){var e=i.parseAttributes(f,i.Ellipse.ATTRIBUTE_NAMES);e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,t(new i.Ellipse(e))},i.Ellipse.fromObject=function(f,t){i.Object._fromObject("Ellipse",f,t)}}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var t=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,c=this.height,p=-this.width/2,s=-this.height/2,m=t!==0||e!==0,y=1-.5522847498;f.beginPath(),f.moveTo(p+t,s),f.lineTo(p+r-t,s),m&&f.bezierCurveTo(p+r-y*t,s,p+r,s+y*e,p+r,s+e),f.lineTo(p+r,s+c-e),m&&f.bezierCurveTo(p+r,s+c-y*e,p+r-y*t,s+c,p+r-t,s+c),f.lineTo(p+t,s+c),m&&f.bezierCurveTo(p+y*t,s+c,p,s+c-y*e,p,s+c-e),f.lineTo(p,s+e),m&&f.bezierCurveTo(p,s+y*e,p+y*t,s,p+t,s),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,t=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',t,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(f,t,e){if(!f)return t(null);e=e||{};var r=i.parseAttributes(f,i.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0,r.height=r.height||0,r.width=r.width||0;var c=new i.Rect(d(e?i.util.object.clone(e):{},r));c.visible=c.visible&&c.width>0&&c.height>0,t(c)},i.Rect.fromObject=function(f,t){return i.Object._fromObject("Rect",f,t)}}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.util.array.min,t=i.util.array.max,e=i.util.toFixed;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(r,c){c=c||{},this.points=r||[],this.callSuper("initialize",c),this._setPositionDimensions(c)},_setPositionDimensions:function(r){var c=this._calcDimensions(r),p;this.width=c.width,this.height=c.height,r.fromSVG||(p=this.translateToGivenOrigin({x:c.left-this.strokeWidth/2,y:c.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof r.left>"u"&&(this.left=r.fromSVG?c.left:p.x),typeof r.top>"u"&&(this.top=r.fromSVG?c.top:p.y),this.pathOffset={x:c.left+this.width/2,y:c.top+this.height/2}},_calcDimensions:function(){var r=this.points,c=f(r,"x")||0,p=f(r,"y")||0,s=t(r,"x")||0,m=t(r,"y")||0,y=s-c,_=m-p;return{left:c,top:p,width:y,height:_}},toObject:function(r){return d(this.callSuper("toObject",r),{points:this.points.concat()})},_toSVG:function(){for(var r=[],c=this.pathOffset.x,p=this.pathOffset.y,s=i.Object.NUM_FRACTION_DIGITS,m=0,y=this.points.length;m<y;m++)r.push(e(this.points[m].x-c,s),",",e(this.points[m].y-p,s)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',r.join(""),`" />
`]},commonRender:function(r){var c,p=this.points.length,s=this.pathOffset.x,m=this.pathOffset.y;if(!p||isNaN(this.points[p-1].y))return!1;r.beginPath(),r.moveTo(this.points[0].x-s,this.points[0].y-m);for(var y=0;y<p;y++)c=this.points[y],r.lineTo(c.x-s,c.y-m);return!0},_render:function(r){!this.commonRender(r)||this._renderPaintInOrder(r)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(r){return function(c,p,s){if(!c)return p(null);s||(s={});var m=i.parsePointsAttribute(c.getAttribute("points")),y=i.parseAttributes(c,i[r].ATTRIBUTE_NAMES);y.fromSVG=!0,p(new i[r](m,d(y,s)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(r,c){return i.Object._fromObject("Polyline",r,c,"points")}}(x),function(g){var i=g.fabric||(g.fabric={});if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_render:function(d){!this.commonRender(d)||(d.closePath(),this._renderPaintInOrder(d))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(d,f){i.Object._fromObject("Polygon",d,f,"points")}}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.array.min,f=i.util.array.max,t=i.util.object.extend,e=Object.prototype.toString,r=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(c,p){p=p||{},this.callSuper("initialize",p),c||(c=[]);var s=e.call(c)==="[object Array]";this.path=i.util.makePathSimpler(s?c:i.util.parsePath(c)),this.path&&i.Polyline.prototype._setPositionDimensions.call(this,p)},_renderPathCommands:function(c){var p,s=0,m=0,y=0,_=0,I=0,z=0,F=-this.pathOffset.x,U=-this.pathOffset.y;c.beginPath();for(var X=0,J=this.path.length;X<J;++X)switch(p=this.path[X],p[0]){case"L":y=p[1],_=p[2],c.lineTo(y+F,_+U);break;case"M":y=p[1],_=p[2],s=y,m=_,c.moveTo(y+F,_+U);break;case"C":y=p[5],_=p[6],I=p[3],z=p[4],c.bezierCurveTo(p[1]+F,p[2]+U,I+F,z+U,y+F,_+U);break;case"Q":c.quadraticCurveTo(p[1]+F,p[2]+U,p[3]+F,p[4]+U),y=p[3],_=p[4],I=p[1],z=p[2];break;case"z":case"Z":y=s,_=m,c.closePath();break}},_render:function(c){this._renderPathCommands(c),this._renderPaintInOrder(c)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(c){return t(this.callSuper("toObject",c),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(c){var p=this.toObject(["sourcePath"].concat(c));return p.sourcePath&&delete p.path,p},_toSVG:function(){var c=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',c,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var c=i.Object.NUM_FRACTION_DIGITS;return" translate("+r(-this.pathOffset.x,c)+", "+r(-this.pathOffset.y,c)+")"},toClipPathSVG:function(c){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:p})},toSVG:function(c){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c=[],p=[],s,m=0,y=0,_=0,I=0,z,F=0,U=this.path.length;F<U;++F){switch(s=this.path[F],s[0]){case"L":_=s[1],I=s[2],z=[];break;case"M":_=s[1],I=s[2],m=_,y=I,z=[];break;case"C":z=i.util.getBoundsOfCurve(_,I,s[1],s[2],s[3],s[4],s[5],s[6]),_=s[5],I=s[6];break;case"Q":z=i.util.getBoundsOfCurve(_,I,s[1],s[2],s[1],s[2],s[3],s[4]),_=s[3],I=s[4];break;case"z":case"Z":_=m,I=y;break}z.forEach(function(_t){c.push(_t.x),p.push(_t.y)}),c.push(_),p.push(I)}var X=d(c)||0,J=d(p)||0,lt=f(c)||0,st=f(p)||0,Mt=lt-X,It=st-J;return{left:X,top:J,width:Mt,height:It}}}),i.Path.fromObject=function(c,p){if(typeof c.sourcePath=="string"){var s=c.sourcePath;i.loadSVGFromURL(s,function(m){var y=m[0];y.setOptions(c),p&&p(y)})}else i.Object._fromObject("Path",c,p,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(c,p,s){var m=i.parseAttributes(c,i.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,p(new i.Path(m.d,t(m,s)))}}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.array.min,f=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,r){e=e||{},this._objects=[],r&&this.callSuper("initialize",e),this._objects=t||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;if(r)this._updateObjectsACoords();else{var p=e&&e.centerPoint;e.originX!==void 0&&(this.originX=e.originX),e.originY!==void 0&&(this.originY=e.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=this._objects.length;e--;)this._objects[e].setCoords(t)},_updateObjectsCoords:function(e){for(var e=e||this.getCenterPoint(),r=this._objects.length;r--;)this._updateObjectCoords(this._objects[r],e)},_updateObjectCoords:function(t,e){var r=t.left,c=t.top,p=!0;t.set({left:r-e.x,top:c-e.y}),t.group=this,t.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),t&&(e&&i.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(t,e);if(t==="canvas")for(;r--;)this._objects[r]._set(t,e);i.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,r=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var s=p.includeDefaultValues;p.includeDefaultValues=e;var m=p.toObject(t);return p.includeDefaultValues=s,m}),c=i.Object.prototype.toObject.call(this,t);return c.objects=r,c},toDatalessObject:function(t){var e,r=this.sourcePath;if(r)e=r;else{var c=this.includeDefaultValues;e=this._objects.map(function(s){var m=s.includeDefaultValues;s.includeDefaultValues=c;var y=s.toDatalessObject(t);return s.includeDefaultValues=m,y})}var p=i.Object.prototype.toDatalessObject.call(this,t);return p.objects=e,p},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=i.Object.prototype.shouldCache.call(this);if(t){for(var e=0,r=this._objects.length;e<r;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,r=this._objects.length;e<r;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,r=this._objects.length;e<r;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var c=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-c/2,-p/2,c,p)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(e){i.util.addTransformToObject(e,t),delete e.group,e.setCoords()}),this},realizeTransform:function(t,e){return i.util.addTransformToObject(t,e),t},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var c=new i.ActiveSelection([]);return c.set(r),c.type="activeSelection",e.remove(this),t.forEach(function(p){p.group=c,p.dirty=!0,e.add(p)}),c.canvas=e,c._objects=t,e._activeObject=c,c.setCoords(),c}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject(function(e){e.setCoords(t)}),this},_calcBounds:function(t){for(var e=[],r=[],c,p,s,m=["tr","br","bl","tl"],y=0,_=this._objects.length,I,z=m.length;y<_;++y){for(c=this._objects[y],s=c.calcACoords(),I=0;I<z;I++)p=m[I],e.push(s[p].x),r.push(s[p].y);c.aCoords=s}this._getBounds(e,r,t)},_getBounds:function(t,e,r){var c=new i.Point(d(t),d(e)),p=new i.Point(f(t),f(e)),s=c.y||0,m=c.x||0,y=p.x-c.x||0,_=p.y-c.y||0;this.width=y,this.height=_,r||this.setPositionByOrigin({x:m,y:s},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS",` >
`],r=0,c=this._objects.length;r<c;r++)e.push("		",this._objects[r].toSVG(t));return e.push(`</g>
`),e},getSvgStyles:function(){var t=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],r=0,c=this._objects.length;r<c;r++)e.push("	",this._objects[r].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),i.Group.fromObject=function(t,e){var r=t.objects,c=i.util.object.clone(t,!0);if(delete c.objects,typeof r=="string"){i.loadSVGFromURL(r,function(p){var s=i.util.groupSVGElements(p,t,r);s.set(c),e&&e(s)});return}i.util.enlivenObjects(r,function(p){i.util.enlivenObjects([t.clipPath],function(s){var m=i.util.object.clone(t,!0);m.clipPath=s[0],delete m.objects,e&&e(new i.Group(p,m,!0))})})})}(x),function(g){var i=g.fabric||(g.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(d,f){f=f||{},this._objects=d||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var d=this._objects.concat();this._objects=[];var f=i.Object.prototype.toObject.call(this),t=new i.Group([]);if(delete f.type,t.set(f),d.forEach(function(r){r.canvas.remove(r),r.group=t}),t._objects=d,!this.canvas)return t;var e=this.canvas;return e.add(t),e._activeObject=t,t.setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(d,f,t){d.save(),d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",d,f),t=t||{},typeof t.hasControls>"u"&&(t.hasControls=!1),t.forActiveSelection=!0;for(var e=0,r=this._objects.length;e<r;e++)this._objects[e]._renderControls(d,t);d.restore()}}),i.ActiveSelection.fromObject=function(d,f){i.util.enlivenObjects(d.objects,function(t){delete d.objects,f&&f(new i.ActiveSelection(t,d,!0))})})}(x),function(g){var i=o.util.object.extend;if(g.fabric||(g.fabric={}),g.fabric.Image){o.warn("fabric.Image is already defined.");return}o.Image=o.util.createClass(o.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:o.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:o.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(d,f){f||(f={}),this.filters=[],this.cacheKey="texture"+o.Object.__uid++,this.callSuper("initialize",f),this._initElement(d,f)},getElement:function(){return this._element||{}},setElement:function(d,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=d,this._originalElement=d,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(d){var f=o.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(d)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(d){o.util.cleanUpJsdomNode(this[d]),this[d]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var d=this.getElement();return{width:d.naturalWidth||d.width,height:d.naturalHeight||d.height}},_stroke:function(d){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,t=this.height/2;d.beginPath(),d.moveTo(-f,-t),d.lineTo(f,-t),d.lineTo(f,t),d.lineTo(-f,t),d.lineTo(-f,-t),d.closePath()}},toObject:function(d){var f=[];this.filters.forEach(function(e){e&&f.push(e.toObject())});var t=i(this.callSuper("toObject",["cropX","cropY"].concat(d)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var d=[],f=[],t,e=this._element,r=-this.width/2,c=-this.height/2,p="",s="";if(!e)return[];if(this.hasCrop()){var m=o.Object.__uid++;d.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+r+'" y="'+c+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',c-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.height,s,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,t=["	<rect ",'x="',r,'" y="',c,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?d=d.concat(t,f):d=d.concat(f,t),d},getSrc:function(d){var f=d?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(d,f,t){return o.util.loadImage(d,function(e,r){this.setElement(e,t),this._setWidthHeight(),f&&f(this,r)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var d=this.resizeFilter,f=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),e=t.scaleX,r=t.scaleY,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!d||e>f&&r>f){this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=e,this._lastScaleY=r;return}o.filterBackend||(o.filterBackend=o.initFilterBackend());var p=o.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=c.width,y=c.height;p.width=m,p.height=y,this._element=p,this._lastScaleX=d.scaleX=e,this._lastScaleY=d.scaleY=r,o.filterBackend.applyFilters([d],c,m,y,this._element,s),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(d){if(d=d||this.filters||[],d=d.filter(function(c){return c&&!c.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),d.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,t=f.naturalWidth||f.width,e=f.naturalHeight||f.height;if(this._element===this._originalElement){var r=o.util.createCanvasElement();r.width=t,r.height=e,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,e),this._lastScaleX=1,this._lastScaleY=1;return o.filterBackend||(o.filterBackend=o.initFilterBackend()),o.filterBackend.applyFilters(d,this._originalElement,t,e,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(d){o.util.setImageSmoothing(d,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(d),this._renderPaintInOrder(d)},drawCacheOnCanvas:function(d){o.util.setImageSmoothing(d,this.imageSmoothing),o.Object.prototype.drawCacheOnCanvas.call(this,d)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(d){var f=this._element;if(!!f){var t=this._filterScalingX,e=this._filterScalingY,r=this.width,c=this.height,p=Math.min,s=Math.max,m=s(this.cropX,0),y=s(this.cropY,0),_=f.naturalWidth||f.width,I=f.naturalHeight||f.height,z=m*t,F=y*e,U=p(r*t,_-z),X=p(c*e,I-F),J=-r/2,lt=-c/2,st=p(r,_/t-m),Mt=p(c,I/e-y);f&&d.drawImage(f,z,F,U,X,J,lt,st,Mt)}},_needsResize:function(){var d=this.getTotalObjectScaling();return d.scaleX!==this._lastScaleX||d.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(d,f){this.setElement(o.util.getById(d),f),o.util.addClass(this.getElement(),o.Image.CSS_CANVAS)},_initConfig:function(d){d||(d={}),this.setOptions(d),this._setWidthHeight(d)},_initFilters:function(d,f){d&&d.length?o.util.enlivenObjects(d,function(t){f&&f(t)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(d){d||(d={});var f=this.getElement();this.width=d.width||f.naturalWidth||f.width||0,this.height=d.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var d=o.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,t=this._element.height,e=1,r=1,c=0,p=0,s=0,m=0,y,_=this.width,I=this.height,z={width:_,height:I};return d&&(d.alignX!=="none"||d.alignY!=="none")?(d.meetOrSlice==="meet"&&(e=r=o.util.findScaleToFit(this._element,z),y=(_-f*e)/2,d.alignX==="Min"&&(c=-y),d.alignX==="Max"&&(c=y),y=(I-t*r)/2,d.alignY==="Min"&&(p=-y),d.alignY==="Max"&&(p=y)),d.meetOrSlice==="slice"&&(e=r=o.util.findScaleToCover(this._element,z),y=f-_/e,d.alignX==="Mid"&&(s=y/2),d.alignX==="Max"&&(s=y),y=t-I/r,d.alignY==="Mid"&&(m=y/2),d.alignY==="Max"&&(m=y),f=_/e,t=I/r)):(e=_/f,r=I/t),{width:f,height:t,scaleX:e,scaleY:r,offsetLeft:c,offsetTop:p,cropX:s,cropY:m}}}),o.Image.CSS_CANVAS="canvas-img",o.Image.prototype.getSvgSrc=o.Image.prototype.getSrc,o.Image.fromObject=function(d,f){var t=o.util.object.clone(d);o.util.loadImage(t.src,function(e,r){if(r){f&&f(null,!0);return}o.Image.prototype._initFilters.call(t,t.filters,function(c){t.filters=c||[],o.Image.prototype._initFilters.call(t,[t.resizeFilter],function(p){t.resizeFilter=p[0],o.util.enlivenObjects([t.clipPath],function(s){t.clipPath=s[0];var m=new o.Image(e,t);f(m,!1)})})})},null,t.crossOrigin)},o.Image.fromURL=function(d,f,t){o.util.loadImage(d,function(e,r){f&&f(new o.Image(e,t),r)},null,t&&t.crossOrigin)},o.Image.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),o.Image.fromElement=function(d,f,t){var e=o.parseAttributes(d,o.Image.ATTRIBUTE_NAMES);o.Image.fromURL(e["xlink:href"],f,i(t?o.util.object.clone(t):{},e))}}(x),o.util.object.extend(o.Object.prototype,{_getAngleValueForStraighten:function(){var g=this.angle%360;return g>0?Math.round((g-1)/90)*90:Math.round(g/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(g){g=g||{};var i=function(){},d=g.onComplete||i,f=g.onChange||i,t=this;return o.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){t.rotate(e),f()},onComplete:function(){t.setCoords(),d()}}),this}}),o.util.object.extend(o.StaticCanvas.prototype,{straightenObject:function(g){return g.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(g){return g.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function g(d,f){var t="precision "+f+` float;
void main(){}`,e=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(e,t),d.compileShader(e),!!d.getShaderParameter(e,d.COMPILE_STATUS)}o.isWebglSupported=function(d){if(o.isLikelyNode)return!1;d=d||o.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),t=f.getContext("webgl")||f.getContext("experimental-webgl"),e=!1;if(t){o.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),e=o.maxTextureSize>=d;for(var r=["highp","mediump","lowp"],c=0;c<3;c++)if(g(t,r[c])){o.webGlPrecision=r[c];break}}return this.isSupported=e,e},o.WebglFilterBackend=i;function i(d){d&&d.tileSize&&(this.tileSize=d.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(d,f){this.dispose(),this.createWebGLCanvas(d,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(d,f)},chooseFastestCopyGLTo2DMethod:function(d,f){var t=typeof window.performance<"u",e;try{new ImageData(1,1),e=!0}catch{e=!1}var r=typeof ArrayBuffer<"u",c=typeof Uint8ClampedArray<"u";if(!!(t&&e&&r&&c)){var p=o.util.createCanvasElement(),s=new ArrayBuffer(d*f*4);if(o.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=L;return}var m={imageBuffer:s,destinationWidth:d,destinationHeight:f,targetCanvas:p},y,_,I;p.width=d,p.height=f,y=window.performance.now(),w.call(m,this.gl,m),_=window.performance.now()-y,y=window.performance.now(),L.call(m,this.gl,m),I=window.performance.now()-y,_>I?(this.imageBuffer=s,this.copyGLTo2D=L):this.copyGLTo2D=w}},createWebGLCanvas:function(d,f){var t=o.util.createCanvasElement();t.width=d,t.height=f;var e={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=t.getContext("webgl",e);r||(r=t.getContext("experimental-webgl",e)),r&&(r.clearColor(0,0,0,0),this.canvas=t,this.gl=r)},applyFilters:function(d,f,t,e,r,c){var p=this.gl,s;c&&(s=this.getCachedTexture(c,f));var m={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:t,sourceHeight:e,destinationWidth:t,destinationHeight:e,context:p,sourceTexture:this.createTexture(p,t,e,!s&&f),targetTexture:this.createTexture(p,t,e),originalTexture:s||this.createTexture(p,t,e,!s&&f),passes:d.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},y=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,y),d.forEach(function(_){_&&_.applyTo(m)}),E(m),this.copyGLTo2D(p,m),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(m.sourceTexture),p.deleteTexture(m.targetTexture),p.deleteFramebuffer(y),r.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(d,f,t,e){var r=d.createTexture();return d.bindTexture(d.TEXTURE_2D,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),e?d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,e):d.texImage2D(d.TEXTURE_2D,0,d.RGBA,f,t,0,d.RGBA,d.UNSIGNED_BYTE,null),r},getCachedTexture:function(d,f){if(this.textureCache[d])return this.textureCache[d];var t=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[d]=t,t},evictCachesForKey:function(d){this.textureCache[d]&&(this.gl.deleteTexture(this.textureCache[d]),delete this.textureCache[d])},copyGLTo2D:w,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var d=this.gl,f={renderer:"",vendor:""};if(!d)return f;var t=d.getExtension("WEBGL_debug_renderer_info");if(t){var e=d.getParameter(t.UNMASKED_RENDERER_WEBGL),r=d.getParameter(t.UNMASKED_VENDOR_WEBGL);e&&(f.renderer=e.toLowerCase()),r&&(f.vendor=r.toLowerCase())}return this.gpuInfo=f,f}}}();function E(g){var i=g.targetCanvas,d=i.width,f=i.height,t=g.destinationWidth,e=g.destinationHeight;(d!==t||f!==e)&&(i.width=t,i.height=e)}function w(g,i){var d=g.canvas,f=i.targetCanvas,t=f.getContext("2d");t.translate(0,f.height),t.scale(1,-1);var e=d.height-f.height;t.drawImage(d,0,e,f.width,f.height,0,0,f.width,f.height)}function L(g,i){var d=i.targetCanvas,f=d.getContext("2d"),t=i.destinationWidth,e=i.destinationHeight,r=t*e*4,c=new Uint8Array(this.imageBuffer,0,r),p=new Uint8ClampedArray(this.imageBuffer,0,r);g.readPixels(0,0,t,e,g.RGBA,g.UNSIGNED_BYTE,c);var s=new ImageData(p,t,e);f.putImageData(s,0,0)}(function(){var g=function(){};o.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:g,dispose:g,clearWebGLCaches:g,resources:{},applyFilters:function(d,f,t,e,r){var c=r.getContext("2d");c.drawImage(f,0,0,t,e);var p=c.getImageData(0,0,t,e),s=c.getImageData(0,0,t,e),m={sourceWidth:t,sourceHeight:e,imageData:p,originalEl:f,originalImageData:s,canvasEl:r,ctx:c,filterBackend:this};return d.forEach(function(y){y.applyTo(m)}),(m.imageData.width!==t||m.imageData.height!==e)&&(r.width=m.imageData.width,r.height=m.imageData.height),c.putImageData(m.imageData,0,0),m}}})(),o.Image=o.Image||{},o.Image.filters=o.Image.filters||{},o.Image.filters.BaseFilter=o.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(g){g&&this.setOptions(g)},setOptions:function(g){for(var i in g)this[i]=g[i]},createProgram:function(g,i,d){i=i||this.fragmentSource,d=d||this.vertexSource,o.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+o.webGlPrecision+" float"));var f=g.createShader(g.VERTEX_SHADER);if(g.shaderSource(f,d),g.compileShader(f),!g.getShaderParameter(f,g.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+g.getShaderInfoLog(f));var t=g.createShader(g.FRAGMENT_SHADER);if(g.shaderSource(t,i),g.compileShader(t),!g.getShaderParameter(t,g.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+g.getShaderInfoLog(t));var e=g.createProgram();if(g.attachShader(e,f),g.attachShader(e,t),g.linkProgram(e),!g.getProgramParameter(e,g.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+g.getProgramInfoLog(e));var r=this.getAttributeLocations(g,e),c=this.getUniformLocations(g,e)||{};return c.uStepW=g.getUniformLocation(e,"uStepW"),c.uStepH=g.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:r,uniformLocations:c}},getAttributeLocations:function(g,i){return{aPosition:g.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(g,i,d){var f=i.aPosition,t=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,t),g.enableVertexAttribArray(f),g.vertexAttribPointer(f,2,g.FLOAT,!1,0,0),g.bufferData(g.ARRAY_BUFFER,d,g.STATIC_DRAW)},_setupFrameBuffer:function(g){var i=g.context,d,f;g.passes>1?(d=g.destinationWidth,f=g.destinationHeight,(g.sourceWidth!==d||g.sourceHeight!==f)&&(i.deleteTexture(g.targetTexture),g.targetTexture=g.filterBackend.createTexture(i,d,f)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,g.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(g){g.passes--,g.pass++;var i=g.targetTexture;g.targetTexture=g.sourceTexture,g.sourceTexture=i},isNeutralState:function(){var g=this.mainParameter,i=o.Image.filters[this.type].prototype;if(g)if(Array.isArray(i[g])){for(var d=i[g].length;d--;)if(this[g][d]!==i[g][d])return!1;return!0}else return i[g]===this[g];else return!1},applyTo:function(g){g.webgl?(this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g)):this.applyTo2d(g)},retrieveShader:function(g){return g.programCache.hasOwnProperty(this.type)||(g.programCache[this.type]=this.createProgram(g.context)),g.programCache[this.type]},applyToWebGL:function(g){var i=g.context,d=this.retrieveShader(g);g.pass===0&&g.originalTexture?i.bindTexture(i.TEXTURE_2D,g.originalTexture):i.bindTexture(i.TEXTURE_2D,g.sourceTexture),i.useProgram(d.program),this.sendAttributeData(i,d.attributeLocations,g.aPosition),i.uniform1f(d.uniformLocations.uStepW,1/g.sourceWidth),i.uniform1f(d.uniformLocations.uStepH,1/g.sourceHeight),this.sendUniformData(i,d.uniformLocations),i.viewport(0,0,g.destinationWidth,g.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(g,i,d){g.activeTexture(d),g.bindTexture(g.TEXTURE_2D,i),g.activeTexture(g.TEXTURE0)},unbindAdditionalTexture:function(g,i){g.activeTexture(i),g.bindTexture(g.TEXTURE_2D,null),g.activeTexture(g.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(g){this[this.mainParameter]=g},sendUniformData:function(){},createHelpLayer:function(g){if(!g.helpLayer){var i=document.createElement("canvas");i.width=g.sourceWidth,i.height=g.sourceHeight,g.helpLayer=i}},toObject:function(){var g={type:this.type},i=this.mainParameter;return i&&(g[i]=this[i]),g},toJSON:function(){return this.toObject()}}),o.Image.filters.BaseFilter.fromObject=function(g,i){var d=new o.Image.filters[g.type](g);return i&&i(d),d},function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.ColorMatrix=f(d.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e=t.imageData,r=e.data,c=r.length,p=this.matrix,s,m,y,_,I,z=this.colorsOnly;for(I=0;I<c;I+=4)s=r[I],m=r[I+1],y=r[I+2],z?(r[I]=s*p[0]+m*p[1]+y*p[2]+p[4]*255,r[I+1]=s*p[5]+m*p[6]+y*p[7]+p[9]*255,r[I+2]=s*p[10]+m*p[11]+y*p[12]+p[14]*255):(_=r[I+3],r[I]=s*p[0]+m*p[1]+y*p[2]+_*p[3]+p[4]*255,r[I+1]=s*p[5]+m*p[6]+y*p[7]+_*p[8]+p[9]*255,r[I+2]=s*p[10]+m*p[11]+y*p[12]+_*p[13]+p[14]*255,r[I+3]=s*p[15]+m*p[16]+y*p[17]+_*p[18]+p[19]*255)},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var r=this.matrix,c=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],p=[r[4],r[9],r[14],r[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,c),t.uniform4fv(e.uConstants,p)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Brightness=f(d.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(this.brightness!==0){var e=t.imageData,r=e.data,c,p=r.length,s=Math.round(this.brightness*255);for(c=0;c<p;c+=4)r[c]=r[c]+s,r[c+1]=r[c+1]+s,r[c+2]=r[c+2]+s}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.Image.filters,t=i.util.createClass;f.Convolute=t(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(e){var r=Math.sqrt(this.matrix.length),c=this.type+"_"+r+"_"+(this.opaque?1:0),p=this.fragmentSource[c];return e.programCache.hasOwnProperty(c)||(e.programCache[c]=this.createProgram(e.context,p)),e.programCache[c]},applyTo2d:function(e){var r=e.imageData,c=r.data,p=this.matrix,s=Math.round(Math.sqrt(p.length)),m=Math.floor(s/2),y=r.width,_=r.height,I=e.ctx.createImageData(y,_),z=I.data,F=this.opaque?1:0,U,X,J,lt,st,Mt,It,_t,rt,Wt,V,Zt,Q;for(V=0;V<_;V++)for(Wt=0;Wt<y;Wt++){for(st=(V*y+Wt)*4,U=0,X=0,J=0,lt=0,Q=0;Q<s;Q++)for(Zt=0;Zt<s;Zt++)It=V+Q-m,Mt=Wt+Zt-m,!(It<0||It>=_||Mt<0||Mt>=y)&&(_t=(It*y+Mt)*4,rt=p[Q*s+Zt],U+=c[_t]*rt,X+=c[_t+1]*rt,J+=c[_t+2]*rt,F||(lt+=c[_t+3]*rt));z[st]=U,z[st+1]=X,z[st+2]=J,F?z[st+3]=c[st+3]:z[st+3]=lt}e.imageData=I},getUniformLocations:function(e,r){return{uMatrix:e.getUniformLocation(r,"uMatrix"),uOpaque:e.getUniformLocation(r,"uOpaque"),uHalfSize:e.getUniformLocation(r,"uHalfSize"),uSize:e.getUniformLocation(r,"uSize")}},sendUniformData:function(e,r){e.uniform1fv(r.uMatrix,this.matrix)},toObject:function(){return d(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Grayscale=f(d.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e=t.imageData,r=e.data,c,p=r.length,s,m=this.mode;for(c=0;c<p;c+=4)m==="average"?s=(r[c]+r[c+1]+r[c+2])/3:m==="lightness"?s=(Math.min(r[c],r[c+1],r[c+2])+Math.max(r[c],r[c+1],r[c+2]))/2:m==="luminosity"&&(s=.21*r[c]+.72*r[c+1]+.07*r[c+2]),r[c]=s,r[c+1]=s,r[c+2]=s},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var r=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,r)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var r=1;t.uniform1i(e.uMode,r)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Invert=f(d.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(t){var e=t.imageData,r=e.data,c,p=r.length;for(c=0;c<p;c+=4)r[c]=255-r[c],r[c+1]=255-r[c+1],r[c+2]=255-r[c+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.Image.filters,t=i.util.createClass;f.Noise=t(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(e){if(this.noise!==0){var r=e.imageData,c=r.data,p,s=c.length,m=this.noise,y;for(p=0,s=c.length;p<s;p+=4)y=(.5-Math.random())*m,c[p]+=y,c[p+1]+=y,c[p+2]+=y}},getUniformLocations:function(e,r){return{uNoise:e.getUniformLocation(r,"uNoise"),uSeed:e.getUniformLocation(r,"uSeed")}},sendUniformData:function(e,r){e.uniform1f(r.uNoise,this.noise/255),e.uniform1f(r.uSeed,Math.random())},toObject:function(){return d(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Pixelate=f(d.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(t){var e=t.imageData,r=e.data,c=e.height,p=e.width,s,m,y,_,I,z,F,U,X,J,lt;for(m=0;m<c;m+=this.blocksize)for(y=0;y<p;y+=this.blocksize)for(s=m*4*p+y*4,_=r[s],I=r[s+1],z=r[s+2],F=r[s+3],J=Math.min(m+this.blocksize,c),lt=Math.min(y+this.blocksize,p),U=m;U<J;U++)for(X=y;X<lt;X++)s=U*4*p+X*4,r[s]=_,r[s+1]=I,r[s+2]=z,r[s+3]=F},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.extend,f=i.Image.filters,t=i.util.createClass;f.RemoveColor=t(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(e){var r=e.imageData,c=r.data,p,s=this.distance*255,m,y,_,I=new i.Color(this.color).getSource(),z=[I[0]-s,I[1]-s,I[2]-s],F=[I[0]+s,I[1]+s,I[2]+s];for(p=0;p<c.length;p+=4)m=c[p],y=c[p+1],_=c[p+2],m>z[0]&&y>z[1]&&_>z[2]&&m<F[0]&&y<F[1]&&_<F[2]&&(c[p+3]=0)},getUniformLocations:function(e,r){return{uLow:e.getUniformLocation(r,"uLow"),uHigh:e.getUniformLocation(r,"uHigh")}},sendUniformData:function(e,r){var c=new i.Color(this.color).getSource(),p=parseFloat(this.distance),s=[0+c[0]/255-p,0+c[1]/255-p,0+c[2]/255-p,1],m=[c[0]/255+p,c[1]/255+p,c[2]/255+p,1];e.uniform4fv(r.uLow,s),e.uniform4fv(r.uHigh,m)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var e in t)d[e]=f(d.ColorMatrix,{type:e,matrix:t[e],mainParameter:!1,colorsOnly:!0}),i.Image.filters[e].fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric,d=i.Image.filters,f=i.util.createClass;d.BlendColor=f(d.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(t){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[t]+`}
}`},retrieveShader:function(t){var e=this.type+"_"+this.mode,r;return t.programCache.hasOwnProperty(e)||(r=this.buildSource(this.mode),t.programCache[e]=this.createProgram(t.context,r)),t.programCache[e]},applyTo2d:function(t){var e=t.imageData,r=e.data,c=r.length,p,s,m,y,_,I,z,F=1-this.alpha;z=new i.Color(this.color).getSource(),p=z[0]*this.alpha,s=z[1]*this.alpha,m=z[2]*this.alpha;for(var U=0;U<c;U+=4)switch(y=r[U],_=r[U+1],I=r[U+2],this.mode){case"multiply":r[U]=y*p/255,r[U+1]=_*s/255,r[U+2]=I*m/255;break;case"screen":r[U]=255-(255-y)*(255-p)/255,r[U+1]=255-(255-_)*(255-s)/255,r[U+2]=255-(255-I)*(255-m)/255;break;case"add":r[U]=y+p,r[U+1]=_+s,r[U+2]=I+m;break;case"diff":case"difference":r[U]=Math.abs(y-p),r[U+1]=Math.abs(_-s),r[U+2]=Math.abs(I-m);break;case"subtract":r[U]=y-p,r[U+1]=_-s,r[U+2]=I-m;break;case"darken":r[U]=Math.min(y,p),r[U+1]=Math.min(_,s),r[U+2]=Math.min(I,m);break;case"lighten":r[U]=Math.max(y,p),r[U+1]=Math.max(_,s),r[U+2]=Math.max(I,m);break;case"overlay":r[U]=p<128?2*y*p/255:255-2*(255-y)*(255-p)/255,r[U+1]=s<128?2*_*s/255:255-2*(255-_)*(255-s)/255,r[U+2]=m<128?2*I*m/255:255-2*(255-I)*(255-m)/255;break;case"exclusion":r[U]=p+y-2*p*y/255,r[U+1]=s+_-2*s*_/255,r[U+2]=m+I-2*m*I/255;break;case"tint":r[U]=p+y*F,r[U+1]=s+_*F,r[U+2]=m+I*F}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var r=new i.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(e.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric,d=i.Image.filters,f=i.util.createClass;d.BlendImage=f(d.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(t){var e=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,r)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,r=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,r,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,r=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/r,1]},applyTo2d:function(t){var e=t.imageData,r=t.filterBackend.resources,c=e.data,p=c.length,s=e.width,m=e.height,y,_,I,z,F,U,X,J,lt,st,Mt=this.image,It;r.blendImage||(r.blendImage=i.util.createCanvasElement()),lt=r.blendImage,st=lt.getContext("2d"),lt.width!==s||lt.height!==m?(lt.width=s,lt.height=m):st.clearRect(0,0,s,m),st.setTransform(Mt.scaleX,0,0,Mt.scaleY,Mt.left,Mt.top),st.drawImage(Mt._element,0,0,s,m),It=st.getImageData(0,0,s,m).data;for(var _t=0;_t<p;_t+=4)switch(F=c[_t],U=c[_t+1],X=c[_t+2],J=c[_t+3],y=It[_t],_=It[_t+1],I=It[_t+2],z=It[_t+3],this.mode){case"multiply":c[_t]=F*y/255,c[_t+1]=U*_/255,c[_t+2]=X*I/255,c[_t+3]=J*z/255;break;case"mask":c[_t+3]=z;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var r=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(t,e){i.Image.fromObject(t.image,function(r){var c=i.util.object.clone(t);c.image=r,e(new i.Image.filters.BlendImage(c))})}}(x),function(g){var i=g.fabric||(g.fabric={}),d=Math.pow,f=Math.floor,t=Math.sqrt,e=Math.abs,r=Math.round,c=Math.sin,p=Math.ceil,s=i.Image.filters,m=i.util.createClass;s.Resize=m(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,_){return{uDelta:y.getUniformLocation(_,"uDelta"),uTaps:y.getUniformLocation(_,"uTaps")}},sendUniformData:function(y,_){y.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(y){var _=this.getFilterWindow(),I=this.type+"_"+_;if(!y.programCache.hasOwnProperty(I)){var z=this.generateShader(_);y.programCache[I]=this.createProgram(y.context,z)}return y.programCache[I]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,I=this.getFilterWindow(),z=new Array(I),F=1;F<=I;F++)z[F-1]=y(F*_);return z},generateShader:function(z){for(var _=new Array(z),I=this.fragmentSourceTOP,z,F=1;F<=z;F++)_[F-1]=F+".0 * uDelta";return I+="uniform float uTaps["+z+`];
`,I+=`void main() {
`,I+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,I+=`  float sum = 1.0;
`,_.forEach(function(U,X){I+="  color += texture2D(uTexture, vTexCoord + "+U+") * uTaps["+X+`];
`,I+="  color += texture2D(uTexture, vTexCoord - "+U+") * uTaps["+X+`];
`,I+="  sum += 2.0 * uTaps["+X+`];
`}),I+=`  gl_FragColor = color / sum;
`,I+="}",I},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(_){if(_>=y||_<=-y)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var I=_/y;return c(_)/_*c(I)/I}},applyTo2d:function(y){var _=y.imageData,I=this.scaleX,z=this.scaleY;this.rcpScaleX=1/I,this.rcpScaleY=1/z;var F=_.width,U=_.height,X=r(F*I),J=r(U*z),lt;this.resizeType==="sliceHack"?lt=this.sliceByTwo(y,F,U,X,J):this.resizeType==="hermite"?lt=this.hermiteFastResize(y,F,U,X,J):this.resizeType==="bilinear"?lt=this.bilinearFiltering(y,F,U,X,J):this.resizeType==="lanczos"&&(lt=this.lanczosResize(y,F,U,X,J)),y.imageData=lt},sliceByTwo:function(y,_,I,z,F){var U=y.imageData,X=.5,J=!1,lt=!1,st=_*X,Mt=I*X,It=i.filterBackend.resources,_t,rt,Wt=0,V=0,Zt=_,Q=0;for(It.sliceByTwo||(It.sliceByTwo=document.createElement("canvas")),_t=It.sliceByTwo,(_t.width<_*1.5||_t.height<I)&&(_t.width=_*1.5,_t.height=I),rt=_t.getContext("2d"),rt.clearRect(0,0,_*1.5,I),rt.putImageData(U,0,0),z=f(z),F=f(F);!J||!lt;)_=st,I=Mt,z<f(st*X)?st=f(st*X):(st=z,J=!0),F<f(Mt*X)?Mt=f(Mt*X):(Mt=F,lt=!0),rt.drawImage(_t,Wt,V,_,I,Zt,Q,st,Mt),Wt=Zt,V=Q,Q+=Mt;return rt.getImageData(Wt,V,z,F)},lanczosResize:function(y,_,I,z,F){function U(nt){var $,K,G,q,at,et,Ct,dt,yt,Ot,Tt;for(Q.x=(nt+.5)*Mt,St.x=f(Q.x),$=0;$<F;$++){for(Q.y=($+.5)*It,St.y=f(Q.y),at=0,et=0,Ct=0,dt=0,yt=0,K=St.x-Wt;K<=St.x+Wt;K++)if(!(K<0||K>=_)){Ot=f(1e3*e(K-Q.x)),Zt[Ot]||(Zt[Ot]={});for(var ct=St.y-V;ct<=St.y+V;ct++)ct<0||ct>=I||(Tt=f(1e3*e(ct-Q.y)),Zt[Ot][Tt]||(Zt[Ot][Tt]=st(t(d(Ot*_t,2)+d(Tt*rt,2))/1e3)),G=Zt[Ot][Tt],G>0&&(q=(ct*_+K)*4,at+=G,et+=G*X[q],Ct+=G*X[q+1],dt+=G*X[q+2],yt+=G*X[q+3]))}q=($*z+nt)*4,lt[q]=et/at,lt[q+1]=Ct/at,lt[q+2]=dt/at,lt[q+3]=yt/at}return++nt<z?U(nt):J}var X=y.imageData.data,J=y.ctx.createImageData(z,F),lt=J.data,st=this.lanczosCreate(this.lanczosLobes),Mt=this.rcpScaleX,It=this.rcpScaleY,_t=2/this.rcpScaleX,rt=2/this.rcpScaleY,Wt=p(Mt*this.lanczosLobes/2),V=p(It*this.lanczosLobes/2),Zt={},Q={},St={};return U(0)},bilinearFiltering:function(y,_,I,z,F){var U,X,J,lt,st,Mt,It,_t,rt,Wt,V,Zt,Q=0,St,nt=this.rcpScaleX,$=this.rcpScaleY,K=4*(_-1),G=y.imageData,q=G.data,at=y.ctx.createImageData(z,F),et=at.data;for(It=0;It<F;It++)for(_t=0;_t<z;_t++)for(st=f(nt*_t),Mt=f($*It),rt=nt*_t-st,Wt=$*It-Mt,St=4*(Mt*_+st),V=0;V<4;V++)U=q[St+V],X=q[St+4+V],J=q[St+K+V],lt=q[St+K+4+V],Zt=U*(1-rt)*(1-Wt)+X*rt*(1-Wt)+J*Wt*(1-rt)+lt*rt*Wt,et[Q++]=Zt;return at},hermiteFastResize:function(y,_,I,z,F){for(var U=this.rcpScaleX,X=this.rcpScaleY,J=p(U/2),lt=p(X/2),st=y.imageData,Mt=st.data,It=y.ctx.createImageData(z,F),_t=It.data,rt=0;rt<F;rt++)for(var Wt=0;Wt<z;Wt++){for(var V=(Wt+rt*z)*4,Zt=0,Q=0,St=0,nt=0,$=0,K=0,G=0,q=(rt+.5)*X,at=f(rt*X);at<(rt+1)*X;at++)for(var et=e(q-(at+.5))/lt,Ct=(Wt+.5)*U,dt=et*et,yt=f(Wt*U);yt<(Wt+1)*U;yt++){var Ot=e(Ct-(yt+.5))/J,Tt=t(dt+Ot*Ot);Tt>1&&Tt<-1||(Zt=2*Tt*Tt*Tt-3*Tt*Tt+1,Zt>0&&(Ot=4*(yt+at*_),G+=Zt*Mt[Ot+3],St+=Zt,Mt[Ot+3]<255&&(Zt=Zt*Mt[Ot+3]/250),nt+=Zt*Mt[Ot],$+=Zt*Mt[Ot+1],K+=Zt*Mt[Ot+2],Q+=Zt))}_t[V]=nt/Q,_t[V+1]=$/Q,_t[V+2]=K/Q,_t[V+3]=G/St}return It},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Contrast=f(d.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(this.contrast!==0){var e=t.imageData,r,p,c=e.data,p=c.length,s=Math.floor(this.contrast*255),m=259*(s+255)/(255*(259-s));for(r=0;r<p;r+=4)c[r]=m*(c[r]-128)+128,c[r+1]=m*(c[r+1]-128)+128,c[r+2]=m*(c[r+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Saturation=f(d.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(this.saturation!==0){var e=t.imageData,r=e.data,c=r.length,p=-this.saturation,s,m;for(s=0;s<c;s+=4)m=Math.max(r[s],r[s+1],r[s+2]),r[s]+=m!==r[s]?(m-r[s])*p:0,r[s+1]+=m!==r[s+1]?(m-r[s+1])*p:0,r[s+2]+=m!==r[s+2]?(m-r[s+2])*p:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Vibrance=f(d.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(this.vibrance!==0){var e=t.imageData,r=e.data,c=r.length,p=-this.vibrance,s,m,y,_;for(s=0;s<c;s+=4)m=Math.max(r[s],r[s+1],r[s+2]),y=(r[s]+r[s+1]+r[s+2])/3,_=Math.abs(m-y)*2/255*p,r[s]+=m!==r[s]?(m-r[s])*_:0,r[s+1]+=m!==r[s+1]?(m-r[s+1])*_:0,r[s+2]+=m!==r[s+2]?(m-r[s+2])*_:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Blur=f(d.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e=t.filterBackend.resources,r,c,p=t.imageData.width,s=t.imageData.height;e.blurLayer1||(e.blurLayer1=i.util.createCanvasElement(),e.blurLayer2=i.util.createCanvasElement()),r=e.blurLayer1,c=e.blurLayer2,(r.width!==p||r.height!==s)&&(c.width=r.width=p,c.height=r.height=s);var m=r.getContext("2d"),y=c.getContext("2d"),_=15,I,z,F,U,X=this.blur*.06*.5;for(m.putImageData(t.imageData,0,0),y.clearRect(0,0,p,s),U=-_;U<=_;U++)I=(Math.random()-.5)/4,z=U/_,F=X*z*p+I,y.globalAlpha=1-Math.abs(z),y.drawImage(r,F,I),m.drawImage(c,0,0),y.globalAlpha=1,y.clearRect(0,0,c.width,c.height);for(U=-_;U<=_;U++)I=(Math.random()-.5)/4,z=U/_,F=X*z*s+I,y.globalAlpha=1-Math.abs(z),y.drawImage(r,I,F),m.drawImage(c,0,0),y.globalAlpha=1,y.clearRect(0,0,c.width,c.height);t.ctx.drawImage(r,0,0);var J=t.ctx.getImageData(0,0,r.width,r.height);return m.globalAlpha=1,m.clearRect(0,0,r.width,r.height),J},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var r=this.chooseRightDelta();t.uniform2fv(e.delta,r)},chooseRightDelta:function(){var t=1,e=[0,0],r;return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),r=t*this.blur*.12,this.horizontal?e[0]=r:e[1]=r,e}}),d.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Gamma=f(d.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],d.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e=t.imageData,r=e.data,c=this.gamma,p=r.length,s=1/c[0],m=1/c[1],y=1/c[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,p=256;_<p;_++)this.rVals[_]=Math.pow(_/255,s)*255,this.gVals[_]=Math.pow(_/255,m)*255,this.bVals[_]=Math.pow(_/255,y)*255;for(_=0,p=r.length;_<p;_+=4)r[_]=this.rVals[r[_]],r[_+1]=this.gVals[r[_+1]],r[_+2]=this.bVals[r[_+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.Composed=f(d.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(t,e){var r=t.subFilters||[],c=r.map(function(s){return new i.Image.filters[s.type](s)}),p=new i.Image.filters.Composed({subFilters:c});return e&&e(p),p}}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.Image.filters,f=i.util.createClass;d.HueRotation=f(d.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=i.util.cos(t),r=i.util.sin(t),c=1/3,p=Math.sqrt(c)*r,s=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+s/3,this.matrix[1]=c*s-p,this.matrix[2]=c*s+p,this.matrix[5]=c*s+p,this.matrix[6]=e+c*s,this.matrix[7]=c*s-p,this.matrix[10]=c*s-p,this.matrix[11]=c*s+p,this.matrix[12]=e+c*s},isNeutralState:function(t){return this.calculateMatrix(),d.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),d.BaseFilter.prototype.applyTo.call(this,t)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(x),function(g){var i=g.fabric||(g.fabric={}),d=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(f),cacheProperties:i.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e?e.styles||{}:{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=i.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,r,c,p,s,m,y=0,_=this._textLines.length;y<_;y++)if(!(this.textAlign!=="justify"&&(y===_-1||this.isEndOfWrapping(y)))&&(c=0,p=this._textLines[y],e=this.getLineWidth(y),e<this.width&&(m=this.textLines[y].match(this._reSpacesAndTabs)))){r=m.length,t=(this.width-e)/r;for(var I=0,z=p.length;I<=z;I++)s=this.__charBounds[y][I],this._reSpaceAndTab.test(p[I])?(s.width+=t,s.kernedWidth+=t,s.left+=c,c+=t):s.left+=c}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,r){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,r)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,r=this._textLines.length;e<r;e++){var c=this.getLineWidth(e);c>t&&(t=c)}return t},_renderTextLine:function(t,e,r,c,p,s){this._renderChars(t,e,r,c,p,s)},_renderTextLinesBackground:function(t){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var e,r,c=t.fillStyle,p,s,m=this._getLeftOffset(),y=this._getTopOffset(),_=0,I=0,z,F,U=this.path,X,J=0,lt=this._textLines.length;J<lt;J++){if(e=this.getHeightOfLine(J),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",J)){y+=e;continue}p=this._textLines[J],r=this._getLineLeftOffset(J),I=0,_=0,s=this.getValueOfPropertyAt(J,0,"textBackgroundColor");for(var st=0,Mt=p.length;st<Mt;st++)z=this.__charBounds[J][st],F=this.getValueOfPropertyAt(J,st,"textBackgroundColor"),U?(t.save(),t.translate(z.renderLeft,z.renderTop),t.rotate(z.angle),t.fillStyle=F,F&&t.fillRect(-z.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),z.width,e/this.lineHeight),t.restore()):F!==s?(X=m+r+_,this.direction==="rtl"&&(X=this.width-X-I),t.fillStyle=s,s&&t.fillRect(X,y,I,e/this.lineHeight),_=z.left,I=z.width,s=F):I+=z.kernedWidth;F&&!U&&(X=m+r+_,this.direction==="rtl"&&(X=this.width-X-I),t.fillStyle=F,t.fillRect(X,y,I,e/this.lineHeight)),y+=e}t.fillStyle=c,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();i.charWidthsCache[e]||(i.charWidthsCache[e]={});var r=i.charWidthsCache[e],c=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return r[c]||(r[c]={}),r[c]},_measureChar:function(t,e,r,c){var p=this.getFontCache(e),s=this._getFontDeclaration(e),m=this._getFontDeclaration(c),y=r+t,_=s===m,I,z,F,U=e.fontSize/this.CACHE_FONT_SIZE,X;if(r&&p[r]!==void 0&&(F=p[r]),p[t]!==void 0&&(X=I=p[t]),_&&p[y]!==void 0&&(z=p[y],X=z-F),I===void 0||F===void 0||z===void 0){var J=this.getMeasuringContext();this._setTextStyles(J,e,!0)}return I===void 0&&(X=I=J.measureText(t).width,p[t]=I),F===void 0&&_&&r&&(F=J.measureText(r).width,p[r]=F),_&&z===void 0&&(z=J.measureText(y).width,p[y]=z,X=z-F),{width:I*U,kernedWidth:X*U}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e=0,r,c,p=this._textLines[t],s,m,y=0,_=new Array(p.length),I=0,z,F,U=this.path,X=this.pathSide==="right";for(this.__charBounds[t]=_,r=0;r<p.length;r++)c=p[r],m=this._getGraphemeBox(c,t,r,s),_[r]=m,e+=m.kernedWidth,s=c;if(_[r]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},U){switch(F=U.segmentsInfo[U.segmentsInfo.length-1].length,z=i.util.getPointOnPath(U.path,0,U.segmentsInfo),z.x+=U.pathOffset.x,z.y+=U.pathOffset.y,this.textAlign){case"left":I=X?F-e:0;break;case"center":I=(F-e)/2;break;case"right":I=X?0:F-e;break}for(I+=this.pathStartOffset*(X?-1:1),r=X?p.length-1:0;X?r>=0:r<p.length;X?r--:r++)m=_[r],I>F?I%=F:I<0&&(I+=F),this._setGraphemeOnPath(I,m,z),I+=m.kernedWidth}return{width:e,numOfSpaces:y}},_setGraphemeOnPath:function(t,e,r){var c=t+e.kernedWidth/2,p=this.path,s=i.util.getPointOnPath(p.path,c,p.segmentsInfo);e.renderLeft=s.x-r.x,e.renderTop=s.y-r.y,e.angle=s.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(t,e,r,c,p){var s=this.getCompleteStyleDeclaration(e,r),m=c?this.getCompleteStyleDeclaration(e,r-1):{},y=this._measureChar(t,s,c,m),_=y.kernedWidth,I=y.width,z;this.charSpacing!==0&&(z=this._getWidthOfCharSpacing(),I+=z,_+=z);var F={width:I,left:0,height:s.fontSize,kernedWidth:_,deltaY:s.deltaY};if(r>0&&!p){var U=this.__charBounds[e][r-1];F.left=U.left+U.width+y.kernedWidth-y.width}return F},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],r=this.getHeightOfChar(t,0),c=1,p=e.length;c<p;c++)r=Math.max(this.getHeightOfChar(t,c),r);return this.__lineHeights[t]=r*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,r=0,c=this._textLines.length;r<c;r++)t=this.getHeightOfLine(r),e+=r===c-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var r=0,c=this._getLeftOffset(),p=this._getTopOffset(),s=0,m=this._textLines.length;s<m;s++){var y=this.getHeightOfLine(s),_=y/this.lineHeight,I=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],c+I,p+r+_,s),r+=y}t.restore()},_renderTextFill:function(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,r,c,p,s){var m=this.getHeightOfLine(s),y=this.textAlign.indexOf("justify")!==-1,_,I,z="",F,U=0,X,J=this.path,lt=!y&&this.charSpacing===0&&this.isEmptyStyles(s)&&!J,st=this.direction==="ltr",Mt=this.direction==="ltr"?1:-1,It;if(e.save(),p-=m*this._fontSizeFraction/this.lineHeight,lt){e.canvas.setAttribute("dir",st?"ltr":"rtl"),e.direction=st?"ltr":"rtl",e.textAlign=st?"left":"right",this._renderChar(t,e,s,0,r.join(""),c,p,m),e.restore();return}for(var _t=0,rt=r.length-1;_t<=rt;_t++)X=_t===rt||this.charSpacing||J,z+=r[_t],F=this.__charBounds[s][_t],U===0?(c+=Mt*(F.kernedWidth-F.width),U+=F.width):U+=F.kernedWidth,y&&!X&&this._reSpaceAndTab.test(r[_t])&&(X=!0),X||(_=_||this.getCompleteStyleDeclaration(s,_t),I=this.getCompleteStyleDeclaration(s,_t+1),X=this._hasStyleChanged(_,I)),X&&(J?(e.save(),e.translate(F.renderLeft,F.renderTop),e.rotate(F.angle),this._renderChar(t,e,s,_t,z,-U/2,0,m),e.restore()):(It=c,e.canvas.setAttribute("dir",st?"ltr":"rtl"),e.direction=st?"ltr":"rtl",e.textAlign=st?"left":"right",this._renderChar(t,e,s,_t,z,It,p,m)),z="",_=I,c+=Mt*U,U=0);e.restore()},_applyPatternGradientTransformText:function(t){var e=i.util.createCanvasElement(),r,c=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return e.width=c,e.height=p,r=e.getContext("2d"),r.beginPath(),r.moveTo(0,0),r.lineTo(c,0),r.lineTo(c,p),r.lineTo(0,p),r.closePath(),r.translate(c/2,p/2),r.fillStyle=t.toLive(r),this._applyPatternGradientTransform(r,t),r.fill(),r.createPattern(e,"no-repeat")},handleFiller:function(t,e,r){var c,p;return r.toLive?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(c=-this.width/2,p=-this.height/2,t.translate(c,p),t[e]=this._applyPatternGradientTransformText(r),{offsetX:c,offsetY:p}):(t[e]=r.toLive(t,this),this._applyPatternGradientTransform(t,r)):(t[e]=r,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,r,c,p,s,m){var y=this._getStyleDeclaration(r,c),_=this.getCompleteStyleDeclaration(r,c),I=t==="fillText"&&_.fill,z=t==="strokeText"&&_.stroke&&_.strokeWidth,F,U;!z&&!I||(e.save(),I&&(F=this._setFillStyles(e,_)),z&&(U=this._setStrokeStyles(e,_)),e.font=this._getFontDeclaration(_),y&&y.textBackgroundColor&&this._removeShadow(e),y&&y.deltaY&&(m+=y.deltaY),I&&e.fillText(p,s-F.offsetX,m-F.offsetY),z&&e.strokeText(p,s-U.offsetX,m-U.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,r){var c=this.get2DCursorLocation(t,!0),p=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize"),s=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"deltaY"),m={fontSize:p*r.size,deltaY:s+p*r.baseline};return this.setSelectionStyles(m,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),r=this.width-e,c=this.textAlign,p=this.direction,m,s=0,m=this.isEndOfWrapping(t);return c==="justify"||c==="justify-center"&&!m||c==="justify-right"&&!m||c==="justify-left"&&!m?0:(c==="center"&&(s=r/2),c==="right"&&(s=r),c==="justify-center"&&(s=r/2),c==="justify-right"&&(s=r),p==="rtl"&&(s-=r),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var e,r=this._textLines[t],c;return r===""?e=0:(c=this.measureLine(t),e=c.width),this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,r){var c=this._getStyleDeclaration(t,e);return c&&typeof c[r]<"u"?c[r]:this[r]},_renderTextDecoration:function(t,e){if(!(!this[e]&&!this.styleHas(e))){for(var r,c,p,s,m,y,_,I,z=this._getLeftOffset(),F=this._getTopOffset(),U,X,J,lt,st,Mt,It,_t,rt=this.path,Wt=this._getWidthOfCharSpacing(),V=this.offsets[e],Zt=0,Q=this._textLines.length;Zt<Q;Zt++){if(r=this.getHeightOfLine(Zt),!this[e]&&!this.styleHas(e,Zt)){F+=r;continue}_=this._textLines[Zt],Mt=r/this.lineHeight,s=this._getLineLeftOffset(Zt),X=0,J=0,I=this.getValueOfPropertyAt(Zt,0,e),_t=this.getValueOfPropertyAt(Zt,0,"fill"),U=F+Mt*(1-this._fontSizeFraction),c=this.getHeightOfChar(Zt,0),m=this.getValueOfPropertyAt(Zt,0,"deltaY");for(var St=0,nt=_.length;St<nt;St++)if(lt=this.__charBounds[Zt][St],st=this.getValueOfPropertyAt(Zt,St,e),It=this.getValueOfPropertyAt(Zt,St,"fill"),p=this.getHeightOfChar(Zt,St),y=this.getValueOfPropertyAt(Zt,St,"deltaY"),rt&&st&&It)t.save(),t.fillStyle=_t,t.translate(lt.renderLeft,lt.renderTop),t.rotate(lt.angle),t.fillRect(-lt.kernedWidth/2,V*p+y,lt.kernedWidth,this.fontSize/15),t.restore();else if((st!==I||It!==_t||p!==c||y!==m)&&J>0){var $=z+s+X;this.direction==="rtl"&&($=this.width-$-J),I&&_t&&(t.fillStyle=_t,t.fillRect($,U+V*c+m,J,this.fontSize/15)),X=lt.left,J=lt.width,I=st,_t=It,c=p,m=y}else J+=lt.kernedWidth;var $=z+s+X;this.direction==="rtl"&&($=this.width-$-J),t.fillStyle=It,st&&It&&t.fillRect($,U+V*c+m,J-Wt,this.fontSize/15),F+=r}this._removeShadow(t)}},_getFontDeclaration:function(t,e){var r=t||this,c=this.fontFamily,p=i.Text.genericFonts.indexOf(c.toLowerCase())>-1,s=c===void 0||c.indexOf("'")>-1||c.indexOf(",")>-1||c.indexOf('"')>-1||p?r.fontFamily:'"'+r.fontFamily+'"';return[i.isLikelyNode?r.fontWeight:r.fontStyle,i.isLikelyNode?r.fontStyle:r.fontWeight,e?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",s].join(" ")},render:function(t){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),r=new Array(e.length),c=[`
`],p=[],s=0;s<e.length;s++)r[s]=i.util.string.graphemeSplit(e[s]),p=p.concat(r[s],c);return p.pop(),{_unwrappedLines:r,lines:e,graphemeText:p,graphemeLines:r}},toObject:function(t){var e=f.concat(t),r=this.callSuper("toObject",e);return r.styles=d(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(t,e){this.callSuper("set",t,e);var r=!1,c=!1;if(typeof t=="object")for(var p in t)p==="path"&&this.setPathInfo(),r=r||this._dimensionAffectingProps.indexOf(p)!==-1,c=c||p==="path";else r=this._dimensionAffectingProps.indexOf(t)!==-1,c=t==="path";return c&&this.setPathInfo(),r&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(t,e,r){if(!t)return e(null);var c=i.parseAttributes(t,i.Text.ATTRIBUTE_NAMES),p=c.textAnchor||"left";if(r=i.util.object.extend(r?d(r):{},c),r.top=r.top||0,r.left=r.left||0,c.textDecoration){var s=c.textDecoration;s.indexOf("underline")!==-1&&(r.underline=!0),s.indexOf("overline")!==-1&&(r.overline=!0),s.indexOf("line-through")!==-1&&(r.linethrough=!0),delete r.textDecoration}"dx"in c&&(r.left+=c.dx),"dy"in c&&(r.top+=c.dy),"fontSize"in r||(r.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in t?m=t.textContent:"firstChild"in t&&t.firstChild!==null&&"data"in t.firstChild&&t.firstChild.data!==null&&(m=t.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=r.strokeWidth;r.strokeWidth=0;var _=new i.Text(m,r),I=_.getScaledHeight()/_.height,z=(_.height+_.strokeWidth)*_.lineHeight-_.height,F=z*I,U=_.getScaledHeight()+F,X=0;p==="center"&&(X=_.getScaledWidth()/2),p==="right"&&(X=_.getScaledWidth()),_.set({left:_.left-X,top:_.top-(U-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof y<"u"?y:1}),e(_)},i.Text.fromObject=function(t,e){var r=d(t),c=t.path;return delete r.path,i.Object._fromObject("Text",r,function(p){c?i.Object._fromObject("Path",c,function(s){p.set("path",s),e(p)},"path"):e(p)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(x),function(){o.util.object.extend(o.Text.prototype,{isEmptyStyles:function(g){if(!this.styles||typeof g<"u"&&!this.styles[g])return!0;var i=typeof g>"u"?this.styles:{line:this.styles[g]};for(var d in i)for(var f in i[d])for(var t in i[d][f])return!1;return!0},styleHas:function(g,i){if(!this.styles||!g||g===""||typeof i<"u"&&!this.styles[i])return!1;var d=typeof i>"u"?this.styles:{0:this.styles[i]};for(var f in d)for(var t in d[f])if(typeof d[f][t][g]<"u")return!0;return!1},cleanStyle:function(g){if(!this.styles||!g||g==="")return!1;var i=this.styles,d=0,f,t,e=!0,r=0,c;for(var p in i){f=0;for(var s in i[p]){var c=i[p][s],m=c.hasOwnProperty(g);d++,m?(t?c[g]!==t&&(e=!1):t=c[g],c[g]===this[g]&&delete c[g]):e=!1,Object.keys(c).length!==0?f++:delete i[p][s]}f===0&&delete i[p]}for(var y=0;y<this._textLines.length;y++)r+=this._textLines[y].length;e&&d===r&&(this[g]=t,this.removeStyle(g))},removeStyle:function(g){if(!(!this.styles||!g||g==="")){var i=this.styles,d,f,t;for(f in i){d=i[f];for(t in d)delete d[t][g],Object.keys(d[t]).length===0&&delete d[t];Object.keys(d).length===0&&delete i[f]}}},_extendStyles:function(g,i){var d=this.get2DCursorLocation(g);this._getLineStyle(d.lineIndex)||this._setLineStyle(d.lineIndex),this._getStyleDeclaration(d.lineIndex,d.charIndex)||this._setStyleDeclaration(d.lineIndex,d.charIndex,{}),o.util.object.extend(this._getStyleDeclaration(d.lineIndex,d.charIndex),i)},get2DCursorLocation:function(g,i){typeof g>"u"&&(g=this.selectionStart);for(var d=i?this._unwrappedTextLines:this._textLines,f=d.length,t=0;t<f;t++){if(g<=d[t].length)return{lineIndex:t,charIndex:g};g-=d[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:d[t-1].length<g?d[t-1].length:g}},getSelectionStyles:function(g,i,d){typeof g>"u"&&(g=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||g);for(var f=[],t=g;t<i;t++)f.push(this.getStyleAtPosition(t,d));return f},getStyleAtPosition:function(g,i){var d=this.get2DCursorLocation(g),f=i?this.getCompleteStyleDeclaration(d.lineIndex,d.charIndex):this._getStyleDeclaration(d.lineIndex,d.charIndex);return f||{}},setSelectionStyles:function(g,i,d){typeof i>"u"&&(i=this.selectionStart||0),typeof d>"u"&&(d=this.selectionEnd||i);for(var f=i;f<d;f++)this._extendStyles(f,g);return this._forceClearCache=!0,this},_getStyleDeclaration:function(g,i){var d=this.styles&&this.styles[g];return d?d[i]:null},getCompleteStyleDeclaration:function(g,i){for(var d=this._getStyleDeclaration(g,i)||{},f={},t,e=0;e<this._styleProperties.length;e++)t=this._styleProperties[e],f[t]=typeof d[t]>"u"?this[t]:d[t];return f},_setStyleDeclaration:function(g,i,d){this.styles[g][i]=d},_deleteStyleDeclaration:function(g,i){delete this.styles[g][i]},_getLineStyle:function(g){return!!this.styles[g]},_setLineStyle:function(g){this.styles[g]={}},_deleteLineStyle:function(g){delete this.styles[g]}})}(),function(){function g(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}o.IText=o.util.createClass(o.Text,o.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,d){this.callSuper("initialize",i,d),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,d){this[i]!==d&&(this._fireSelectionChanged(),this[i]=d),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var d=this.canvas.contextTop,f=this.canvas.viewportTransform;d.save(),d.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(d),this._clearTextArea(d),i||d.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),d=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,d):this.renderSelection(i,d),d.restore()}},_clearTextArea:function(i){var d=this.width+4,f=this.height+4;i.clearRect(-d/2,-f/2,d,f)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var d=this._getLeftOffset(),f=this._getTopOffset(),t=this._getCursorBoundariesOffsets(i);return{left:d,top:f,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var d,f,t,e=0,r=0,c,p=this.get2DCursorLocation(i);t=p.charIndex,f=p.lineIndex;for(var s=0;s<f;s++)e+=this.getHeightOfLine(s);d=this._getLineLeftOffset(f);var m=this.__charBounds[f][t];return m&&(r=m.left),this.charSpacing!==0&&t===this._textLines[f].length&&(r-=this._getWidthOfCharSpacing()),c={top:e,left:d+(r>0?r:0)},this.direction==="rtl"&&(c.left*=-1),this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(i,d){var f=this.get2DCursorLocation(),t=f.lineIndex,e=f.charIndex>0?f.charIndex-1:0,r=this.getValueOfPropertyAt(t,e,"fontSize"),c=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/c,s=i.topOffset,m=this.getValueOfPropertyAt(t,e,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-r*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,d),d.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,e,"fill"),d.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,d.fillRect(i.left+i.leftOffset-p/2,s+i.top+m,p,r)},renderSelection:function(i,d){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,e=this.textAlign.indexOf("justify")!==-1,r=this.get2DCursorLocation(f),c=this.get2DCursorLocation(t),p=r.lineIndex,s=c.lineIndex,m=r.charIndex<0?0:r.charIndex,y=c.charIndex<0?0:c.charIndex,_=p;_<=s;_++){var I=this._getLineLeftOffset(_)||0,z=this.getHeightOfLine(_),F=0,U=0,X=0;if(_===p&&(U=this.__charBounds[p][m].left),_>=p&&_<s)X=e&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===s)if(y===0)X=this.__charBounds[s][y].left;else{var J=this._getWidthOfCharSpacing();X=this.__charBounds[s][y-1].left+this.__charBounds[s][y-1].width-J}F=z,(this.lineHeight<1||_===s&&this.lineHeight>1)&&(z/=this.lineHeight);var lt=i.left+I+U,st=X-U,Mt=z,It=0;this.inCompositionMode?(d.fillStyle=this.compositionColor||"black",Mt=1,It=z):d.fillStyle=this.selectionColor,this.direction==="rtl"&&(lt=this.width-lt-st),d.fillRect(lt,i.top+i.topOffset+It,st,Mt),i.topOffset+=F}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),d=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:d}}}),o.IText.fromObject=function(i,d){if(g(i),i.styles)for(var f in i.styles)for(var t in i.styles[f])g(i.styles[f][t]);o.Object._fromObject("IText",i,d,"text")}}(),function(){var g=o.util.object.clone;o.util.object.extend(o.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var d=i.canvas;d&&(d._hasITextHandlers||(d._hasITextHandlers=!0,i._initCanvasHandlers(d)),d._iTextInstances=d._iTextInstances||[],d._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var d=i.canvas;d&&(d._iTextInstances=d._iTextInstances||[],o.util.removeFromArray(d._iTextInstances,i),d._iTextInstances.length===0&&(d._hasITextHandlers=!1,i._removeCanvasHandlers(d)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(d){d.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,d,f,t){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",d,{duration:f,onComplete:function(){e.isAborted||i[t]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var d=this,f=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){d._tick()},f)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,d=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&d&&d.clearContext(d.contextTop||d.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var d=0,f=i-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)d++,f--;for(;/\S/.test(this._text[f])&&f>-1;)d++,f--;return i-d},findWordBoundaryRight:function(i){var d=0,f=i;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)d++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)d++,f++;return i+d},findLineBoundaryLeft:function(i){for(var d=0,f=i-1;!/\n/.test(this._text[f])&&f>-1;)d++,f--;return i-d},findLineBoundaryRight:function(i){for(var d=0,f=i;!/\n/.test(this._text[f])&&f<this._text.length;)d++,f++;return i+d},searchWordBoundary:function(i,d){for(var f=this._text,t=this._reSpace.test(f[i])?i-1:i,e=f[t],r=o.reNonWord;!r.test(e)&&t>0&&t<f.length;)t+=d,e=f[t];return r.test(e)&&(t+=d===1?0:1),t},selectWord:function(i){i=i||this.selectionStart;var d=this.searchWordBoundary(i,-1),f=this.searchWordBoundary(i,1);this.selectionStart=d,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var d=this.findLineBoundaryLeft(i),f=this.findLineBoundaryRight(i);return this.selectionStart=d,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(d){d.selected=!1,d.isEditing&&d.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var d=this.getSelectionStartFromPointer(i.e),f=this.selectionStart,t=this.selectionEnd;(d!==this.__selectionStartOnMouseDown||f===t)&&(f===d||t===d)||(d>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=d):(this.selectionStart=d,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==t)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,d,f){var t=f.slice(0,i),e=o.util.string.graphemeSplit(t).length;if(i===d)return{selectionStart:e,selectionEnd:e};var r=f.slice(i,d),c=o.util.string.graphemeSplit(r).length;return{selectionStart:e,selectionEnd:e+c}},fromGraphemeToStringSelection:function(i,d,f){var t=f.slice(0,i),e=t.join("").length;if(i===d)return{selectionStart:e,selectionEnd:e};var r=f.slice(i,d),c=r.join("").length;return{selectionStart:e,selectionEnd:e+c}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,d=this._getCursorBoundaries(i),f=this.get2DCursorLocation(i),t=f.lineIndex,e=f.charIndex,r=this.getValueOfPropertyAt(t,e,"fontSize")*this.lineHeight,c=d.leftOffset,p=this.calcTransformMatrix(),s={x:d.left+c,y:d.top+d.topOffset+r},m=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,_=y.width/m,I=y.height/m,z=_-r,F=I-r,U=y.clientWidth/_,X=y.clientHeight/I;return s=o.util.transformPoint(s,p),s=o.util.transformPoint(s,this.canvas.viewportTransform),s.x*=U,s.y*=X,s.x<0&&(s.x=0),s.x>z&&(s.x=z),s.y<0&&(s.y=0),s.y>F&&(s.y=F),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:r+"px",charHeight:r}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,d=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,d&&(d.blur&&d.blur(),d.parentNode&&d.parentNode.removeChild(d)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,d){var f=this.get2DCursorLocation(i,!0),t=this.get2DCursorLocation(d,!0),e=f.lineIndex,r=f.charIndex,c=t.lineIndex,p=t.charIndex,s,m;if(e!==c){if(this.styles[e])for(s=r;s<this._unwrappedTextLines[e].length;s++)delete this.styles[e][s];if(this.styles[c])for(s=p;s<this._unwrappedTextLines[c].length;s++)m=this.styles[c][s],m&&(this.styles[e]||(this.styles[e]={}),this.styles[e][r+s-p]=m);for(s=e+1;s<=c;s++)delete this.styles[s];this.shiftLineStyles(c,e-c)}else if(this.styles[e]){m=this.styles[e];var y=p-r,_,I;for(s=r;s<p;s++)delete m[s];for(I in this.styles[e])_=parseInt(I,10),_>=p&&(m[_-y]=m[I],delete m[I])}},shiftLineStyles:function(i,d){var f=g(this.styles);for(var t in this.styles){var e=parseInt(t,10);e>i&&(this.styles[e+d]=f[e],f[e-d]||delete this.styles[e])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,d,f,t){var e,r={},c=!1,p=this._unwrappedTextLines[i].length===d;f||(f=1),this.shiftLineStyles(i,f),this.styles[i]&&(e=this.styles[i][d===0?d:d-1]);for(var s in this.styles[i]){var m=parseInt(s,10);m>=d&&(c=!0,r[m-d]=this.styles[i][s],p&&d===0||delete this.styles[i][s])}var y=!1;for(c&&!p&&(this.styles[i+f]=r,y=!0),y&&f--;f>0;)t&&t[f-1]?this.styles[i+f]={0:g(t[f-1])}:e?this.styles[i+f]={0:g(e)}:delete this.styles[i+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(i,d,f,t){this.styles||(this.styles={});var e=this.styles[i],r=e?g(e):{};f||(f=1);for(var c in r){var p=parseInt(c,10);p>=d&&(e[p+f]=r[p],r[p-f]||delete e[p])}if(this._forceClearCache=!0,t){for(;f--;)!Object.keys(t[f]).length||(this.styles[i]||(this.styles[i]={}),this.styles[i][d+f]=g(t[f]));return}if(!!e)for(var s=e[d?d-1:1];s&&f--;)this.styles[i][d+f]=g(s)},insertNewStyleBlock:function(i,d,f){for(var t=this.get2DCursorLocation(d,!0),e=[0],r=0,c=0;c<i.length;c++)i[c]===`
`?(r++,e[r]=0):e[r]++;e[0]>0&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,e[0],f),f=f&&f.slice(e[0]+1)),r&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+e[0],r);for(var c=1;c<r;c++)e[c]>0?this.insertCharStyleObject(t.lineIndex+c,0,e[c],f):f&&(this.styles[t.lineIndex+c][0]=f[0]),f=f&&f.slice(e[c]+1);e[c]>0&&this.insertCharStyleObject(t.lineIndex+c,0,e[c],f)},setSelectionStartEndWithShift:function(i,d,f){f<=i?(d===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=f):f>i&&f<d?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(d===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=d),this.selectionEnd=f)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),o.util.object.extend(o.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(g){if(!!this.canvas){this.__newClickTime=+new Date;var i=g.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",g),this._stopEvent(g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===g.x&&this.__lastPointer.y===g.y},_stopEvent:function(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(g){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(g.e))},tripleClickHandler:function(g){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(g.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(g.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(g){if(this.__isMousedown=!1,!(!this.editable||this.group||g.transform&&g.transform.actionPerformed||g.e.button&&g.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(g.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(g){var i=this.getSelectionStartFromPointer(g),d=this.selectionStart,f=this.selectionEnd;g.shiftKey?this.setSelectionStartEndWithShift(d,f,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(g){for(var i=this.getLocalPointer(g),d=0,f=0,t=0,e=0,r=0,c,p,s=0,m=this._textLines.length;s<m&&t<=i.y;s++)t+=this.getHeightOfLine(s)*this.scaleY,r=s,s>0&&(e+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));c=this._getLineLeftOffset(r),f=c*this.scaleX,p=this._textLines[r],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+f);for(var y=0,_=p.length;y<_&&(d=f,f+=this.__charBounds[r][y].kernedWidth*this.scaleX,f<=i.x);y++)e++;return this._getNewSelectionStartFromOffset(i,d,f,e,_)},_getNewSelectionStartFromOffset:function(g,i,d,f,t){var e=g.x-i,r=d-g.x,c=r>e||r<0?0:1,p=f+c;return this.flipX&&(p=t-p),p>this._text.length&&(p=this._text.length),p}}),o.util.object.extend(o.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=o.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var g=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+g.top+"; left: "+g.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+g.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):o.document.body.appendChild(this.hiddenTextarea),o.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),o.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),o.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),o.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),o.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),o.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(o.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(g){if(!!this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(g.keyCode in i)this[i[g.keyCode]](g);else if(g.keyCode in this.ctrlKeysMapDown&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapDown[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),g.keyCode>=33&&g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(g){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(g.keyCode in this.ctrlKeysMapUp&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapUp[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(g){var i=this.fromPaste;if(this.fromPaste=!1,g&&g.stopPropagation(),!!this.isEditing){var d=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,t=d.length,e,r,c=t-f,p=this.selectionStart,s=this.selectionEnd,m=p!==s,y,_,I;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var z=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),F=p>z.selectionStart;m?(e=this._text.slice(p,s),c+=s-p):t<f&&(F?e=this._text.slice(s+c,s):e=this._text.slice(p,p-c)),r=d.slice(z.selectionEnd-c,z.selectionEnd),e&&e.length&&(r.length&&(y=this.getSelectionStyles(p,p+1,!1),y=r.map(function(){return y[0]})),m?(_=p,I=s):F?(_=s-e.length,I=s):(_=s,I=s+e.length),this.removeStyleFromTo(_,I)),r.length&&(i&&r.join("")===o.copiedText&&!o.disableStyleCopyPaste&&(y=o.copiedTextStyle),this.insertNewStyleBlock(r,p,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(g){this.compositionStart=g.target.selectionStart,this.compositionEnd=g.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(o.copiedText=this.getSelectedText(),o.disableStyleCopyPaste?o.copiedTextStyle=null:o.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(g){return g&&g.clipboardData||o.window.clipboardData},_getWidthBeforeCursor:function(g,i){var d=this._getLineLeftOffset(g),f;return i>0&&(f=this.__charBounds[g][i-1],d+=f.left+f.width),d},getDownCursorOffset:function(g,i){var d=this._getSelectionForOffset(g,i),f=this.get2DCursorLocation(d),t=f.lineIndex;if(t===this._textLines.length-1||g.metaKey||g.keyCode===34)return this._text.length-d;var e=f.charIndex,r=this._getWidthBeforeCursor(t,e),c=this._getIndexOnLine(t+1,r),p=this._textLines[t].slice(e);return p.length+c+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(g,i){return g.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(g,i){var d=this._getSelectionForOffset(g,i),f=this.get2DCursorLocation(d),t=f.lineIndex;if(t===0||g.metaKey||g.keyCode===33)return-d;var e=f.charIndex,r=this._getWidthBeforeCursor(t,e),c=this._getIndexOnLine(t-1,r),p=this._textLines[t].slice(0,e),s=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+c-p.length+(1-s)},_getIndexOnLine:function(g,i){for(var d=this._textLines[g],f=this._getLineLeftOffset(g),t=f,e=0,r,c,p=0,s=d.length;p<s;p++)if(r=this.__charBounds[g][p].width,t+=r,t>i){c=!0;var m=t-r,y=t,_=Math.abs(m-i),I=Math.abs(y-i);e=I<_?p:p-1;break}return c||(e=d.length-1),e},moveCursorDown:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",g)},moveCursorUp:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",g)},_moveCursorUpOrDown:function(g,i){var d="get"+g+"CursorOffset",f=this[d](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(g){var i=this._selectionDirection==="left"?this.selectionStart+g:this.selectionEnd+g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),g!==0},moveCursorWithoutShift:function(g){return g<0?(this.selectionStart+=g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=g,this.selectionStart=this.selectionEnd),g!==0},moveCursorLeft:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",g)},_move:function(g,i,d){var f;if(g.altKey)f=this["findWordBoundary"+d](this[i]);else if(g.metaKey||g.keyCode===35||g.keyCode===36)f=this["findLineBoundary"+d](this[i]);else return this[i]+=d==="Left"?-1:1,!0;if(typeof f!==void 0&&this[i]!==f)return this[i]=f,!0},_moveLeft:function(g,i){return this._move(g,i,"Left")},_moveRight:function(g,i){return this._move(g,i,"Right")},moveCursorLeftWithoutShift:function(g){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(g,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(g){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(g,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(g,"selectionStart")},moveCursorRight:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",g)},_moveCursorLeftOrRight:function(g,i){var d="moveCursor"+g+"With";this._currentCursorOpacity=1,i.shiftKey?d+="Shift":d+="outShift",this[d](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(g){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(g,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(g,"selectionEnd")},moveCursorRightWithoutShift:function(g){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(g,i){typeof i>"u"&&(i=g+1),this.removeStyleFromTo(g,i),this._text.splice(g,i-g),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(g,i,d,f){typeof f>"u"&&(f=d),f>d&&this.removeStyleFromTo(d,f);var t=o.util.string.graphemeSplit(g);this.insertNewStyleBlock(t,d,i),this._text=[].concat(this._text.slice(0,d),t,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var g=o.util.toFixed,i=/  +/g;o.util.object.extend(o.Text.prototype,{_toSVG:function(){var d=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(d.textTop,d.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(d){var f=!0,t=this.getSvgTextDecoration(this);return[d.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",d.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(d,f){var t=[],e=[],r=d,c;this._setSVGBg(e);for(var p=0,s=this._textLines.length;p<s;p++)c=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(e,p,f+c,r),this._setSVGTextLineText(t,p,f+c,r),r+=this.getHeightOfLine(p);return{textSpans:t,textBgRects:e}},_createTextCharSpan:function(d,f,t,e){var r=d!==d.trim()||d.match(i),c=this.getSvgSpanStyles(f,r),p=c?'style="'+c+'"':"",s=f.deltaY,m="",y=o.Object.NUM_FRACTION_DIGITS;return s&&(m=' dy="'+g(s,y)+'" '),['<tspan x="',g(t,y),'" y="',g(e,y),'" ',m,p,">",o.util.string.escapeXml(d),"</tspan>"].join("")},_setSVGTextLineText:function(d,f,t,e){var r=this.getHeightOfLine(f),c=this.textAlign.indexOf("justify")!==-1,p,s,m="",y,_,I=0,z=this._textLines[f],F;e+=r*(1-this._fontSizeFraction)/this.lineHeight;for(var U=0,X=z.length-1;U<=X;U++)F=U===X||this.charSpacing,m+=z[U],y=this.__charBounds[f][U],I===0?(t+=y.kernedWidth-y.width,I+=y.width):I+=y.kernedWidth,c&&!F&&this._reSpaceAndTab.test(z[U])&&(F=!0),F||(p=p||this.getCompleteStyleDeclaration(f,U),s=this.getCompleteStyleDeclaration(f,U+1),F=this._hasStyleChangedForSvg(p,s)),F&&(_=this._getStyleDeclaration(f,U)||{},d.push(this._createTextCharSpan(m,_,t,e)),m="",p=s,t+=I,I=0)},_pushTextBgRect:function(d,f,t,e,r,c){var p=o.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(f),' x="',g(t,p),'" y="',g(e,p),'" width="',g(r,p),'" height="',g(c,p),`"></rect>
`)},_setSVGTextLineBg:function(d,f,t,e){for(var r=this._textLines[f],c=this.getHeightOfLine(f)/this.lineHeight,p=0,s=0,m,y,_=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),I=0,z=r.length;I<z;I++)m=this.__charBounds[f][I],y=this.getValueOfPropertyAt(f,I,"textBackgroundColor"),y!==_?(_&&this._pushTextBgRect(d,_,t+s,e,p,c),s=m.left,p=m.width,_=y):p+=m.kernedWidth;y&&this._pushTextBgRect(d,y,t+s,e,p,c)},_getFillAttributes:function(d){var f=d&&typeof d=="string"?new o.Color(d):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+d+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(d){for(var f=0,t=0,e=0;e<d;e++)f+=this.getHeightOfLine(e);return t=this.getHeightOfLine(e),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(d){var f=o.Object.prototype.getSvgStyles.call(this,d);return f+" white-space: pre;"}})}(),function(g){var i=g.fabric||(g.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(d){for(var f=0,t=0,e=0,r={},c=0;c<d.graphemeLines.length;c++)d.graphemeText[e]===`
`&&c>0?(t=0,e++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(d.graphemeText[e])&&c>0&&(t++,e++),r[c]={line:f,offset:t},e+=d.graphemeLines[c].length,t+=d.graphemeLines[c].length;return r},styleHas:function(d,f){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[f];t&&(f=t.line)}return i.Text.prototype.styleHas.call(this,d,f)},isEmptyStyles:function(d){if(!this.styles)return!0;var f=0,t=d+1,e,r,c=!1,p=this._styleMap[d],s=this._styleMap[d+1];p&&(d=p.line,f=p.offset),s&&(t=s.line,c=t===d,e=s.offset),r=typeof d>"u"?this.styles:{line:this.styles[d]};for(var m in r)for(var y in r[m])if(y>=f&&(!c||y<e))for(var _ in r[m][y])return!1;return!0},_getStyleDeclaration:function(d,f){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[d];if(!t)return null;d=t.line,f=t.offset+f}return this.callSuper("_getStyleDeclaration",d,f)},_setStyleDeclaration:function(d,f,t){var e=this._styleMap[d];d=e.line,f=e.offset+f,this.styles[d][f]=t},_deleteStyleDeclaration:function(d,f){var t=this._styleMap[d];d=t.line,f=t.offset+f,delete this.styles[d][f]},_getLineStyle:function(d){var f=this._styleMap[d];return!!this.styles[f.line]},_setLineStyle:function(d){var f=this._styleMap[d];this.styles[f.line]={}},_wrapText:function(d,f){var t=[],e;for(this.isWrapping=!0,e=0;e<d.length;e++)t=t.concat(this._wrapLine(d[e],e,f));return this.isWrapping=!1,t},_measureWord:function(d,f,t){var e=0,r,c=!0;t=t||0;for(var p=0,s=d.length;p<s;p++){var m=this._getGraphemeBox(d[p],f,p+t,r,c);e+=m.kernedWidth,r=d[p]}return e},_wrapLine:function(d,f,t,lt){var r=0,c=this.splitByGrapheme,p=[],s=[],m=c?i.util.string.graphemeSplit(d):d.split(this._wordJoiners),y="",_=0,I=c?"":" ",z=0,F=0,U=0,X=!0,J=this._getWidthOfCharSpacing(),lt=lt||0;m.length===0&&m.push([]),t-=lt;for(var st=0;st<m.length;st++)y=c?m[st]:i.util.string.graphemeSplit(m[st]),z=this._measureWord(y,f,_),_+=y.length,r+=F+z-J,r>t&&!X?(p.push(s),s=[],r=z,X=!0):r+=J,!X&&!c&&s.push(I),s=s.concat(y),F=c?0:this._measureWord([I],f,_),_++,X=!1,z>U&&(U=z);return st&&p.push(s),U+lt>this.dynamicMinWidth&&(this.dynamicMinWidth=U-J+lt),p},isEndOfWrapping:function(d){return!this._styleMap[d+1]||this._styleMap[d+1].line!==this._styleMap[d].line},missingNewlineOffset:function(d){return this.splitByGrapheme?this.isEndOfWrapping(d)?1:0:1},_splitTextIntoLines:function(d){for(var f=i.Text.prototype._splitTextIntoLines.call(this,d),t=this._wrapText(f.lines,this.width),e=new Array(t.length),r=0;r<t.length;r++)e[r]=t[r].join("");return f.lines=e,f.graphemeLines=t,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var d={};for(var f in this._styleMap)this._textLines[f]&&(d[this._styleMap[f].line]=1);for(var f in this.styles)d[f]||delete this.styles[f]},toObject:function(d){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(d))}}),i.Textbox.fromObject=function(d,f){return i.Object._fromObject("Textbox",d,f,"text")}}(x),function(){var g=o.controlsUtils,i=g.scaleSkewCursorStyleHandler,d=g.scaleCursorStyleHandler,f=g.scalingEqually,t=g.scalingYOrSkewingX,e=g.scalingXOrSkewingY,r=g.scaleOrSkewActionName,c=o.Object.prototype.controls;if(c.ml=new o.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:e,getActionName:r}),c.mr=new o.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:e,getActionName:r}),c.mb=new o.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:t,getActionName:r}),c.mt=new o.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:t,getActionName:r}),c.tl=new o.Control({x:-.5,y:-.5,cursorStyleHandler:d,actionHandler:f}),c.tr=new o.Control({x:.5,y:-.5,cursorStyleHandler:d,actionHandler:f}),c.bl=new o.Control({x:-.5,y:.5,cursorStyleHandler:d,actionHandler:f}),c.br=new o.Control({x:.5,y:.5,cursorStyleHandler:d,actionHandler:f}),c.mtr=new o.Control({x:0,y:-.5,actionHandler:g.rotationWithSnapping,cursorStyleHandler:g.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),o.Textbox){var p=o.Textbox.prototype.controls={};p.mtr=c.mtr,p.tr=c.tr,p.br=c.br,p.tl=c.tl,p.bl=c.bl,p.mt=c.mt,p.mb=c.mb,p.mr=new o.Control({x:.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),p.ml=new o.Control({x:-.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()},4426:function(C,x,h){C.exports=h(4486)},9406:function(C,x,h){C.exports=h(4877)},789:function(C,x,h){C.exports=h(7178)},381:function(C,x,h){C.exports=h(5603)},7636:function(C,x,h){C.exports=h(1206)},1899:function(C,x,h){C.exports=h(6174)},899:function(C,x,h){C.exports=h(57)},8005:function(C,x,h){C.exports=h(4741)},6562:function(C,x,h){C.exports=h(8368)},9131:function(C,x,h){C.exports=h(3739)},4383:function(C,x,h){C.exports=h(172)},6065:function(C,x,h){C.exports=h(4963)},1734:function(C,x,h){C.exports=h(7820)},2461:function(C,x,h){C.exports=h(5636)},5214:function(C,x,h){C.exports=h(5059)},6397:function(C,x,h){C.exports=h(3969)},8189:function(C,x,h){C.exports=h(6618)},9146:function(C,x,h){C.exports=h(5279)},4496:function(C,x,h){C.exports=h(9562)},3972:function(C,x,h){C.exports=h(652)},7172:function(C,x,h){C.exports=h(2813)},1845:function(C,x,h){C.exports=h(8664)},662:function(C,x,h){C.exports=h(1457)},711:function(C,x,h){C.exports=h(2937)},6623:function(C,x,h){C.exports=h(9297)},7077:function(C,x,h){C.exports=h(8026)},9856:function(C,x,h){C.exports=h(2044)},4230:function(C,x,h){C.exports=h(2214)},184:function(C,x,h){C.exports=h(9256)},3742:function(C,x,h){C.exports=h(5659)},1801:function(C){var x={rect:1,circle:2,triangle:1},h={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function o(i){var d=i.originX,f=i.originY,t=d.substring(0,1)+f.substring(0,1);i.startPoint=i.origins[t]}function S(i,d,f){var t=i.x,e=i.y,r=d.x,c=d.y,p=f*Math.PI/180,s=(r-t)*Math.cos(p)-(c-e)*Math.sin(p)+t,m=(r-t)*Math.sin(p)+(c-e)*Math.cos(p)+e;return{originX:t>s?"right":"left",originY:e>m?"bottom":"top"}}function M(i){return i.originX==="center"&&i.originY==="center"}function E(i,d){var f=d.getPointByOrigin("center","center"),t=-d.angle,e=S(f,i,t),r=e.originX,c=e.originY,p=d.getPointByOrigin(r,c),s=d.left-(f.x-p.x),m=d.top-(f.y-p.y);d.set({originX:r,originY:c,left:s,top:m}),d.setCoords()}function w(i,d){var f=d.startPoint,t=-d.angle,e=S(f,i,t),r=e.originX,c=e.originY;d.setPositionByOrigin(f,r,c),d.setCoords()}function L(i){var d=i.type,f=i.scaleX,t=i.scaleY,e=h[d],r=i[e.w]*f,c=i[e.h]*t;if(i.isRegular){var p=Math.max(f,t);r=i[e.w]*p,c=i[e.h]*p}var s={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};s[e.w]=r,s[e.h]=c,i.set(s)}function g(i,d){var f=d.type,t=d.strokeWidth,e=d.startPoint,r=x[f],c=h[f],p=d.type==="triangle",s={},m=Math.abs(e.x-i.x)/r,y=Math.abs(e.y-i.y)/r;m>t&&(m-=t/r),y>t&&(y-=t/r),d.isRegular&&(m=y=Math.max(m,y),p&&(y=Math.sqrt(3)/2*m)),s[c.w]=m,s[c.h]=y,d.set(s)}C.exports={setOrigins:function(d){var f=d.getPointByOrigin("left","top"),t=d.getPointByOrigin("right","top"),e=d.getPointByOrigin("right","bottom"),r=d.getPointByOrigin("left","bottom");d.origins={lt:f,rt:t,rb:e,lb:r}},resize:function(d,f,t){M(d)&&(E(f,d),o(d)),t?L(d):g(f,d),w(f,d)},adjustOriginToCenter:function(d){var f=d.getPointByOrigin("center","center"),t=d.originX,e=d.originY,r=d.getPointByOrigin(t,e),c=d.left+(f.x-r.x),p=d.top+(f.y-r.y);d.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:c,top:p}),d.setCoords()}}},2221:function(C,x,h){h(5454),h(9173);var o=h(7545);C.exports=o.Array.from},5078:function(C,x,h){h(8118);var o=h(7545);C.exports=o.Array.isArray},6135:function(C,x,h){h(9106);var o=h(5607);C.exports=o("Array").concat},9510:function(C,x,h){h(1710);var o=h(5607);C.exports=o("Array").fill},3971:function(C,x,h){h(3436);var o=h(5607);C.exports=o("Array").filter},98:function(C,x,h){h(9823);var o=h(5607);C.exports=o("Array").forEach},2089:function(C,x,h){h(2276);var o=h(5607);C.exports=o("Array").indexOf},6209:function(C,x,h){h(3838);var o=h(5607);C.exports=o("Array").map},2671:function(C,x,h){h(5818);var o=h(5607);C.exports=o("Array").slice},1375:function(C,x,h){h(2178);var o=h(5607);C.exports=o("Array").splice},3528:function(C,x,h){h(665);var o=h(5607);C.exports=o("Function").bind},5739:function(C,x,h){h(8939),h(5454);var o=h(8703);C.exports=o},278:function(C,x,h){var o=h(3528),S=Function.prototype;C.exports=function(M){var E=M.bind;return M===S||M instanceof Function&&E===S.bind?o:E}},1484:function(C,x,h){var o=h(6135),S=Array.prototype;C.exports=function(M){var E=M.concat;return M===S||M instanceof Array&&E===S.concat?o:E}},7731:function(C,x,h){var o=h(9510),S=Array.prototype;C.exports=function(M){var E=M.fill;return M===S||M instanceof Array&&E===S.fill?o:E}},3669:function(C,x,h){var o=h(3971),S=Array.prototype;C.exports=function(M){var E=M.filter;return M===S||M instanceof Array&&E===S.filter?o:E}},2604:function(C,x,h){var o=h(2089),S=Array.prototype;C.exports=function(M){var E=M.indexOf;return M===S||M instanceof Array&&E===S.indexOf?o:E}},263:function(C,x,h){var o=h(6209),S=Array.prototype;C.exports=function(M){var E=M.map;return M===S||M instanceof Array&&E===S.map?o:E}},7663:function(C,x,h){var o=h(2671),S=Array.prototype;C.exports=function(M){var E=M.slice;return M===S||M instanceof Array&&E===S.slice?o:E}},5063:function(C,x,h){var o=h(1375),S=Array.prototype;C.exports=function(M){var E=M.splice;return M===S||M instanceof Array&&E===S.splice?o:E}},6813:function(C,x,h){var o=h(3842),S=String.prototype;C.exports=function(M){var E=M.trim;return typeof M=="string"||M===S||M instanceof String&&E===S.trim?o:E}},6285:function(C,x,h){h(2666);var o=h(7545);C.exports=o.Number.parseInt},3213:function(C,x,h){h(3113);var o=h(7545),S=o.Object;C.exports=function(E,w){return S.create(E,w)}},3512:function(C,x,h){h(297);var o=h(7545),S=o.Object,M=C.exports=function(w,L,g){return S.defineProperty(w,L,g)};S.defineProperty.sham&&(M.sham=!0)},8168:function(C,x,h){h(9234);var o=h(7545);C.exports=o.Object.getPrototypeOf},8651:function(C,x,h){h(2647);var o=h(7545);C.exports=o.Object.keys},3083:function(C,x,h){h(3222);var o=h(7545);C.exports=o.Object.setPrototypeOf},2987:function(C,x,h){h(4859);var o=h(7545);C.exports=o.parseFloat},2239:function(C,x,h){h(5706);var o=h(7545);C.exports=o.parseInt},3154:function(C,x,h){h(4242),h(8939),h(6663),h(9021),h(7884),h(8885),h(1868),h(5454);var o=h(7545);C.exports=o.Promise},6577:function(C,x,h){h(5397);var o=h(7545);C.exports=o.Reflect.construct},3842:function(C,x,h){h(957);var o=h(5607);C.exports=o("String").trim},5008:function(C,x,h){h(9106),h(6663),h(6187),h(9781),h(492),h(6681),h(9594),h(3665),h(9017),h(1250),h(9786),h(503),h(6565),h(9322),h(3610),h(6886),h(3514),h(8671),h(8556),h(1367);var o=h(7545);C.exports=o.Symbol},994:function(C,x,h){h(8939),h(6663),h(5454),h(3665);var o=h(9207);C.exports=o.f("iterator")},2813:function(C,x,h){var o=h(3822);C.exports=o},8664:function(C,x,h){var o=h(1434);C.exports=o},1457:function(C,x,h){var o=h(7710);C.exports=o},2937:function(C,x,h){var o=h(4741);C.exports=o},9297:function(C,x,h){var o=h(4963);C.exports=o},8026:function(C,x,h){var o=h(7820);C.exports=o},2044:function(C,x,h){var o=h(8980);C.exports=o},2214:function(C,x,h){var o=h(6672);C.exports=o},9256:function(C,x,h){var o=h(2285);h(177),h(9031),h(6658),h(1875),h(8658),h(4592),h(6680),C.exports=o},5659:function(C,x,h){var o=h(8535);C.exports=o},6235:function(C,x,h){var o=h(6447),S=h(9288);C.exports=function(M){if(o(M))return M;throw TypeError(S(M)+" is not a function")}},1404:function(C,x,h){var o=h(2091),S=h(9288);C.exports=function(M){if(o(M))return M;throw TypeError(S(M)+" is not a constructor")}},7757:function(C,x,h){var o=h(6447);C.exports=function(S){if(typeof S=="object"||o(S))return S;throw TypeError("Can't set "+String(S)+" as a prototype")}},7423:function(C){C.exports=function(){}},6961:function(C){C.exports=function(x,h,o){if(x instanceof h)return x;throw TypeError("Incorrect "+(o?o+" ":"")+"invocation")}},1138:function(C,x,h){var o=h(5744);C.exports=function(S){if(o(S))return S;throw TypeError(String(S)+" is not an object")}},2724:function(C,x,h){var o=h(1795),S=h(7739),M=h(4104);C.exports=function(w){for(var L=o(this),g=M(L),i=arguments.length,d=S(i>1?arguments[1]:void 0,g),f=i>2?arguments[2]:void 0,t=f===void 0?g:S(f,g);t>d;)L[d++]=w;return L}},7397:function(C,x,h){var o=h(454).forEach,S=h(424),M=S("forEach");C.exports=M?[].forEach:function(w){return o(this,w,arguments.length>1?arguments[1]:void 0)}},841:function(C,x,h){var o=h(8043),S=h(1795),M=h(1635),E=h(6109),w=h(2091),L=h(4104),g=h(9361),i=h(1669),d=h(8703);C.exports=function(t){var e=S(t),r=w(this),c=arguments.length,p=c>1?arguments[1]:void 0,s=p!==void 0;s&&(p=o(p,c>2?arguments[2]:void 0,2));var m=d(e),y=0,_,I,z,F,U,X;if(m&&!(this==Array&&E(m)))for(F=i(e,m),U=F.next,I=r?new this:[];!(z=U.call(F)).done;y++)X=s?M(F,p,[z.value,y],!0):z.value,g(I,y,X);else for(_=L(e),I=r?new this(_):Array(_);_>y;y++)X=s?p(e[y],y):e[y],g(I,y,X);return I.length=y,I}},8180:function(C,x,h){var o=h(101),S=h(7739),M=h(4104),E=function(w){return function(L,g,i){var d=o(L),f=M(d),t=S(i,f),e;if(w&&g!=g){for(;f>t;)if(e=d[t++],e!=e)return!0}else for(;f>t;t++)if((w||t in d)&&d[t]===g)return w||t||0;return!w&&-1}};C.exports={includes:E(!0),indexOf:E(!1)}},454:function(C,x,h){var o=h(8043),S=h(2202),M=h(1795),E=h(4104),w=h(1321),L=[].push,g=function(i){var d=i==1,f=i==2,t=i==3,e=i==4,r=i==6,c=i==7,p=i==5||r;return function(s,m,y,_){for(var I=M(s),z=S(I),F=o(m,y,3),U=E(z),X=0,J=_||w,lt=d?J(s,U):f||c?J(s,0):void 0,st,Mt;U>X;X++)if((p||X in z)&&(st=z[X],Mt=F(st,X,I),i))if(d)lt[X]=Mt;else if(Mt)switch(i){case 3:return!0;case 5:return st;case 6:return X;case 2:L.call(lt,st)}else switch(i){case 4:return!1;case 7:L.call(lt,st)}return r?-1:t||e?e:lt}};C.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6),filterReject:g(7)}},242:function(C,x,h){var o=h(6192),S=h(8182),M=h(4218),E=S("species");C.exports=function(w){return M>=51||!o(function(){var L=[],g=L.constructor={};return g[E]=function(){return{foo:1}},L[w](Boolean).foo!==1})}},424:function(C,x,h){var o=h(6192);C.exports=function(S,M){var E=[][S];return!!E&&o(function(){E.call(null,M||function(){throw 1},1)})}},3712:function(C,x,h){var o=h(4770),S=h(2091),M=h(5744),E=h(8182),w=E("species");C.exports=function(L){var g;return o(L)&&(g=L.constructor,S(g)&&(g===Array||o(g.prototype))?g=void 0:M(g)&&(g=g[w],g===null&&(g=void 0))),g===void 0?Array:g}},1321:function(C,x,h){var o=h(3712);C.exports=function(S,M){return new(o(S))(M===0?0:M)}},1635:function(C,x,h){var o=h(1138),S=h(6639);C.exports=function(M,E,w,L){try{return L?E(o(w)[0],w[1]):E(w)}catch(g){S(M,"throw",g)}}},9770:function(C,x,h){var o=h(8182),S=o("iterator"),M=!1;try{var E=0,w={next:function(){return{done:!!E++}},return:function(){M=!0}};w[S]=function(){return this},Array.from(w,function(){throw 2})}catch{}C.exports=function(L,g){if(!g&&!M)return!1;var i=!1;try{var d={};d[S]=function(){return{next:function(){return{done:i=!0}}}},L(d)}catch{}return i}},9272:function(C){var x={}.toString;C.exports=function(h){return x.call(h).slice(8,-1)}},4696:function(C,x,h){var o=h(3471),S=h(6447),M=h(9272),E=h(8182),w=E("toStringTag"),L=M(function(){return arguments}())=="Arguments",g=function(i,d){try{return i[d]}catch{}};C.exports=o?M:function(i){var d,f,t;return i===void 0?"Undefined":i===null?"Null":typeof(f=g(d=Object(i),w))=="string"?f:L?M(d):(t=M(d))=="Object"&&S(d.callee)?"Arguments":t}},4635:function(C,x,h){var o=h(6192);C.exports=!o(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},5148:function(C,x,h){var o=h(4413).IteratorPrototype,S=h(2853),M=h(774),E=h(1284),w=h(7771),L=function(){return this};C.exports=function(g,i,d){var f=i+" Iterator";return g.prototype=S(o,{next:M(1,d)}),E(g,f,!1,!0),w[f]=L,g}},8711:function(C,x,h){var o=h(69),S=h(2760),M=h(774);C.exports=o?function(E,w,L){return S.f(E,w,M(1,L))}:function(E,w,L){return E[w]=L,E}},774:function(C){C.exports=function(x,h){return{enumerable:!(x&1),configurable:!(x&2),writable:!(x&4),value:h}}},9361:function(C,x,h){var o=h(77),S=h(2760),M=h(774);C.exports=function(E,w,L){var g=o(w);g in E?S.f(E,g,M(0,L)):E[g]=L}},7218:function(C,x,h){var o=h(3085),S=h(5546),M=h(2282),E=h(6447),w=h(5148),L=h(9341),g=h(4469),i=h(1284),d=h(8711),f=h(9482),t=h(8182),e=h(7771),r=h(4413),c=M.PROPER,p=M.CONFIGURABLE,s=r.IteratorPrototype,m=r.BUGGY_SAFARI_ITERATORS,y=t("iterator"),_="keys",I="values",z="entries",F=function(){return this};C.exports=function(U,X,J,lt,st,Mt,It){w(J,X,lt);var _t=function(G){if(G===st&&Q)return Q;if(!m&&G in V)return V[G];switch(G){case _:return function(){return new J(this,G)};case I:return function(){return new J(this,G)};case z:return function(){return new J(this,G)}}return function(){return new J(this)}},rt=X+" Iterator",Wt=!1,V=U.prototype,Zt=V[y]||V["@@iterator"]||st&&V[st],Q=!m&&Zt||_t(st),St=X=="Array"&&V.entries||Zt,nt,$,K;if(St&&(nt=L(St.call(new U)),nt!==Object.prototype&&nt.next&&(!S&&L(nt)!==s&&(g?g(nt,s):E(nt[y])||f(nt,y,F)),i(nt,rt,!0,!0),S&&(e[rt]=F))),c&&st==I&&Zt&&Zt.name!==I&&(!S&&p?d(V,"name",I):(Wt=!0,Q=function(){return Zt.call(this)})),st)if($={values:_t(I),keys:Mt?Q:_t(_),entries:_t(z)},It)for(K in $)(m||Wt||!(K in V))&&f(V,K,$[K]);else o({target:X,proto:!0,forced:m||Wt},$);return(!S||It)&&V[y]!==Q&&f(V,y,Q,{name:st}),e[X]=Q,$}},1488:function(C,x,h){var o=h(7545),S=h(4500),M=h(9207),E=h(2760).f;C.exports=function(w){var L=o.Symbol||(o.Symbol={});S(L,w)||E(L,w,{value:M.f(w)})}},69:function(C,x,h){var o=h(6192);C.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(C,x,h){var o=h(8576),S=h(5744),M=o.document,E=S(M)&&S(M.createElement);C.exports=function(w){return E?M.createElement(w):{}}},7365:function(C){C.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(C){C.exports=typeof window=="object"},9347:function(C,x,h){var o=h(8989),S=h(8576);C.exports=/ipad|iphone|ipod/i.test(o)&&S.Pebble!==void 0},9536:function(C,x,h){var o=h(8989);C.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},224:function(C,x,h){var o=h(9272),S=h(8576);C.exports=o(S.process)=="process"},5914:function(C,x,h){var o=h(8989);C.exports=/web0s(?!.*chrome)/i.test(o)},8989:function(C,x,h){var o=h(150);C.exports=o("navigator","userAgent")||""},4218:function(C,x,h){var o=h(8576),S=h(8989),M=o.process,E=o.Deno,w=M&&M.versions||E&&E.version,L=w&&w.v8,g,i;L?(g=L.split("."),i=g[0]<4?1:g[0]+g[1]):S&&(g=S.match(/Edge\/(\d+)/),(!g||g[1]>=74)&&(g=S.match(/Chrome\/(\d+)/),g&&(i=g[1]))),C.exports=i&&+i},5607:function(C,x,h){var o=h(7545);C.exports=function(S){return o[S+"Prototype"]}},2952:function(C){C.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(C,x,h){var o=h(8576),S=h(6447),M=h(5141).f,E=h(9245),w=h(7545),L=h(8043),g=h(8711),i=h(4500),d=function(f){var t=function(e,r,c){if(this instanceof f){switch(arguments.length){case 0:return new f;case 1:return new f(e);case 2:return new f(e,r)}return new f(e,r,c)}return f.apply(this,arguments)};return t.prototype=f.prototype,t};C.exports=function(f,t){var e=f.target,r=f.global,c=f.stat,p=f.proto,s=r?o:c?o[e]:(o[e]||{}).prototype,m=r?w:w[e]||g(w,e,{})[e],y=m.prototype,_,I,z,F,U,X,J,lt,st;for(F in t)_=E(r?F:e+(c?".":"#")+F,f.forced),I=!_&&s&&i(s,F),X=m[F],I&&(f.noTargetGet?(st=M(s,F),J=st&&st.value):J=s[F]),U=I&&J?J:t[F],!(I&&typeof X==typeof U)&&(f.bind&&I?lt=L(U,o):f.wrap&&I?lt=d(U):p&&S(U)?lt=L(Function.call,U):lt=U,(f.sham||U&&U.sham||X&&X.sham)&&g(lt,"sham",!0),g(m,F,lt),p&&(z=e+"Prototype",i(w,z)||g(w,z,{}),g(w[z],F,U),f.real&&y&&!y[F]&&g(y,F,U)))}},6192:function(C){C.exports=function(x){try{return!!x()}catch{return!0}}},8043:function(C,x,h){var o=h(6235);C.exports=function(S,M,E){if(o(S),M===void 0)return S;switch(E){case 0:return function(){return S.call(M)};case 1:return function(w){return S.call(M,w)};case 2:return function(w,L){return S.call(M,w,L)};case 3:return function(w,L,g){return S.call(M,w,L,g)}}return function(){return S.apply(M,arguments)}}},6782:function(C,x,h){var o=h(6235),S=h(5744),M=[].slice,E={},w=function(L,g,i){if(!(g in E)){for(var d=[],f=0;f<g;f++)d[f]="a["+f+"]";E[g]=Function("C,a","return new C("+d.join(",")+")")}return E[g](L,i)};C.exports=Function.bind||function(g){var i=o(this),d=M.call(arguments,1),f=function(){var e=d.concat(M.call(arguments));return this instanceof f?w(i,e.length,e):i.apply(g,e)};return S(i.prototype)&&(f.prototype=i.prototype),f}},2282:function(C,x,h){var o=h(69),S=h(4500),M=Function.prototype,E=o&&Object.getOwnPropertyDescriptor,w=S(M,"name"),L=w&&function(){}.name==="something",g=w&&(!o||o&&E(M,"name").configurable);C.exports={EXISTS:w,PROPER:L,CONFIGURABLE:g}},150:function(C,x,h){var o=h(7545),S=h(8576),M=h(6447),E=function(w){return M(w)?w:void 0};C.exports=function(w,L){return arguments.length<2?E(o[w])||E(S[w]):o[w]&&o[w][L]||S[w]&&S[w][L]}},8703:function(C,x,h){var o=h(4696),S=h(5037),M=h(7771),E=h(8182),w=E("iterator");C.exports=function(L){if(L!=null)return S(L,w)||S(L,"@@iterator")||M[o(L)]}},1669:function(C,x,h){var o=h(6235),S=h(1138),M=h(8703);C.exports=function(E,w){var L=arguments.length<2?M(E):w;if(o(L))return S(L.call(E));throw TypeError(String(E)+" is not iterable")}},5037:function(C,x,h){var o=h(6235);C.exports=function(S,M){var E=S[M];return E==null?void 0:o(E)}},8576:function(C,x,h){var o=function(S){return S&&S.Math==Math&&S};C.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof h.g=="object"&&h.g)||function(){return this}()||Function("return this")()},4500:function(C,x,h){var o=h(1795),S={}.hasOwnProperty;C.exports=Object.hasOwn||function(E,w){return S.call(o(E),w)}},4535:function(C){C.exports={}},3681:function(C,x,h){var o=h(8576);C.exports=function(S,M){var E=o.console;E&&E.error&&(arguments.length===1?E.error(S):E.error(S,M))}},7403:function(C,x,h){var o=h(150);C.exports=o("document","documentElement")},188:function(C,x,h){var o=h(69),S=h(6192),M=h(7449);C.exports=!o&&!S(function(){return Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(C,x,h){var o=h(6192),S=h(9272),M="".split;C.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(E){return S(E)=="String"?M.call(E,""):Object(E)}:Object},9516:function(C,x,h){var o=h(6447),S=h(6434),M=Function.toString;o(S.inspectSource)||(S.inspectSource=function(E){return M.call(E)}),C.exports=S.inspectSource},273:function(C,x,h){var o=h(5744),S=h(8711);C.exports=function(M,E){o(E)&&"cause"in E&&S(M,"cause",M.cause)}},3326:function(C,x,h){var o=h(8921),S=h(8576),M=h(5744),E=h(8711),w=h(4500),L=h(6434),g=h(9766),i=h(4535),d="Object already initialized",f=S.WeakMap,t,e,r,c=function(z){return r(z)?e(z):t(z,{})},p=function(z){return function(F){var U;if(!M(F)||(U=e(F)).type!==z)throw TypeError("Incompatible receiver, "+z+" required");return U}};if(o||L.state){var s=L.state||(L.state=new f),m=s.get,y=s.has,_=s.set;t=function(z,F){if(y.call(s,z))throw new TypeError(d);return F.facade=z,_.call(s,z,F),F},e=function(z){return m.call(s,z)||{}},r=function(z){return y.call(s,z)}}else{var I=g("state");i[I]=!0,t=function(z,F){if(w(z,I))throw new TypeError(d);return F.facade=z,E(z,I,F),F},e=function(z){return w(z,I)?z[I]:{}},r=function(z){return w(z,I)}}C.exports={set:t,get:e,has:r,enforce:c,getterFor:p}},6109:function(C,x,h){var o=h(8182),S=h(7771),M=o("iterator"),E=Array.prototype;C.exports=function(w){return w!==void 0&&(S.Array===w||E[M]===w)}},4770:function(C,x,h){var o=h(9272);C.exports=Array.isArray||function(M){return o(M)=="Array"}},6447:function(C){C.exports=function(x){return typeof x=="function"}},2091:function(C,x,h){var o=h(6192),S=h(6447),M=h(4696),E=h(150),w=h(9516),L=[],g=E("Reflect","construct"),i=/^\s*(?:class|function)\b/,d=i.exec,f=!i.exec(function(){}),t=function(r){if(!S(r))return!1;try{return g(Object,L,r),!0}catch{return!1}},e=function(r){if(!S(r))return!1;switch(M(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return f||!!d.call(i,w(r))};C.exports=!g||o(function(){var r;return t(t.call)||!t(Object)||!t(function(){r=!0})||r})?e:t},9245:function(C,x,h){var o=h(6192),S=h(6447),M=/#|\.prototype\./,E=function(d,f){var t=L[w(d)];return t==i?!0:t==g?!1:S(f)?o(f):!!f},w=E.normalize=function(d){return String(d).replace(M,".").toLowerCase()},L=E.data={},g=E.NATIVE="N",i=E.POLYFILL="P";C.exports=E},5744:function(C,x,h){var o=h(6447);C.exports=function(S){return typeof S=="object"?S!==null:o(S)}},5546:function(C){C.exports=!0},3236:function(C,x,h){var o=h(6447),S=h(150),M=h(615);C.exports=M?function(E){return typeof E=="symbol"}:function(E){var w=S("Symbol");return o(w)&&Object(E)instanceof w}},3442:function(C,x,h){var o=h(1138),S=h(6109),M=h(4104),E=h(8043),w=h(1669),L=h(8703),g=h(6639),i=function(d,f){this.stopped=d,this.result=f};C.exports=function(d,f,t){var e=t&&t.that,r=!!(t&&t.AS_ENTRIES),c=!!(t&&t.IS_ITERATOR),p=!!(t&&t.INTERRUPTED),s=E(f,e,1+r+p),m,y,_,I,z,F,U,X=function(lt){return m&&g(m,"normal",lt),new i(!0,lt)},J=function(lt){return r?(o(lt),p?s(lt[0],lt[1],X):s(lt[0],lt[1])):p?s(lt,X):s(lt)};if(c)m=d;else{if(y=L(d),!y)throw TypeError(String(d)+" is not iterable");if(S(y)){for(_=0,I=M(d);I>_;_++)if(z=J(d[_]),z&&z instanceof i)return z;return new i(!1)}m=w(d,y)}for(F=m.next;!(U=F.call(m)).done;){try{z=J(U.value)}catch(lt){g(m,"throw",lt)}if(typeof z=="object"&&z&&z instanceof i)return z}return new i(!1)}},6639:function(C,x,h){var o=h(1138),S=h(5037);C.exports=function(M,E,w){var L,g;o(M);try{if(L=S(M,"return"),!L){if(E==="throw")throw w;return w}L=L.call(M)}catch(i){g=!0,L=i}if(E==="throw")throw w;if(g)throw L;return o(L),w}},4413:function(C,x,h){var o=h(6192),S=h(6447),M=h(2853),E=h(9341),w=h(9482),L=h(8182),g=h(5546),i=L("iterator"),d=!1,f,t,e;[].keys&&(e=[].keys(),"next"in e?(t=E(E(e)),t!==Object.prototype&&(f=t)):d=!0);var r=f==null||o(function(){var c={};return f[i].call(c)!==c});r?f={}:g&&(f=M(f)),S(f[i])||w(f,i,function(){return this}),C.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:d}},7771:function(C){C.exports={}},4104:function(C,x,h){var o=h(8445);C.exports=function(S){return o(S.length)}},2950:function(C,x,h){var o=h(8576),S=h(5141).f,M=h(7160).set,E=h(9536),w=h(9347),L=h(5914),g=h(224),i=o.MutationObserver||o.WebKitMutationObserver,d=o.document,f=o.process,t=o.Promise,e=S(o,"queueMicrotask"),r=e&&e.value,c,p,s,m,y,_,I,z;r||(c=function(){var F,U;for(g&&(F=f.domain)&&F.exit();p;){U=p.fn,p=p.next;try{U()}catch(X){throw p?m():s=void 0,X}}s=void 0,F&&F.enter()},!E&&!g&&!L&&i&&d?(y=!0,_=d.createTextNode(""),new i(c).observe(_,{characterData:!0}),m=function(){_.data=y=!y}):!w&&t&&t.resolve?(I=t.resolve(void 0),I.constructor=t,z=I.then,m=function(){z.call(I,c)}):g?m=function(){f.nextTick(c)}:m=function(){M.call(o,c)}),C.exports=r||function(F){var U={fn:F,next:void 0};s&&(s.next=U),p||(p=U,m()),s=U}},4471:function(C,x,h){var o=h(8576);C.exports=o.Promise},3045:function(C,x,h){var o=h(4218),S=h(6192);C.exports=!!Object.getOwnPropertySymbols&&!S(function(){var M=Symbol();return!String(M)||!(Object(M)instanceof Symbol)||!Symbol.sham&&o&&o<41})},4551:function(C,x,h){var o=h(6192),S=h(8182),M=h(5546),E=S("iterator");C.exports=!o(function(){var w=new URL("b?a=1&b=2&c=3","http://a"),L=w.searchParams,g="";return w.pathname="c%20d",L.forEach(function(i,d){L.delete("b"),g+=d+i}),M&&!w.toJSON||!L.sort||w.href!=="http://a/c%20d?a=1&c=3"||L.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!L[E]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||g!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(C,x,h){var o=h(8576),S=h(6447),M=h(9516),E=o.WeakMap;C.exports=S(E)&&/native code/.test(M(E))},9438:function(C,x,h){var o=h(6235),S=function(M){var E,w;this.promise=new M(function(L,g){if(E!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");E=L,w=g}),this.resolve=o(E),this.reject=o(w)};C.exports.f=function(M){return new S(M)}},15:function(C,x,h){var o=h(8576),S=h(6192),M=h(4845),E=h(4277).trim,w=h(1450),L=o.parseFloat,g=o.Symbol,i=g&&g.iterator,d=1/L(w+"-0")!==-1/0||i&&!S(function(){L(Object(i))});C.exports=d?function(t){var e=E(M(t)),r=L(e);return r===0&&e.charAt(0)=="-"?-0:r}:L},2558:function(C,x,h){var o=h(8576),S=h(6192),M=h(4845),E=h(4277).trim,w=h(1450),L=o.parseInt,g=o.Symbol,i=g&&g.iterator,d=/^[+-]?0[Xx]/,f=L(w+"08")!==8||L(w+"0x16")!==22||i&&!S(function(){L(Object(i))});C.exports=f?function(e,r){var c=E(M(e));return L(c,r>>>0||(d.test(c)?16:10))}:L},2503:function(C,x,h){var o=h(69),S=h(6192),M=h(7653),E=h(4750),w=h(6007),L=h(1795),g=h(2202),i=Object.assign,d=Object.defineProperty;C.exports=!i||S(function(){if(o&&i({b:1},i(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},t={},e=Symbol(),r="abcdefghijklmnopqrst";return f[e]=7,r.split("").forEach(function(c){t[c]=c}),i({},f)[e]!=7||M(i({},t)).join("")!=r})?function(t,e){for(var r=L(t),c=arguments.length,p=1,s=E.f,m=w.f;c>p;)for(var y=g(arguments[p++]),_=s?M(y).concat(s(y)):M(y),I=_.length,z=0,F;I>z;)F=_[z++],(!o||m.call(y,F))&&(r[F]=y[F]);return r}:i},2853:function(C,x,h){var o=h(1138),S=h(1187),M=h(2952),E=h(4535),w=h(7403),L=h(7449),g=h(9766),i=">",d="<",f="prototype",t="script",e=g("IE_PROTO"),r=function(){},c=function(_){return d+t+i+_+d+"/"+t+i},p=function(_){_.write(c("")),_.close();var I=_.parentWindow.Object;return _=null,I},s=function(){var _=L("iframe"),I="java"+t+":",z;return _.style.display="none",w.appendChild(_),_.src=String(I),z=_.contentWindow.document,z.open(),z.write(c("document.F=Object")),z.close(),z.F},m,y=function(){try{m=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&m?p(m):s():p(m);for(var _=M.length;_--;)delete y[f][M[_]];return y()};E[e]=!0,C.exports=Object.create||function(I,z){var F;return I!==null?(r[f]=o(I),F=new r,r[f]=null,F[e]=I):F=y(),z===void 0?F:S(F,z)}},1187:function(C,x,h){var o=h(69),S=h(2760),M=h(1138),E=h(7653);C.exports=o?Object.defineProperties:function(L,g){M(L);for(var i=E(g),d=i.length,f=0,t;d>f;)S.f(L,t=i[f++],g[t]);return L}},2760:function(C,x,h){var o=h(69),S=h(188),M=h(1138),E=h(77),w=Object.defineProperty;x.f=o?w:function(g,i,d){if(M(g),i=E(i),M(d),S)try{return w(g,i,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(g[i]=d.value),g}},5141:function(C,x,h){var o=h(69),S=h(6007),M=h(774),E=h(101),w=h(77),L=h(4500),g=h(188),i=Object.getOwnPropertyDescriptor;x.f=o?i:function(f,t){if(f=E(f),t=w(t),g)try{return i(f,t)}catch{}if(L(f,t))return M(!S.f.call(f,t),f[t])}},4052:function(C,x,h){var o=h(101),S=h(2092).f,M={}.toString,E=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(L){try{return S(L)}catch{return E.slice()}};C.exports.f=function(g){return E&&M.call(g)=="[object Window]"?w(g):S(o(g))}},2092:function(C,x,h){var o=h(7934),S=h(2952),M=S.concat("length","prototype");x.f=Object.getOwnPropertyNames||function(w){return o(w,M)}},4750:function(C,x){x.f=Object.getOwnPropertySymbols},9341:function(C,x,h){var o=h(4500),S=h(6447),M=h(1795),E=h(9766),w=h(4635),L=E("IE_PROTO"),g=Object.prototype;C.exports=w?Object.getPrototypeOf:function(i){var d=M(i);if(o(d,L))return d[L];var f=d.constructor;return S(f)&&d instanceof f?f.prototype:d instanceof Object?g:null}},7934:function(C,x,h){var o=h(4500),S=h(101),M=h(8180).indexOf,E=h(4535);C.exports=function(w,L){var g=S(w),i=0,d=[],f;for(f in g)!o(E,f)&&o(g,f)&&d.push(f);for(;L.length>i;)o(g,f=L[i++])&&(~M(d,f)||d.push(f));return d}},7653:function(C,x,h){var o=h(7934),S=h(2952);C.exports=Object.keys||function(E){return o(E,S)}},6007:function(C,x){var h={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,S=o&&!h.call({1:2},1);x.f=S?function(E){var w=o(this,E);return!!w&&w.enumerable}:h},4469:function(C,x,h){var o=h(1138),S=h(7757);C.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var M=!1,E={},w;try{w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,w.call(E,[]),M=E instanceof Array}catch{}return function(g,i){return o(g),S(i),M?w.call(g,i):g.__proto__=i,g}}():void 0)},158:function(C,x,h){var o=h(3471),S=h(4696);C.exports=o?{}.toString:function(){return"[object "+S(this)+"]"}},380:function(C,x,h){var o=h(6447),S=h(5744);C.exports=function(M,E){var w,L;if(E==="string"&&o(w=M.toString)&&!S(L=w.call(M))||o(w=M.valueOf)&&!S(L=w.call(M))||E!=="string"&&o(w=M.toString)&&!S(L=w.call(M)))return L;throw TypeError("Can't convert object to primitive value")}},7545:function(C){C.exports={}},892:function(C){C.exports=function(x){try{return{error:!1,value:x()}}catch(h){return{error:!0,value:h}}}},9126:function(C,x,h){var o=h(1138),S=h(5744),M=h(9438);C.exports=function(E,w){if(o(E),S(w)&&w.constructor===E)return w;var L=M.f(E),g=L.resolve;return g(w),L.promise}},533:function(C,x,h){var o=h(9482);C.exports=function(S,M,E){for(var w in M)E&&E.unsafe&&S[w]?S[w]=M[w]:o(S,w,M[w],E);return S}},9482:function(C,x,h){var o=h(8711);C.exports=function(S,M,E,w){w&&w.enumerable?S[M]=E:o(S,M,E)}},3209:function(C){C.exports=function(x){if(x==null)throw TypeError("Can't call method on "+x);return x}},7613:function(C,x,h){var o=h(8576);C.exports=function(S,M){try{Object.defineProperty(o,S,{value:M,configurable:!0,writable:!0})}catch{o[S]=M}return M}},3656:function(C,x,h){var o=h(150),S=h(2760),M=h(8182),E=h(69),w=M("species");C.exports=function(L){var g=o(L),i=S.f;E&&g&&!g[w]&&i(g,w,{configurable:!0,get:function(){return this}})}},1284:function(C,x,h){var o=h(3471),S=h(2760).f,M=h(8711),E=h(4500),w=h(158),L=h(8182),g=L("toStringTag");C.exports=function(i,d,f,t){if(i){var e=f?i:i.prototype;E(e,g)||S(e,g,{configurable:!0,value:d}),t&&!o&&M(e,"toString",w)}}},9766:function(C,x,h){var o=h(8717),S=h(2759),M=o("keys");C.exports=function(E){return M[E]||(M[E]=S(E))}},6434:function(C,x,h){var o=h(8576),S=h(7613),M="__core-js_shared__",E=o[M]||S(M,{});C.exports=E},8717:function(C,x,h){var o=h(5546),S=h(6434);(C.exports=function(M,E){return S[M]||(S[M]=E!==void 0?E:{})})("versions",[]).push({version:"3.18.2",mode:o?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(C,x,h){var o=h(1138),S=h(1404),M=h(8182),E=M("species");C.exports=function(w,L){var g=o(w).constructor,i;return g===void 0||(i=o(g)[E])==null?L:S(i)}},863:function(C,x,h){var o=h(1941),S=h(4845),M=h(3209),E=function(w){return function(L,g){var i=S(M(L)),d=o(g),f=i.length,t,e;return d<0||d>=f?w?"":void 0:(t=i.charCodeAt(d),t<55296||t>56319||d+1===f||(e=i.charCodeAt(d+1))<56320||e>57343?w?i.charAt(d):t:w?i.slice(d,d+2):(t-55296<<10)+(e-56320)+65536)}};C.exports={codeAt:E(!1),charAt:E(!0)}},7977:function(C){var x=2147483647,h=36,o=1,S=26,M=38,E=700,w=72,L=128,g="-",i=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,f="Overflow: input needs wider integers to process",t=h-o,e=Math.floor,r=String.fromCharCode,c=function(y){for(var _=[],I=0,z=y.length;I<z;){var F=y.charCodeAt(I++);if(F>=55296&&F<=56319&&I<z){var U=y.charCodeAt(I++);(U&64512)==56320?_.push(((F&1023)<<10)+(U&1023)+65536):(_.push(F),I--)}else _.push(F)}return _},p=function(y){return y+22+75*(y<26)},s=function(y,_,I){var z=0;for(y=I?e(y/E):y>>1,y+=e(y/_);y>t*S>>1;z+=h)y=e(y/t);return e(z+(t+1)*y/(y+M))},m=function(y){var _=[];y=c(y);var I=y.length,z=L,F=0,U=w,X,J;for(X=0;X<y.length;X++)J=y[X],J<128&&_.push(r(J));var lt=_.length,st=lt;for(lt&&_.push(g);st<I;){var Mt=x;for(X=0;X<y.length;X++)J=y[X],J>=z&&J<Mt&&(Mt=J);var It=st+1;if(Mt-z>e((x-F)/It))throw RangeError(f);for(F+=(Mt-z)*It,z=Mt,X=0;X<y.length;X++){if(J=y[X],J<z&&++F>x)throw RangeError(f);if(J==z){for(var _t=F,rt=h;;rt+=h){var Wt=rt<=U?o:rt>=U+S?S:rt-U;if(_t<Wt)break;var V=_t-Wt,Zt=h-Wt;_.push(r(p(Wt+V%Zt))),_t=e(V/Zt)}_.push(r(p(_t))),U=s(F,It,st==lt),F=0,++st}}++F,++z}return _.join("")};C.exports=function(y){var _=[],I=y.toLowerCase().replace(d,".").split("."),z,F;for(z=0;z<I.length;z++)F=I[z],_.push(i.test(F)?"xn--"+m(F):F);return _.join(".")}},6815:function(C,x,h){var o=h(2282).PROPER,S=h(6192),M=h(1450),E="\u200B\x85\u180E";C.exports=function(w){return S(function(){return!!M[w]()||E[w]()!==E||o&&M[w].name!==w})}},4277:function(C,x,h){var o=h(3209),S=h(4845),M=h(1450),E="["+M+"]",w=RegExp("^"+E+E+"*"),L=RegExp(E+E+"*$"),g=function(i){return function(d){var f=S(o(d));return i&1&&(f=f.replace(w,"")),i&2&&(f=f.replace(L,"")),f}};C.exports={start:g(1),end:g(2),trim:g(3)}},7160:function(C,x,h){var o=h(8576),S=h(6447),M=h(6192),E=h(8043),w=h(7403),L=h(7449),g=h(9536),i=h(224),d=o.setImmediate,f=o.clearImmediate,t=o.process,e=o.MessageChannel,r=o.Dispatch,c=0,p={},s="onreadystatechange",m,y,_,I;try{m=o.location}catch{}var z=function(J){if(p.hasOwnProperty(J)){var lt=p[J];delete p[J],lt()}},F=function(J){return function(){z(J)}},U=function(J){z(J.data)},X=function(J){o.postMessage(String(J),m.protocol+"//"+m.host)};(!d||!f)&&(d=function(lt){for(var st=[],Mt=arguments.length,It=1;Mt>It;)st.push(arguments[It++]);return p[++c]=function(){(S(lt)?lt:Function(lt)).apply(void 0,st)},y(c),c},f=function(lt){delete p[lt]},i?y=function(J){t.nextTick(F(J))}:r&&r.now?y=function(J){r.now(F(J))}:e&&!g?(_=new e,I=_.port2,_.port1.onmessage=U,y=E(I.postMessage,I,1)):o.addEventListener&&S(o.postMessage)&&!o.importScripts&&m&&m.protocol!=="file:"&&!M(X)?(y=X,o.addEventListener("message",U,!1)):s in L("script")?y=function(J){w.appendChild(L("script"))[s]=function(){w.removeChild(this),z(J)}}:y=function(J){setTimeout(F(J),0)}),C.exports={set:d,clear:f}},7739:function(C,x,h){var o=h(1941),S=Math.max,M=Math.min;C.exports=function(E,w){var L=o(E);return L<0?S(L+w,0):M(L,w)}},101:function(C,x,h){var o=h(2202),S=h(3209);C.exports=function(M){return o(S(M))}},1941:function(C){var x=Math.ceil,h=Math.floor;C.exports=function(o){var S=+o;return S!==S||S===0?0:(S>0?h:x)(S)}},8445:function(C,x,h){var o=h(1941),S=Math.min;C.exports=function(M){return M>0?S(o(M),9007199254740991):0}},1795:function(C,x,h){var o=h(3209);C.exports=function(S){return Object(o(S))}},7888:function(C,x,h){var o=h(5744),S=h(3236),M=h(5037),E=h(380),w=h(8182),L=w("toPrimitive");C.exports=function(g,i){if(!o(g)||S(g))return g;var d=M(g,L),f;if(d){if(i===void 0&&(i="default"),f=d.call(g,i),!o(f)||S(f))return f;throw TypeError("Can't convert object to primitive value")}return i===void 0&&(i="number"),E(g,i)}},77:function(C,x,h){var o=h(7888),S=h(3236);C.exports=function(M){var E=o(M,"string");return S(E)?E:String(E)}},3471:function(C,x,h){var o=h(8182),S=o("toStringTag"),M={};M[S]="z",C.exports=String(M)==="[object z]"},4845:function(C,x,h){var o=h(4696);C.exports=function(S){if(o(S)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(S)}},9288:function(C){C.exports=function(x){try{return String(x)}catch{return"Object"}}},2759:function(C){var x=0,h=Math.random();C.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++x+h).toString(36)}},615:function(C,x,h){var o=h(3045);C.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(C,x,h){var o=h(8182);x.f=o},8182:function(C,x,h){var o=h(8576),S=h(8717),M=h(4500),E=h(2759),w=h(3045),L=h(615),g=S("wks"),i=o.Symbol,d=L?i:i&&i.withoutSetter||E;C.exports=function(f){return(!M(g,f)||!(w||typeof g[f]=="string"))&&(w&&M(i,f)?g[f]=i[f]:g[f]=d("Symbol."+f)),g[f]}},1450:function(C){C.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(C,x,h){var o=h(3085),S=h(9341),M=h(4469),E=h(2853),w=h(8711),L=h(774),g=h(273),i=h(3442),d=h(4845),f=function(e,r){var c=this,p=arguments.length>2?arguments[2]:void 0;if(!(c instanceof f))return new f(e,r,p);M&&(c=M(new Error(void 0),S(c))),r!==void 0&&w(c,"message",d(r)),g(c,p);var s=[];return i(e,s.push,{that:s}),w(c,"errors",s),c};f.prototype=E(Error.prototype,{constructor:L(5,f),message:L(5,""),name:L(5,"AggregateError")}),o({global:!0},{AggregateError:f})},9106:function(C,x,h){var o=h(3085),S=h(6192),M=h(4770),E=h(5744),w=h(1795),L=h(4104),g=h(9361),i=h(1321),d=h(242),f=h(8182),t=h(4218),e=f("isConcatSpreadable"),r=9007199254740991,c="Maximum allowed index exceeded",p=t>=51||!S(function(){var _=[];return _[e]=!1,_.concat()[0]!==_}),s=d("concat"),m=function(_){if(!E(_))return!1;var I=_[e];return I!==void 0?!!I:M(_)},y=!p||!s;o({target:"Array",proto:!0,forced:y},{concat:function(I){var z=w(this),F=i(z,0),U=0,X,J,lt,st,Mt;for(X=-1,lt=arguments.length;X<lt;X++)if(Mt=X===-1?z:arguments[X],m(Mt)){if(st=L(Mt),U+st>r)throw TypeError(c);for(J=0;J<st;J++,U++)J in Mt&&g(F,U,Mt[J])}else{if(U>=r)throw TypeError(c);g(F,U++,Mt)}return F.length=U,F}})},1710:function(C,x,h){var o=h(3085),S=h(2724),M=h(7423);o({target:"Array",proto:!0},{fill:S}),M("fill")},3436:function(C,x,h){var o=h(3085),S=h(454).filter,M=h(242),E=M("filter");o({target:"Array",proto:!0,forced:!E},{filter:function(L){return S(this,L,arguments.length>1?arguments[1]:void 0)}})},9823:function(C,x,h){var o=h(3085),S=h(7397);o({target:"Array",proto:!0,forced:[].forEach!=S},{forEach:S})},9173:function(C,x,h){var o=h(3085),S=h(841),M=h(9770),E=!M(function(w){Array.from(w)});o({target:"Array",stat:!0,forced:E},{from:S})},2276:function(C,x,h){var o=h(3085),S=h(8180).indexOf,M=h(424),E=[].indexOf,w=!!E&&1/[1].indexOf(1,-0)<0,L=M("indexOf");o({target:"Array",proto:!0,forced:w||!L},{indexOf:function(i){return w?E.apply(this,arguments)||0:S(this,i,arguments.length>1?arguments[1]:void 0)}})},8118:function(C,x,h){var o=h(3085),S=h(4770);o({target:"Array",stat:!0},{isArray:S})},8939:function(C,x,h){var o=h(101),S=h(7423),M=h(7771),E=h(3326),w=h(7218),L="Array Iterator",g=E.set,i=E.getterFor(L);C.exports=w(Array,"Array",function(d,f){g(this,{type:L,target:o(d),index:0,kind:f})},function(){var d=i(this),f=d.target,t=d.kind,e=d.index++;return!f||e>=f.length?(d.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:e,done:!1}:t=="values"?{value:f[e],done:!1}:{value:[e,f[e]],done:!1}},"values"),M.Arguments=M.Array,S("keys"),S("values"),S("entries")},3838:function(C,x,h){var o=h(3085),S=h(454).map,M=h(242),E=M("map");o({target:"Array",proto:!0,forced:!E},{map:function(L){return S(this,L,arguments.length>1?arguments[1]:void 0)}})},5818:function(C,x,h){var o=h(3085),S=h(4770),M=h(2091),E=h(5744),w=h(7739),L=h(4104),g=h(101),i=h(9361),d=h(8182),f=h(242),t=f("slice"),e=d("species"),r=[].slice,c=Math.max;o({target:"Array",proto:!0,forced:!t},{slice:function(s,m){var y=g(this),_=L(y),I=w(s,_),z=w(m===void 0?_:m,_),F,U,X;if(S(y)&&(F=y.constructor,M(F)&&(F===Array||S(F.prototype))?F=void 0:E(F)&&(F=F[e],F===null&&(F=void 0)),F===Array||F===void 0))return r.call(y,I,z);for(U=new(F===void 0?Array:F)(c(z-I,0)),X=0;I<z;I++,X++)I in y&&i(U,X,y[I]);return U.length=X,U}})},2178:function(C,x,h){var o=h(3085),S=h(7739),M=h(1941),E=h(4104),w=h(1795),L=h(1321),g=h(9361),i=h(242),d=i("splice"),f=Math.max,t=Math.min,e=9007199254740991,r="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d},{splice:function(p,s){var m=w(this),y=E(m),_=S(p,y),I=arguments.length,z,F,U,X,J,lt;if(I===0?z=F=0:I===1?(z=0,F=y-_):(z=I-2,F=t(f(M(s),0),y-_)),y+z-F>e)throw TypeError(r);for(U=L(m,F),X=0;X<F;X++)J=_+X,J in m&&g(U,X,m[J]);if(U.length=F,z<F){for(X=_;X<y-F;X++)J=X+F,lt=X+z,J in m?m[lt]=m[J]:delete m[lt];for(X=y;X>y-F+z;X--)delete m[X-1]}else if(z>F)for(X=y-F;X>_;X--)J=X+F-1,lt=X+z-1,J in m?m[lt]=m[J]:delete m[lt];for(X=0;X<z;X++)m[X+_]=arguments[X+2];return m.length=y-F+z,U}})},665:function(C,x,h){var o=h(3085),S=h(6782);o({target:"Function",proto:!0},{bind:S})},8671:function(C,x,h){var o=h(8576),S=h(1284);S(o.JSON,"JSON",!0)},8556:function(){},2666:function(C,x,h){var o=h(3085),S=h(2558);o({target:"Number",stat:!0,forced:Number.parseInt!=S},{parseInt:S})},3113:function(C,x,h){var o=h(3085),S=h(69),M=h(2853);o({target:"Object",stat:!0,sham:!S},{create:M})},297:function(C,x,h){var o=h(3085),S=h(69),M=h(2760);o({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperty:M.f})},9234:function(C,x,h){var o=h(3085),S=h(6192),M=h(1795),E=h(9341),w=h(4635),L=S(function(){E(1)});o({target:"Object",stat:!0,forced:L,sham:!w},{getPrototypeOf:function(i){return E(M(i))}})},2647:function(C,x,h){var o=h(3085),S=h(1795),M=h(7653),E=h(6192),w=E(function(){M(1)});o({target:"Object",stat:!0,forced:w},{keys:function(g){return M(S(g))}})},3222:function(C,x,h){var o=h(3085),S=h(4469);o({target:"Object",stat:!0},{setPrototypeOf:S})},6663:function(){},4859:function(C,x,h){var o=h(3085),S=h(15);o({global:!0,forced:parseFloat!=S},{parseFloat:S})},5706:function(C,x,h){var o=h(3085),S=h(2558);o({global:!0,forced:parseInt!=S},{parseInt:S})},7884:function(C,x,h){var o=h(3085),S=h(6235),M=h(9438),E=h(892),w=h(3442);o({target:"Promise",stat:!0},{allSettled:function(g){var i=this,d=M.f(i),f=d.resolve,t=d.reject,e=E(function(){var r=S(i.resolve),c=[],p=0,s=1;w(g,function(m){var y=p++,_=!1;c.push(void 0),s++,r.call(i,m).then(function(I){_||(_=!0,c[y]={status:"fulfilled",value:I},--s||f(c))},function(I){_||(_=!0,c[y]={status:"rejected",reason:I},--s||f(c))})}),--s||f(c)});return e.error&&t(e.value),d.promise}})},8885:function(C,x,h){var o=h(3085),S=h(6235),M=h(150),E=h(9438),w=h(892),L=h(3442),g="No one promise resolved";o({target:"Promise",stat:!0},{any:function(d){var f=this,t=E.f(f),e=t.resolve,r=t.reject,c=w(function(){var p=S(f.resolve),s=[],m=0,y=1,_=!1;L(d,function(I){var z=m++,F=!1;s.push(void 0),y++,p.call(f,I).then(function(U){F||_||(_=!0,e(U))},function(U){F||_||(F=!0,s[z]=U,--y||r(new(M("AggregateError"))(s,g)))})}),--y||r(new(M("AggregateError"))(s,g))});return c.error&&r(c.value),t.promise}})},1868:function(C,x,h){var o=h(3085),S=h(5546),M=h(4471),E=h(6192),w=h(150),L=h(6447),g=h(4743),i=h(9126),d=h(9482),f=!!M&&E(function(){M.prototype.finally.call({then:function(){}},function(){})});if(o({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(e){var r=g(this,w("Promise")),c=L(e);return this.then(c?function(p){return i(r,e()).then(function(){return p})}:e,c?function(p){return i(r,e()).then(function(){throw p})}:e)}}),!S&&L(M)){var t=w("Promise").prototype.finally;M.prototype.finally!==t&&d(M.prototype,"finally",t,{unsafe:!0})}},9021:function(C,x,h){var o=h(3085),S=h(5546),M=h(8576),E=h(150),w=h(4471),L=h(9482),g=h(533),i=h(4469),d=h(1284),f=h(3656),t=h(6235),e=h(6447),r=h(5744),c=h(6961),p=h(9516),s=h(3442),m=h(9770),y=h(4743),_=h(7160).set,I=h(2950),z=h(9126),F=h(3681),U=h(9438),X=h(892),J=h(3326),lt=h(9245),st=h(8182),Mt=h(2957),It=h(224),_t=h(4218),rt=st("species"),Wt="Promise",V=J.get,Zt=J.set,Q=J.getterFor(Wt),St=w&&w.prototype,nt=w,$=St,K=M.TypeError,G=M.document,q=M.process,at=U.f,et=at,Ct=!!(G&&G.createEvent&&M.dispatchEvent),dt=e(M.PromiseRejectionEvent),yt="unhandledrejection",Ot="rejectionhandled",Tt=0,ct=1,it=2,ot=1,mt=2,ft=!1,bt,jt,Vt,Gt,Et=lt(Wt,function(){var kt=p(nt),Dt=kt!==String(nt);if(!Dt&&_t===66||S&&!$.finally)return!0;if(_t>=51&&/native code/.test(kt))return!1;var Ft=new nt(function(se){se(1)}),Rt=function(se){se(function(){},function(){})},Kt=Ft.constructor={};return Kt[rt]=Rt,ft=Ft.then(function(){})instanceof Rt,ft?!Dt&&Mt&&!dt:!0}),Xt=Et||!m(function(kt){nt.all(kt).catch(function(){})}),wt=function(kt){var Dt;return r(kt)&&e(Dt=kt.then)?Dt:!1},ee=function(kt,Dt){if(!kt.notified){kt.notified=!0;var Ft=kt.reactions;I(function(){for(var Rt=kt.value,Kt=kt.state==ct,se=0;Ft.length>se;){var Ce=Ft[se++],Ie=Kt?Ce.ok:Ce.fail,Oe=Ce.resolve,_e=Ce.reject,me=Ce.domain,pe,Le,Ue;try{Ie?(Kt||(kt.rejection===mt&&ne(kt),kt.rejection=ot),Ie===!0?pe=Rt:(me&&me.enter(),pe=Ie(Rt),me&&(me.exit(),Ue=!0)),pe===Ce.promise?_e(K("Promise-chain cycle")):(Le=wt(pe))?Le.call(pe,Oe,_e):Oe(pe)):_e(Rt)}catch(Ke){me&&!Ue&&me.exit(),_e(Ke)}}kt.reactions=[],kt.notified=!1,Dt&&!kt.rejection&&Yt(kt)})}},ge=function(kt,Dt,Ft){var Rt,Kt;Ct?(Rt=G.createEvent("Event"),Rt.promise=Dt,Rt.reason=Ft,Rt.initEvent(kt,!1,!0),M.dispatchEvent(Rt)):Rt={promise:Dt,reason:Ft},!dt&&(Kt=M["on"+kt])?Kt(Rt):kt===yt&&F("Unhandled promise rejection",Ft)},Yt=function(kt){_.call(M,function(){var Dt=kt.facade,Ft=kt.value,Rt=xt(kt),Kt;if(Rt&&(Kt=X(function(){It?q.emit("unhandledRejection",Ft,Dt):ge(yt,Dt,Ft)}),kt.rejection=It||xt(kt)?mt:ot,Kt.error))throw Kt.value})},xt=function(kt){return kt.rejection!==ot&&!kt.parent},ne=function(kt){_.call(M,function(){var Dt=kt.facade;It?q.emit("rejectionHandled",Dt):ge(Ot,Dt,kt.value)})},ae=function(kt,Dt,Ft){return function(Rt){kt(Dt,Rt,Ft)}},oe=function(kt,Dt,Ft){kt.done||(kt.done=!0,Ft&&(kt=Ft),kt.value=Dt,kt.state=it,ee(kt,!0))},Se=function(kt,Dt,Ft){if(!kt.done){kt.done=!0,Ft&&(kt=Ft);try{if(kt.facade===Dt)throw K("Promise can't be resolved itself");var Rt=wt(Dt);Rt?I(function(){var Kt={done:!1};try{Rt.call(Dt,ae(Se,Kt,kt),ae(oe,Kt,kt))}catch(se){oe(Kt,se,kt)}}):(kt.value=Dt,kt.state=ct,ee(kt,!1))}catch(Kt){oe({done:!1},Kt,kt)}}};if(Et&&(nt=function(Dt){c(this,nt,Wt),t(Dt),bt.call(this);var Ft=V(this);try{Dt(ae(Se,Ft),ae(oe,Ft))}catch(Rt){oe(Ft,Rt)}},$=nt.prototype,bt=function(Dt){Zt(this,{type:Wt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Tt,value:void 0})},bt.prototype=g($,{then:function(Dt,Ft){var Rt=Q(this),Kt=at(y(this,nt));return Kt.ok=e(Dt)?Dt:!0,Kt.fail=e(Ft)&&Ft,Kt.domain=It?q.domain:void 0,Rt.parent=!0,Rt.reactions.push(Kt),Rt.state!=Tt&&ee(Rt,!1),Kt.promise},catch:function(kt){return this.then(void 0,kt)}}),jt=function(){var kt=new bt,Dt=V(kt);this.promise=kt,this.resolve=ae(Se,Dt),this.reject=ae(oe,Dt)},U.f=at=function(kt){return kt===nt||kt===Vt?new jt(kt):et(kt)},!S&&e(w)&&St!==Object.prototype)){Gt=St.then,ft||(L(St,"then",function(Dt,Ft){var Rt=this;return new nt(function(Kt,se){Gt.call(Rt,Kt,se)}).then(Dt,Ft)},{unsafe:!0}),L(St,"catch",$.catch,{unsafe:!0}));try{delete St.constructor}catch{}i&&i(St,$)}o({global:!0,wrap:!0,forced:Et},{Promise:nt}),d(nt,Wt,!1,!0),f(Wt),Vt=E(Wt),o({target:Wt,stat:!0,forced:Et},{reject:function(Dt){var Ft=at(this);return Ft.reject.call(void 0,Dt),Ft.promise}}),o({target:Wt,stat:!0,forced:S||Et},{resolve:function(Dt){return z(S&&this===Vt?nt:this,Dt)}}),o({target:Wt,stat:!0,forced:Xt},{all:function(Dt){var Ft=this,Rt=at(Ft),Kt=Rt.resolve,se=Rt.reject,Ce=X(function(){var Ie=t(Ft.resolve),Oe=[],_e=0,me=1;s(Dt,function(pe){var Le=_e++,Ue=!1;Oe.push(void 0),me++,Ie.call(Ft,pe).then(function(Ke){Ue||(Ue=!0,Oe[Le]=Ke,--me||Kt(Oe))},se)}),--me||Kt(Oe)});return Ce.error&&se(Ce.value),Rt.promise},race:function(Dt){var Ft=this,Rt=at(Ft),Kt=Rt.reject,se=X(function(){var Ce=t(Ft.resolve);s(Dt,function(Ie){Ce.call(Ft,Ie).then(Rt.resolve,Kt)})});return se.error&&Kt(se.value),Rt.promise}})},5397:function(C,x,h){var o=h(3085),S=h(150),M=h(1404),E=h(1138),w=h(5744),L=h(2853),g=h(6782),i=h(6192),d=S("Reflect","construct"),f=i(function(){function r(){}return!(d(function(){},[],r)instanceof r)}),t=!i(function(){d(function(){})}),e=f||t;o({target:"Reflect",stat:!0,forced:e,sham:e},{construct:function(c,p){M(c),E(p);var s=arguments.length<3?c:M(arguments[2]);if(t&&!f)return d(c,p,s);if(c==s){switch(p.length){case 0:return new c;case 1:return new c(p[0]);case 2:return new c(p[0],p[1]);case 3:return new c(p[0],p[1],p[2]);case 4:return new c(p[0],p[1],p[2],p[3])}var m=[null];return m.push.apply(m,p),new(g.apply(c,m))}var y=s.prototype,_=L(w(y)?y:Object.prototype),I=Function.apply.call(c,_,p);return w(I)?I:_}})},1367:function(){},5454:function(C,x,h){var o=h(863).charAt,S=h(4845),M=h(3326),E=h(7218),w="String Iterator",L=M.set,g=M.getterFor(w);E(String,"String",function(i){L(this,{type:w,string:S(i),index:0})},function(){var d=g(this),f=d.string,t=d.index,e;return t>=f.length?{value:void 0,done:!0}:(e=o(f,t),d.index+=e.length,{value:e,done:!1})})},957:function(C,x,h){var o=h(3085),S=h(4277).trim,M=h(6815);o({target:"String",proto:!0,forced:M("trim")},{trim:function(){return S(this)}})},9781:function(C,x,h){var o=h(1488);o("asyncIterator")},492:function(){},6681:function(C,x,h){var o=h(1488);o("hasInstance")},9594:function(C,x,h){var o=h(1488);o("isConcatSpreadable")},3665:function(C,x,h){var o=h(1488);o("iterator")},6187:function(C,x,h){var o=h(3085),S=h(8576),M=h(150),E=h(5546),w=h(69),L=h(3045),g=h(6192),i=h(4500),d=h(4770),f=h(6447),t=h(5744),e=h(3236),r=h(1138),c=h(1795),p=h(101),s=h(77),m=h(4845),y=h(774),_=h(2853),I=h(7653),z=h(2092),F=h(4052),U=h(4750),X=h(5141),J=h(2760),lt=h(6007),st=h(9482),Mt=h(8717),It=h(9766),_t=h(4535),rt=h(2759),Wt=h(8182),V=h(9207),Zt=h(1488),Q=h(1284),St=h(3326),nt=h(454).forEach,$=It("hidden"),K="Symbol",G="prototype",q=Wt("toPrimitive"),at=St.set,et=St.getterFor(K),Ct=Object[G],dt=S.Symbol,yt=M("JSON","stringify"),Ot=X.f,Tt=J.f,ct=F.f,it=lt.f,ot=Mt("symbols"),mt=Mt("op-symbols"),ft=Mt("string-to-symbol-registry"),bt=Mt("symbol-to-string-registry"),jt=Mt("wks"),Vt=S.QObject,Gt=!Vt||!Vt[G]||!Vt[G].findChild,Et=w&&g(function(){return _(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a!=7})?function(kt,Dt,Ft){var Rt=Ot(Ct,Dt);Rt&&delete Ct[Dt],Tt(kt,Dt,Ft),Rt&&kt!==Ct&&Tt(Ct,Dt,Rt)}:Tt,Xt=function(kt,Dt){var Ft=ot[kt]=_(dt[G]);return at(Ft,{type:K,tag:kt,description:Dt}),w||(Ft.description=Dt),Ft},wt=function(Dt,Ft,Rt){Dt===Ct&&wt(mt,Ft,Rt),r(Dt);var Kt=s(Ft);return r(Rt),i(ot,Kt)?(Rt.enumerable?(i(Dt,$)&&Dt[$][Kt]&&(Dt[$][Kt]=!1),Rt=_(Rt,{enumerable:y(0,!1)})):(i(Dt,$)||Tt(Dt,$,y(1,{})),Dt[$][Kt]=!0),Et(Dt,Kt,Rt)):Tt(Dt,Kt,Rt)},ee=function(Dt,Ft){r(Dt);var Rt=p(Ft),Kt=I(Rt).concat(ae(Rt));return nt(Kt,function(se){(!w||Yt.call(Rt,se))&&wt(Dt,se,Rt[se])}),Dt},ge=function(Dt,Ft){return Ft===void 0?_(Dt):ee(_(Dt),Ft)},Yt=function(Dt){var Ft=s(Dt),Rt=it.call(this,Ft);return this===Ct&&i(ot,Ft)&&!i(mt,Ft)?!1:Rt||!i(this,Ft)||!i(ot,Ft)||i(this,$)&&this[$][Ft]?Rt:!0},xt=function(Dt,Ft){var Rt=p(Dt),Kt=s(Ft);if(!(Rt===Ct&&i(ot,Kt)&&!i(mt,Kt))){var se=Ot(Rt,Kt);return se&&i(ot,Kt)&&!(i(Rt,$)&&Rt[$][Kt])&&(se.enumerable=!0),se}},ne=function(Dt){var Ft=ct(p(Dt)),Rt=[];return nt(Ft,function(Kt){!i(ot,Kt)&&!i(_t,Kt)&&Rt.push(Kt)}),Rt},ae=function(Dt){var Ft=Dt===Ct,Rt=ct(Ft?mt:p(Dt)),Kt=[];return nt(Rt,function(se){i(ot,se)&&(!Ft||i(Ct,se))&&Kt.push(ot[se])}),Kt};if(L||(dt=function(){if(this instanceof dt)throw TypeError("Symbol is not a constructor");var Dt=!arguments.length||arguments[0]===void 0?void 0:m(arguments[0]),Ft=rt(Dt),Rt=function(Kt){this===Ct&&Rt.call(mt,Kt),i(this,$)&&i(this[$],Ft)&&(this[$][Ft]=!1),Et(this,Ft,y(1,Kt))};return w&&Gt&&Et(Ct,Ft,{configurable:!0,set:Rt}),Xt(Ft,Dt)},st(dt[G],"toString",function(){return et(this).tag}),st(dt,"withoutSetter",function(kt){return Xt(rt(kt),kt)}),lt.f=Yt,J.f=wt,X.f=xt,z.f=F.f=ne,U.f=ae,V.f=function(kt){return Xt(Wt(kt),kt)},w&&(Tt(dt[G],"description",{configurable:!0,get:function(){return et(this).description}}),E||st(Ct,"propertyIsEnumerable",Yt,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!L,sham:!L},{Symbol:dt}),nt(I(jt),function(kt){Zt(kt)}),o({target:K,stat:!0,forced:!L},{for:function(kt){var Dt=m(kt);if(i(ft,Dt))return ft[Dt];var Ft=dt(Dt);return ft[Dt]=Ft,bt[Ft]=Dt,Ft},keyFor:function(Dt){if(!e(Dt))throw TypeError(Dt+" is not a symbol");if(i(bt,Dt))return bt[Dt]},useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),o({target:"Object",stat:!0,forced:!L,sham:!w},{create:ge,defineProperty:wt,defineProperties:ee,getOwnPropertyDescriptor:xt}),o({target:"Object",stat:!0,forced:!L},{getOwnPropertyNames:ne,getOwnPropertySymbols:ae}),o({target:"Object",stat:!0,forced:g(function(){U.f(1)})},{getOwnPropertySymbols:function(Dt){return U.f(c(Dt))}}),yt){var oe=!L||g(function(){var kt=dt();return yt([kt])!="[null]"||yt({a:kt})!="{}"||yt(Object(kt))!="{}"});o({target:"JSON",stat:!0,forced:oe},{stringify:function(Dt,Ft,Rt){for(var Kt=[Dt],se=1,Ce;arguments.length>se;)Kt.push(arguments[se++]);if(Ce=Ft,!(!t(Ft)&&Dt===void 0||e(Dt)))return d(Ft)||(Ft=function(Ie,Oe){if(f(Ce)&&(Oe=Ce.call(this,Ie,Oe)),!e(Oe))return Oe}),Kt[1]=Ft,yt.apply(null,Kt)}})}if(!dt[G][q]){var Se=dt[G].valueOf;st(dt[G],q,function(){return Se.apply(this,arguments)})}Q(dt,K),_t[$]=!0},1250:function(C,x,h){var o=h(1488);o("matchAll")},9017:function(C,x,h){var o=h(1488);o("match")},9786:function(C,x,h){var o=h(1488);o("replace")},503:function(C,x,h){var o=h(1488);o("search")},6565:function(C,x,h){var o=h(1488);o("species")},9322:function(C,x,h){var o=h(1488);o("split")},3610:function(C,x,h){var o=h(1488);o("toPrimitive")},6886:function(C,x,h){var o=h(1488);o("toStringTag")},3514:function(C,x,h){var o=h(1488);o("unscopables")},177:function(C,x,h){var o=h(1488);o("asyncDispose")},9031:function(C,x,h){var o=h(1488);o("dispose")},6658:function(C,x,h){var o=h(1488);o("matcher")},1875:function(C,x,h){var o=h(1488);o("metadata")},8658:function(C,x,h){var o=h(1488);o("observable")},4592:function(C,x,h){var o=h(1488);o("patternMatch")},6680:function(C,x,h){var o=h(1488);o("replaceAll")},162:function(C,x,h){h(8939);var o=h(7365),S=h(8576),M=h(4696),E=h(8711),w=h(7771),L=h(8182),g=L("toStringTag");for(var i in o){var d=S[i],f=d&&d.prototype;f&&M(f)!==g&&E(f,g,i),w[i]=w.Array}},2906:function(C,x,h){var o=h(3085),S=h(8576),M=h(6447),E=h(8989),w=[].slice,L=/MSIE .\./.test(E),g=function(i){return function(d,f){var t=arguments.length>2,e=t?w.call(arguments,2):void 0;return i(t?function(){(M(d)?d:Function(d)).apply(this,e)}:d,f)}};o({global:!0,bind:!0,forced:L},{setTimeout:g(S.setTimeout),setInterval:g(S.setInterval)})},9336:function(C,x,h){h(8939);var o=h(3085),S=h(150),M=h(4551),E=h(9482),w=h(533),L=h(1284),g=h(5148),i=h(3326),d=h(6961),f=h(6447),t=h(4500),e=h(8043),r=h(4696),c=h(1138),p=h(5744),s=h(4845),m=h(2853),y=h(774),_=h(1669),I=h(8703),z=h(8182),F=S("fetch"),U=S("Request"),X=U&&U.prototype,J=S("Headers"),lt=z("iterator"),st="URLSearchParams",Mt=st+"Iterator",It=i.set,_t=i.getterFor(st),rt=i.getterFor(Mt),Wt=/\+/g,V=Array(4),Zt=function(ct){return V[ct-1]||(V[ct-1]=RegExp("((?:%[\\da-f]{2}){"+ct+"})","gi"))},Q=function(ct){try{return decodeURIComponent(ct)}catch{return ct}},St=function(ct){var it=ct.replace(Wt," "),ot=4;try{return decodeURIComponent(it)}catch{for(;ot;)it=it.replace(Zt(ot--),Q);return it}},nt=/[!'()~]|%20/g,$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},K=function(ct){return $[ct]},G=function(ct){return encodeURIComponent(ct).replace(nt,K)},q=function(ct,it){if(it)for(var ot=it.split("&"),mt=0,ft,bt;mt<ot.length;)ft=ot[mt++],ft.length&&(bt=ft.split("="),ct.push({key:St(bt.shift()),value:St(bt.join("="))}))},at=function(ct){this.entries.length=0,q(this.entries,ct)},et=function(ct,it){if(ct<it)throw TypeError("Not enough arguments")},Ct=g(function(it,ot){It(this,{type:Mt,iterator:_(_t(it).entries),kind:ot})},"Iterator",function(){var it=rt(this),ot=it.kind,mt=it.iterator.next(),ft=mt.value;return mt.done||(mt.value=ot==="keys"?ft.key:ot==="values"?ft.value:[ft.key,ft.value]),mt}),dt=function(){d(this,dt,st);var it=arguments.length>0?arguments[0]:void 0,ot=this,mt=[],ft,bt,jt,Vt,Gt,Et,Xt,wt,ee;if(It(ot,{type:st,entries:mt,updateURL:function(){},updateSearchParams:at}),it!==void 0)if(p(it))if(ft=I(it),ft)for(bt=_(it,ft),jt=bt.next;!(Vt=jt.call(bt)).done;){if(Gt=_(c(Vt.value)),Et=Gt.next,(Xt=Et.call(Gt)).done||(wt=Et.call(Gt)).done||!Et.call(Gt).done)throw TypeError("Expected sequence with length 2");mt.push({key:s(Xt.value),value:s(wt.value)})}else for(ee in it)t(it,ee)&&mt.push({key:ee,value:s(it[ee])});else q(mt,typeof it=="string"?it.charAt(0)==="?"?it.slice(1):it:s(it))},yt=dt.prototype;if(w(yt,{append:function(it,ot){et(arguments.length,2);var mt=_t(this);mt.entries.push({key:s(it),value:s(ot)}),mt.updateURL()},delete:function(ct){et(arguments.length,1);for(var it=_t(this),ot=it.entries,mt=s(ct),ft=0;ft<ot.length;)ot[ft].key===mt?ot.splice(ft,1):ft++;it.updateURL()},get:function(it){et(arguments.length,1);for(var ot=_t(this).entries,mt=s(it),ft=0;ft<ot.length;ft++)if(ot[ft].key===mt)return ot[ft].value;return null},getAll:function(it){et(arguments.length,1);for(var ot=_t(this).entries,mt=s(it),ft=[],bt=0;bt<ot.length;bt++)ot[bt].key===mt&&ft.push(ot[bt].value);return ft},has:function(it){et(arguments.length,1);for(var ot=_t(this).entries,mt=s(it),ft=0;ft<ot.length;)if(ot[ft++].key===mt)return!0;return!1},set:function(it,ot){et(arguments.length,1);for(var mt=_t(this),ft=mt.entries,bt=!1,jt=s(it),Vt=s(ot),Gt=0,Et;Gt<ft.length;Gt++)Et=ft[Gt],Et.key===jt&&(bt?ft.splice(Gt--,1):(bt=!0,Et.value=Vt));bt||ft.push({key:jt,value:Vt}),mt.updateURL()},sort:function(){var it=_t(this),ot=it.entries,mt=ot.slice(),ft,bt,jt;for(ot.length=0,jt=0;jt<mt.length;jt++){for(ft=mt[jt],bt=0;bt<jt;bt++)if(ot[bt].key>ft.key){ot.splice(bt,0,ft);break}bt===jt&&ot.push(ft)}it.updateURL()},forEach:function(it){for(var ot=_t(this).entries,mt=e(it,arguments.length>1?arguments[1]:void 0,3),ft=0,bt;ft<ot.length;)bt=ot[ft++],mt(bt.value,bt.key,this)},keys:function(){return new Ct(this,"keys")},values:function(){return new Ct(this,"values")},entries:function(){return new Ct(this,"entries")}},{enumerable:!0}),E(yt,lt,yt.entries,{name:"entries"}),E(yt,"toString",function(){for(var it=_t(this).entries,ot=[],mt=0,ft;mt<it.length;)ft=it[mt++],ot.push(G(ft.key)+"="+G(ft.value));return ot.join("&")},{enumerable:!0}),L(dt,st),o({global:!0,forced:!M},{URLSearchParams:dt}),!M&&f(J)){var Ot=function(ct){if(p(ct)){var it=ct.body,ot;if(r(it)===st)return ot=ct.headers?new J(ct.headers):new J,ot.has("content-type")||ot.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),m(ct,{body:y(0,String(it)),headers:y(0,ot)})}return ct};if(f(F)&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(it){return F(it,arguments.length>1?Ot(arguments[1]):{})}}),f(U)){var Tt=function(it){return d(this,Tt,"Request"),new U(it,arguments.length>1?Ot(arguments[1]):{})};X.constructor=Tt,Tt.prototype=X,o({global:!0,forced:!0},{Request:Tt})}}C.exports={URLSearchParams:dt,getState:_t}},4948:function(C,x,h){h(5454);var o=h(3085),S=h(69),M=h(4551),E=h(8576),w=h(1187),L=h(9482),g=h(6961),i=h(4500),d=h(2503),f=h(841),t=h(863).codeAt,e=h(7977),r=h(4845),c=h(1284),p=h(9336),s=h(3326),m=E.URL,y=p.URLSearchParams,_=p.getState,I=s.set,z=s.getterFor("URL"),F=Math.floor,U=Math.pow,X="Invalid authority",J="Invalid scheme",lt="Invalid host",st="Invalid port",Mt=/[A-Za-z]/,It=/[\d+-.A-Za-z]/,_t=/\d/,rt=/^0x/i,Wt=/^[0-7]+$/,V=/^\d+$/,Zt=/^[\dA-Fa-f]+$/,Q=/[\0\t\n\r #%/:<>?@[\\\]^|]/,St=/[\0\t\n\r #/:<>?@[\\\]^|]/,nt=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,$=/[\t\n\r]/g,K,G=function(tt,At){var Pt,zt,Ht;if(At.charAt(0)=="["){if(At.charAt(At.length-1)!="]"||(Pt=at(At.slice(1,-1)),!Pt))return lt;tt.host=Pt}else if(ot(tt)){if(At=e(At),Q.test(At)||(Pt=q(At),Pt===null))return lt;tt.host=Pt}else{if(St.test(At))return lt;for(Pt="",zt=f(At),Ht=0;Ht<zt.length;Ht++)Pt+=ct(zt[Ht],dt);tt.host=Pt}},q=function(tt){var At=tt.split("."),Pt,zt,Ht,re,Jt,fe,ve;if(At.length&&At[At.length-1]==""&&At.pop(),Pt=At.length,Pt>4)return tt;for(zt=[],Ht=0;Ht<Pt;Ht++){if(re=At[Ht],re=="")return tt;if(Jt=10,re.length>1&&re.charAt(0)=="0"&&(Jt=rt.test(re)?16:8,re=re.slice(Jt==8?1:2)),re==="")fe=0;else{if(!(Jt==10?V:Jt==8?Wt:Zt).test(re))return tt;fe=parseInt(re,Jt)}zt.push(fe)}for(Ht=0;Ht<Pt;Ht++)if(fe=zt[Ht],Ht==Pt-1){if(fe>=U(256,5-Pt))return null}else if(fe>255)return null;for(ve=zt.pop(),Ht=0;Ht<zt.length;Ht++)ve+=zt[Ht]*U(256,3-Ht);return ve},at=function(tt){var At=[0,0,0,0,0,0,0,0],Pt=0,zt=null,Ht=0,re,Jt,fe,ve,Me,Pe,Bt,Ee=function(){return tt.charAt(Ht)};if(Ee()==":"){if(tt.charAt(1)!=":")return;Ht+=2,Pt++,zt=Pt}for(;Ee();){if(Pt==8)return;if(Ee()==":"){if(zt!==null)return;Ht++,Pt++,zt=Pt;continue}for(re=Jt=0;Jt<4&&Zt.test(Ee());)re=re*16+parseInt(Ee(),16),Ht++,Jt++;if(Ee()=="."){if(Jt==0||(Ht-=Jt,Pt>6))return;for(fe=0;Ee();){if(ve=null,fe>0)if(Ee()=="."&&fe<4)Ht++;else return;if(!_t.test(Ee()))return;for(;_t.test(Ee());){if(Me=parseInt(Ee(),10),ve===null)ve=Me;else{if(ve==0)return;ve=ve*10+Me}if(ve>255)return;Ht++}At[Pt]=At[Pt]*256+ve,fe++,(fe==2||fe==4)&&Pt++}if(fe!=4)return;break}else if(Ee()==":"){if(Ht++,!Ee())return}else if(Ee())return;At[Pt++]=re}if(zt!==null)for(Pe=Pt-zt,Pt=7;Pt!=0&&Pe>0;)Bt=At[Pt],At[Pt--]=At[zt+Pe-1],At[zt+--Pe]=Bt;else if(Pt!=8)return;return At},et=function(tt){for(var At=null,Pt=1,zt=null,Ht=0,re=0;re<8;re++)tt[re]!==0?(Ht>Pt&&(At=zt,Pt=Ht),zt=null,Ht=0):(zt===null&&(zt=re),++Ht);return Ht>Pt&&(At=zt,Pt=Ht),At},Ct=function(tt){var At,Pt,zt,Ht;if(typeof tt=="number"){for(At=[],Pt=0;Pt<4;Pt++)At.unshift(tt%256),tt=F(tt/256);return At.join(".")}else if(typeof tt=="object"){for(At="",zt=et(tt),Pt=0;Pt<8;Pt++)Ht&&tt[Pt]===0||(Ht&&(Ht=!1),zt===Pt?(At+=Pt?":":"::",Ht=!0):(At+=tt[Pt].toString(16),Pt<7&&(At+=":")));return"["+At+"]"}return tt},dt={},yt=d({},dt,{" ":1,'"':1,"<":1,">":1,"`":1}),Ot=d({},yt,{"#":1,"?":1,"{":1,"}":1}),Tt=d({},Ot,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ct=function(tt,At){var Pt=t(tt,0);return Pt>32&&Pt<127&&!i(At,tt)?tt:encodeURIComponent(tt)},it={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ot=function(tt){return i(it,tt.scheme)},mt=function(tt){return tt.username!=""||tt.password!=""},ft=function(tt){return!tt.host||tt.cannotBeABaseURL||tt.scheme=="file"},bt=function(tt,At){var Pt;return tt.length==2&&Mt.test(tt.charAt(0))&&((Pt=tt.charAt(1))==":"||!At&&Pt=="|")},jt=function(tt){var At;return tt.length>1&&bt(tt.slice(0,2))&&(tt.length==2||(At=tt.charAt(2))==="/"||At==="\\"||At==="?"||At==="#")},Vt=function(tt){var At=tt.path,Pt=At.length;Pt&&(tt.scheme!="file"||Pt!=1||!bt(At[0],!0))&&At.pop()},Gt=function(tt){return tt==="."||tt.toLowerCase()==="%2e"},Et=function(tt){return tt=tt.toLowerCase(),tt===".."||tt==="%2e."||tt===".%2e"||tt==="%2e%2e"},Xt={},wt={},ee={},ge={},Yt={},xt={},ne={},ae={},oe={},Se={},kt={},Dt={},Ft={},Rt={},Kt={},se={},Ce={},Ie={},Oe={},_e={},me={},pe=function(tt,At,Pt,zt){var Ht=Pt||Xt,re=0,Jt="",fe=!1,ve=!1,Me=!1,Pe,Bt,Ee,Ze;for(Pt||(tt.scheme="",tt.username="",tt.password="",tt.host=null,tt.port=null,tt.path=[],tt.query=null,tt.fragment=null,tt.cannotBeABaseURL=!1,At=At.replace(nt,"")),At=At.replace($,""),Pe=f(At);re<=Pe.length;){switch(Bt=Pe[re],Ht){case Xt:if(Bt&&Mt.test(Bt))Jt+=Bt.toLowerCase(),Ht=wt;else{if(Pt)return J;Ht=ee;continue}break;case wt:if(Bt&&(It.test(Bt)||Bt=="+"||Bt=="-"||Bt=="."))Jt+=Bt.toLowerCase();else if(Bt==":"){if(Pt&&(ot(tt)!=i(it,Jt)||Jt=="file"&&(mt(tt)||tt.port!==null)||tt.scheme=="file"&&!tt.host))return;if(tt.scheme=Jt,Pt){ot(tt)&&it[tt.scheme]==tt.port&&(tt.port=null);return}Jt="",tt.scheme=="file"?Ht=Rt:ot(tt)&&zt&&zt.scheme==tt.scheme?Ht=ge:ot(tt)?Ht=ae:Pe[re+1]=="/"?(Ht=Yt,re++):(tt.cannotBeABaseURL=!0,tt.path.push(""),Ht=Oe)}else{if(Pt)return J;Jt="",Ht=ee,re=0;continue}break;case ee:if(!zt||zt.cannotBeABaseURL&&Bt!="#")return J;if(zt.cannotBeABaseURL&&Bt=="#"){tt.scheme=zt.scheme,tt.path=zt.path.slice(),tt.query=zt.query,tt.fragment="",tt.cannotBeABaseURL=!0,Ht=me;break}Ht=zt.scheme=="file"?Rt:xt;continue;case ge:if(Bt=="/"&&Pe[re+1]=="/")Ht=oe,re++;else{Ht=xt;continue}break;case Yt:if(Bt=="/"){Ht=Se;break}else{Ht=Ie;continue}case xt:if(tt.scheme=zt.scheme,Bt==K)tt.username=zt.username,tt.password=zt.password,tt.host=zt.host,tt.port=zt.port,tt.path=zt.path.slice(),tt.query=zt.query;else if(Bt=="/"||Bt=="\\"&&ot(tt))Ht=ne;else if(Bt=="?")tt.username=zt.username,tt.password=zt.password,tt.host=zt.host,tt.port=zt.port,tt.path=zt.path.slice(),tt.query="",Ht=_e;else if(Bt=="#")tt.username=zt.username,tt.password=zt.password,tt.host=zt.host,tt.port=zt.port,tt.path=zt.path.slice(),tt.query=zt.query,tt.fragment="",Ht=me;else{tt.username=zt.username,tt.password=zt.password,tt.host=zt.host,tt.port=zt.port,tt.path=zt.path.slice(),tt.path.pop(),Ht=Ie;continue}break;case ne:if(ot(tt)&&(Bt=="/"||Bt=="\\"))Ht=oe;else if(Bt=="/")Ht=Se;else{tt.username=zt.username,tt.password=zt.password,tt.host=zt.host,tt.port=zt.port,Ht=Ie;continue}break;case ae:if(Ht=oe,Bt!="/"||Jt.charAt(re+1)!="/")continue;re++;break;case oe:if(Bt!="/"&&Bt!="\\"){Ht=Se;continue}break;case Se:if(Bt=="@"){fe&&(Jt="%40"+Jt),fe=!0,Ee=f(Jt);for(var Ri=0;Ri<Ee.length;Ri++){var en=Ee[Ri];if(en==":"&&!Me){Me=!0;continue}var nn=ct(en,Tt);Me?tt.password+=nn:tt.username+=nn}Jt=""}else if(Bt==K||Bt=="/"||Bt=="?"||Bt=="#"||Bt=="\\"&&ot(tt)){if(fe&&Jt=="")return X;re-=f(Jt).length+1,Jt="",Ht=kt}else Jt+=Bt;break;case kt:case Dt:if(Pt&&tt.scheme=="file"){Ht=se;continue}else if(Bt==":"&&!ve){if(Jt=="")return lt;if(Ze=G(tt,Jt),Ze)return Ze;if(Jt="",Ht=Ft,Pt==Dt)return}else if(Bt==K||Bt=="/"||Bt=="?"||Bt=="#"||Bt=="\\"&&ot(tt)){if(ot(tt)&&Jt=="")return lt;if(Pt&&Jt==""&&(mt(tt)||tt.port!==null))return;if(Ze=G(tt,Jt),Ze)return Ze;if(Jt="",Ht=Ce,Pt)return;continue}else Bt=="["?ve=!0:Bt=="]"&&(ve=!1),Jt+=Bt;break;case Ft:if(_t.test(Bt))Jt+=Bt;else if(Bt==K||Bt=="/"||Bt=="?"||Bt=="#"||Bt=="\\"&&ot(tt)||Pt){if(Jt!=""){var Ii=parseInt(Jt,10);if(Ii>65535)return st;tt.port=ot(tt)&&Ii===it[tt.scheme]?null:Ii,Jt=""}if(Pt)return;Ht=Ce;continue}else return st;break;case Rt:if(tt.scheme="file",Bt=="/"||Bt=="\\")Ht=Kt;else if(zt&&zt.scheme=="file")if(Bt==K)tt.host=zt.host,tt.path=zt.path.slice(),tt.query=zt.query;else if(Bt=="?")tt.host=zt.host,tt.path=zt.path.slice(),tt.query="",Ht=_e;else if(Bt=="#")tt.host=zt.host,tt.path=zt.path.slice(),tt.query=zt.query,tt.fragment="",Ht=me;else{jt(Pe.slice(re).join(""))||(tt.host=zt.host,tt.path=zt.path.slice(),Vt(tt)),Ht=Ie;continue}else{Ht=Ie;continue}break;case Kt:if(Bt=="/"||Bt=="\\"){Ht=se;break}zt&&zt.scheme=="file"&&!jt(Pe.slice(re).join(""))&&(bt(zt.path[0],!0)?tt.path.push(zt.path[0]):tt.host=zt.host),Ht=Ie;continue;case se:if(Bt==K||Bt=="/"||Bt=="\\"||Bt=="?"||Bt=="#"){if(!Pt&&bt(Jt))Ht=Ie;else if(Jt==""){if(tt.host="",Pt)return;Ht=Ce}else{if(Ze=G(tt,Jt),Ze)return Ze;if(tt.host=="localhost"&&(tt.host=""),Pt)return;Jt="",Ht=Ce}continue}else Jt+=Bt;break;case Ce:if(ot(tt)){if(Ht=Ie,Bt!="/"&&Bt!="\\")continue}else if(!Pt&&Bt=="?")tt.query="",Ht=_e;else if(!Pt&&Bt=="#")tt.fragment="",Ht=me;else if(Bt!=K&&(Ht=Ie,Bt!="/"))continue;break;case Ie:if(Bt==K||Bt=="/"||Bt=="\\"&&ot(tt)||!Pt&&(Bt=="?"||Bt=="#")){if(Et(Jt)?(Vt(tt),Bt!="/"&&!(Bt=="\\"&&ot(tt))&&tt.path.push("")):Gt(Jt)?Bt!="/"&&!(Bt=="\\"&&ot(tt))&&tt.path.push(""):(tt.scheme=="file"&&!tt.path.length&&bt(Jt)&&(tt.host&&(tt.host=""),Jt=Jt.charAt(0)+":"),tt.path.push(Jt)),Jt="",tt.scheme=="file"&&(Bt==K||Bt=="?"||Bt=="#"))for(;tt.path.length>1&&tt.path[0]==="";)tt.path.shift();Bt=="?"?(tt.query="",Ht=_e):Bt=="#"&&(tt.fragment="",Ht=me)}else Jt+=ct(Bt,Ot);break;case Oe:Bt=="?"?(tt.query="",Ht=_e):Bt=="#"?(tt.fragment="",Ht=me):Bt!=K&&(tt.path[0]+=ct(Bt,dt));break;case _e:!Pt&&Bt=="#"?(tt.fragment="",Ht=me):Bt!=K&&(Bt=="'"&&ot(tt)?tt.query+="%27":Bt=="#"?tt.query+="%23":tt.query+=ct(Bt,dt));break;case me:Bt!=K&&(tt.fragment+=ct(Bt,yt));break}re++}},Le=function(At){var Pt=g(this,Le,"URL"),zt=arguments.length>1?arguments[1]:void 0,Ht=r(At),re=I(Pt,{type:"URL"}),Jt,fe;if(zt!==void 0){if(zt instanceof Le)Jt=z(zt);else if(fe=pe(Jt={},r(zt)),fe)throw TypeError(fe)}if(fe=pe(re,Ht,null,Jt),fe)throw TypeError(fe);var ve=re.searchParams=new y,Me=_(ve);Me.updateSearchParams(re.query),Me.updateURL=function(){re.query=String(ve)||null},S||(Pt.href=Ke.call(Pt),Pt.origin=Qi.call(Pt),Pt.protocol=Pi.call(Pt),Pt.username=Li.call(Pt),Pt.password=Ae.call(Pt),Pt.host=Si.call(Pt),Pt.hostname=Ni.call(Pt),Pt.port=Ne.call(Pt),Pt.pathname=ji.call(Pt),Pt.search=gi.call(Pt),Pt.searchParams=Ki.call(Pt),Pt.hash=$i.call(Pt))},Ue=Le.prototype,Ke=function(){var tt=z(this),At=tt.scheme,Pt=tt.username,zt=tt.password,Ht=tt.host,re=tt.port,Jt=tt.path,fe=tt.query,ve=tt.fragment,Me=At+":";return Ht!==null?(Me+="//",mt(tt)&&(Me+=Pt+(zt?":"+zt:"")+"@"),Me+=Ct(Ht),re!==null&&(Me+=":"+re)):At=="file"&&(Me+="//"),Me+=tt.cannotBeABaseURL?Jt[0]:Jt.length?"/"+Jt.join("/"):"",fe!==null&&(Me+="?"+fe),ve!==null&&(Me+="#"+ve),Me},Qi=function(){var tt=z(this),At=tt.scheme,Pt=tt.port;if(At=="blob")try{return new Le(At.path[0]).origin}catch{return"null"}return At=="file"||!ot(tt)?"null":At+"://"+Ct(tt.host)+(Pt!==null?":"+Pt:"")},Pi=function(){return z(this).scheme+":"},Li=function(){return z(this).username},Ae=function(){return z(this).password},Si=function(){var tt=z(this),At=tt.host,Pt=tt.port;return At===null?"":Pt===null?Ct(At):Ct(At)+":"+Pt},Ni=function(){var tt=z(this).host;return tt===null?"":Ct(tt)},Ne=function(){var tt=z(this).port;return tt===null?"":String(tt)},ji=function(){var tt=z(this),At=tt.path;return tt.cannotBeABaseURL?At[0]:At.length?"/"+At.join("/"):""},gi=function(){var tt=z(this).query;return tt?"?"+tt:""},Ki=function(){return z(this).searchParams},$i=function(){var tt=z(this).fragment;return tt?"#"+tt:""},je=function(tt,At){return{get:tt,set:At,configurable:!0,enumerable:!0}};if(S&&w(Ue,{href:je(Ke,function(tt){var At=z(this),Pt=r(tt),zt=pe(At,Pt);if(zt)throw TypeError(zt);_(At.searchParams).updateSearchParams(At.query)}),origin:je(Qi),protocol:je(Pi,function(tt){var At=z(this);pe(At,r(tt)+":",Xt)}),username:je(Li,function(tt){var At=z(this),Pt=f(r(tt));if(!ft(At)){At.username="";for(var zt=0;zt<Pt.length;zt++)At.username+=ct(Pt[zt],Tt)}}),password:je(Ae,function(tt){var At=z(this),Pt=f(r(tt));if(!ft(At)){At.password="";for(var zt=0;zt<Pt.length;zt++)At.password+=ct(Pt[zt],Tt)}}),host:je(Si,function(tt){var At=z(this);At.cannotBeABaseURL||pe(At,r(tt),kt)}),hostname:je(Ni,function(tt){var At=z(this);At.cannotBeABaseURL||pe(At,r(tt),Dt)}),port:je(Ne,function(tt){var At=z(this);ft(At)||(tt=r(tt),tt==""?At.port=null:pe(At,tt,Ft))}),pathname:je(ji,function(tt){var At=z(this);At.cannotBeABaseURL||(At.path=[],pe(At,r(tt),Ce))}),search:je(gi,function(tt){var At=z(this);tt=r(tt),tt==""?At.query=null:(tt.charAt(0)=="?"&&(tt=tt.slice(1)),At.query="",pe(At,tt,_e)),_(At.searchParams).updateSearchParams(At.query)}),searchParams:je(Ki),hash:je($i,function(tt){var At=z(this);if(tt=r(tt),tt==""){At.fragment=null;return}tt.charAt(0)=="#"&&(tt=tt.slice(1)),At.fragment="",pe(At,tt,me)})}),L(Ue,"toJSON",function(){return Ke.call(this)},{enumerable:!0}),L(Ue,"toString",function(){return Ke.call(this)},{enumerable:!0}),m){var qi=m.createObjectURL,tn=m.revokeObjectURL;qi&&L(Le,"createObjectURL",function(At){return qi.apply(m,arguments)}),tn&&L(Le,"revokeObjectURL",function(At){return tn.apply(m,arguments)})}c(Le,"URL"),o({global:!0,forced:!M,sham:!S},{URL:Le})},9801:function(){},3822:function(C,x,h){var o=h(2221);C.exports=o},1434:function(C,x,h){var o=h(5078);C.exports=o},6899:function(C,x,h){var o=h(98);C.exports=o},7710:function(C,x,h){var o=h(5739);h(162),C.exports=o},4486:function(C,x,h){var o=h(278);C.exports=o},4877:function(C,x,h){var o=h(1484);C.exports=o},7178:function(C,x,h){var o=h(7731);C.exports=o},5603:function(C,x,h){var o=h(3669);C.exports=o},1206:function(C,x,h){h(162);var o=h(6899),S=h(4696),M=Array.prototype,E={DOMTokenList:!0,NodeList:!0};C.exports=function(w){var L=w.forEach;return w===M||w instanceof Array&&L===M.forEach||E.hasOwnProperty(S(w))?o:L}},6174:function(C,x,h){var o=h(2604);C.exports=o},57:function(C,x,h){var o=h(263);C.exports=o},4741:function(C,x,h){var o=h(7663);C.exports=o},8368:function(C,x,h){var o=h(5063);C.exports=o},3739:function(C,x,h){var o=h(6813);C.exports=o},172:function(C,x,h){var o=h(6285);C.exports=o},4963:function(C,x,h){var o=h(3213);C.exports=o},7820:function(C,x,h){var o=h(3512);C.exports=o},8980:function(C,x,h){var o=h(8168);C.exports=o},5636:function(C,x,h){var o=h(8651);C.exports=o},6672:function(C,x,h){var o=h(3083);C.exports=o},5059:function(C,x,h){var o=h(2987);C.exports=o},3969:function(C,x,h){var o=h(2239);C.exports=o},6618:function(C,x,h){var o=h(3154);h(162),C.exports=o},5279:function(C,x,h){var o=h(6577);C.exports=o},9562:function(C,x,h){h(2906);var o=h(7545);C.exports=o.setTimeout},2285:function(C,x,h){var o=h(5008);h(162),C.exports=o},8535:function(C,x,h){var o=h(994);h(162),C.exports=o},652:function(C,x,h){var o=h(5668);C.exports=o},5668:function(C,x,h){h(4948),h(9801),h(9336);var o=h(7545);C.exports=o.URL},2534:function(C){C.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},624:function(C){C.exports=O},4858:function(C){C.exports=j},4960:function(){},6759:function(){},6272:function(){}},k={};function R(C){var x=k[C];if(x!==void 0)return x.exports;var h=k[C]={exports:{}};return P[C](h,h.exports,R),h.exports}(function(){R.n=function(C){var x=C&&C.__esModule?function(){return C.default}:function(){return C};return R.d(x,{a:x}),x}})(),function(){R.d=function(C,x){for(var h in x)R.o(x,h)&&!R.o(C,h)&&Object.defineProperty(C,h,{enumerable:!0,get:x[h]})}}(),function(){R.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){R.o=function(C,x){return Object.prototype.hasOwnProperty.call(C,x)}}();var Y={};return function(){R.d(Y,{default:function(){return rf}});var C=R(9131),x=R.n(C),h=R(1899),o=R.n(h),S=R(6562),M=R.n(S),E=R(1734),w=R.n(E),L=R(8005),g=R.n(L),i=R(6065),d=R.n(i),f=R(4496),t=R.n(f);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(D){var v=this;do{if(Element.prototype.matches.call(v,D))return v;v=v.parentElement||v.parentNode}while(v!==null&&v.nodeType===1);return null});/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(D){if("Element"in D){var v="classList",a="prototype",l=D.Element[a],n=Object,u=x()(String[a])||function(){return this.replace(/^\s+|\s+$/g,"")},b=o()(Array[a])||function(ht){for(var gt=0,vt=this.length;gt<vt;gt++)if(gt in this&&this[gt]===ht)return gt;return-1},T=function(gt,vt){this.name=gt,this.code=DOMException[gt],this.message=vt},B=function(gt,vt){if(vt==="")throw new T("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(vt))throw new T("INVALID_CHARACTER_ERR","The token must not contain space characters.");return b.call(gt,vt)},N=function(gt){for(var vt=u.call(gt.getAttribute("class")||""),pt=vt?vt.split(/\s+/):[],Nt=0,Qt=pt.length;Nt<Qt;Nt++)this.push(pt[Nt]);this._updateClassName=function(){gt.setAttribute("class",this.toString())}},H=N[a]=[],Z=function(){return new N(this)};if(T[a]=Error[a],H.item=function(ht){return this[ht]||null},H.contains=function(ht){return~B(this,ht+"")},H.add=function(){var ht=arguments,gt=0,vt=ht.length,pt,Nt=!1;do pt=ht[gt]+"",~B(this,pt)||(this.push(pt),Nt=!0);while(++gt<vt);Nt&&this._updateClassName()},H.remove=function(){var ht=arguments,gt=0,vt=ht.length,pt,Nt=!1,Qt;do for(pt=ht[gt]+"",Qt=B(this,pt);~Qt;){var qt;M()(qt=this).call(qt,Qt,1),Nt=!0,Qt=B(this,pt)}while(++gt<vt);Nt&&this._updateClassName()},H.toggle=function(ht,gt){var vt=this.contains(ht),pt=vt?gt!==!0&&"remove":gt!==!1&&"add";return pt&&this[pt](ht),gt===!0||gt===!1?gt:!vt},H.replace=function(ht,gt){var vt=B(ht+"");if(~vt){var pt;M()(pt=this).call(pt,vt,1,gt),this._updateClassName()}},H.toString=function(){return this.join(" ")},w()){var ut={get:Z,enumerable:!0,configurable:!0};try{w()(l,v,ut)}catch(ht){(ht.number===void 0||ht.number===-2146823252)&&(ut.enumerable=!1,w()(l,v,ut))}}else n[a].__defineGetter__&&l.__defineGetter__(v,Z)}}(self),function(){var D=document.createElement("_");if(D.classList.add("c1","c2"),!D.classList.contains("c2")){var v=function(n){var u=DOMTokenList.prototype[n];DOMTokenList.prototype[n]=function(b){var T,B=arguments.length;for(T=0;T<B;T++)b=arguments[T],u.call(this,b)}};v("add"),v("remove")}if(D.classList.toggle("c3",!1),D.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,n){return 1 in arguments&&!this.contains(l)==!n?n:a.call(this,l)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(l,n){var u=this.toString().split(" "),b=o()(u).call(u,l+"");~b&&(u=g()(u).call(u,b),this.remove.apply(this,u),this.add(n),this.add.apply(this,g()(u).call(u,1)))}),D=null}());/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.6
 */(function(){if(typeof window<"u"&&window.addEventListener){var D=d()(null),v,a,l=function(){clearTimeout(a),a=t()(v,100)},n=function(){},u=function(){var H;window.addEventListener("resize",l,!1),window.addEventListener("orientationchange",l,!1),window.MutationObserver?(H=new MutationObserver(l),H.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),n=function(){try{H.disconnect(),window.removeEventListener("resize",l,!1),window.removeEventListener("orientationchange",l,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",l,!1),n=function(){document.documentElement.removeEventListener("DOMSubtreeModified",l,!1),window.removeEventListener("resize",l,!1),window.removeEventListener("orientationchange",l,!1)})},b=function(H){function Z(vt){var pt;return vt.protocol!==void 0?pt=vt:(pt=document.createElement("a"),pt.href=vt),pt.protocol.replace(/:/g,"")+pt.host}var ut,ht,gt;return window.XMLHttpRequest&&(ut=new XMLHttpRequest,ht=Z(location),gt=Z(H),ut.withCredentials===void 0&&gt!==""&&gt!==ht?ut=XDomainRequest||void 0:ut=XMLHttpRequest),ut},T="http://www.w3.org/1999/xlink";v=function(){var H,Z,ut,ht,gt,vt=0,pt,Nt,Qt,qt,te;function Ut(){vt-=1,vt===0&&(n(),u())}function de(Te){return function(){D[Te.base]!==!0&&(Te.useEl.setAttributeNS(T,"xlink:href","#"+Te.hash),Te.useEl.hasAttribute("href")&&Te.useEl.setAttribute("href","#"+Te.hash))}}function ke(Te){return function(){var Ve=document.body,ui=document.createElement("x"),ze;Te.onload=null,ui.innerHTML=Te.responseText,ze=ui.getElementsByTagName("svg")[0],ze&&(ze.setAttribute("aria-hidden","true"),ze.style.position="absolute",ze.style.width=0,ze.style.height=0,ze.style.overflow="hidden",Ve.insertBefore(ze,Ve.firstChild)),Ut()}}function Re(Te){return function(){Te.onerror=null,Te.ontimeout=null,Ut()}}for(n(),qt=document.getElementsByTagName("use"),gt=0;gt<qt.length;gt+=1){try{Z=qt[gt].getBoundingClientRect()}catch{Z=!1}ht=qt[gt].getAttribute("href")||qt[gt].getAttributeNS(T,"href")||qt[gt].getAttribute("xlink:href"),ht&&ht.split?Qt=ht.split("#"):Qt=["",""],H=Qt[0],ut=Qt[1],pt=Z&&Z.left===0&&Z.right===0&&Z.top===0&&Z.bottom===0,Z&&Z.width===0&&Z.height===0&&!pt?(qt[gt].hasAttribute("href")&&qt[gt].setAttributeNS(T,"xlink:href",ht),H.length&&(te=D[H],te!==!0&&t()(de({useEl:qt[gt],base:H,hash:ut}),0),te===void 0&&(Nt=b(H),Nt!==void 0&&(te=new Nt,D[H]=te,te.onload=ke(te),te.onerror=Re(te),te.ontimeout=Re(te),te.open("GET",H),te.send(),vt+=1)))):pt?H.length&&D[H]&&t()(de({useEl:qt[gt],base:H,hash:ut}),0):D[H]===void 0?D[H]=!0:D[H].onload&&(D[H].abort(),delete D[H].onload,D[H]=!0)}qt="",vt+=1,Ut()};var B;B=function(){window.removeEventListener("load",B,!1),a=t()(v,0)},document.readyState!=="complete"?window.addEventListener("load",B,!1):B()}})();var e=R(1845);function r(D,v){(v==null||v>D.length)&&(v=D.length);for(var a=0,l=new Array(v);a<v;a++)l[a]=D[a];return l}function c(D){if(e(D))return r(D)}var p=R(184),s=R(662),m=R(7172);function y(D){if(typeof p<"u"&&s(D)!=null||D["@@iterator"]!=null)return m(D)}var _=R(711);function I(D,v){var a;if(!!D){if(typeof D=="string")return r(D,v);var l=_(a=Object.prototype.toString.call(D)).call(a,8,-1);if(l==="Object"&&D.constructor&&(l=D.constructor.name),l==="Map"||l==="Set")return m(D);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return r(D,v)}}function z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(D){return c(D)||y(D)||I(D)||z()}var U=R(7077);function X(D,v,a){return v in D?U(D,v,{value:a,enumerable:!0,configurable:!0,writable:!0}):D[v]=a,D}function J(D,v){if(!(D instanceof v))throw new TypeError("Cannot call a class as a function")}function lt(D,v){for(var a=0;a<v.length;a++){var l=v[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),U(D,l.key,l)}}function st(D,v,a){return v&&lt(D.prototype,v),a&&lt(D,a),D}var Mt=R(7636),It=R.n(Mt),_t=R(4426),rt=R.n(_t),Wt=R(9406),V=R.n(Wt),Zt=R(8189),Q=R.n(Zt),St=R(3972),nt=R.n(St),$=R(624),K=R.n($),G=R(2777),q=R(2461),at=R.n(q);function et(D){if(e(D))return D}function Ct(D,v){var a=D==null?null:typeof p<"u"&&s(D)||D["@@iterator"];if(a!=null){var l=[],n=!0,u=!1,b,T;try{for(a=a.call(D);!(n=(b=a.next()).done)&&(l.push(b.value),!(v&&l.length===v));n=!0);}catch(B){u=!0,T=B}finally{try{!n&&a.return!=null&&a.return()}finally{if(u)throw T}}return l}}function dt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yt(D,v){return et(D)||Ct(D,v)||I(D,v)||dt()}var Ot=R(6397),Tt=R.n(Ot),ct=R(789),it=R.n(ct),ot,mt=["zoomIn","zoomOut","hand"],ft=["history","undo","redo","reset"],bt=["delete","deleteAll"],jt=V()(ot=[]).call(ot,mt,ft,bt),Vt={FILTER:"filter",COLOR:"color"},Gt=["rect","circle","triangle"],Et={CROPZONE:"cropzone"},Xt={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},wt=Si("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),ee={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},ge={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Yt={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},xt={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},ne={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},ae={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},oe=Si("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Se={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},kt={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},Dt={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32},Ft={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},Rt={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},Kt={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},se={realTimeEvent:!0,min:-360,max:360,value:0},Ce={min:5,max:30,value:12},Ie={realTimeEvent:!0,min:2,max:300,value:3},Oe={realTimeEvent:!0,min:10,max:100,value:50},_e={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},me={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},pe={realTimeEvent:!0,min:32,max:4088,value:800},Le=2,Ue="tui-image-editor-",Ke=Math.min,Qi=Math.max,Pi=!1;function Li(D){return typeof D=="function"}function Ae(D,v,a){if(v>a){var l=[a,v];v=l[0],a=l[1]}return Qi(v,Ke(D,a))}function Si(){for(var D={},v=arguments.length,a=new Array(v),l=0;l<v;l++)a[l]=arguments[l];return(0,$.forEach)(a,function(n){D[n]=n}),D}function Ni(D,v){var a={},l=v.length,n=0,u;for(n=0;n<l;n+=1)u=v[n],a[u]=D[u];return a}function Ne(D){return Tt()(D,10)}function ji(D){return D.replace(/-([a-z])/g,function(v,a){return a.toUpperCase()})}function gi(){return!!(window.File&&window.FileList&&window.FileReader)}function Ki(D,v){var a,l,n;if(D.length===4){var u;D=V()(u="".concat(D)).call(u,g()(D).call(D,1,4))}var b=Tt()(g()(D).call(D,1,3),16),T=Tt()(g()(D).call(D,3,5),16),B=Tt()(g()(D).call(D,5,7),16),N=v||1;return V()(a=V()(l=V()(n="rgba(".concat(b,", ")).call(n,T,", ")).call(l,B,", ")).call(a,N,")")}function $i(){Pi||(Pi=!0,(0,$.sendHostname)("image-editor","UA-129999381-1"))}function je(D,v){var a=document.getElementsByTagName("head"),l=yt(a,1),n=l[0],u=document.createElement("link"),b=encodeURIComponent(D);v&&(u.id=v),u.setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.setAttribute("href","data:text/css;charset=UTF-8,".concat(b)),n.appendChild(u)}function qi(D){return function(v){return D.querySelector(v)}}function tn(D){var v=/data:(image\/.+);base64,/,a="",l,n,u;l=D.replace(v,function(T,B){return a=B,""}),l=atob(l);var b=l.length;for(n=new Uint8Array(b),u=0;u<b;u+=1)n[u]=l.charCodeAt(u);return new Blob([n],{type:a})}function tt(D){return Number(D.toFixed(Le))}function At(D){(0,$.forEach)(D,function(v,a){D[a]=null})}function Pt(){var D,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(v.charAt(0)==="."){var l;return V()(l=".".concat(Ue).concat(a)).call(l,g()(v).call(v,1))}return V()(D="".concat(Ue).concat(a)).call(D,v)}function zt(D,v){var a=v.originX,l=v.originY,n=D.getPointByOrigin(a,l),u=n.x,b=n.y;D.set({left:u,top:b,originX:a,originY:l}),D.setCoords()}function Ht(D){var v,a={};return It()(v=at()(D)).call(v,function(l){a[D[l]]=l}),a}function re(D,v){D.customProps=D.customProps||{},(0,$.extend)(D.customProps,v)}function Jt(D,v){var a={};return(0,$.isString)(v)&&(v=[v]),(0,$.forEach)(v,function(l){a[l]=D.customProps[l]}),a}function fe(D){return D.charAt(0).toUpperCase()+g()(D).call(D,1)}function ve(D,v){return o()(D).call(D,v)>=0}function Me(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,$.pick)(D,"type")||Vt.COLOR}function Pe(D){var v=it()(D),a=v===void 0?{}:v;return a.source?Vt.FILTER:Vt.COLOR}function Bt(D){return(0,$.inArray)(D.get("type"),Gt)>=0}function Ee(D){if(ve(Gt,D))return"Shape";switch(D){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return Ii(D)}}function Ze(D){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=v.useAlpha,l=a===void 0?!0:a,n=v.mode,u=Xt.VINTAGE,b=Xt.REMOVE_COLOR,T=Xt.BLEND_COLOR,B=Xt.SEPIA2,N=Xt.COLOR_FILTER,H=Xt.REMOVE_WHITE,Z=Xt.BLEND,ut;switch(D){case u:ut=B;break;case b:ut=l?N:H;break;case T:ut=n==="add"?Z:n;break;default:ut=D}return Ii(ut)}function Ri(D){var v=Yt.LOAD_IMAGE;return typeof D=="string"?v===D:v===D.name}function en(D){var v,a,l=Yt.FLIP_IMAGE,n=Yt.ROTATE_IMAGE,u=Yt.ADD_TEXT,b=Yt.APPLY_FILTER,T=Yt.REMOVE_FILTER,B=Yt.CHANGE_SHAPE,N=Yt.CHANGE_ICON_COLOR,H=Yt.CHANGE_TEXT_STYLE,Z=Yt.CLEAR_OBJECTS,ut=Yt.ADD_IMAGE_OBJECT,ht=Yt.REMOVE_OBJECT,gt=Yt.RESIZE_IMAGE,vt=D.name,pt=D.args,Nt;switch(vt){case l:Nt={name:vt,detail:pt[1]==="reset"?pt[1]:g()(v=pt[1]).call(v,4)};break;case n:Nt={name:vt,detail:pt[2]};break;case b:Nt={name:ae.APPLY_FILTER,detail:Ze(pt[1],pt[2])};break;case T:Nt={name:ae.REMOVE_FILTER,detail:"Remove"};break;case B:Nt={name:ae.CHANGE_SHAPE,detail:"Change"};break;case N:Nt={name:ae.CHANGE_ICON_COLOR,detail:"Change"};break;case H:Nt={name:ae.CHANGE_TEXT_STYLE,detail:"Change"};break;case ht:Nt={name:ae.REMOVE_OBJECT,detail:pt[2]};break;case Z:Nt={name:ae.CLEAR_OBJECTS,detail:"All"};break;case ut:Nt={name:ae.ADD_IMAGE_OBJECT,detail:"Add"};break;case u:Nt={name:ae.ADD_TEXT};break;case gt:Nt={name:ae.RESIZE,detail:V()(a="".concat(~~pt[1].width,"x")).call(a,~~pt[1].height)};break;default:Nt={name:vt};break}return pt[1]==="mask"&&(Nt={name:ae.LOAD_MASK_IMAGE,detail:"Apply"}),Nt}function nn(D){return D==="top"?"bottom":D==="left"?"right":D==="right"?"left":"top"}function Ii(D){return D.replace(/[a-z]/,function(v){return v.toUpperCase()})}function Fo(D){var v=D.left,a=D.top,l=D.width,n=D.height,u=me.LEFT,b=me.TOP,T=me.WIDTH,B=me.HEIGHT;return v===u&&a===b&&l===T&&n===B}var Ho=Si("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),Er={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},Yo={UN_IMPLEMENTATION:function(v){return Er.UN_IMPLEMENTATION+v},NO_COMPONENT_NAME:function(){return Er.NO_COMPONENT_NAME}},rn={types:K().extend({},Ho),create:function(v){v=v.toLowerCase();for(var a=Yo[v],l=arguments.length,n=new Array(l>1?l-1:0),u=1;u<l;u++)n[u-1]=arguments[u];return a.apply(void 0,n)}},Tr=rn.create,wr=rn.types,Uo=function(){function D(v,a){J(this,D),this.name=v.name,this.args=a,this.execute=v.execute,this.undo=v.undo,this.executeCallback=v.executeCallback||null,this.undoCallback=v.undoCallback||null,this.undoData={}}return st(D,[{key:"execute",value:function(){throw new Error(Tr(wr.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(Tr(wr.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return at()(this.undoData).length>0}},{key:"setUndoData",value:function(a,l,n){return l&&(a=l),n?l||(l=a):(K().extend(this.undoData,a),l=null),l}},{key:"setExecuteCallback",value:function(a){return this.executeCallback=a,this}},{key:"setUndoCallback",value:function(a){return this.undoCallback=a,this}}]),D}(),Wo=Uo,Dr={};function Go(D){var v=Dr[D];if(v){for(var a=arguments.length,l=new Array(a>1?a-1:0),n=1;n<a;n++)l[n-1]=arguments[n];return new Wo(v,l)}return null}function Xo(D){Dr[D.name]=D}var ye={create:Go,register:Xo},Or=function(){function D(){J(this,D),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return st(D,[{key:"_invokeExecution",value:function(a){var l=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var u=a.args;return u||(u=[]),a.execute.apply(a,F(u)).then(function(b){return l._isSilent||(l.pushUndoStack(a),l.fire(n?xt.AFTER_REDO:xt.EXECUTE_COMMAND,a)),l.unlock(),Li(a.executeCallback)&&a.executeCallback(b),b}).catch(function(b){return l.unlock(),Q().reject(b)})}},{key:"_invokeUndo",value:function(a){var l=this;this.lock();var n=a.args;return n||(n=[]),a.undo.apply(a,F(n)).then(function(u){return l.pushRedoStack(a),l.fire(xt.AFTER_UNDO,a),l.unlock(),Li(a.undoCallback)&&a.undoCallback(u),u}).catch(function(u){return l.unlock(),Q().reject(u)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(xt.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(xt.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var a=this;this._isSilent=!0;for(var l=arguments.length,n=new Array(l),u=0;u<l;u++)n[u]=arguments[u];return this.execute.apply(this,V()(n).call(n,[this._isSilent])).then(function(){a._isSilent=!1})}},{key:"execute",value:function(){var a=this;if(this._isLocked)return Q().reject(Rt.isLock);for(var l=arguments.length,n=new Array(l),u=0;u<l;u++)n[u]=arguments[u];var b=n[0];return(0,$.isString)(b)&&(b=ye.create.apply(ye,n)),this._invokeExecution(b).then(function(T){return a.clearRedoStack(),T})}},{key:"undo",value:function(){var a=this._undoStack.pop(),l,n="";if(a&&this._isLocked&&(this.pushUndoStack(a,!0),a=null),a)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),l=this._invokeUndo(a);else{if(n=Rt.undo,this._isLocked){var u;n=V()(u="".concat(n," Because ")).call(u,Rt.isLock)}l=Q().reject(n)}return l}},{key:"redo",value:function(){var a=this._redoStack.pop(),l,n="";if(a&&this._isLocked&&(this.pushRedoStack(a,!0),a=null),a)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),l=this._invokeExecution(a,!0);else{if(n=Rt.redo,this._isLocked){var u;n=V()(u="".concat(n," Because ")).call(u,Rt.isLock)}l=Q().reject(n)}return l}},{key:"pushUndoStack",value:function(a,l){this._undoStack.push(a),l||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(a,l){this._redoStack.push(a),l||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),D}();$.CustomEvents.mixin(Or);var Zo=Or,Vo=R(5214),si=R.n(Vo),Jo=function(D){var v,a,l,n,u,b,T,B=D.locale,N=D.biImage,H=D.commonStyle,Z=D.headerStyle,ut=D.loadButtonStyle,ht=D.downloadButtonStyle,gt=D.submenuStyle;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=`
    <div class="tui-image-editor-main-container" style="`.concat(H,`">
        <div class="tui-image-editor-header" style="`)).call(T,Z,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(b,N,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(u,ut,`">
                    `)).call(n,B.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(l,ht,`">
                    `)).call(a,B.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(v,gt,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},Qo=function(D){var v,a,l,n,u,b=D.locale,T=D.biImage,B=D.loadButtonStyle,N=D.downloadButtonStyle,H=D.menuBarPosition;return V()(v=V()(a=V()(l=V()(n=V()(u=`
    <ul class="tui-image-editor-help-menu `.concat(nn(H),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(u,T,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(n,B,`">
                `)).call(l,b.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(a,N,`">
                `)).call(v,b.localize("Download"),`
            </button>
        </div>
    </div>
`)},Ko=function(D){var v,a,l,n,u,b,T,B,N,H,Z,ut,ht,gt,vt,pt,Nt,Qt,qt,te,Ut,de,ke,Re,Te,Ve,ui,ze,Yi,fn=D.subMenuLabelActive,dn=D.subMenuLabelNormal,gn=D.subMenuRangeTitle,vn=D.submenuPartitionVertical,pn=D.submenuPartitionHorizontal,mn=D.submenuCheckbox,yn=D.submenuRangePointer,Cn=D.submenuRangeValue,bn=D.submenuColorpickerTitle,xn=D.submenuColorpickerButton,Sn=D.submenuRangeBar,In=D.submenuRangeSubbar,Mn=D.submenuDisabledRangePointer,_n=D.submenuDisabledRangeBar,En=D.submenuDisabledRangeSubbar,Tn=D.submenuIconSize,wn=D.menuIconSize,Dn=D.biSize,Je=D.menuIconStyle,mi=D.submenuIconStyle;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=V()(B=V()(N=V()(H=V()(Z=V()(ut=V()(ht=V()(gt=V()(vt=V()(pt=V()(Nt=V()(Qt=V()(qt=V()(te=V()(Ut=V()(de=V()(ke=V()(Re=V()(Te=V()(Ve=V()(ui=V()(ze=V()(Yi=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(fn,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(Yi,dn,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(ze,gn,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(ui,vn,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Ve,pn,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(Te,mn,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(Re,yn,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(ke,Sn,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(de,In,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(Ut,Mn,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(te,En,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(qt,_n,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(Qt,Cn,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(Nt,bn,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(pt,xn,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(vt,wn,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(gt,Tn,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(ht,Dn,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(ut,Je.normal.color,`;
        stroke: `)).call(Z,Je.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(H,Je.active.color,`;
        stroke: `)).call(N,Je.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(B,Je.hover.color,`;
        stroke: `)).call(T,Je.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(b,Je.disabled.color,`;
        stroke: `)).call(u,Je.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(n,mi.normal.color,`;
        stroke: `)).call(l,mi.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(a,mi.active.color,`;
        stroke: `)).call(v,mi.active.color,`;
    }
`)},$o={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},qo=R(2534),ts=function(){function D(v){J(this,D),this.styles=this._changeToObject((0,$.extend)({},$o,v)),je(this._styleMaker()),this._loadDefaultSvgIcon()}return st(D,[{key:"getStyle",value:function(a){var l=null,n=a.replace(/\..+$/,""),u=this.styles[a];switch(a){case"common.bi":l=this.styles[a].image;break;case"menu.icon":l={active:this.styles["".concat(n,".activeIcon")],normal:this.styles["".concat(n,".normalIcon")],hover:this.styles["".concat(n,".hoverIcon")],disabled:this.styles["".concat(n,".disabledIcon")]};break;case"submenu.icon":l={active:this.styles["".concat(n,".activeIcon")],normal:this.styles["".concat(n,".normalIcon")]};break;case"submenu.label":l={active:this._makeCssText(this.styles["".concat(n,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(n,".normalLabel")])};break;case"submenu.partition":l={vertical:this._makeCssText((0,$.extend)({},u,{borderLeft:"1px solid ".concat(u.color)})),horizontal:this._makeCssText((0,$.extend)({},u,{borderBottom:"1px solid ".concat(u.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":u.backgroundColor=u.color,l=this._makeCssText(u);break;default:l=this._makeCssText(u);break}return l}},{key:"_styleMaker",value:function(){var a=this.getStyle("submenu.label"),l=this.getStyle("submenu.partition");return Ko({subMenuLabelActive:a.active,subMenuLabelNormal:a.normal,submenuPartitionVertical:l.vertical,submenuPartitionHorizontal:l.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(a){var l={};return(0,$.forEach)(a,function(n,u){var b=u.match(/^(.+)\.([a-z]+)$/i),T=yt(b,3),B=T[1],N=T[2];l[B]||(l[B]={}),l[B][N]=n}),l}},{key:"_makeCssText",value:function(a){var l=this,n=[];return(0,$.forEach)(a,function(u,b){var T,B;o()(T=["backgroundImage"]).call(T,b)>-1&&u!=="none"&&(u="url(".concat(u,")")),n.push(V()(B="".concat(l._toUnderScore(b),": ")).call(B,u))}),n.join(";")}},{key:"_toUnderScore",value:function(a){return a.replace(/([A-Z])/g,function(l,n){return"-".concat(n.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var a=new DOMParser,l=qo.replace(/data:image\/svg\+xml;base64,/,""),n=a.parseFromString(atob(l),"text/xml");document.body.appendChild(n.documentElement)}}},{key:"_makeIconClassName",value:function(a,l){var n=l?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),u=n[a],b=u.path,T=u.name;return b&&T?a:"".concat(a," use-default")}},{key:"_makeSvgIconPrefix",value:function(a,l){var n,u=l?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),b=u[a],T=b.path,B=b.name;return T&&B?V()(n="".concat(T,"#")).call(n,B,"-"):"#"}},{key:"_makeSvgItem",value:function(a,l,n){var u=this;return(0,$.map)(a,function(b){var T,B,N=u._makeSvgIconPrefix(b,n),H=u._toUnderScore(l),Z=u._makeIconClassName(b,n);return V()(T=V()(B='<use xlink:href="'.concat(N,"ic-")).call(B,H,'" class="')).call(T,Z,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(a,l){var n,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return V()(n='<svg class="svg_ic-'.concat(u?"submenu":"menu",'">')).call(n,this._makeSvgItem(a,l,u),"</svg>")}}]),D}(),es=ts,is=R(9146),Lt=R.n(is),ns=R(6623),Ar=R(4230);function Yn(D,v){return Yn=Ar||function(l,n){return l.__proto__=n,l},Yn(D,v)}function ue(D,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=ns(v&&v.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),v&&Yn(D,v)}var rs=R(3742);function an(D){return typeof p=="function"&&typeof rs=="symbol"?an=function(a){return typeof a}:an=function(a){return a&&typeof p=="function"&&a.constructor===p&&a!==p.prototype?"symbol":typeof a},an(D)}function ce(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function he(D,v){if(v&&(an(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ce(D)}var kr=R(9856);function $t(D){return $t=Ar?kr:function(a){return a.__proto__||kr(a)},$t(D)}var as=R(4858),os=R.n(as),ss=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Pr=function(){function D(v,a){var l=a.defaultColor,n=l===void 0?"#7e7e7e":l,u=a.toggleDirection,b=u===void 0?"up":u,T=a.usageStatistics;J(this,D),this.colorpickerElement=v,this.usageStatistics=T,this._show=!1,this._colorpickerElement=v,this._toggleDirection=b,this._makePickerButtonElement(n),this._makePickerLayerElement(v,v.getAttribute("title")),this._color=n,this.picker=os().create({container:this.pickerElement,preset:ss,color:n,usageStatistics:this.usageStatistics}),this._addEvent()}return st(D,[{key:"destroy",value:function(){var a=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",It()(K()).call(K(),this,function(l,n){a[n]=null})}},{key:"color",get:function(){return this._color},set:function(a){this._color=a,this._changeColorElement(a)}},{key:"_changeColorElement",value:function(a){a?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=a):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(a){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",a?this.colorElement.style.backgroundColor=a:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(a,l){var n=document.createElement("label"),u=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",n.innerHTML=l,u.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(u),a.appendChild(this.pickerControl),a.appendChild(this.colorElement),a.appendChild(n)}},{key:"_addEvent",value:function(){var a=this,l;this.picker.on("selectColor",function(n){a._changeColorElement(n.color),a._color=n.color,a.fire("change",n.color)}),this.eventHandler={pickerToggle:rt()(l=this._pickerToggleEventHandler).call(l,this),pickerHide:function(){return a.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(a){var l=a.target,n=l&&this._isElementInColorPickerControl(l);(!n||n&&this._isPaletteButton(l))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),a.stopPropagation()}},{key:"_isPaletteButton",value:function(a){return a.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(a){for(var l=a;l!==document.body&&l;){if(l===this.pickerControl)return!0;l=l.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var a=this.pickerControl.style,l=this._colorpickerElement.clientWidth/2+2,n=this.pickerControl.offsetWidth/2-l,u=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(u=30),a.top="".concat(u,"px"),a.left="-".concat(n,"px")}}]),D}();K().CustomEvents.mixin(Pr);var li=Pr,ls=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,Lr=function(){function D(v){var a,l,n,u,b,T,B,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};J(this,D),this._value=N.value||0,this.rangeElement=v.slider,this.rangeInputElement=v.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=N.min||0,this._max=N.max||100,this._useDecimal=N.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=N.realTimeEvent||!1,this.eventHandler={startChangingSlide:rt()(a=this._startChangingSlide).call(a,this),stopChangingSlide:rt()(l=this._stopChangingSlide).call(l,this),changeSlide:rt()(n=this._changeSlide).call(n,this),changeSlideFinally:rt()(u=this._changeSlideFinally).call(u,this),changeInput:rt()(b=this._changeValueWithInput).call(b,this,!1),changeInputFinally:rt()(T=this._changeValueWithInput).call(T,this,!0),changeInputWithArrow:rt()(B=this._changeValueWithInputKeyEvent).call(B,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=N.value,this.trigger("change")}return st(D,[{key:"destroy",value:function(){var a=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",It()(K()).call(K(),this,function(l,n){a[n]=null})}},{key:"max",get:function(){return this._max},set:function(a){this._max=a,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(a){this._min=a,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(a){a=this._useDecimal?a:Ne(a);var l=a-this._min,n=l*this.rangeWidth/this._absMax;this.rangeWidth<n&&(n=this.rangeWidth),this.pointer.style.left="".concat(n,"px"),this.subbar.style.right="".concat(this.rangeWidth-n,"px"),this._value=a,this.rangeInputElement&&(this.rangeInputElement.value=a)}},{key:"trigger",value:function(a){this.fire(a,this._value)}},{key:"_getRangeWidth",value:function(){var a=function(n){return Ne(window.getComputedStyle(n,null).width)};return a(this.rangeElement)-a(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keyup",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keyup",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(a){var l,n=a.keyCode,u=a.target;if(!(o()(l=[Dt.ARROW_UP,Dt.ARROW_DOWN]).call(l,n)<0)){var b=Number(u.value);b=this._valueUpDownForKeyEvent(b,n);var T=b<this._min||b>this._max;if(!T){var B=Ae(b,this._min,this.max);this.value=B,this.fire("change",B,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(a,l){var n=this._useDecimal?.1:1;return l===Dt.ARROW_UP?a+=n:l===Dt.ARROW_DOWN&&(a-=n),a}},{key:"_changeValueWithInput",value:function(a,l){var n,u=l.keyCode,b=l.target;if(!(o()(n=[Dt.ARROW_UP,Dt.ARROW_DOWN]).call(n,u)>=0)){var T=this._filterForInputText(b.value),B=!T||isNaN(T);if(b.value=T,!B){var N=this._useDecimal?Number(T):Ne(T);N=Ae(N,this._min,this.max),this.value=N,this.fire("change",N,a)}}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(a){var l=a.screenX,n=l-this.firstPosition,u=this.firstLeft+n;u=u>this.rangeWidth?this.rangeWidth:u,u=u<0?0:u,this.pointer.style.left="".concat(u,"px"),this.subbar.style.right="".concat(this.rangeWidth-u,"px");var b=u/this.rangeWidth,T=this._absMax*b+this._min,B=this._useDecimal?T:Ne(T),N=this.value!==B;N&&(this.value=B,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(a){if(a.stopPropagation(),a.target.className==="tui-image-editor-range"){var l=a.offsetX,n=l/this.rangeWidth,u=this._absMax*n+this._min;this.pointer.style.left="".concat(n*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-n)*this.rangeWidth,"px"),this.value=u,this.fire("change",u,!0)}}},{key:"_startChangingSlide",value:function(a){this.firstPosition=a.screenX,this.firstLeft=Ne(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(a){return a.replace(ls,"$1$2$3")}}]),D}();K().CustomEvents.mixin(Lr);var We=Lr,Nr=function(){function D(v,a){var l=a.locale,n=a.name,u=a.makeSvgIcon,b=a.menuBarPosition,T=a.templateHtml,B=a.usageStatistics;J(this,D),this.subMenuElement=v,this.menuBarPosition=b,this.toggleDirection=b==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=B,this.eventHandler={},this._makeSubMenuElement({locale:l,name:n,makeSvgIcon:u,templateHtml:T})}return st(D,[{key:"selector",value:function(a){return this.subMenuElement.querySelector(a)}},{key:"colorPickerChangeShow",value:function(a){var l;It()(l=this.colorPickerControls).call(l,function(n){a!==n&&n.hide()})}},{key:"getButtonType",value:function(a,l){return a.className.match(RegExp("(".concat(l.join("|"),")")))[0]}},{key:"changeClass",value:function(a,l,n){a.classList.remove(l),a.classList.add(n)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(a){var l=a.locale,n=a.name,u=a.iconStyle,b=a.makeSvgIcon,T=a.templateHtml,B=document.createElement("div");B.className="tui-image-editor-menu-".concat(n),B.innerHTML=T({locale:l,iconStyle:u,makeSvgIcon:b}),this.subMenuElement.appendChild(B)}},{key:"_onStartEditingInputBox",value:function(){this.fire(xt.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(xt.INPUT_BOX_EDITING_STOPPED)}}]),D}();$.CustomEvents.mixin(Nr);var $e=Nr,cs=function(D){var v,a,l,n,u,b,T,B,N=D.locale,H=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=V()(B=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(H(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(B,N.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(T,H(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(b,N.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(u,H(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(n,N.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(l,N.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(a,N.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,N.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function us(D){var v=hs();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function hs(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var fs={stroke:"#ffbb3b",fill:"",strokeWidth:3},ds=function(D){ue(a,D);var v=us(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"shape",makeSvgIcon:T,menuBarPosition:B,templateHtml:cs,usageStatistics:N}),u.type=null,u.options=fs,u._els={shapeSelectButton:u.selector(".tie-shape-button"),shapeColorButton:u.selector(".tie-shape-color-button"),strokeRange:new We({slider:u.selector(".tie-stroke-range"),input:u.selector(".tie-stroke-range-value")},Ie),fillColorpicker:new li(u.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:u.toggleDirection,usageStatistics:u.usageStatistics}),strokeColorpicker:new li(u.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:u.toggleDirection,usageStatistics:u.usageStatistics})},u.colorPickerControls.push(u._els.fillColorpicker),u.colorPickerControls.push(u._els.strokeColorpicker),u.colorPickerInputBoxes=[],u.colorPickerInputBoxes.push(u._els.fillColorpicker.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX)),u.colorPickerInputBoxes.push(u._els.strokeColorpicker.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX)),u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),At(this)}},{key:"addEvent",value:function(n){var u,b,T,B,N,H,Z=this;this.eventHandler.shapeTypeSelected=rt()(u=this._changeShapeHandler).call(u,this),this.actions=n,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",rt()(b=this._changeStrokeRangeHandler).call(b,this)),this._els.fillColorpicker.on("change",rt()(T=this._changeFillColorHandler).call(T,this)),this._els.strokeColorpicker.on("change",rt()(B=this._changeStrokeColorHandler).call(B,this)),this._els.fillColorpicker.on("changeShow",rt()(N=this.colorPickerChangeShow).call(N,this)),this._els.strokeColorpicker.on("changeShow",rt()(H=this.colorPickerChangeShow).call(H,this)),K().forEachArray(this.colorPickerInputBoxes,function(ut){var ht,gt;ut.addEventListener(xt.FOCUS,rt()(ht=Z._onStartEditingInputBox).call(ht,Z)),ut.addEventListener(xt.BLUR,rt()(gt=Z._onStopEditingInputBox).call(gt,Z))},this)}},{key:"_removeEvent",value:function(){var n=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),K().forEachArray(this.colorPickerInputBoxes,function(u){var b,T;u.removeEventListener(xt.FOCUS,rt()(b=n._onStartEditingInputBox).call(b,n)),u.removeEventListener(xt.BLUR,rt()(T=n._onStopEditingInputBox).call(T,n))},this)}},{key:"setShapeStatus",value:function(n){var u=n.strokeWidth,b=n.strokeColor,T=n.fillColor;this._els.strokeRange.value=u,this._els.strokeColorpicker.color=b,this._els.fillColorpicker.color=T,this.options.stroke=b,this.options.fill=T,this.options.strokeWidth=u,this.actions.setDrawingShape(this.type,{strokeWidth:u})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(n){var u=n;u<=0&&(u=Ie.max),this._els.strokeRange.max=u}},{key:"setStrokeValue",value:function(n){this._els.strokeRange.value=n,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(n){var u=n.target.closest(".tui-image-editor-button");if(u){this.actions.stopDrawingMode(),this.actions.discardSelection();var b=this.getButtonType(u,["circle","triangle","rect"]);if(this.type===b){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=b,n.currentTarget.classList.add(b),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(n,u){this.options.strokeWidth=Ne(n),this.actions.changeShape({strokeWidth:n},!u),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(n){n=n||"transparent",this.options.fill=n,this.actions.changeShape({fill:n})}},{key:"_changeStrokeColorHandler",value:function(n){n=n||"transparent",this.options.stroke=n,this.actions.changeShape({stroke:n})}}]),a}($e),gs=ds,vs=function(D){var v,a,l,n,u,b,T,B,N,H,Z,ut,ht,gt,vt,pt,Nt,Qt=D.locale,qt=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=V()(B=V()(N=V()(H=V()(Z=V()(ut=V()(ht=V()(gt=V()(vt=V()(pt=V()(Nt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(qt(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(Nt,Qt.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(pt,qt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(vt,Qt.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(gt,qt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(ht,Qt.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(ut,qt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(Z,Qt.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(H,qt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(N,Qt.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(B,qt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(T,Qt.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(b,qt(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(u,Qt.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(n,qt(["normal","active"],"apply"),`
                <label>
                    `)).call(l,Qt.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(a,qt(["normal","active"],"cancel"),`
                <label>
                    `)).call(v,Qt.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function ps(D){var v=ms();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ms(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var ys=function(D){ue(a,D);var v=ps(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"crop",makeSvgIcon:T,menuBarPosition:B,templateHtml:vs,usageStatistics:N}),u.status="active",u._els={apply:u.selector(".tie-crop-button .apply"),cancel:u.selector(".tie-crop-button .cancel"),preset:u.selector(".tie-crop-preset-button")},u.defaultPresetButton=u._els.preset.querySelector(".preset-none"),u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),At(this)}},{key:"addEvent",value:function(n){var u,b,T,B=rt()(u=this._applyEventHandler).call(u,this),N=rt()(b=this._cancelEventHandler).call(b,this),H=rt()(T=this._cropzonePresetEventHandler).call(T,this);this.eventHandler={apply:B,cancel:N,cropzonePreset:H},this.actions=n,this._els.apply.addEventListener("click",B),this._els.cancel.addEventListener("click",N),this._els.preset.addEventListener("click",H)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(n){var u=n.target.closest(".tui-image-editor-button.preset");if(u){var b=u.className.match(/preset-[^\s]+/),T=yt(b,1),B=T[0];this._setPresetButtonActive(u),this.actions.preset(B)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(n){n?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;It()(K()).call(K(),g()([]).call(this._els.preset.querySelectorAll(".preset")),function(u){u.classList.remove("active")}),n&&n.classList.add("active")}}]),a}($e),Cs=ys,bs=function(D){var v,a,l,n,u,b,T=D.locale,B=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(T.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(b,T.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(u,T.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(n,B(["normal","active"],"apply"),`
                <label>
                    `)).call(l,T.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(a,B(["normal","active"],"cancel"),`
                <label>
                    `)).call(v,T.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function xs(D){var v=Ss();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Ss(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Is=function(D){ue(a,D);var v=xs(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"resize",makeSvgIcon:T,menuBarPosition:B,templateHtml:bs,usageStatistics:N}),u.status="active",u._lockState=!1,u._originalDimensions=null,u._els={widthRange:new We({slider:u.selector(".tie-width-range"),input:u.selector(".tie-width-range-value")},pe),heightRange:new We({slider:u.selector(".tie-height-range"),input:u.selector(".tie-height-range-value")},pe),lockAspectRatio:u.selector(".tie-lock-aspect-ratio"),apply:u.selector(".tie-resize-button .apply"),cancel:u.selector(".tie-resize-button .cancel")},u}return st(a,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var n=this.actions.getCurrentDimensions();this._originalDimensions=n,this.setWidthValue(n.width),this.setHeightValue(n.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(n){this._els.widthRange.min=this.calcMinValue(n.minWidth),this._els.heightRange.min=this.calcMinValue(n.minHeight),this._els.widthRange.max=this.calcMaxValue(n.maxWidth),this._els.heightRange.max=this.calcMaxValue(n.maxHeight)}},{key:"calcMaxValue",value:function(n){return n<=0&&(n=pe.max),n}},{key:"calcMinValue",value:function(n){return n<=0&&(n=pe.min),n}},{key:"setWidthValue",value:function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=n,u&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=n,u&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),At(this)}},{key:"addEvent",value:function(n){var u,b,T,B,N;this._els.widthRange.on("change",rt()(u=this._changeWidthRangeHandler).call(u,this)),this._els.heightRange.on("change",rt()(b=this._changeHeightRangeHandler).call(b,this)),this._els.lockAspectRatio.addEventListener("change",rt()(T=this._changeLockAspectRatio).call(T,this));var H=rt()(B=this._applyEventHandler).call(B,this),Z=rt()(N=this._cancelEventHandler).call(N,this);this.eventHandler={apply:H,cancel:Z},this.actions=n,this._els.apply.addEventListener("click",H),this._els.cancel.addEventListener("click",Z)}},{key:"_changeWidthRangeHandler",value:function(n){this.actions.preview("width",Ne(n),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(n){this.actions.preview("height",Ne(n),this._lockState)}},{key:"_changeLockAspectRatio",value:function(n){this._lockState=n.target.checked,this.actions.lockAspectRatio(this._lockState,pe.min,pe.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(n){n?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),a}($e),Ms=Is,_s=function(D){var v,a,l,n,u,b=D.locale,T=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(T(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(u,b.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(n,T(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(l,b.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(a,T(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(v,b.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Es(D){var v=Ts();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Ts(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var ws=function(D){ue(a,D);var v=Es(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"flip",makeSvgIcon:T,menuBarPosition:B,templateHtml:_s,usageStatistics:N}),u.flipStatus=!1,u._els={flipButton:u.selector(".tie-flip-button")},u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),At(this)}},{key:"addEvent",value:function(n){var u;this.eventHandler.changeFlip=rt()(u=this._changeFlip).call(u,this),this._actions=n,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(n){var u=this,b=n.target.closest(".tui-image-editor-button");if(b){var T=this.getButtonType(b,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&T==="resetFlip")return;this._actions.flip(T).then(function(B){var N=u._els.flipButton.classList;u.flipStatus=!1,N.remove("resetFlip"),It()(K()).call(K(),["flipX","flipY"],function(H){N.remove(H),B[H]&&(N.add(H),N.add("resetFlip"),u.flipStatus=!0)})})}}}]),a}($e),Ds=ws,Os=function(D){var v,a,l=D.locale,n=D.makeSvgIcon;return V()(v=V()(a=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(n(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(a,n(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,l.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function As(D){var v=ks();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ks(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Ps=30,Ls=-30,Ns=function(D){ue(a,D);var v=As(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"rotate",makeSvgIcon:T,menuBarPosition:B,templateHtml:Os,usageStatistics:N}),u._value=0,u._els={rotateButton:u.selector(".tie-rotate-button"),rotateRange:new We({slider:u.selector(".tie-rotate-range"),input:u.selector(".tie-rotate-range-value")},se)},u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),At(this)}},{key:"setRangeBarAngle",value:function(n,u){var b=u;n==="rotate"&&(b=Tt()(this._els.rotateRange.value,10)+u),this._setRangeBarRatio(b)}},{key:"_setRangeBarRatio",value:function(n){this._els.rotateRange.value=n}},{key:"addEvent",value:function(n){var u,b;this.eventHandler.rotationAngleChanged=rt()(u=this._changeRotateForButton).call(u,this),this.actions=n,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",rt()(b=this._changeRotateForRange).call(b,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(n,u){var b=Ne(n);this.actions.setAngle(b,!u),this._value=b}},{key:"_changeRotateForButton",value:function(n){var u=n.target.closest(".tui-image-editor-button"),b=this._els.rotateRange.value;if(u){var T=this.getButtonType(u,["counterclockwise","clockwise"]),B={clockwise:Ps,counterclockwise:Ls}[T],N=Tt()(b,10)+B,H=N>=-360&&N<=360;H&&this.actions.rotate(B)}}}]),a}($e),js=Ns,Rs=function(D){var v,a,l,n,u,b,T,B,N,H,Z,ut,ht,gt=D.locale,vt=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=V()(B=V()(N=V()(H=V()(Z=V()(ut=V()(ht=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(vt(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(ht,gt.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(ut,vt(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(Z,gt.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(H,vt(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(N,gt.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(B,vt(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(T,gt.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(b,vt(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(u,gt.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(n,vt(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(l,gt.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(a,gt.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,gt.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function zs(D){var v=Bs();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Bs(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Fs=function(D){ue(a,D);var v=zs(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"text",makeSvgIcon:T,menuBarPosition:B,templateHtml:Rs,usageStatistics:N}),u.effect={bold:!1,italic:!1,underline:!1},u.align="tie-text-align-left",u._els={textEffectButton:u.selector(".tie-text-effect-button"),textAlignButton:u.selector(".tie-text-align-button"),textColorpicker:new li(u.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:u.toggleDirection,usageStatistics:u.usageStatistics}),textRange:new We({slider:u.selector(".tie-text-range"),input:u.selector(".tie-text-range-value")},Oe)},u.colorPickerInputBox=u._els.textColorpicker.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX),u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),At(this)}},{key:"addEvent",value:function(n){var u,b,T,B,N,H,Z=rt()(u=this._setTextEffectHandler).call(u,this),ut=rt()(b=this._setTextAlignHandler).call(b,this);this.eventHandler={setTextEffect:Z,setTextAlign:ut},this.actions=n,this._els.textEffectButton.addEventListener("click",Z),this._els.textAlignButton.addEventListener("click",ut),this._els.textRange.on("change",rt()(T=this._changeTextRnageHandler).call(T,this)),this._els.textColorpicker.on("change",rt()(B=this._changeColorHandler).call(B,this)),this.colorPickerInputBox.addEventListener(xt.FOCUS,rt()(N=this._onStartEditingInputBox).call(N,this)),this.colorPickerInputBox.addEventListener(xt.BLUR,rt()(H=this._onStopEditingInputBox).call(H,this))}},{key:"_removeEvent",value:function(){var n,u,b=this.eventHandler,T=b.setTextEffect,B=b.setTextAlign;this._els.textEffectButton.removeEventListener("click",T),this._els.textAlignButton.removeEventListener("click",B),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(xt.FOCUS,rt()(n=this._onStartEditingInputBox).call(n,this)),this.colorPickerInputBox.removeEventListener(xt.BLUR,rt()(u=this._onStopEditingInputBox).call(u,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(n){this._els.textColorpicker.color=n}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(n){this._els.textRange.value=n}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=it()(n),b=n.fontSize,T=n.fontStyle,B=n.fontWeight,N=n.textDecoration,H=n.textAlign;this.textColor=u,this.fontSize=b,this.setEffectState("italic",T),this.setEffectState("bold",B),this.setEffectState("underline",N),this.setAlignState("tie-text-align-".concat(H))}},{key:"setEffectState",value:function(n,u){var b=u==="italic"||u==="bold"||u==="underline",T=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(n));this.effect[n]=b,T.classList[b?"add":"remove"]("active")}},{key:"setAlignState",value:function(n){var u=this._els.textAlignButton;u.classList.remove(this.align),u.classList.add(n),this.align=n}},{key:"_setTextEffectHandler",value:function(n){var u=n.target.closest(".tui-image-editor-button");if(u){var b=u.className.match(/(bold|italic|underline)/),T=yt(b,1),B=T[0],N={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[B];this.effect[B]=!this.effect[B],u.classList.toggle("active"),this.actions.changeTextStyle(N)}}},{key:"_setTextAlignHandler",value:function(n){var u=n.target.closest(".tui-image-editor-button");if(u){var b=this.getButtonType(u,["left","center","right"]),T="tie-text-align-".concat(b);n.currentTarget.classList.remove(this.align),this.align!==T&&n.currentTarget.classList.add(T),this.actions.changeTextStyle({textAlign:b}),this.align=T}}},{key:"_changeTextRnageHandler",value:function(n,u){this.actions.changeTextStyle({fontSize:n},!u)}},{key:"_changeColorHandler",value:function(n){n=n||"transparent",this.actions.changeTextStyle({fill:n})}}]),a}($e),Hs=Fs,Ys=function(D){var v,a,l,n=D.locale,u=D.makeSvgIcon;return V()(v=V()(a=V()(l=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(u(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(l,n.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(a,u(["normal","active"],"apply"),`
                <label>
                    `)).call(v,n.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Us(D){var v=Ws();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Ws(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Gs=function(D){ue(a,D);var v=Us(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"mask",makeSvgIcon:T,menuBarPosition:B,templateHtml:Ys,usageStatistics:N}),u._els={applyButton:u.selector(".tie-mask-apply"),maskImageButton:u.selector(".tie-mask-image-file")},u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),At(this)}},{key:"addEvent",value:function(n){var u,b,T=rt()(u=this._loadMaskFile).call(u,this),B=rt()(b=this._applyMask).call(b,this);this.eventHandler={loadMaskFile:T,applyMask:B},this.actions=n,this._els.maskImageButton.addEventListener("change",T),this._els.applyButton.addEventListener("click",B)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(n){var u;gi()||alert("This browser does not support file-api");var b=yt(n.target.files,1),T=b[0];T&&(u=nt().createObjectURL(T),this.actions.loadImageFromURL(u,T),this._els.applyButton.classList.add("active"))}}]),a}($e),Xs=Gs,Zs=function(D){var v,a,l,n,u,b,T,B,N,H,Z,ut,ht,gt,vt,pt,Nt,Qt,qt,te,Ut=D.locale,de=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=V()(B=V()(N=V()(H=V()(Z=V()(ut=V()(ht=V()(gt=V()(vt=V()(pt=V()(Nt=V()(Qt=V()(qt=V()(te=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(de(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(te,Ut.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(qt,de(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(Qt,Ut.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(Nt,de(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(pt,Ut.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(vt,de(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(gt,Ut.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(ht,de(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(ut,Ut.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(Z,de(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(H,Ut.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(N,de(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(B,Ut.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(T,de(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(b,Ut.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(u,de(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(n,Ut.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(l,de(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(a,Ut.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(v,Ut.localize("Color"),`"></div>
        </li>
    </ul>
`)};function Vs(D){var v=Js();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Js(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Qs=function(D){ue(a,D);var v=Vs(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"icon",makeSvgIcon:T,menuBarPosition:B,templateHtml:Zs,usageStatistics:N}),u.iconType=null,u._iconMap={},u._els={registerIconButton:u.selector(".tie-icon-image-file"),addIconButton:u.selector(".tie-icon-add-button"),iconColorpicker:new li(u.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:u.toggleDirection,usageStatistics:u.usageStatistics})},u.colorPickerInputBox=u._els.iconColorpicker.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX),u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),At(this)}},{key:"addEvent",value:function(n){var u,b,T,B,N,H=rt()(u=this._registerIconHandler).call(u,this),Z=rt()(b=this._addIconHandler).call(b,this);this.eventHandler={registerIcon:H,addIcon:Z},this.actions=n,this._els.iconColorpicker.on("change",rt()(T=this._changeColorHandler).call(T,this)),this._els.registerIconButton.addEventListener("change",H),this._els.addIconButton.addEventListener("click",Z),this.colorPickerInputBox.addEventListener(xt.FOCUS,rt()(B=this._onStartEditingInputBox).call(B,this)),this.colorPickerInputBox.addEventListener(xt.BLUR,rt()(N=this._onStopEditingInputBox).call(N,this))}},{key:"_removeEvent",value:function(){var n,u;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(xt.FOCUS,rt()(n=this._onStartEditingInputBox).call(n,this)),this.colorPickerInputBox.removeEventListener(xt.BLUR,rt()(u=this._onStopEditingInputBox).call(u,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var n=this;It()(K()).call(K(),Kt,function(u,b){n.actions.registerDefaultIcons(b,u)})}},{key:"setIconPickerColor",value:function(n){this._els.iconColorpicker.color=n}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(n){n=n||"transparent",this.actions.changeColor(n)}},{key:"_addIconHandler",value:function(n){var u=n.target.closest(".tui-image-editor-button");if(u){var b=u.getAttribute("data-icontype"),T=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(b),this.iconType===b?this.changeStandbyMode():(this.actions.addIcon(b,T),this.iconType=b)}}},{key:"_registerIconHandler",value:function(n){var u;gi||alert("This browser does not support file-api");var b=yt(n.target.files,1),T=b[0];T&&(u=nt().createObjectURL(T),this.actions.registerCustomIcon(u,T))}}]),a}($e),Ks=Qs,$s=function(D){var v,a,l,n,u,b=D.locale,T=D.makeSvgIcon;return V()(v=V()(a=V()(l=V()(n=V()(u=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(T(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(u,b.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(n,T(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(l,b.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(a,b.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,b.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function qs(D){var v=tl();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function tl(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var el=.7,il=function(D){ue(a,D);var v=qs(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon,B=n.menuBarPosition,N=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"draw",makeSvgIcon:T,menuBarPosition:B,templateHtml:$s,usageStatistics:N}),u._els={lineSelectButton:u.selector(".tie-draw-line-select-button"),drawColorPicker:new li(u.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:u.toggleDirection,usageStatistics:u.usageStatistics}),drawRange:new We({slider:u.selector(".tie-draw-range"),input:u.selector(".tie-draw-range-value")},Ce)},u.type=null,u.color=u._els.drawColorPicker.color,u.width=u._els.drawRange.value,u.colorPickerInputBox=u._els.drawColorPicker.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX),u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),At(this)}},{key:"addEvent",value:function(n){var u,b,T,B,N;this.eventHandler.changeDrawType=rt()(u=this._changeDrawType).call(u,this),this.actions=n,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",rt()(b=this._changeDrawColor).call(b,this)),this._els.drawRange.on("change",rt()(T=this._changeDrawRange).call(T,this)),this.colorPickerInputBox.addEventListener(xt.FOCUS,rt()(B=this._onStartEditingInputBox).call(B,this)),this.colorPickerInputBox.addEventListener(xt.BLUR,rt()(N=this._onStopEditingInputBox).call(N,this))}},{key:"_removeEvent",value:function(){var n,u;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(xt.FOCUS,rt()(n=this._onStartEditingInputBox).call(n,this)),this.colorPickerInputBox.removeEventListener(xt.BLUR,rt()(u=this._onStopEditingInputBox).call(u,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:Ki(this.color,el)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(n){var u=n.target.closest(".tui-image-editor-button");if(u){var b=this.getButtonType(u,["free","line"]);if(this.actions.discardSelection(),this.type===b){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=b,this._els.lineSelectButton.classList.add(b),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(n){this.color=n||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(n){this.width=n,this.type?this.setDrawMode():this.changeStartMode()}}]),a}($e),nl=il,rl=function(D){var v,a,l,n,u,b,T,B,N,H,Z,ut,ht,gt,vt,pt,Nt=D.locale;return V()(v=V()(a=V()(l=V()(n=V()(u=V()(b=V()(T=V()(B=V()(N=V()(H=V()(Z=V()(ut=V()(ht=V()(gt=V()(vt=V()(pt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(Nt.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(pt,Nt.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(vt,Nt.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(gt,Nt.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(ht,Nt.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(ut,Nt.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(Z,Nt.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(H,Nt.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(N,Nt.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(B,Nt.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(T,Nt.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(b,Nt.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(u,Nt.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(n,Nt.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(l,Nt.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(a,Nt.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(v,Nt.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function al(D){var v=ol();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ol(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var jr="130px",sl=["add","diff","subtract","multiply","screen","lighten","darken"],Rr=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],ll={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},zr=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],Br=["filterBlendColor","filterMultiplyColor","filterTintColor"],cl=function(D){ue(a,D);var v=al(a);function a(l,n){var u,b=n.locale,T=n.menuBarPosition,B=n.usageStatistics;return J(this,a),u=v.call(this,l,{locale:b,name:"filter",menuBarPosition:T,templateHtml:rl,usageStatistics:B}),u.selectBoxShow=!1,u.checkedMap={},u._makeControlElement(),u}return st(a,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),At(this)}},{key:"_removeEvent",value:function(){var n=this,u;It()(K()).call(K(),Rr,function(b){var T=n.selector(".tie-".concat(b)),B=ji(b);T.removeEventListener("change",n.eventHandler[B])}),It()(K()).call(K(),V()(u=[]).call(u,zr,Br),function(b){n._els[b].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),K().forEachArray(this.colorPickerInputBoxes,function(b){var T,B;b.removeEventListener(xt.FOCUS,rt()(T=n._onStartEditingInputBox).call(T,n)),b.removeEventListener(xt.BLUR,rt()(B=n._onStopEditingInputBox).call(B,n))},this)}},{key:"_destroyToolInstance",value:function(){var n,u=this;It()(K()).call(K(),V()(n=[]).call(n,zr,Br),function(b){u._els[b].destroy()})}},{key:"addEvent",value:function(n){var u=this,b,T,B,N=n.applyFilter,H=function(ht){var gt;return rt()(gt=u._changeFilterState).call(gt,u,N,ht)},Z=function(ht){return function(gt,vt){return u._changeFilterState(N,ht,vt)}};this.eventHandler={changeBlendFilter:H("blend"),blandTypeClick:function(ht){return ht.stopPropagation()}},It()(K()).call(K(),Rr,function(ut){var ht=u.selector(".tie-".concat(ut)),gt=ji(ut);u.checkedMap[gt]=ht,u.eventHandler[gt]=H(gt),ht.addEventListener("change",u.eventHandler[gt])}),this._els.removewhiteDistanceRange.on("change",Z("removeWhite")),this._els.colorfilterThresholdRange.on("change",Z("colorFilter")),this._els.pixelateRange.on("change",Z("pixelate")),this._els.noiseRange.on("change",Z("noise")),this._els.brightnessRange.on("change",Z("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",H("multiply")),this._els.filterTintColor.on("change",H("tint")),this._els.tintOpacity.on("change",Z("tint")),this._els.filterMultiplyColor.on("changeShow",rt()(b=this.colorPickerChangeShow).call(b,this)),this._els.filterTintColor.on("changeShow",rt()(T=this.colorPickerChangeShow).call(T,this)),this._els.filterBlendColor.on("changeShow",rt()(B=this.colorPickerChangeShow).call(B,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),K().forEachArray(this.colorPickerInputBoxes,function(ut){var ht,gt;ut.addEventListener(xt.FOCUS,rt()(ht=u._onStartEditingInputBox).call(ht,u)),ut.addEventListener(xt.BLUR,rt()(gt=u._onStopEditingInputBox).call(gt,u))},this)}},{key:"setFilterState",value:function(n){var u=n.type,b=n.options,T=n.action,B=this._getFilterNameFromOptions(u,b),N=T==="remove";N||this._setFilterState(B,b),this.checkedMap[B].checked=!N}},{key:"initFilterCheckBoxState",value:function(){It()(K()).call(K(),this.checkedMap,function(n){n.checked=!1},this)}},{key:"_setFilterState",value:function(n,u){n==="colorFilter"?this._els.colorfilterThresholdRange.value=u.distance:n==="removeWhite"?this._els.removewhiteDistanceRange.value=u.distance:n==="pixelate"?this._els.pixelateRange.value=u.blocksize:n==="brightness"?this._els.brightnessRange.value=u.brightness:n==="noise"?this._els.noiseRange.value=u.noise:n==="tint"?(this._els.tintOpacity.value=u.alpha,this._els.filterTintColor.color=u.color):n==="blend"?this._els.filterBlendColor.color=u.color:n==="multiply"&&(this._els.filterMultiplyColor.color=u.color)}},{key:"_getFilterNameFromOptions",value:function(n,u){var b=n;return n==="removeColor"?b=K().isExisty(u.useAlpha)?"removeWhite":"colorFilter":n==="blendColor"&&(b={add:"blend",multiply:"multiply",tint:"tint"}[u.mode]),b}},{key:"_changeFilterState",value:function(n,u){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,T=this.checkedMap[u].checked,B=ll[u],N=this.checkedMap[u].closest(".tui-image-editor-checkbox-group");N&&(T?N.classList.remove("tui-image-editor-disabled"):N.classList.add("tui-image-editor-disabled")),n(T,B,this._getFilterOption(u),!b)}},{key:"_getFilterOption",value:function(n){var u={};switch(n){case"removeWhite":u.color="#FFFFFF",u.useAlpha=!1,u.distance=si()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":u.color="#FFFFFF",u.distance=si()(this._els.colorfilterThresholdRange.value);break;case"pixelate":u.blocksize=Ne(this._els.pixelateRange.value);break;case"noise":u.noise=Ne(this._els.noiseRange.value);break;case"brightness":u.brightness=si()(this._els.brightnessRange.value);break;case"blend":u.mode="add",u.color=this._els.filterBlendColor.color,u.mode=this._els.blendType.value;break;case"multiply":u.mode="multiply",u.color=this._els.filterMultiplyColor.color;break;case"tint":u.mode="tint",u.color=this._els.filterTintColor.color,u.alpha=this._els.tintOpacity.value;break;case"blur":u.blur=this._els.blurRange.value;break}return u}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new We({slider:this.selector(".tie-removewhite-distance-range")},_e.removewhiteDistanceRange),brightnessRange:new We({slider:this.selector(".tie-brightness-range")},_e.brightnessRange),noiseRange:new We({slider:this.selector(".tie-noise-range")},_e.noiseRange),pixelateRange:new We({slider:this.selector(".tie-pixelate-range")},_e.pixelateRange),colorfilterThresholdRange:new We({slider:this.selector(".tie-colorfilter-threshold-range")},_e.colorfilterThresholdRange),filterTintColor:new li(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new li(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new li(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:_e.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(ne.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(n){var u=document.createElement("div"),b=document.createElement("label"),T=document.createElement("div");return T.id="tie-filter-tint-opacity",b.innerHTML="Opacity",u.appendChild(b),u.appendChild(T),n.appendChild(u),n.style.height=jr,new We({slider:T},_e.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(n){var u=document.createElement("div"),b=document.createElement("select"),T=document.createElement("ul");return u.className="tui-image-editor-selectlist-wrap",T.className="tui-image-editor-selectlist",u.appendChild(b),u.appendChild(T),this._makeSelectOptionList(b),n.appendChild(u),n.style.height=jr,this._drawSelectOptionList(b,T),this._pickerWithSelectboxForAddEvent(b,T),b}},{key:"_drawSelectOptionList",value:function(n,u){var b=n.querySelectorAll("option");It()(K()).call(K(),b,function(T){var B=document.createElement("li");B.innerHTML=T.innerHTML,B.setAttribute("data-item",T.value),u.appendChild(B)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(n,u){var b=this;u.addEventListener("click",function(T){var B=T.target.getAttribute("data-item"),N=document.createEvent("HTMLEvents");n.querySelector('[value="'.concat(B,'"]')).selected=!0,N.initEvent("change",!0,!0),n.dispatchEvent(N),b.selectBoxShow=!1,u.style.display="none"}),n.addEventListener("mousedown",function(T){T.preventDefault(),b.selectBoxShow=!b.selectBoxShow,u.style.display=b.selectBoxShow?"block":"none",u.setAttribute("data-selectitem",n.value),u.querySelector("[data-item='".concat(n.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(n){It()(K()).call(K(),sl,function(u){var b=document.createElement("option");b.setAttribute("value",u),b.innerHTML=u.replace(/^[a-z]/,function(T){return T.toUpperCase()}),n.appendChild(b)})}}]),a}($e),ul=cl,hl=R(4383),fl=R.n(hl),dl=function(){function D(v,a){var l=a.name;J(this,D),this.name=l,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),v.appendChild(this.panelElement)}return st(D,[{key:"_makePanelElement",value:function(){var a=document.createElement("div");return a.className="tie-panel-".concat(this.name),a}},{key:"_makeListElement",value:function(){var a=document.createElement("ol");return a.className="".concat(this.name,"-list"),a}},{key:"makeListItemElement",value:function(a){var l=document.createElement("li");return l.innerHTML=a,l.className="".concat(this.name,"-item"),l.setAttribute("data-index",this.items.length),l}},{key:"pushListItemElement",value:function(a){this.listElement.appendChild(a),this.listElement.scrollTop+=a.offsetHeight,this.items.push(a)}},{key:"deleteListItemElement",value:function(a,l){for(var n=this.items,u=a;u<l;u+=1)this.listElement.removeChild(n[u]);M()(n).call(n,a,l-a+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(a,l){this.items[a]&&this.items[a].classList.add(l)}},{key:"removeClass",value:function(a,l){this.items[a]&&this.items[a].classList.remove(l)}},{key:"toggleClass",value:function(a,l){this.items[a]&&this.items[a].classList.toggle(l)}}]),D}(),gl=dl,vl=function(D){var v,a,l,n=D.locale,u=D.makeSvgIcon,b=D.name,T=D.detail;return V()(v=V()(a=V()(l=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(u(["normal","active"],"history-".concat(b.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(l,n.localize(b),`
            `)).call(a,T?"(".concat(n.localize(T),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(v,u(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function pl(D){var v=ml();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ml(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var yl="history-item",Fr="selected-item",Hr="disabled-item",Cl=function(D){ue(a,D);var v=pl(a);function a(l,n){var u,b=n.locale,T=n.makeSvgIcon;return J(this,a),u=v.call(this,l,{name:"history"}),l.classList.add("enabled"),u.locale=b,u.makeSvgIcon=T,u._eventHandler={},u._historyIndex=u.getListLength(),u}return st(a,[{key:"add",value:function(n){var u=n.name,b=n.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var T=vl({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:u,detail:b}),B=this.makeListItemElement(T);this.pushListItemElement(B),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var n=this;this._eventHandler.history=function(u){return n._clickHistoryItem(u)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(n){var u=n.target,b=u.closest(".".concat(yl));if(!!b){var T=fl()(b.getAttribute("data-index"),10);if(T!==this._historyIndex){var B=Math.abs(T-this._historyIndex);T<this._historyIndex?this._actions.undo(B):this._actions.redo(B)}}}},{key:"_selectItem",value:function(n){for(var u=0;u<this.getListLength();u+=1)this.removeClass(u,Fr),this.removeClass(u,Hr),u>n&&this.addClass(u,Hr);this.addClass(n,Fr)}},{key:"destroy",value:function(){this.removeEvent(),At(this)}},{key:"addEvent",value:function(n){this._actions=n,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),a}(gl),bl=Cl,xl=function(){function D(v){J(this,D),this._locale=v}return st(D,[{key:"localize",value:function(a){return this._locale[a]||a}}]),D}(),Sl=xl,Il={Shape:gs,Crop:Cs,Resize:Ms,Flip:Ds,Rotate:js,Text:Hs,Mask:Xs,Icon:Ks,Draw:nl,Filter:ul},Ml=K().CustomEvents,_l="1300",Yr="history",El="tie-panel-history",zi="on",Bi={ZOOM_IN:"zoomIn",HAND:"hand"},Ur=function(){function D(v,a,l){J(this,D),this.options=this._initializeOption(a),this._actions=l,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new Sl(this.options.locale),this.theme=new es(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(v),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return st(D,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",At(this)}},{key:"setUiDefaultSelectionStyle",value:function(a){return K().extend({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},a)}},{key:"resizeEditor",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=a.uiSize,n=a.imageSize,u=n===void 0?this.imageSize:n;u!==this.imageSize&&(this.imageSize=u),l&&this._setUiSize(l);var b=this._getCanvasMaxDimension(),T=b.width,B=b.height,N=this._editorElement.style,H=this.options.menuBarPosition;N.height="".concat(B,"px"),N.width="".concat(T,"px"),this._setEditorPosition(H),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var Z=this._selectedElement.classList;H==="top"&&this._selectedElement.offsetWidth<_l?Z.add("tui-image-editor-top-optimization"):Z.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(a){var l=this._buttonElements[a].classList;l.toggle(zi),a===Bi.ZOOM_IN?this._buttonElements[Bi.HAND].classList.remove(zi):this._buttonElements[Bi.ZOOM_IN].classList.remove(zi)}},{key:"offZoomInButtonStatus",value:function(){var a=this._buttonElements[Bi.ZOOM_IN].classList;a.remove(zi)}},{key:"changeHandButtonStatus",value:function(a){var l=this._buttonElements[Bi.HAND].classList;l[a?"add":"remove"](zi)}},{key:"changeHelpButtonEnabled",value:function(a,l){var n=this._buttonElements[a].classList;n[l?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(a){return K().extend({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},a)}},{key:"_setUiSize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,l=this._selectedElement.style;l.width=a.width,l.height=a.height}},{key:"_makeSubMenu",value:function(){var a=this;It()(K()).call(K(),this.options.menu,function(l){var n,u=Il[l.replace(/^[a-z]/,function(b){return b.toUpperCase()})];a._makeMenuElement(l),a._buttonElements[l]=a._menuBarElement.querySelector(".tie-btn-".concat(l)),a[l]=new u(a._subMenuElement,{locale:a._locale,makeSvgIcon:rt()(n=a.theme.makeMenSvgIconSet).call(n,a.theme),menuBarPosition:a.options.menuBarPosition,usageStatistics:a.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var a,l,n;this.on(xt.EXECUTE_COMMAND,rt()(a=this._addHistory).call(a,this)),this.on(xt.AFTER_UNDO,rt()(l=this._selectPrevHistory).call(l,this)),this.on(xt.AFTER_REDO,rt()(n=this._selectNextHistory).call(n,this))}},{key:"_attachZoomEvent",value:function(){var a=this;this.on(xt.HAND_STARTED,function(){a.offZoomInButtonStatus(),a.changeHandButtonStatus(!0)}),this.on(xt.HAND_STOPPED,function(){return a.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(a){var l,n;window.snippet=K(),a.nodeType?n=a:n=document.querySelector(a);var u=qi(n);n.classList.add("tui-image-editor-container"),n.innerHTML=Qo({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+Jo({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=n,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=u(".tui-image-editor-main"),this._editorElementWrap=u(".tui-image-editor-wrap"),this._editorElement=u(".tui-image-editor"),this._helpMenuBarElement=u(".tui-image-editor-help-menu"),this._menuBarElement=u(".tui-image-editor-menu"),this._subMenuElement=u(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new bl(this._buttonElements[Yr],{locale:this._locale,makeSvgIcon:rt()(l=this.theme.makeMenSvgIconSet).call(l,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var a=this;It()(K()).call(K(),mt,function(l){a.changeHelpButtonEnabled(l,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var a;return V()(a=[]).call(a,F(mt),[""],F(ft),[""],F(bt))}},{key:"_addHelpMenus",value:function(){var a=this,l=this._makeHelpMenuWithPartition();It()(K()).call(K(),l,function(n){n?(a._makeMenuElement(n,["normal","disabled","hover"],"help"),a._buttonElements[n]=a._helpMenuBarElement.querySelector(".tie-btn-".concat(n))):a._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var a=document.createElement("li"),l=document.createElement("div");a.className=Pt("item"),l.className=Pt("icpartition"),a.appendChild(l),this._helpMenuBarElement.appendChild(a)}},{key:"_makeMenuElement",value:function(a){var l,n,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",T=document.createElement("li"),B=this.theme.makeMenSvgIconSet(u,a);this._addTooltipAttribute(T,a),T.className=V()(l=V()(n="tie-btn-".concat(a," ")).call(n,Pt("item")," ")).call(l,b),T.innerHTML=B,b==="normal"?this._menuBarElement.appendChild(T):this._helpMenuBarElement.appendChild(T)}},{key:"_addHelpActionEvent",value:function(){var a=this;It()(K()).call(K(),jt,function(l){a.eventHandler[l]=function(n){return a._actions.main[l](n)},a._buttonElements[l].addEventListener("click",a.eventHandler[l])})}},{key:"_removeHelpActionEvent",value:function(){var a=this;It()(K()).call(K(),jt,function(l){a._buttonElements[l].removeEventListener("click",a.eventHandler[l])})}},{key:"_addHistory",value:function(a){if(!Ri(a)){var l=typeof a=="string"?{name:a}:en(a);this._historyMenu.add(l)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(a){var l=a.target,n=l.closest(".".concat(El));if(!n){var u=this._buttonElements[Yr].classList;u.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(a,l){a.setAttribute("tooltip-content",this._locale.localize(l.replace(/^[a-z]/g,function(n){return n.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var a=this;this.eventHandler.download=function(){return a._actions.main.download()},It()(K()).call(K(),this._buttonElements.download,function(l){l.addEventListener("click",a.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var a=this;It()(K()).call(K(),this._buttonElements.download,function(l){l.removeEventListener("click",a.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var a=this;this.eventHandler.loadImage=function(l){return a._actions.main.load(l.target.files[0])},It()(K()).call(K(),this._buttonElements.load,function(l){l.addEventListener("change",a.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var a=this;It()(K()).call(K(),this._buttonElements.load,function(l){l.removeEventListener("change",a.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(a){var l=this;this.eventHandler[a]=function(){return l.changeMenu(a)},this._buttonElements[a].addEventListener("click",this.eventHandler[a])}},{key:"_addSubMenuEvent",value:function(a){var l=this;this[a].addEvent(this._actions[a]),this[a].on(xt.INPUT_BOX_EDITING_STARTED,function(){return l.fire(xt.INPUT_BOX_EDITING_STARTED)}),this[a].on(xt.INPUT_BOX_EDITING_STOPPED,function(){return l.fire(xt.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var a=this;It()(K()).call(K(),this.options.menu,function(l){a._addMainMenuEvent(l),a._addSubMenuEvent(l)})}},{key:"_removeMainMenuEvent",value:function(){var a=this;It()(K()).call(K(),this.options.menu,function(l){a._buttonElements[l].removeEventListener("click",a.eventHandler[l]),a[l].off(xt.INPUT_BOX_EDITING_STARTED),a[l].off(xt.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var a=this;It()(K()).call(K(),this.options.menu,function(l){a[l].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var a=this,l=this._getLoadImage();l.path&&this._actions.main.initLoadImage(l.path,l.name).then(function(){a.activeMenuEvent()}),this._addLoadEvent();var n=document.createElement("div");n.className=Pt("grid-visual");var u=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;n.innerHTML=u,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(n)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(a,l,n),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(a,l,n){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),n&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===a&&l?this.submenu=null:(this._buttonElements[a].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(a)),this.submenu=a,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(a)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var a=this._editorContainerElement.style,l=a.maxWidth,n=a.maxHeight,u=si()(l),b=si()(n);return{width:u,height:b}}},{key:"_setEditorPosition",value:function(a){var l=this._getCanvasMaxDimension(),n=l.width,u=l.height,b=this._editorElement.style,T=0,B=0;this.submenu&&(a==="bottom"?u>this._editorElementWrap.scrollHeight-150?T=(u-this._editorElementWrap.scrollHeight)/2:T=150/2*-1:a==="top"?u>this._editorElementWrap.offsetHeight-150?T=150/2-(u-(this._editorElementWrap.offsetHeight-150))/2:T=150/2:a==="left"?n>this._editorElementWrap.offsetWidth-248?B=248/2-(n-(this._editorElementWrap.offsetWidth-248))/2:B=248/2:a==="right"&&(n>this._editorElementWrap.scrollWidth-248?B=(n-this._editorElementWrap.scrollWidth)/2:B=248/2*-1)),b.top="".concat(T,"px"),b.left="".concat(B,"px")}}]),D}();Ml.mixin(Ur);var Tl=Ur,wl=R(381),Fi=R.n(wl),Wr=function(){function D(){J(this,D),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return st(D,[{key:"imageToSVG",value:function(a,l,n){var u=this;n=this.checkoptions(n),this.loadImage(a,function(b){l(u.imagedataToSVG(u.getImgdata(b),n))},n)}},{key:"imagedataToSVG",value:function(a,l){l=this.checkoptions(l);var n=this.imagedataToTracedata(a,l);return this.getsvgstring(n,l)}},{key:"imageToTracedata",value:function(a,l,n){var u=this;n=this.checkoptions(n),this.loadImage(a,function(b){l(u.imagedataToTracedata(u.getImgdata(b),n))},n)}},{key:"imagedataToTracedata",value:function(a,l){l=this.checkoptions(l);var n=this.colorquantization(a,l),u;if(l.layering===0){u={layers:[],palette:n.palette,width:n.array[0].length-2,height:n.array.length-2};for(var b=0;b<n.palette.length;b+=1){var T=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(n,b),l.pathomit),l),l.ltres,l.qtres);u.layers.push(T)}}else{var B=this.layering(n);l.layercontainerid&&this.drawLayers(B,this.specpalette,l.scale,l.layercontainerid);var N=this.batchpathscan(B,l.pathomit),H=this.batchinternodes(N,l);u={layers:this.batchtracelayers(H,l.ltres,l.qtres),palette:n.palette,width:a.width,height:a.height}}return u}},{key:"checkoptions",value:function(a){a=a||{},typeof a=="string"&&(a=a.toLowerCase(),this.optionpresets[a]?a=this.optionpresets[a]:a={});for(var l=at()(this.optionpresets.default),n=0;n<l.length;n+=1)a.hasOwnProperty(l[n])||(a[l[n]]=this.optionpresets.default[l[n]]);return a}},{key:"colorquantization",value:function(a,l){var n=[],u=0,b,T,B,N=[],H=a.width*a.height,Z,ut,ht,gt,vt;for(ut=0;ut<a.height+2;ut+=1)for(n[ut]=[],Z=0;Z<a.width+2;Z+=1)n[ut][Z]=-1;for(l.pal?vt=l.pal:l.colorsampling===0?vt=this.generatepalette(l.numberofcolors):l.colorsampling===1?vt=this.samplepalette(l.numberofcolors,a):vt=this.samplepalette2(l.numberofcolors,a),l.blurradius>0&&(a=this.blur(a,l.blurradius,l.blurdelta)),gt=0;gt<l.colorquantcycles;gt+=1){if(gt>0)for(ht=0;ht<vt.length;ht+=1)N[ht].n>0&&(vt[ht]={r:Math.floor(N[ht].r/N[ht].n),g:Math.floor(N[ht].g/N[ht].n),b:Math.floor(N[ht].b/N[ht].n),a:Math.floor(N[ht].a/N[ht].n)}),N[ht].n/H<l.mincolorratio&&gt<l.colorquantcycles-1&&(vt[ht]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(Z=0;Z<vt.length;Z+=1)N[Z]={r:0,g:0,b:0,a:0,n:0};for(ut=0;ut<a.height;ut+=1)for(Z=0;Z<a.width;Z+=1){for(u=(ut*a.width+Z)*4,B=0,T=1024,ht=0;ht<vt.length;ht+=1)b=Math.abs(vt[ht].r-a.data[u])+Math.abs(vt[ht].g-a.data[u+1])+Math.abs(vt[ht].b-a.data[u+2])+Math.abs(vt[ht].a-a.data[u+3]),b<T&&(T=b,B=ht);N[B].r+=a.data[u],N[B].g+=a.data[u+1],N[B].b+=a.data[u+2],N[B].a+=a.data[u+3],N[B].n+=1,n[ut+1][Z+1]=B}}return{array:n,palette:vt}}},{key:"samplepalette",value:function(a,l){for(var n,u=[],b=0;b<a;b+=1)n=Math.floor(Math.random()*l.data.length/4)*4,u.push({r:l.data[n],g:l.data[n+1],b:l.data[n+2],a:l.data[n+3]});return u}},{key:"samplepalette2",value:function(a,l){for(var n,u=[],b=Math.ceil(Math.sqrt(a)),T=Math.ceil(a/b),B=l.width/(b+1),N=l.height/(T+1),H=0;H<T;H+=1)for(var Z=0;Z<b&&u.length!==a;Z+=1)n=Math.floor((H+1)*N*l.width+(Z+1)*B)*4,u.push({r:l.data[n],g:l.data[n+1],b:l.data[n+2],a:l.data[n+3]});return u}},{key:"generatepalette",value:function(a){var l=[],n,u,b;if(a<8)for(var T=Math.floor(255/(a-1)),B=0;B<a;B+=1)l.push({r:B*T,g:B*T,b:B*T,a:255});else{var N=Math.floor(Math.pow(a,.3333333333333333)),H=Math.floor(255/(N-1)),Z=a-N*N*N;for(n=0;n<N;n+=1)for(u=0;u<N;u+=1)for(b=0;b<N;b+=1)l.push({r:n*H,g:u*H,b:b*H,a:255});for(n=0;n<Z;n+=1)l.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return l}},{key:"layering",value:function(a){var l=[],n=0,u=a.array.length,b=a.array[0].length,T,B,N,H,Z,ut,ht,gt,vt,pt,Nt;for(Nt=0;Nt<a.palette.length;Nt+=1)for(l[Nt]=[],pt=0;pt<u;pt+=1)for(l[Nt][pt]=[],vt=0;vt<b;vt+=1)l[Nt][pt][vt]=0;for(pt=1;pt<u-1;pt+=1)for(vt=1;vt<b-1;vt+=1)n=a.array[pt][vt],T=a.array[pt-1][vt-1]===n?1:0,B=a.array[pt-1][vt]===n?1:0,N=a.array[pt-1][vt+1]===n?1:0,H=a.array[pt][vt-1]===n?1:0,Z=a.array[pt][vt+1]===n?1:0,ut=a.array[pt+1][vt-1]===n?1:0,ht=a.array[pt+1][vt]===n?1:0,gt=a.array[pt+1][vt+1]===n?1:0,l[n][pt+1][vt+1]=1+Z*2+gt*4+ht*8,H||(l[n][pt+1][vt]=0+2+ht*4+ut*8),B||(l[n][pt][vt+1]=0+N*2+Z*4+8),T||(l[n][pt][vt]=0+B*2+4+H*8);return l}},{key:"layeringstep",value:function(a,l){var n=[],u=a.array.length,b=a.array[0].length,T,B;for(B=0;B<u;B+=1)for(n[B]=[],T=0;T<b;T+=1)n[B][T]=0;for(B=1;B<u;B+=1)for(T=1;T<b;T+=1)n[B][T]=(a.array[B-1][T-1]===l?1:0)+(a.array[B-1][T]===l?2:0)+(a.array[B][T-1]===l?8:0)+(a.array[B][T]===l?4:0);return n}},{key:"pathscan",value:function(a,l){for(var n=[],u=0,b=0,T=0,B=0,N=a[0].length,H=a.length,Z=0,ut=!0,ht=!1,gt,vt=0;vt<H;vt+=1)for(var pt=0;pt<N;pt+=1)if(a[vt][pt]===4||a[vt][pt]===11)for(T=pt,B=vt,n[u]={},n[u].points=[],n[u].boundingbox=[T,B,T,B],n[u].holechildren=[],ut=!1,b=0,ht=a[vt][pt]===11,Z=1;!ut;){if(n[u].points[b]={},n[u].points[b].x=T-1,n[u].points[b].y=B-1,n[u].points[b].t=a[B][T],T-1<n[u].boundingbox[0]&&(n[u].boundingbox[0]=T-1),T-1>n[u].boundingbox[2]&&(n[u].boundingbox[2]=T-1),B-1<n[u].boundingbox[1]&&(n[u].boundingbox[1]=B-1),B-1>n[u].boundingbox[3]&&(n[u].boundingbox[3]=B-1),gt=this.pathscan_combined_lookup[a[B][T]][Z],a[B][T]=gt[0],Z=gt[1],T+=gt[2],B+=gt[3],T-1===n[u].points[0].x&&B-1===n[u].points[0].y)if(ut=!0,n[u].points.length<l)n.pop();else{if(n[u].isholepath=!!ht,ht){for(var Nt=0,Qt=[-1,-1,N+1,H+1],qt=0;qt<u;qt++)!n[qt].isholepath&&this.boundingboxincludes(n[qt].boundingbox,n[u].boundingbox)&&this.boundingboxincludes(Qt,n[qt].boundingbox)&&(Nt=qt,Qt=n[qt].boundingbox);n[Nt].holechildren.push(u)}u+=1}b+=1}return n}},{key:"boundingboxincludes",value:function(a,l){return a[0]<l[0]&&a[1]<l[1]&&a[2]>l[2]&&a[3]>l[3]}},{key:"batchpathscan",value:function(a,l){var n=[];for(var u in a)!a.hasOwnProperty(u)||(n[u]=this.pathscan(a[u],l));return n}},{key:"internodes",value:function(a,l){var n=[],u=0,b=0,T=0,B=0,N=0,H,Z;for(H=0;H<a.length;H+=1)for(n[H]={},n[H].points=[],n[H].boundingbox=a[H].boundingbox,n[H].holechildren=a[H].holechildren,n[H].isholepath=a[H].isholepath,u=a[H].points.length,Z=0;Z<u;Z+=1)b=(Z+1)%u,T=(Z+2)%u,B=(Z-1+u)%u,N=(Z-2+u)%u,l.rightangleenhance&&this.testrightangle(a[H],N,B,Z,b,T)&&(n[H].points.length>0&&(n[H].points[n[H].points.length-1].linesegment=this.getdirection(n[H].points[n[H].points.length-1].x,n[H].points[n[H].points.length-1].y,a[H].points[Z].x,a[H].points[Z].y)),n[H].points.push({x:a[H].points[Z].x,y:a[H].points[Z].y,linesegment:this.getdirection(a[H].points[Z].x,a[H].points[Z].y,(a[H].points[Z].x+a[H].points[b].x)/2,(a[H].points[Z].y+a[H].points[b].y)/2)})),n[H].points.push({x:(a[H].points[Z].x+a[H].points[b].x)/2,y:(a[H].points[Z].y+a[H].points[b].y)/2,linesegment:this.getdirection((a[H].points[Z].x+a[H].points[b].x)/2,(a[H].points[Z].y+a[H].points[b].y)/2,(a[H].points[b].x+a[H].points[T].x)/2,(a[H].points[b].y+a[H].points[T].y)/2)});return n}},{key:"testrightangle",value:function(a,l,n,u,b,T){return a.points[u].x===a.points[l].x&&a.points[u].x===a.points[n].x&&a.points[u].y===a.points[b].y&&a.points[u].y===a.points[T].y||a.points[u].y===a.points[l].y&&a.points[u].y===a.points[n].y&&a.points[u].x===a.points[b].x&&a.points[u].x===a.points[T].x}},{key:"getdirection",value:function(a,l,n,u){var b=8;return a<n?l<u?b=1:l>u?b=7:b=0:a>n?l<u?b=3:l>u?b=5:b=4:l<u?b=2:l>u?b=6:b=8,b}},{key:"batchinternodes",value:function(a,l){var n=[];for(var u in a)!a.hasOwnProperty(u)||(n[u]=this.internodes(a[u],l));return n}},{key:"tracepath",value:function(a,l,n){var u=0,b,T,B,N={};for(N.segments=[],N.boundingbox=a.boundingbox,N.holechildren=a.holechildren,N.isholepath=a.isholepath;u<a.points.length;){var H;for(b=a.points[u].linesegment,T=-1,B=u+1;(a.points[B].linesegment===b||a.points[B].linesegment===T||T===-1)&&B<a.points.length-1;)a.points[B].linesegment!==b&&T===-1&&(T=a.points[B].linesegment),B+=1;B===a.points.length-1&&(B=0),N.segments=V()(H=N.segments).call(H,this.fitseq(a,l,n,u,B)),B>0?u=B:u=a.points.length}return N}},{key:"fitseq",value:function(a,l,n,u,b){var T;if(b>a.points.length||b<0)return[];var B=u,N=0,H=!0,Z,ut,ht,gt=b-u;gt<0&&(gt+=a.points.length);for(var vt=(a.points[b].x-a.points[u].x)/gt,pt=(a.points[b].y-a.points[u].y)/gt,Nt=(u+1)%a.points.length,Qt;Nt!=b;)Qt=Nt-u,Qt<0&&(Qt+=a.points.length),Z=a.points[u].x+vt*Qt,ut=a.points[u].y+pt*Qt,ht=(a.points[Nt].x-Z)*(a.points[Nt].x-Z)+(a.points[Nt].y-ut)*(a.points[Nt].y-ut),ht>l&&(H=!1),ht>N&&(B=Nt,N=ht),Nt=(Nt+1)%a.points.length;if(H)return[{type:"L",x1:a.points[u].x,y1:a.points[u].y,x2:a.points[b].x,y2:a.points[b].y}];var qt=B;H=!0,N=0;var te=(qt-u)/gt,Ut=(1-te)*(1-te),de=2*(1-te)*te,ke=te*te,Re=(Ut*a.points[u].x+ke*a.points[b].x-a.points[qt].x)/-de,Te=(Ut*a.points[u].y+ke*a.points[b].y-a.points[qt].y)/-de;for(Nt=u+1;Nt!=b;)te=(Nt-u)/gt,Ut=(1-te)*(1-te),de=2*(1-te)*te,ke=te*te,Z=Ut*a.points[u].x+de*Re+ke*a.points[b].x,ut=Ut*a.points[u].y+de*Te+ke*a.points[b].y,ht=(a.points[Nt].x-Z)*(a.points[Nt].x-Z)+(a.points[Nt].y-ut)*(a.points[Nt].y-ut),ht>n&&(H=!1),ht>N&&(B=Nt,N=ht),Nt=(Nt+1)%a.points.length;if(H)return[{type:"Q",x1:a.points[u].x,y1:a.points[u].y,x2:Re,y2:Te,x3:a.points[b].x,y3:a.points[b].y}];var Ve=qt;return V()(T=this.fitseq(a,l,n,u,Ve)).call(T,this.fitseq(a,l,n,Ve,b))}},{key:"batchtracepaths",value:function(a,l,n){var u=[];for(var b in a)!a.hasOwnProperty(b)||u.push(this.tracepath(a[b],l,n));return u}},{key:"batchtracelayers",value:function(a,l,n){var u=[];for(var b in a)!a.hasOwnProperty(b)||(u[b]=this.batchtracepaths(a[b],l,n));return u}},{key:"roundtodec",value:function(a,l){return Number(a.toFixed(l))}},{key:"svgpathstring",value:function(a,l,n,u){var b,T,B=a.layers[l],N=B[n],H="",Z;if(u.linefilter&&N.segments.length<3)return H;if(H=V()(b="<path ".concat(u.desc?V()(T='desc="l '.concat(l," p ")).call(T,n,'" '):"")).call(b,this.tosvgcolorstr(a.palette[l],u),'d="'),u.roundcoords===-1){var ut;for(H+=V()(ut="M ".concat(N.segments[0].x1*u.scale," ")).call(ut,N.segments[0].y1*u.scale," "),Z=0;Z<N.segments.length;Z++){var ht,gt;if(H+=V()(ht=V()(gt="".concat(N.segments[Z].type," ")).call(gt,N.segments[Z].x2*u.scale," ")).call(ht,N.segments[Z].y2*u.scale," "),N.segments[Z].hasOwnProperty("x3")){var vt;H+=V()(vt="".concat(N.segments[Z].x3*u.scale," ")).call(vt,N.segments[Z].y3*u.scale," ")}}H+="Z "}else{var pt;for(H+=V()(pt="M ".concat(this.roundtodec(N.segments[0].x1*u.scale,u.roundcoords)," ")).call(pt,this.roundtodec(N.segments[0].y1*u.scale,u.roundcoords)," "),Z=0;Z<N.segments.length;Z++){var Nt,Qt;if(H+=V()(Nt=V()(Qt="".concat(N.segments[Z].type," ")).call(Qt,this.roundtodec(N.segments[Z].x2*u.scale,u.roundcoords)," ")).call(Nt,this.roundtodec(N.segments[Z].y2*u.scale,u.roundcoords)," "),N.segments[Z].hasOwnProperty("x3")){var qt;H+=V()(qt="".concat(this.roundtodec(N.segments[Z].x3*u.scale,u.roundcoords)," ")).call(qt,this.roundtodec(N.segments[Z].y3*u.scale,u.roundcoords)," ")}}H+="Z "}for(var te=0;te<N.holechildren.length;te++){var Ut=B[N.holechildren[te]];if(u.roundcoords===-1){if(Ut.segments[Ut.segments.length-1].hasOwnProperty("x3")){var de;H+=V()(de="M ".concat(Ut.segments[Ut.segments.length-1].x3*u.scale," ")).call(de,Ut.segments[Ut.segments.length-1].y3*u.scale," ")}else{var ke;H+=V()(ke="M ".concat(Ut.segments[Ut.segments.length-1].x2*u.scale," ")).call(ke,Ut.segments[Ut.segments.length-1].y2*u.scale," ")}for(Z=Ut.segments.length-1;Z>=0;Z--){var Re;if(H+="".concat(Ut.segments[Z].type," "),Ut.segments[Z].hasOwnProperty("x3")){var Te;H+=V()(Te="".concat(Ut.segments[Z].x2*u.scale," ")).call(Te,Ut.segments[Z].y2*u.scale," ")}H+=V()(Re="".concat(Ut.segments[Z].x1*u.scale," ")).call(Re,Ut.segments[Z].y1*u.scale," ")}}else{if(Ut.segments[Ut.segments.length-1].hasOwnProperty("x3")){var Ve;H+=V()(Ve="M ".concat(this.roundtodec(Ut.segments[Ut.segments.length-1].x3*u.scale)," ")).call(Ve,this.roundtodec(Ut.segments[Ut.segments.length-1].y3*u.scale)," ")}else{var ui;H+=V()(ui="M ".concat(this.roundtodec(Ut.segments[Ut.segments.length-1].x2*u.scale)," ")).call(ui,this.roundtodec(Ut.segments[Ut.segments.length-1].y2*u.scale)," ")}for(Z=Ut.segments.length-1;Z>=0;Z--){var ze;if(H+="".concat(Ut.segments[Z].type," "),Ut.segments[Z].hasOwnProperty("x3")){var Yi;H+=V()(Yi="".concat(this.roundtodec(Ut.segments[Z].x2*u.scale)," ")).call(Yi,this.roundtodec(Ut.segments[Z].y2*u.scale)," ")}H+=V()(ze="".concat(this.roundtodec(Ut.segments[Z].x1*u.scale)," ")).call(ze,this.roundtodec(Ut.segments[Z].y1*u.scale)," ")}}H+="Z "}if(H+='" />',u.lcpr||u.qcpr){for(Z=0;Z<N.segments.length;Z++){if(N.segments[Z].hasOwnProperty("x3")&&u.qcpr){var fn,dn,gn,vn,pn,mn,yn,Cn,bn,xn,Sn,In,Mn,_n;H+=V()(fn=V()(dn=V()(gn='<circle cx="'.concat(N.segments[Z].x2*u.scale,'" cy="')).call(gn,N.segments[Z].y2*u.scale,'" r="')).call(dn,u.qcpr,'" fill="cyan" stroke-width="')).call(fn,u.qcpr*.2,'" stroke="black" />'),H+=V()(vn=V()(pn=V()(mn='<circle cx="'.concat(N.segments[Z].x3*u.scale,'" cy="')).call(mn,N.segments[Z].y3*u.scale,'" r="')).call(pn,u.qcpr,'" fill="white" stroke-width="')).call(vn,u.qcpr*.2,'" stroke="black" />'),H+=V()(yn=V()(Cn=V()(bn=V()(xn='<line x1="'.concat(N.segments[Z].x1*u.scale,'" y1="')).call(xn,N.segments[Z].y1*u.scale,'" x2="')).call(bn,N.segments[Z].x2*u.scale,'" y2="')).call(Cn,N.segments[Z].y2*u.scale,'" stroke-width="')).call(yn,u.qcpr*.2,'" stroke="cyan" />'),H+=V()(Sn=V()(In=V()(Mn=V()(_n='<line x1="'.concat(N.segments[Z].x2*u.scale,'" y1="')).call(_n,N.segments[Z].y2*u.scale,'" x2="')).call(Mn,N.segments[Z].x3*u.scale,'" y2="')).call(In,N.segments[Z].y3*u.scale,'" stroke-width="')).call(Sn,u.qcpr*.2,'" stroke="cyan" />')}if(!N.segments[Z].hasOwnProperty("x3")&&u.lcpr){var En,Tn,wn;H+=V()(En=V()(Tn=V()(wn='<circle cx="'.concat(N.segments[Z].x2*u.scale,'" cy="')).call(wn,N.segments[Z].y2*u.scale,'" r="')).call(Tn,u.lcpr,'" fill="white" stroke-width="')).call(En,u.lcpr*.2,'" stroke="black" />')}}for(var te=0;te<N.holechildren.length;te++){var Ut=B[N.holechildren[te]];for(Z=0;Z<Ut.segments.length;Z++){if(Ut.segments[Z].hasOwnProperty("x3")&&u.qcpr){var Dn,Je,mi,Da,Oa,Aa,ka,Pa,La,Na,ja,Ra,za,Ba;H+=V()(Dn=V()(Je=V()(mi='<circle cx="'.concat(Ut.segments[Z].x2*u.scale,'" cy="')).call(mi,Ut.segments[Z].y2*u.scale,'" r="')).call(Je,u.qcpr,'" fill="cyan" stroke-width="')).call(Dn,u.qcpr*.2,'" stroke="black" />'),H+=V()(Da=V()(Oa=V()(Aa='<circle cx="'.concat(Ut.segments[Z].x3*u.scale,'" cy="')).call(Aa,Ut.segments[Z].y3*u.scale,'" r="')).call(Oa,u.qcpr,'" fill="white" stroke-width="')).call(Da,u.qcpr*.2,'" stroke="black" />'),H+=V()(ka=V()(Pa=V()(La=V()(Na='<line x1="'.concat(Ut.segments[Z].x1*u.scale,'" y1="')).call(Na,Ut.segments[Z].y1*u.scale,'" x2="')).call(La,Ut.segments[Z].x2*u.scale,'" y2="')).call(Pa,Ut.segments[Z].y2*u.scale,'" stroke-width="')).call(ka,u.qcpr*.2,'" stroke="cyan" />'),H+=V()(ja=V()(Ra=V()(za=V()(Ba='<line x1="'.concat(Ut.segments[Z].x2*u.scale,'" y1="')).call(Ba,Ut.segments[Z].y2*u.scale,'" x2="')).call(za,Ut.segments[Z].x3*u.scale,'" y2="')).call(Ra,Ut.segments[Z].y3*u.scale,'" stroke-width="')).call(ja,u.qcpr*.2,'" stroke="cyan" />')}if(!Ut.segments[Z].hasOwnProperty("x3")&&u.lcpr){var Fa,Ha,Ya;H+=V()(Fa=V()(Ha=V()(Ya='<circle cx="'.concat(Ut.segments[Z].x2*u.scale,'" cy="')).call(Ya,Ut.segments[Z].y2*u.scale,'" r="')).call(Ha,u.lcpr,'" fill="white" stroke-width="')).call(Fa,u.lcpr*.2,'" stroke="black" />')}}}}return H}},{key:"getsvgstring",value:function(a,l){var n,u,b;l=this.checkoptions(l);for(var T=a.width*l.scale,B=a.height*l.scale,N=V()(n="<svg ".concat(l.viewbox?V()(u='viewBox="0 0 '.concat(T," ")).call(u,B,'" '):V()(b='width="'.concat(T,'" height="')).call(b,B,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(n,this.versionnumber,'" >'),H=0;H<a.layers.length;H+=1)for(var Z=0;Z<a.layers[H].length;Z+=1)a.layers[H][Z].isholepath||(N+=this.svgpathstring(a,H,Z,l));return N+="</svg>",N}},{key:"compareNumbers",value:function(a,l){return a-l}},{key:"torgbastr",value:function(a){var l,n,u;return V()(l=V()(n=V()(u="rgba(".concat(a.r,",")).call(u,a.g,",")).call(n,a.b,",")).call(l,a.a,")")}},{key:"tosvgcolorstr",value:function(a,l){var n,u,b,T,B,N,H;return V()(n=V()(u=V()(b=V()(T=V()(B=V()(N=V()(H='fill="rgb('.concat(a.r,",")).call(H,a.g,",")).call(N,a.b,')" stroke="rgb(')).call(B,a.r,",")).call(T,a.g,",")).call(b,a.b,')" stroke-width="')).call(u,l.strokewidth,'" opacity="')).call(n,a.a/255,'" ')}},{key:"appendSVGString",value:function(a,l){var n;l?(n=document.getElementById(l),n||(n=document.createElement("div"),n.id=l,document.body.appendChild(n))):(n=document.createElement("div"),document.body.appendChild(n)),n.innerHTML+=a}},{key:"blur",value:function(a,l,n){var u,b,T,B,N,H,Z,ut,ht,gt,vt={width:a.width,height:a.height,data:[]};if(l=Math.floor(l),l<1)return a;l>5&&(l=5),n=Math.abs(n),n>1024&&(n=1024);var pt=this.gks[l-1];for(b=0;b<a.height;b++)for(u=0;u<a.width;u++){for(H=0,Z=0,ut=0,ht=0,gt=0,T=-l;T<l+1;T++)u+T>0&&u+T<a.width&&(N=(b*a.width+u+T)*4,H+=a.data[N]*pt[T+l],Z+=a.data[N+1]*pt[T+l],ut+=a.data[N+2]*pt[T+l],ht+=a.data[N+3]*pt[T+l],gt+=pt[T+l]);N=(b*a.width+u)*4,vt.data[N]=Math.floor(H/gt),vt.data[N+1]=Math.floor(Z/gt),vt.data[N+2]=Math.floor(ut/gt),vt.data[N+3]=Math.floor(ht/gt)}var Nt=new Uint8ClampedArray(vt.data);for(b=0;b<a.height;b++)for(u=0;u<a.width;u++){for(H=0,Z=0,ut=0,ht=0,gt=0,T=-l;T<l+1;T++)b+T>0&&b+T<a.height&&(N=((b+T)*a.width+u)*4,H+=Nt[N]*pt[T+l],Z+=Nt[N+1]*pt[T+l],ut+=Nt[N+2]*pt[T+l],ht+=Nt[N+3]*pt[T+l],gt+=pt[T+l]);N=(b*a.width+u)*4,vt.data[N]=Math.floor(H/gt),vt.data[N+1]=Math.floor(Z/gt),vt.data[N+2]=Math.floor(ut/gt),vt.data[N+3]=Math.floor(ht/gt)}for(b=0;b<a.height;b++)for(u=0;u<a.width;u++)N=(b*a.width+u)*4,B=Math.abs(vt.data[N]-a.data[N])+Math.abs(vt.data[N+1]-a.data[N+1])+Math.abs(vt.data[N+2]-a.data[N+2])+Math.abs(vt.data[N+3]-a.data[N+3]),B>n&&(vt.data[N]=a.data[N],vt.data[N+1]=a.data[N+1],vt.data[N+2]=a.data[N+2],vt.data[N+3]=a.data[N+3]);return vt}},{key:"loadImage",value:function(a,l,n){var u=new Image;n&&n.corsenabled&&(u.crossOrigin="Anonymous"),u.src=a,u.onload=function(){var b=document.createElement("canvas");b.width=u.width,b.height=u.height;var T=b.getContext("2d");T.drawImage(u,0,0),l(b)}}},{key:"getImgdata",value:function(a){var l=a.getContext("2d");return l.getImageData(0,0,a.width,a.height)}},{key:"drawLayers",value:function(a,l,n,u){n=n||1;var b,T,B,N,H,Z;u?(Z=document.getElementById(u),Z||(Z=document.createElement("div"),Z.id=u,document.body.appendChild(Z))):(Z=document.createElement("div"),document.body.appendChild(Z));for(H in a)if(!!a.hasOwnProperty(H)){b=a[H][0].length,T=a[H].length;var ut=document.createElement("canvas");ut.width=b*n,ut.height=T*n;var ht=ut.getContext("2d");for(N=0;N<T;N+=1)for(B=0;B<b;B+=1)ht.fillStyle=this.torgbastr(l[a[H][N][B]%l.length]),ht.fillRect(B*n,N*n,n,n);Z.appendChild(ut)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),D}(),Dl={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var v=this,a=function(){v.ui.submenu==="crop"&&(v.stopDrawingMode(),v.ui.changeMenu("crop"))},l=function(H){v.ui.submenu==="rotate"&&v.ui.rotate.setRangeBarAngle("setAngle",H)},n=function(H){v.ui.submenu==="filter"&&Fi()(v.ui).setFilterState(H)},u=function(H){return l(H),n(H),H},b=function(){var H=v._graphics.getZoomMode();v.stopDrawingMode(),H!==kt.ZOOM?(v.startDrawingMode(oe.ZOOM),v._graphics.startZoomInMode()):v._graphics.endZoomInMode()},T=function(){var H=v._graphics.getZoomMode();v.stopDrawingMode(),H!==kt.HAND?(v.startDrawingMode(oe.ZOOM),v._graphics.startHandMode()):v._graphics.endHandMode()},B=function(){Fi()(v.ui)&&Fi()(v.ui).initFilterCheckBoxState()};return(0,$.extend)({initLoadImage:function(H,Z){return v.loadImageFromURL(H,Z).then(function(ut){a(),v.ui.initializeImgUrl=H,v.ui.resizeEditor({imageSize:ut}),v.clearUndoStack(),v._invoker.fire(xt.EXECUTE_COMMAND,ae.LOAD_IMAGE)})},undo:function(){v.isEmptyUndoStack()||(a(),v.deactivateAll(),v.undo().then(u))},redo:function(){v.isEmptyRedoStack()||(a(),v.deactivateAll(),v.redo().then(u))},reset:function(){a(),v.loadImageFromURL(v.ui.initializeImgUrl,"resetImage").then(function(H){a(),B(),v.ui.resizeEditor({imageSize:H}),v.clearUndoStack(),v._initHistory()})},delete:function(){v.ui.changeHelpButtonEnabled("delete",!1),a(),v.removeActiveObject(),v.activeObjectId=null},deleteAll:function(){a(),v.clearObjects(),v.ui.changeHelpButtonEnabled("delete",!1),v.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(H){gi()||alert("This browser does not support file-api"),v.ui.initializeImgUrl=nt().createObjectURL(H),v.loadImageFromFile(H).then(function(Z){a(),B(),v.clearUndoStack(),v.ui.activeMenuEvent(),v.ui.resizeEditor({imageSize:Z}),v._clearHistory(),v._invoker.fire(xt.EXECUTE_COMMAND,ae.LOAD_IMAGE)}).catch(function(Z){return Q().reject(Z)})},download:function(){var H=v.toDataURL(),Z=v.getImageName(),ut,ht,gt;gi()&&window.saveAs?(ut=tn(H),ht=ut.type.split("/")[1],Z.split(".").pop()!==ht&&(Z+=".".concat(ht)),saveAs(ut,Z)):(gt=window.open(),gt.document.body.innerHTML="<img src='".concat(H,"'>"))},history:function(H){v.ui.toggleHistoryMenu(H)},zoomIn:function(){v.ui.toggleZoomButtonStatus("zoomIn"),v.deactivateAll(),b()},zoomOut:function(){v._graphics.zoomOut()},hand:function(){v.ui.offZoomInButtonStatus(),v.ui.toggleZoomButtonStatus("hand"),v.deactivateAll(),T()}},this._commonAction())},_iconAction:function(){var v=this;return(0,$.extend)({changeColor:function(l){v.activeObjectId&&v.changeIconColor(v.activeObjectId,l)},addIcon:function(l,n){v.startDrawingMode("ICON"),v.setDrawingIcon(l,n)},cancelAddIcon:function(){v.ui.icon.clearIconType(),v.changeSelectableAll(!0),v.changeCursor("default"),v.stopDrawingMode()},registerDefaultIcons:function(l,n){var u={};u[l]=n,v.registerIcons(u)},registerCustomIcon:function(l,n){var u=new Wr;u.imageToSVG(l,function(b){var T=b.match(/path[^>]*d="([^"]*)"/),B=yt(T,2),N=B[1],H={};H[n.name]=N,v.registerIcons(H),v.addIcon(n.name,{left:100,top:100})},Wr.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var v=this;return(0,$.extend)({setDrawMode:function(l,n){v.stopDrawingMode(),l==="free"?v.startDrawingMode("FREE_DRAWING",n):v.startDrawingMode("LINE_DRAWING",n)},setColor:function(l){v.setBrush({color:l})}},this._commonAction())},_maskAction:function(){var v=this;return(0,$.extend)({loadImageFromURL:function(l,n){return v.loadImageFromURL(v.toDataURL(),"FilterImage").then(function(){v.addImageObject(l).then(function(){nt().revokeObjectURL(n)}),v._invoker.fire(xt.EXECUTE_COMMAND,ae.LOAD_MASK_IMAGE)})},applyFilter:function(){v.applyFilter("mask",{maskObjId:v.activeObjectId})}},this._commonAction())},_textAction:function(){var v=this;return(0,$.extend)({changeTextStyle:function(l,n){v.activeObjectId&&v.changeTextStyle(v.activeObjectId,l,n)}},this._commonAction())},_rotateAction:function(){var v=this;return(0,$.extend)({rotate:function(l,n){v.rotate(l,n),v.ui.resizeEditor(),v.ui.rotate.setRangeBarAngle("rotate",l)},setAngle:function(l,n){v.setAngle(l,n),v.ui.resizeEditor(),v.ui.rotate.setRangeBarAngle("setAngle",l)}},this._commonAction())},_shapeAction:function(){var v=this;return(0,$.extend)({changeShape:function(l,n){v.activeObjectId&&v.changeShape(v.activeObjectId,l,n)},setDrawingShape:function(l){v.setDrawingShape(l)}},this._commonAction())},_cropAction:function(){var v=this;return(0,$.extend)({crop:function(){var l=v.getCropzoneRect();l&&!Fo(l)&&v.crop(l).then(function(){v.stopDrawingMode(),v.ui.resizeEditor(),v.ui.changeMenu("crop"),v._invoker.fire(xt.EXECUTE_COMMAND,ae.CROP)}).catch(function(n){return Q().reject(n)})},cancel:function(){v.stopDrawingMode(),v.ui.changeMenu("crop")},preset:function(l){switch(l){case"preset-square":v.setCropzoneRect(1/1);break;case"preset-3-2":v.setCropzoneRect(3/2);break;case"preset-4-3":v.setCropzoneRect(4/3);break;case"preset-5-4":v.setCropzoneRect(5/4);break;case"preset-7-5":v.setCropzoneRect(7/5);break;case"preset-16-9":v.setCropzoneRect(16/9);break;default:v.setCropzoneRect(),v.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var v=this;return(0,$.extend)({getCurrentDimensions:function(){return v._graphics.getCurrentDimensions()},preview:function(l,n,u){var b=v._graphics.getCurrentDimensions(),T=function(){return b.width/b.height},B={};switch(l){case"width":B.width=n,u?B.height=n/T():B.height=b.height;break;case"height":B.height=n,u?B.width=n*T():B.width=b.width;break;default:B=b}v._graphics.resize(B).then(function(){v.ui.resizeEditor()}),u&&(v.ui.resize.setWidthValue(B.width),v.ui.resize.setHeightValue(B.height))},lockAspectRatio:function(l,n,u){var b=v._graphics.getCurrentDimensions(),T=b.width,B=b.height,N=T/B;if(l)if(T>B){var H=u/N,Z=n*N;v.ui.resize.setLimit({minWidth:Z>n?Z:n,minHeight:n,maxWidth:u,maxHeight:H<u?H:u})}else{var ut=u*N,ht=n/N;v.ui.resize.setLimit({minWidth:n,minHeight:ht>n?ht:n,maxWidth:ut<u?ut:u,maxHeight:u})}else v.ui.resize.setLimit({minWidth:n,minHeight:n,maxWidth:u,maxHeight:u})},resize:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l||(l=v._graphics.getCurrentDimensions()),v.resize(l).then(function(){v._graphics.setOriginalDimensions(l),v.stopDrawingMode(),v.ui.resizeEditor(),v.ui.changeMenu("resize")}).catch(function(n){return Q().reject(n)})},reset:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=v._graphics.getOriginalDimensions();v.ui.resize.setWidthValue(n.width,!0),v.ui.resize.setHeightValue(n.height,!0),v._graphics.resize(n).then(function(){l||(v.stopDrawingMode(),v.ui.resizeEditor(),v.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var v=this;return(0,$.extend)({flip:function(l){return v[l]()}},this._commonAction())},_filterAction:function(){var v=this;return(0,$.extend)({applyFilter:function(l,n,u,b){l?v.applyFilter(n,u,b):v.hasFilter(n)&&v.removeFilter(n)}},this._commonAction())},setReAction:function(){var v=this;this.on({undoStackChanged:function(l){l?(v.ui.changeHelpButtonEnabled("undo",!0),v.ui.changeHelpButtonEnabled("reset",!0)):(v.ui.changeHelpButtonEnabled("undo",!1),v.ui.changeHelpButtonEnabled("reset",!1)),v.ui.resizeEditor()},redoStackChanged:function(l){l?v.ui.changeHelpButtonEnabled("redo",!0):v.ui.changeHelpButtonEnabled("redo",!1),v.ui.resizeEditor()},objectActivated:function(l){var n,u;v.activeObjectId=l.id,v.ui.changeHelpButtonEnabled("delete",!0),v.ui.changeHelpButtonEnabled("deleteAll",!0),l.type==="cropzone"?v.ui.crop.changeApplyButtonStatus(!0):o()(n=["rect","circle","triangle"]).call(n,l.type)>-1?(v.stopDrawingMode(),v.ui.submenu!=="shape"&&v.ui.changeMenu("shape",!1,!1),v.ui.shape.setShapeStatus({strokeColor:l.stroke,strokeWidth:l.strokeWidth,fillColor:it()(l)}),v.ui.shape.setMaxStrokeValue(Math.min(l.width,l.height))):l.type==="path"||l.type==="line"?v.ui.submenu!=="draw"&&(v.ui.changeMenu("draw",!1,!1),v.ui.draw.changeStandbyMode()):o()(u=["i-text","text"]).call(u,l.type)>-1?(v.ui.submenu!=="text"&&v.ui.changeMenu("text",!1,!1),v.ui.text.setTextStyleStateOnAction(l)):l.type==="icon"&&(v.stopDrawingMode(),v.ui.submenu!=="icon"&&v.ui.changeMenu("icon",!1,!1),v.ui.icon.setIconPickerColor(it()(l)))},addText:function(l){var n=v.ui.text,u=n.textColor,b=n.fontSize,T=n.fontStyle,B=n.fontWeight,N=n.underline,H="Noto Sans";v.addText("Double Click",{position:l.originPosition,styles:{fill:u,fontSize:b,fontFamily:H,fontStyle:T,fontWeight:B,underline:N}}).then(function(){v.changeCursor("default")})},addObjectAfter:function(l){var n;l.type==="icon"?v.ui.icon.changeStandbyMode():o()(n=["rect","circle","triangle"]).call(n,l.type)>-1&&(v.ui.shape.setMaxStrokeValue(Math.min(l.width,l.height)),v.ui.shape.changeStandbyMode())},objectScaled:function(l){var n,u;if(o()(n=["i-text","text"]).call(n,l.type)>-1)v.ui.text.fontSize=Ne(l.fontSize);else if(o()(u=["rect","circle","triangle"]).call(u,l.type)>=0){var b=l.width,T=l.height,B=v.ui.shape.getStrokeValue();b<B&&v.ui.shape.setStrokeValue(b),T<B&&v.ui.shape.setStrokeValue(T)}},selectionCleared:function(){v.activeObjectId=null,v.ui.submenu==="text"?v.changeCursor("text"):ve(["draw","crop","resize"],v.ui.submenu)||v.stopDrawingMode()}})},_historyAction:function(){var v=this;return{undo:function(l){return v.undo(l)},redo:function(l){return v.redo(l)}}},_commonAction:function(){var v=this,a,l,n,u,b=oe.TEXT,T=oe.CROPPER,B=oe.SHAPE,N=oe.ZOOM,H=oe.RESIZE;return{modeChange:function(ut){switch(ut){case Se.TEXT:v._changeActivateMode(b);break;case Se.CROP:v.startDrawingMode(T);break;case Se.SHAPE:v._changeActivateMode(B),v.setDrawingShape(v.ui.shape.type,v.ui.shape.options);break;case Se.ZOOM:v.startDrawingMode(N);break;case Se.RESIZE:v.startDrawingMode(H);break}},deactivateAll:rt()(a=this.deactivateAll).call(a,this),changeSelectableAll:rt()(l=this.changeSelectableAll).call(l,this),discardSelection:rt()(n=this.discardSelection).call(n,this),stopDrawingMode:rt()(u=this.stopDrawingMode).call(u,this)}},mixin:function(v){(0,$.extend)(v.prototype,this)}},Ol=R(899),vi=R.n(Ol),Al=function(){function D(v,a){J(this,D),this.name=v,this.graphics=a}return st(D,[{key:"fire",value:function(){for(var a=this.graphics,l=arguments.length,n=new Array(l),u=0;u<l;u++)n[u]=arguments[u];return this.graphics.fire.apply(a,n)}},{key:"setCanvasImage",value:function(a,l){this.graphics.setCanvasImage(a,l)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(a,l){this.graphics.setImageProperties(a,l)}},{key:"setCanvasCssDimension",value:function(a){this.graphics.setCanvasCssDimension(a)}},{key:"setCanvasBackstoreDimension",value:function(a){this.graphics.setCanvasBackstoreDimension(a)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),D}(),Ge=Al;function kl(D){var v=Pl();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Pl(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Ll={padding:0,crossOrigin:"Anonymous"},Nl=function(D){ue(a,D);var v=kl(a);function a(l){return J(this,a),v.call(this,wt.IMAGE_LOADER,l)}return st(a,[{key:"load",value:function(n,u){var b=this,T;if(!n&&!u){var B=this.getCanvas();B.backgroundImage=null,B.renderAll(),T=new(Q())(function(N){b.setCanvasImage("",null),N()})}else T=this._setBackgroundImage(u).then(function(N){return b.setCanvasImage(n,N),b.adjustCanvasDimension(),N});return T}},{key:"_setBackgroundImage",value:function(n){var u=this;return n?new(Q())(function(b,T){var B=u.getCanvas();B.setBackgroundImage(n,function(){var N=B.backgroundImage;N&&N.getElement()?b(N):T(Rt.loadingImageFailed)},Ll)}):Q().reject(Rt.loadImage)}}]),a}(Ge),jl=Nl,Rl="tl",zl="tr",Bl="mt",Fl="ml",Hl="mr",Yl="mb",Ul="bl",Wl="br",Gr=[Rl,zl,Bl,Fl,Hl,Yl,Ul,Wl],Un=function(){};function Gl(D){return o()(Gr).call(Gr,D)>=0}function on(D,v){return D>v?"width":"height"}var Xl=G.fabric.util.createClass(G.fabric.Rect,{initialize:function(v,a,l){a=K().extend(a,l),a.type="cropzone",this.callSuper("initialize",a),this._addEventHandler(),this.canvas=v,this.options=a},canvasEventDelegation:function(v){var a,l="unregistered",n=this.canvasEventTrigger[v]!==Un;return n?l="registered":o()(a=[xt.OBJECT_MOVED,xt.OBJECT_SCALED]).call(a,v)<0&&(l="none"),l},canvasEventRegister:function(v,a){this.canvasEventTrigger[v]=a},_addEventHandler:function(){var v,a,l,n,u;this.canvasEventTrigger=(v={},X(v,xt.OBJECT_MOVED,Un),X(v,xt.OBJECT_SCALED,Un),v),this.on({moving:rt()(a=this._onMoving).call(a,this),scaling:rt()(l=this._onScaling).call(l,this)}),G.fabric.util.addListener(document,"keydown",rt()(n=this._onKeyDown).call(n,this)),G.fabric.util.addListener(document,"keyup",rt()(u=this._onKeyUp).call(u,this))},_renderCropzone:function(v){var a=7,l=7,n=this.flipX?-1:1,u=this.flipY?-1:1,b=n/this.scaleX,T=u/this.scaleY;v.scale(b,T),this._fillOuterRect(v,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(v),this._strokeBorder(v,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(v,"rgb(0, 0, 0)",{lineDashWidth:a}),this._strokeBorder(v,"rgb(255, 255, 255)",{lineDashWidth:a,lineDashOffset:l})),v.scale(1/b,1/T)},_render:function(v){this.callSuper("_render",v),this._renderCropzone(v)},_fillOuterRect:function(v,a){var l=this._getCoordinates(),n=l.x,u=l.y;v.save(),v.fillStyle=a,v.beginPath(),v.moveTo(n[0]-1,u[0]-1),v.lineTo(n[3]+1,u[0]-1),v.lineTo(n[3]+1,u[3]+1),v.lineTo(n[0]-1,u[3]+1),v.lineTo(n[0]-1,u[0]-1),v.closePath(),v.moveTo(n[1],u[1]),v.lineTo(n[1],u[2]),v.lineTo(n[2],u[2]),v.lineTo(n[2],u[1]),v.lineTo(n[1],u[1]),v.closePath(),it()(v).call(v),v.restore()},_fillInnerRect:function(v){var a=this._getCoordinates(),l=a.x,n=a.y,u=this._caculateInnerPosition(l,(l[2]-l[1])/3),b=this._caculateInnerPosition(n,(n[2]-n[1])/3);v.save(),v.strokeStyle="rgba(255, 255, 255, 0.7)",v.lineWidth=this.options.lineWidth,v.beginPath(),v.moveTo(u[0],b[1]),v.lineTo(u[3],b[1]),v.moveTo(u[0],b[2]),v.lineTo(u[3],b[2]),v.moveTo(u[1],b[0]),v.lineTo(u[1],b[3]),v.moveTo(u[2],b[0]),v.lineTo(u[2],b[3]),v.stroke(),v.closePath(),v.restore()},_caculateInnerPosition:function(v,a){var l=[];return l[0]=v[1],l[1]=v[1]+a,l[2]=v[1]+a*2,l[3]=v[2],l},_getCoordinates:function(){var v=this.canvas,a=this.width,l=this.height,n=this.left,u=this.top,b=a/2,T=l/2,B=v.getHeight(),N=v.getWidth();return{x:vi()(K()).call(K(),[-(b+n),-b,b,b+(N-n-a)],Math.ceil),y:vi()(K()).call(K(),[-(T+u),-T,T,T+(B-u-l)],Math.ceil)}},_strokeBorder:function(v,a,l){var n=l.lineDashWidth,u=l.lineDashOffset,b=l.lineWidth,T=this.width/2,B=this.height/2;v.save(),v.strokeStyle=a,v.setLineDash&&v.setLineDash([n,n]),u&&(v.lineDashOffset=u),b&&(v.lineWidth=b),v.beginPath(),v.moveTo(-T,-B),v.lineTo(T,-B),v.lineTo(T,B),v.lineTo(-T,B),v.lineTo(-T,-B),v.stroke(),v.restore()},_onMoving:function(){var v=this.height,a=this.width,l=this.left,n=this.top,u=this.canvas.getWidth()-a,b=this.canvas.getHeight()-v;this.left=Ae(l,0,u),this.top=Ae(n,0,b),this.canvasEventTrigger[xt.OBJECT_MOVED](this)},_onScaling:function(v){var a=v.transform.corner,l=this.canvas.getPointer(v.e),n=this._calcScalingSizeFromPointer(l,a);this.scale(1).set(n),this.canvasEventTrigger[xt.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(v,a){var l=Gl(a);return l&&this._resizeCropZone(v,a)},adjustRatioCropzoneSize:function(v){var a=v.width,l=v.height,n=v.leftMaker,u=v.topMaker,b=v.maxWidth,T=v.maxHeight,B=v.scaleTo;if(a=b?Ae(a,1,b):a,l=T?Ae(l,1,T):l,!this.presetRatio)return this._withShiftKey&&(a>l?l=a:l>a&&(a=l)),{width:a,height:l,left:n(a),top:u(l)};B==="width"?l=a/this.presetRatio:a=l*this.presetRatio;var N=Math.min(b/a,T/l);if(N<=1){var H,Z=vi()(H=[a,l]).call(H,function(ht){return ht*N}),ut=yt(Z,2);a=ut[0],l=ut[1]}return{width:a,height:l,left:n(a),top:u(l)}},_getCropzoneRectInfo:function(){var v=this.canvas,a=v.width,l=v.height,n=this.getBoundingRect(!1,!0),u=n.top,b=n.left,T=n.width,B=n.height;return{rectTop:u,rectLeft:b,rectWidth:T,rectHeight:B,rectRight:b+T,rectBottom:u+B,canvasWidth:a,canvasHeight:l}},_resizeCropZone:function(v,a){var l=v.x,n=v.y,u=this._getCropzoneRectInfo(),b=u.rectWidth,T=u.rectHeight,B=u.rectTop,N=u.rectLeft,H=u.rectBottom,Z=u.rectRight,ut=u.canvasWidth,ht=u.canvasHeight,gt={tl:{width:Z-l,height:H-n,leftMaker:function(pt){return Z-pt},topMaker:function(pt){return H-pt},maxWidth:Z,maxHeight:H,scaleTo:on(N-l,B-n)},tr:{width:l-N,height:H-n,leftMaker:function(){return N},topMaker:function(pt){return H-pt},maxWidth:ut-N,maxHeight:H,scaleTo:on(l-Z,B-n)},mt:{width:b,height:H-n,leftMaker:function(){return N},topMaker:function(pt){return H-pt},maxWidth:ut-N,maxHeight:H,scaleTo:"height"},ml:{width:Z-l,height:T,leftMaker:function(pt){return Z-pt},topMaker:function(){return B},maxWidth:Z,maxHeight:ht-B,scaleTo:"width"},mr:{width:l-N,height:T,leftMaker:function(){return N},topMaker:function(){return B},maxWidth:ut-N,maxHeight:ht-B,scaleTo:"width"},mb:{width:b,height:n-B,leftMaker:function(){return N},topMaker:function(){return B},maxWidth:ut-N,maxHeight:ht-B,scaleTo:"height"},bl:{width:Z-l,height:n-B,leftMaker:function(pt){return Z-pt},topMaker:function(){return B},maxWidth:Z,maxHeight:ht-B,scaleTo:on(N-l,n-H)},br:{width:l-N,height:n-B,leftMaker:function(){return N},topMaker:function(){return B},maxWidth:ut-N,maxHeight:ht-B,scaleTo:on(l-Z,n-H)}};return this.adjustRatioCropzoneSize(gt[a])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(v){var a=v.keyCode;a===Dt.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(v){var a=v.keyCode;a===Dt.SHIFT&&(this._withShiftKey=!1)}}),Zl=Xl;function Vl(D){var v=Jl();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Jl(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Ql=10,Kl={presetRatio:null,top:-10,left:-10,height:1,width:1},$l=function(D){ue(a,D);var v=Vl(a);function a(l){var n,u,b,T,B,N;return J(this,a),N=v.call(this,wt.CROPPER,l),N._cropzone=null,N._startX=null,N._startY=null,N._withShiftKey=!1,N._listeners={keydown:rt()(n=N._onKeyDown).call(n,ce(N)),keyup:rt()(u=N._onKeyUp).call(u,ce(N)),mousedown:rt()(b=N._onFabricMouseDown).call(b,ce(N)),mousemove:rt()(T=N._onFabricMouseMove).call(T,ce(N)),mouseup:rt()(B=N._onFabricMouseUp).call(B,ce(N))},N}return st(a,[{key:"start",value:function(){if(!this._cropzone){var n=this.getCanvas();n.forEachObject(function(u){u.evented=!1}),this._cropzone=new Zl(n,K().extend({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},ge,this.graphics.cropSelectionStyle)),n.discardActiveObject(),n.add(this._cropzone),n.on("mouse:down",this._listeners.mousedown),n.selection=!1,n.defaultCursor="crosshair",G.fabric.util.addListener(document,"keydown",this._listeners.keydown),G.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var n=this.getCanvas(),u=this._cropzone;!u||(n.remove(u),n.selection=!0,n.defaultCursor="default",n.off("mouse:down",this._listeners.mousedown),n.forEachObject(function(b){b.evented=!0}),this._cropzone=null,G.fabric.util.removeListener(document,"keydown",this._listeners.keydown),G.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(n){this._cropzone&&this._cropzone.set({visible:n})}},{key:"_onFabricMouseDown",value:function(n){var u=this.getCanvas();if(!n.target){u.selection=!1;var b=u.getPointer(n.e);this._startX=b.x,this._startY=b.y,u.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(n){var u=this.getCanvas(),b=u.getPointer(n.e),T=b.x,B=b.y,N=this._cropzone;Math.abs(T-this._startX)+Math.abs(B-this._startY)>Ql&&(u.remove(N),N.set(this._calcRectDimensionFromPoint(T,B)),u.add(N),u.setActiveObject(N))}},{key:"_calcRectDimensionFromPoint",value:function(n,u){var b=this.getCanvas(),T=b.getWidth(),B=b.getHeight(),N=this._startX,H=this._startY,Z=Ae(n,0,N),ut=Ae(u,0,H),ht=Ae(n,N,T)-Z,gt=Ae(u,H,B)-ut;return this._withShiftKey&&(ht>gt?gt=ht:gt>ht&&(ht=gt),N>=n&&(Z=N-ht),H>=u&&(ut=H-gt)),{left:Z,top:ut,width:ht,height:gt}}},{key:"_onFabricMouseUp",value:function(){var n=this._cropzone,u=this._listeners,b=this.getCanvas();b.setActiveObject(n),b.off({"mouse:move":u.mousemove,"mouse:up":u.mouseup})}},{key:"getCroppedImageData",value:function(n){var u=this.getCanvas(),b=u.contains(this._cropzone);if(!n)return null;b&&u.remove(this._cropzone);var T={imageName:this.getImageName(),url:u.toDataURL(n)};return b&&u.add(this._cropzone),T}},{key:"getCropzoneRect",value:function(){var n=this._cropzone;return n.isValid()?{left:n.left,top:n.top,width:n.width,height:n.height}:null}},{key:"setCropzoneRect",value:function(n){var u=this.getCanvas(),b=this._cropzone;u.discardActiveObject(),u.selection=!1,u.remove(b),b.set(n?this._getPresetPropertiesForCropSize(n):Kl),u.add(b),u.selection=!0,n&&u.setActiveObject(b)}},{key:"_getPresetPropertiesForCropSize",value:function(n){var u=this.getCanvas(),b=u.getWidth(),T=u.getHeight(),B=b>=T?b:T,N=function(qt,te){return qt>te?te/qt:1},H=B*n,Z=B,ut=N(H,b),ht=vi()(K()).call(K(),[H,Z],function(Qt){return Qt*ut}),gt=yt(ht,2);H=gt[0],Z=gt[1];var vt=N(Z,T),pt=vi()(K()).call(K(),[H,Z],function(Qt){return tt(Qt*vt)}),Nt=yt(pt,2);return H=Nt[0],Z=Nt[1],{presetRatio:n,top:(T-Z)/2,left:(b-H)/2,width:H,height:Z}}},{key:"_onKeyDown",value:function(n){n.keyCode===Dt.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(n){n.keyCode===Dt.SHIFT&&(this._withShiftKey=!1)}}]),a}(Ge),ql=$l;function tc(D){var v=ec();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ec(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var ic=function(D){ue(a,D);var v=tc(a);function a(l){return J(this,a),v.call(this,wt.FLIP,l)}return st(a,[{key:"getCurrentSetting",value:function(){var n=this.getCanvasImage();return{flipX:n.flipX,flipY:n.flipY}}},{key:"set",value:function(n){var u=this.getCurrentSetting(),b=u.flipX!==n.flipX,T=u.flipY!==n.flipY;return!b&&!T?Q().reject(Rt.flip):(K().extend(u,n),this.setImageProperties(u,!0),this._invertAngle(b,T),this._flipObjects(b,T),Q().resolve({flipX:u.flipX,flipY:u.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(n,u){var b=this.getCanvasImage(),T=b.angle;n&&(T*=-1),u&&(T*=-1),b.rotate(si()(T)).setCoords()}},{key:"_flipObjects",value:function(n,u){var b=this.getCanvas();n&&b.forEachObject(function(T){T.set({angle:si()(T.angle*-1),flipX:!T.flipX,left:b.width-T.left}).setCoords()}),u&&b.forEachObject(function(T){T.set({angle:si()(T.angle*-1),flipY:!T.flipY,top:b.height-T.top}).setCoords()}),b.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var n=this.getCurrentSetting();return this.set({flipX:!n.flipX,flipY:n.flipY})}},{key:"flipY",value:function(){var n=this.getCurrentSetting();return this.set({flipX:n.flipX,flipY:!n.flipY})}}]),a}(Ge),nc=ic;function rc(D){var v=ac();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ac(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var oc=function(D){ue(a,D);var v=rc(a);function a(l){return J(this,a),v.call(this,wt.ROTATION,l)}return st(a,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(n){var u=this.getCurrentAngle()%360;n%=360;var b=this.getCanvasImage(),T=b.getCenterPoint();b.set({angle:n}).setCoords(),this.adjustCanvasDimension();var B=b.getCenterPoint();return this._rotateForEachObject(T,B,n-u),Q().resolve(n)}},{key:"_rotateForEachObject",value:function(n,u,b){var T=this.getCanvas(),B={x:n.x-u.x,y:n.y-u.y};T.forEachObject(function(N){var H=N.getCenterPoint(),Z=G.fabric.util.degreesToRadians(b),ut=G.fabric.util.rotatePoint(H,n,Z);N.set({left:ut.x-B.x,top:ut.y-B.y,angle:(N.angle+b)%360}),N.setCoords()}),T.renderAll()}},{key:"rotate",value:function(n){var u=this.getCurrentAngle();return this.setAngle(u+n)}}]),a}(Ge),sc=oc;function lc(D){var v=cc();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function cc(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var uc=function(D){ue(a,D);var v=lc(a);function a(l){var n;return J(this,a),n=v.call(this,wt.FREE_DRAWING,l),n.width=12,n.oColor=new G.fabric.Color("rgba(0, 0, 0, 0.5)"),n}return st(a,[{key:"start",value:function(n){var u=this.getCanvas();u.isDrawingMode=!0,this.setBrush(n)}},{key:"setBrush",value:function(n){var u=this.getCanvas().freeDrawingBrush;n=n||{},this.width=n.width||this.width,n.color&&(this.oColor=new G.fabric.Color(n.color)),u.width=this.width,u.color=this.oColor.toRgba()}},{key:"end",value:function(){var n=this.getCanvas();n.isDrawingMode=!1}}]),a}(Ge),hc=uc,Xr=30,fc=2.7,dc=1.7,Zr=180,gc=G.fabric.util.createClass(G.fabric.Line,{type:"line",initialize:function(v){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",v,a),this.arrowType=a.arrowType},_render:function(v){var a=this.calcLinePoints(),l=a.x1,n=a.y1,u=a.x2,b=a.y2,T={fromX:l,fromY:n,toX:u,toY:b};this.ctx=v,v.lineWidth=this.strokeWidth,this._renderBasicLinePath(T),this._drawDecoratorPath(T),this._renderStroke(v)},_renderBasicLinePath:function(v){var a=v.fromX,l=v.fromY,n=v.toX,u=v.toY;this.ctx.beginPath(),this.ctx.moveTo(a,l),this.ctx.lineTo(n,u)},_drawDecoratorPath:function(v){this._drawDecoratorPathType("head",v),this._drawDecoratorPathType("tail",v)},_drawDecoratorPathType:function(v,a){switch(this.arrowType[v]){case"triangle":this._drawTrianglePath(v,a);break;case"chevron":this._drawChevronPath(v,a);break}},_drawTrianglePath:function(v,a){var l=this.ctx.lineWidth*dc;this._drawChevronPath(v,a,l),this.ctx.closePath()},_drawChevronPath:function(v,a,l){var n=this,u=a.fromX,b=a.fromY,T=a.toX,B=a.toY,N=this.ctx;l||(l=this.ctx.lineWidth*fc);var H=v==="head"?[u,b]:[T,B],Z=yt(H,2),ut=Z[0],ht=Z[1],gt=v==="head"?[T,B]:[u,b],vt=yt(gt,2),pt=vt[0],Nt=vt[1],Qt=Math.atan2(Nt-ht,pt-ut)*Zr/Math.PI,qt=function(Ut){return n.getRotatePosition(l,Ut,{x:ut,y:ht})};N.moveTo.apply(N,F(qt(Qt+Xr))),N.lineTo(ut,ht),N.lineTo.apply(N,F(qt(Qt-Xr)))},getRotatePosition:function(v,a,l){var n=a*Math.PI/Zr,u=l.x,b=l.y;return[v*Math.cos(n)+u,v*Math.sin(n)+b]}}),vc=gc;function pc(D){var v=mc();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function mc(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var yc=function(D){ue(a,D);var v=pc(a);function a(l){var n,u,b,T;return J(this,a),T=v.call(this,wt.LINE,l),T._width=12,T._oColor=new G.fabric.Color("rgba(0, 0, 0, 0.5)"),T._listeners={mousedown:rt()(n=T._onFabricMouseDown).call(n,ce(T)),mousemove:rt()(u=T._onFabricMouseMove).call(u,ce(T)),mouseup:rt()(b=T._onFabricMouseUp).call(b,ce(T))},T}return st(a,[{key:"setHeadOption",value:function(n){var u=n.arrowType,b=u===void 0?{head:null,tail:null}:u;this._arrowType=b}},{key:"start",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=this.getCanvas();u.defaultCursor="crosshair",u.selection=!1,this.setHeadOption(n),this.setBrush(n),u.forEachObject(function(b){b.set({evented:!1})}),u.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(n){var u=this.getCanvas().freeDrawingBrush;n=n||{},this._width=n.width||this._width,n.color&&(this._oColor=new G.fabric.Color(n.color)),u.width=this._width,u.color=this._oColor.toRgba()}},{key:"end",value:function(){var n=this.getCanvas();n.defaultCursor="default",n.selection=!0,n.forEachObject(function(u){u.set({evented:!0})}),n.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(n){var u=this.getCanvas(),b=u.getPointer(n.e),T=b.x,B=b.y,N=[T,B,T,B];this._line=new vc(N,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Ft.SELECTION_STYLE),u.add(this._line),u.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(xt.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(n){var u=this.getCanvas(),b=u.getPointer(n.e);this._line.set({x2:b.x,y2:b.y}),this._line.setCoords(),u.renderAll()}},{key:"_onFabricMouseUp",value:function(){var n=this.getCanvas();this.fire(xt.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,n.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var n=this.graphics.createObjectProperties(this._line),u=this._line,b=u.x1,T=u.x2,B=u.y1,N=u.y2;return K().extend({},n,{startPosition:{x:b,y:B},endPosition:{x:T,y:N}})}}]),a}(Ge),Cc=yc;function bc(D){var v=xc();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function xc(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Sc={fill:"#000000",left:0,top:0},Ic={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},Mc=500,_c=function(D){ue(a,D);var v=bc(a);function a(l){var n,u,b,T,B,N;return J(this,a),N=v.call(this,wt.TEXT,l),N._defaultStyles=Sc,N._isSelected=!1,N._selectedObj={},N._editingObj={},N._listeners={mousedown:rt()(n=N._onFabricMouseDown).call(n,ce(N)),select:rt()(u=N._onFabricSelect).call(u,ce(N)),selectClear:rt()(b=N._onFabricSelectClear).call(b,ce(N)),scaling:rt()(T=N._onFabricScaling).call(T,ce(N)),textChanged:rt()(B=N._onFabricTextChanged).call(B,ce(N))},N._textarea=null,N._ratio=1,N._lastClickTime=new Date().getTime(),N._editingObjInfos={},N.isPrevEditing=!1,N}return st(a,[{key:"start",value:function(){var n=this,u=this.getCanvas();u.selection=!1,u.defaultCursor="text",u.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),u.forEachObject(function(b){b.type==="i-text"&&n.adjustOriginPosition(b,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var n=this,u=this.getCanvas();u.selection=!0,u.defaultCursor="default",u.forEachObject(function(b){b.type==="i-text"&&(b.text===""?u.remove(b):n.adjustOriginPosition(b,"end"))}),u.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(n,u){var b="center",T="center";u==="start"&&(b="left",T="top");var B=n.getPointByOrigin(b,T),N=B.x,H=B.y;n.set({left:N,top:H,originX:b,originY:T}),n.setCoords()}},{key:"add",value:function(n,u){var b=this;return new(Q())(function(T){var B,N=b.getCanvas(),H=null,Z=Ft.SELECTION_STYLE,ut=b._defaultStyles;b._setInitPos(u.position),u.styles&&(ut=K().extend(ut,u.styles)),K().isExisty(u.autofocus)||(u.autofocus=!0),H=new G.fabric.IText(n,ut),Z=K().extend({},Z,{originX:"left",originY:"top"}),H.set(Z),H.on({mouseup:rt()(B=b._onFabricMouseUp).call(B,b)}),N.add(H),u.autofocus&&(H.enterEditing(),H.selectAll()),N.getActiveObject()||N.setActiveObject(H),b.isPrevEditing=!0,T(b.graphics.createObjectProperties(H))})}},{key:"change",value:function(n,u){var b=this;return new(Q())(function(T){n.set("text",u),b.getCanvas().renderAll(),T()})}},{key:"setStyle",value:function(n,u){var b=this;return new(Q())(function(T){It()(K()).call(K(),u,function(B,N){n[N]===B&&N!=="fontSize"&&(u[N]=Ic[N]||"")},b),"textDecoration"in u&&K().extend(u,b._getTextDecorationAdaptObject(u.textDecoration)),n.set(u),b.getCanvas().renderAll(),T()})}},{key:"getText",value:function(n){return n.text}},{key:"setSelectedInfo",value:function(n,u){this._selectedObj=n,this._isSelected=u}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var n=this.getCanvasElement(),u=Tt()(n.style.maxWidth,10),b=n.width;this._ratio=b/u}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(n){return{underline:n==="underline",linethrough:n==="line-through",overline:n==="overline"}}},{key:"_setInitPos",value:function(n){n=n||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=n.x,this._defaultStyles.top=n.y}},{key:"_onInput",value:function(){var n=this.getCanvasRatio(),u=this._editingObj,b=this._textarea.style;b.width="".concat(Math.ceil(u.width/n),"px"),b.height="".concat(Math.ceil(u.height/n),"px")}},{key:"_onKeyDown",value:function(){var n=this,u=this.getCanvasRatio(),b=this._editingObj,T=this._textarea.style;t()(function(){b.text(n._textarea.value),T.width="".concat(Math.ceil(b.width/u),"px"),T.height="".concat(Math.ceil(b.height/u),"px")},0)}},{key:"_onBlur",value:function(){var n=this.getCanvasRatio(),u=this._editingObj,b=this._editingObjInfos,T=this._textarea.value,B=u.width/n-b.width/n,N=u.height/n-b.height/n;if(n===1&&(B/=2,N/=2),this._textarea.style.display="none",u.set({left:b.left+B,top:b.top+N}),T.length){this.getCanvas().add(u);var H={id:K().stamp(u),type:u.type,text:T};this.fire(xt.TEXT_CHANGED,H)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(n){var u=n.target;u.fontSize=u.fontSize*u.scaleY,u.scaleX=1,u.scaleY=1}},{key:"_onFabricTextChanged",value:function(n){this.fire(xt.TEXT_CHANGED,n.target)}},{key:"_onFabricSelectClear",value:function(n){var u=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(n.target,!1),u&&u.text===""&&this.getCanvas().remove(u)}},{key:"_onFabricSelect",value:function(n){this.isPrevEditing=!0,this.setSelectedInfo(n.target,!0)}},{key:"_onFabricMouseDown",value:function(n){var u=n.target;if(!(u&&!u.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(n)}}},{key:"_fireAddText",value:function(n){var u=n.target,b=n.e||{},T=this.getCanvas().getPointer(b);u||this.fire(xt.ADD_TEXT,{originPosition:{x:T.x,y:T.y},clientPosition:{x:b.clientX||0,y:b.clientY||0}})}},{key:"_onFabricMouseUp",value:function(n){var u=n.target,b=new Date().getTime();this._isDoubleClick(b)&&!u.isEditing&&u.enterEditing(),u.isEditing&&this.fire(xt.TEXT_EDITING),this._lastClickTime=b}},{key:"_isDoubleClick",value:function(n){return n-this._lastClickTime<Mc}}]),a}(Ge),Ec=_c;function Tc(D){var v=wc();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function wc(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Dc={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Oc=function(D){ue(a,D);var v=Tc(a);function a(l){var n,u,b,T;return J(this,a),T=v.call(this,wt.ICON,l),T._oColor="#000000",T._pathMap=Dc,T._type=null,T._iconColor=null,T._handlers={mousedown:rt()(n=T._onFabricMouseDown).call(n,ce(T)),mousemove:rt()(u=T._onFabricMouseMove).call(u,ce(T)),mouseup:rt()(b=T._onFabricMouseUp).call(b,ce(T))},T}return st(a,[{key:"setStates",value:function(n,u){this._type=n,this._iconColor=u}},{key:"start",value:function(){var n=this.getCanvas();n.selection=!1,n.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var n=this.getCanvas();n.selection=!0,n.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(n,u){var b=this;return new(Q())(function(T,B){var N=b.getCanvas(),H=b._pathMap[n],Z=Ft.SELECTION_STYLE,ut=H?b._createIcon(H):null;b._icon=ut,ut||B(Rt.invalidParameters),ut.set(K().extend({type:"icon",fill:b._oColor},Z,u,b.graphics.controlStyle)),N.add(ut).setActiveObject(ut),T(b.graphics.createObjectProperties(ut))})}},{key:"registerPaths",value:function(n){var u=this;It()(K()).call(K(),n,function(b,T){u._pathMap[T]=b},this)}},{key:"setColor",value:function(n,u){this._oColor=n,u&&u.get("type")==="icon"&&(u.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(n){return it()(n)}},{key:"_createIcon",value:function(n){return new G.fabric.Path(n)}},{key:"_onFabricMouseDown",value:function(n){var u=this,b=this.getCanvas();this._startPoint=b.getPointer(n.e);var T=this._startPoint,B=T.x,N=T.y;this.add(this._type,{left:B,top:N,fill:this._iconColor}).then(function(){u.fire(xt.ADD_OBJECT,u.graphics.createObjectProperties(u._icon)),b.on("mouse:move",u._handlers.mousemove),b.on("mouse:up",u._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(n){var u=this.getCanvas();if(!!this._icon){var b=u.getPointer(n.e),T=(b.x-this._startPoint.x)/this._icon.width,B=(b.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(T*2),scaleY:Math.abs(B*2)}),this._icon.setCoords(),u.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var n=this.getCanvas();this.fire(xt.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,n.off("mouse:down",this._handlers.mousedown),n.off("mouse:move",this._handlers.mousemove),n.off("mouse:up",this._handlers.mouseup)}}]),a}(Ge),Ac=Oc,kc=G.fabric.util.createClass(G.fabric.Image.filters.BlendImage,{applyTo:function(v){if(!!this.mask){var a=v.canvasEl,l=a.width,n=a.height,u=this._createCanvasOfMask(l,n),b=a.getContext("2d"),T=u.getContext("2d"),B=b.getImageData(0,0,l,n);this._drawMask(T,a,b),this._mapData(T,B,l,n),v.imageData=B}},_createCanvasOfMask:function(v,a){var l=G.fabric.util.createCanvasElement();return l.width=v,l.height=a,l},_drawMask:function(v){var a=this.mask,l=a.getElement(),n=a.angle,u=a.left,b=a.scaleX,T=a.scaleY,B=a.top;v.save(),v.translate(u,B),v.rotate(n*Math.PI/180),v.scale(b,T),v.drawImage(l,-l.width/2,-l.height/2),v.restore()},_mapData:function(v,a,l,n){for(var u=a.data,b=a.height,T=a.width,B=u,N=T*b*4,H=v.getImageData(0,0,l,n).data,Z=0;Z<N;Z+=4)B[Z+3]=H[Z]}}),Pc=kc,Lc=G.fabric.util.createClass(G.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Nc=Lc,jc=G.fabric.util.createClass(G.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Rc=jc,zc=G.fabric.util.createClass(G.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(v){v||(v={}),this.color=v.color||"#FFFFFF",this.threshold=v.threshold||45,this.x=v.x||null,this.y=v.y||null},applyTo:function(v){var a=v.canvasEl,l=a.getContext("2d"),n=l.getImageData(0,0,a.width,a.height),u=n.data,b=this.threshold,T=G.fabric.Color.sourceFromHex(this.color),B,N;for(this.x&&this.y&&(T=this._getColor(n,this.x,this.y)),B=0,N=u.length;B<N;B+=4)this._isOutsideThreshold(u[B],T[0],b)||this._isOutsideThreshold(u[B+1],T[1],b)||this._isOutsideThreshold(u[B+2],T[2],b)||(u[B]=u[B+1]=u[B+2]=u[B+3]=0);l.putImageData(n,0,0)},_isOutsideThreshold:function(v,a,l){var n=v-a;return Math.abs(n)>l},_getColor:function(v,a,l){var n=[0,0,0,0],u=v.data,b=v.width,T=4,B=(b*l+a)*T;return n[0]=u[B],n[1]=u[B+1],n[2]=u[B+2],n[3]=u[B+3],n}}),Bc=zc;function Fc(D){var v=Hc();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Hc(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var sn=G.fabric.Image.filters;sn.Mask=Pc,sn.Sharpen=Nc,sn.Emboss=Rc,sn.ColorFilter=Bc;var Yc=function(D){ue(a,D);var v=Fc(a);function a(l){return J(this,a),v.call(this,wt.FILTER,l)}return st(a,[{key:"add",value:function(n,u){var b=this;return new(Q())(function(T,B){var N=b._getSourceImage(),H=b.getCanvas(),Z=b._getFilter(N,n);Z||(Z=b._createFilter(N,n,u)),Z||B(Rt.invalidParameters),b._changeFilterValues(Z,u),b._apply(N,function(){H.renderAll(),T({type:n,action:"add",options:u})})})}},{key:"remove",value:function(n){var u=this;return new(Q())(function(b,T){var B=u._getSourceImage(),N=u.getCanvas(),H=u.getOptions(n);B.filters.length||T(Rt.unsupportedOperation),u._removeFilter(B,n),u._apply(B,function(){N.renderAll(),b({type:n,action:"remove",options:H})})})}},{key:"hasFilter",value:function(n){return!!this._getFilter(this._getSourceImage(),n)}},{key:"getOptions",value:function(n){var u=this._getSourceImage(),b=this._getFilter(u,n);return b?(0,$.extend)({},b.options):null}},{key:"_changeFilterValues",value:function(n,u){(0,$.forEach)(u,function(b,T){(0,$.isUndefined)(n[T])||(n[T]=b)}),(0,$.forEach)(n.options,function(b,T){(0,$.isUndefined)(u[T])||(n.options[T]=u[T])})}},{key:"_apply",value:function(n,u){n.filters.push();var b=n.applyFilters();b&&u()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(n,u,b){var T,B=this._getFabricFilterType(u),N=G.fabric.Image.filters[B];return N&&(T=new N(b),T.options=b,n.filters.push(T)),T}},{key:"_getFilter",value:function(n,u){var b=null;if(n){var T=this._getFabricFilterType(u),B=n.filters.length,N,H;for(H=0;H<B;H+=1)if(N=n.filters[H],N.type===T){b=N;break}}return b}},{key:"_removeFilter",value:function(n,u){var b=this._getFabricFilterType(u);n.filters=(0,$.filter)(n.filters,function(T){return T.type!==b})}},{key:"_getFabricFilterType",value:function(n){return n.charAt(0).toUpperCase()+g()(n).call(n,1)}}]),a}(Ge),Uc=Yc,Wc=R(1801),ni=R.n(Wc),Vr={pixelate:"blocksize",blur:"blur"},Wn={x:"width",y:"height"},Gc=Ht(Vr),Hi=null;function ln(D){var v=Jt(D,"patternSourceCanvas"),a=v.patternSourceCanvas,l=a.getObjects(),n=yt(l,1),u=n[0];return u}function Xc(D){var v=D.angle,a=D.flipX,l=D.flipY,n=ln(D),u=ru(D),b=u.right,T=u.bottom,B=u.width,N=u.height,H=(B-D.width)/2,Z=(N-D.height)/2,ut=D.left-D.width/2-H,ht=D.top-D.height/2-Z,gt=B/2-H,vt=N/2-Z,pt=Math.max(B,N)+Math.max(H,Z),Nt=Zc({shapeObj:D,left:gt,top:vt,width:B,height:N,cropX:ut,cropY:ht,flipX:a,flipY:l,right:b,bottom:T}),Qt=yt(Nt,4);gt=Qt[0],vt=Qt[1],B=Qt[2],N=Qt[3],n.set({angle:a===l?-v:v,left:gt,top:vt,width:B,height:N,cropX:ut,cropY:ht,flipX:a,flipY:l}),re(n,{fillImageMaxSize:pt})}function Gn(D){return(0,$.map)(D.filters,function(v){var a=at()(v),l=yt(a,1),n=l[0];return X({},Gc[n],v[n])})}function Zc(D){var v=D.shapeObj,a=D.left,l=D.top,n=D.width,u=D.height,b=D.cropX,T=D.cropY,B=D.flipX,N=D.flipY,H=D.right,Z=D.bottom,ut=function(te,Ut,de,ke){return $c({type:te,outDistance:Ut,shapeObj:v,flipX:B,flipY:N,left:de,top:ke})},ht=n,gt=u,vt=Jc(ut,{left:a,top:l,width:n,height:u,cropX:b,cropY:T}),pt=yt(vt,4);a=pt[0],l=pt[1],n=pt[2],u=pt[3];var Nt=Vc(ut,{left:a,top:l,insideCanvasRealImageWidth:n,insideCanvasRealImageHeight:u,right:H,bottom:Z,cropX:b,cropY:T,originalWidth:ht,originalHeight:gt}),Qt=yt(Nt,4);return a=Qt[0],l=Qt[1],n=Qt[2],u=Qt[3],[a,l,n,u]}function Vc(D,v){var a=v.left,l=v.top,n=v.insideCanvasRealImageWidth,u=v.insideCanvasRealImageHeight,b=v.right,T=v.bottom,B=v.cropX,N=v.cropY,H=v.originalWidth,Z=v.originalHeight,ut=n,ht=u,gt=Hi,vt=gt.width,pt=gt.height;b>vt&&B>0&&(ut=H-Math.abs(b-vt)),T>pt&&N>0&&(ht=Z-Math.abs(T-pt));var Nt={x:(n-ut)/2,y:(u-ht)/2};return(0,$.forEach)(["x","y"],function(Qt){var qt=Nt[Qt];if(qt>0){var te=D(Qt,qt,a,l),Ut=yt(te,2);a=Ut[0],l=Ut[1]}}),[a,l,ut,ht]}function Jc(D,v){var a=v.left,l=v.top,n=v.width,u=v.height,b=v.cropX,T=v.cropY,B={width:n,height:u};return(0,$.forEach)(["x","y"],function(N){var H=N==="x"?b:T,Z=B[Wn[N]],ut=Hi[Wn[N]];if(Z>ut){var ht=(Z-ut)/2;B[Wn[N]]=ut;var gt=D(N,ht,a,l),vt=yt(gt,2);a=vt[0],l=vt[1]}if(H<0){var pt=D(N,H,a,l),Nt=yt(pt,2);a=Nt[0],l=Nt[1]}}),[a,l,B.width,B.height]}function Jr(D,v,a){var l=Qr(D),n=$r(l,D.angle,v);a.add(n);var u={fill:new G.fabric.Pattern({source:a.getElement(),repeat:"no-repeat"})};return re(u,{patternSourceCanvas:a}),u}function Qc(D){var v=D.getObjects(),a=yt(v,1),l=a[0],n=Jt(l,"fillImageMaxSize"),u=n.fillImageMaxSize;u=Math.max(1,u),D.setDimensions({width:u,height:u}),D.renderAll()}function Kc(D,v){var a=Jt(D,"patternSourceCanvas"),l=a.patternSourceCanvas,n=l.getObjects(),u=yt(n,1),b=u[0],T=Gn(b);l.remove(b);var B=Qr(v,!0),N=$r(B,v.angle,T);l.add(N)}function Qr(D){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!Hi||v)&&(Hi=D.toCanvasElement()),Hi}function $c(D){var v=D.type,a=D.shapeObj,l=D.outDistance,n=D.left,u=D.top,b=D.flipX,T=D.flipY,B=Kr(a),N=[[1,2],[0,3],[0,3],[1,2]],H=tu(v,B,N),Z=eu(v,B,H),ut=H.startPointIndex,ht=qc({outDistance:l,startPointIndex:ut,flipX:b,flipY:T,reatAngles:Z});return[n+ht.left,u+ht.top]}function qc(D){var v=D.outDistance,a=D.startPointIndex,l=D.flipX,n=D.flipY,u=D.reatAngles,b=v*Math.cos(u[0]*Math.PI/180),T=v*Math.cos(u[1]*Math.PI/180),B=a===2||a===3,N={top:B?b:T,left:B?T:b};return iu(a,l,n)&&(N.left=N.left*-1),nu(a,l,n)&&(N.top=N.top*-1),N}function tu(D,v,a){var l=0,n=0;(0,$.forEach)(v,function(B,N){B[D]<l&&(l=B[D],n=N)});var u=yt(a[n],2),b=u[0],T=u[1];return{startPointIndex:n,endPointIndex1:b,endPointIndex2:T}}function eu(D,v,a){var l=a.startPointIndex,n=a.endPointIndex1,u=a.endPointIndex2,b=D==="x"?180:270;return(0,$.map)([n,u],function(T){var B=v[l],N=v[T],H=B.y-N.y,Z=B.x-N.x;return Math.atan2(H,Z)*180/Math.PI-b})}function iu(D,v,a){return(!v&&a||!v&&!a)&&D===0||(v&&a||v&&!a)&&D===1||(!v&&!a||!v&&a)&&D===2||(v&&!a||v&&a)&&D===3}function nu(D,v,a){return(v&&!a||!v&&!a)&&D===0||(!v&&!a||v&&!a)&&D===1||(v&&a||!v&&a)&&D===2||(!v&&a||v&&a)&&D===3}function Kr(D){return[D.getPointByOrigin("left","top"),D.getPointByOrigin("right","top"),D.getPointByOrigin("left","bottom"),D.getPointByOrigin("right","bottom")]}function ru(D){var v=Kr(D),a=yt(v,4),l=a[0],n=l.x,u=l.y,b=a[1],T=b.x,B=b.y,N=a[2],H=N.x,Z=N.y,ut=a[3],ht=ut.x,gt=ut.y,vt=Math.min(n,T,H,ht),pt=Math.min(u,B,Z,gt),Nt=Math.max(n,T,H,ht),Qt=Math.max(u,B,Z,gt);return{left:vt,top:pt,right:Nt,bottom:Qt,width:Nt-vt,height:Qt-pt}}function $r(D,v,a){var l,n=new G.fabric.Image(D);return(0,$.forEach)($.extend.apply(void 0,V()(l=[{}]).call(l,F(a))),function(u,b){var T=fe(b),B=new G.fabric.Image.filters[T](X({},Vr[b],u));n.filters.push(B)}),n.applyFilters(),re(n,{originalAngle:v,fillImageMaxSize:Math.max(n.width,n.height)}),ni().adjustOriginToCenter(n),n}function au(D){var v=ou();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function ou(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var qr=(0,$.extend)({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},ee),su="rect",lu=20,cu=20;function ta(D,v,a){var l=it()(D),n=Me(it()(D)),u=l;l.color&&(u=l.color);var b=null;if(n==="filter"){var T=a();b=Jr(v,Fi()(l),T)}else b={fill:u};return(0,$.extend)({},D,b)}var uu=function(D){ue(a,D);var v=au(a);function a(l){var n,u,b,T,B,N;return J(this,a),N=v.call(this,wt.SHAPE,l),N._shapeObj=null,N._type=su,N._options=(0,$.extend)({},qr),N._isSelected=!1,N._startPoint={},N._withShiftKey=!1,N._handlers={mousedown:rt()(n=N._onFabricMouseDown).call(n,ce(N)),mousemove:rt()(u=N._onFabricMouseMove).call(u,ce(N)),mouseup:rt()(b=N._onFabricMouseUp).call(b,ce(N)),keydown:rt()(T=N._onKeyDown).call(T,ce(N)),keyup:rt()(B=N._onKeyUp).call(B,ce(N))},N}return st(a,[{key:"start",value:function(){var n=this.getCanvas();this._isSelected=!1,n.defaultCursor="crosshair",n.selection=!1,n.uniformScaling=!0,n.on({"mouse:down":this._handlers.mousedown}),G.fabric.util.addListener(document,"keydown",this._handlers.keydown),G.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var n=this.getCanvas();this._isSelected=!1,n.defaultCursor="default",n.selection=!0,n.uniformScaling=!1,n.off({"mouse:down":this._handlers.mousedown}),G.fabric.util.removeListener(document,"keydown",this._handlers.keydown),G.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(n,u){this._type=n,u&&(this._options=(0,$.extend)(this._options,u))}},{key:"add",value:function(n,u){var b=this;return new(Q())(function(T){var B=b.getCanvas(),N=b._extendOptions(u),H=b._createInstance(n,N),Z=b.graphics.createObjectProperties(H);b._bindEventOnShape(H),B.add(H).setActiveObject(H),b._resetPositionFillFilter(H),T(Z)})}},{key:"change",value:function(n,u){var b=this;return new(Q())(function(T,B){Bt(n)||B(Rt.unsupportedType);var N=Me(it()(u))==="filter",H=b.graphics,Z=H.canvasImage,ut=H.createStaticCanvas;n.set(N?ta(u,Z,ut):u),N&&b._resetPositionFillFilter(n),b.getCanvas().renderAll(),T()})}},{key:"makeFillPropertyForUserEvent",value:function(n){var u=Pe(n),b={};if(u===Vt.FILTER){var T=ln(n),B=Gn(T);b.type=u,b.filter=B}else b.type=Vt.COLOR,b.color=it()(n)||"transparent";return b}},{key:"processForCopiedObject",value:function(n,u){if(this._bindEventOnShape(n),Pe(n)==="filter"){var b=ln(u),T=Gn(b),B=this.graphics.createStaticCanvas();n.set(Jr(this.graphics.canvasImage,T,B)),this._resetPositionFillFilter(n)}}},{key:"_createInstance",value:function(n,u){var b;switch(n){case"rect":b=new G.fabric.Rect(u);break;case"circle":b=new G.fabric.Ellipse((0,$.extend)({type:"circle"},u));break;case"triangle":b=new G.fabric.Triangle(u);break;default:b={}}return b}},{key:"_extendOptions",value:function(n){var u=Ft.SELECTION_STYLE,b=this.graphics,T=b.canvasImage,B=b.createStaticCanvas;return n=(0,$.extend)({},qr,this._options,u,n),ta(n,T,B)}},{key:"_bindEventOnShape",value:function(n){var u=this,b=this.getCanvas();n.on({added:function(){u._shapeObj=this,ni().setOrigins(u._shapeObj)},selected:function(){u._isSelected=!0,u._shapeObj=this,b.uniformScaling=!0,b.defaultCursor="default",ni().setOrigins(u._shapeObj)},deselected:function(){u._isSelected=!1,u._shapeObj=null,b.defaultCursor="crosshair",b.uniformScaling=!1},modified:function(){var B=u._shapeObj;ni().adjustOriginToCenter(B),ni().setOrigins(B)},modifiedInGroup:function(B){u._fillFilterRePositionInGroupSelection(n,B)},moving:function(){u._resetPositionFillFilter(this)},rotating:function(){u._resetPositionFillFilter(this)},scaling:function(B){var N=b.getPointer(B.e),H=u._shapeObj;b.setCursor("crosshair"),ni().resize(H,N,!0),u._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(n){if(n.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var u=this.getCanvas();this._startPoint=u.getPointer(n.e),u.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(n){var u=this,b=this.getCanvas(),T=b.getPointer(n.e),B=this._startPoint.x,N=this._startPoint.y,H=B-T.x,Z=N-T.y,ut=this._shapeObj;ut?(this._shapeObj.set({isRegular:this._withShiftKey}),ni().resize(ut,T),b.renderAll(),this._resetPositionFillFilter(ut)):this.add(this._type,{left:B,top:N,width:H,height:Z}).then(function(ht){u.fire(xt.ADD_OBJECT,ht)})}},{key:"_onFabricMouseUp",value:function(){var n=this,u=this.getCanvas(),b=this._startPoint.x,T=this._startPoint.y,B=this._shapeObj;B?B&&(ni().adjustOriginToCenter(B),this.fire(xt.OBJECT_ADDED,this.graphics.createObjectProperties(B))):this.add(this._type,{left:b,top:T,width:lu,height:cu}).then(function(N){n.fire(xt.ADD_OBJECT,N)}),u.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(n){n.keyCode===Dt.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(n){n.keyCode===Dt.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(n){if(Pe(n)==="filter"){var u=Jt(n,"patternSourceCanvas"),b=u.patternSourceCanvas,T=ln(n),B=Jt(T,"originalAngle"),N=B.originalAngle;this.graphics.canvasImage.angle!==N&&Kc(n,this.graphics.canvasImage);var H=n.originX,Z=n.originY;ni().adjustOriginToCenter(n),n.width*=n.scaleX,n.height*=n.scaleY,n.rx*=n.scaleX,n.ry*=n.scaleY,n.scaleX=1,n.scaleY=1,Xc(n),zt(n,{originX:H,originY:Z}),Qc(b)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(n,u){(u.scaleX!==1||u.scaleY!==1)&&u.addWithUpdate();var b=n.angle,T=n.left,B=n.top;G.fabric.util.addTransformToObject(n,u.calcTransformMatrix()),this._resetPositionFillFilter(n),n.set({angle:b,left:T,top:B})}}]),a}(Ge);function hu(D){var v=fu();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function fu(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Xn=10,ea={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},Zn={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},Vn={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},cn=1,ia=xt.ZOOM_CHANGED,du=xt.ADD_TEXT,gu=xt.TEXT_EDITING,vu=xt.OBJECT_MODIFIED,na=xt.KEY_DOWN,ra=xt.KEY_UP,pu=xt.HAND_STARTED,mu=xt.HAND_STOPPED,yu=function(D){ue(a,D);var v=hu(a);function a(l){var n,u,b,T,B,N,H,Z,ut,ht,gt,vt,pt;J(this,a),pt=v.call(this,wt.ZOOM,l),pt.zoomArea=null,pt._startPoint=null,pt._centerPoints=[],pt.zoomLevel=cn,pt.zoomMode=kt.DEFAULT,pt._listeners={startZoom:rt()(n=pt._onMouseDownWithZoomMode).call(n,ce(pt)),moveZoom:rt()(u=pt._onMouseMoveWithZoomMode).call(u,ce(pt)),stopZoom:rt()(b=pt._onMouseUpWithZoomMode).call(b,ce(pt)),startHand:rt()(T=pt._onMouseDownWithHandMode).call(T,ce(pt)),moveHand:rt()(B=pt._onMouseMoveWithHandMode).call(B,ce(pt)),stopHand:rt()(N=pt._onMouseUpWithHandMode).call(N,ce(pt)),zoomChanged:rt()(H=pt._changeScrollState).call(H,ce(pt)),keydown:rt()(Z=pt._startHandModeWithSpaceBar).call(Z,ce(pt)),keyup:rt()(ut=pt._endHandModeWithSpaceBar).call(ut,ce(pt))};var Nt=pt.getCanvas();return pt.aspectRatio=Nt.width/Nt.height,pt._verticalScroll=new G.fabric.Rect(ea),pt._horizontalScroll=new G.fabric.Rect(ea),Nt.on(ia,pt._listeners.zoomChanged),pt.graphics.on(du,rt()(ht=pt._startTextEditingHandler).call(ht,ce(pt))),pt.graphics.on(gu,rt()(gt=pt._startTextEditingHandler).call(gt,ce(pt))),pt.graphics.on(vu,rt()(vt=pt._stopTextEditingHandler).call(vt,ce(pt))),pt}return st(a,[{key:"attachKeyboardZoomEvents",value:function(){G.fabric.util.addListener(document,na,this._listeners.keydown),G.fabric.util.addListener(document,ra,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){G.fabric.util.removeListener(document,na,this._listeners.keydown),G.fabric.util.removeListener(document,ra,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(n){this.withSpace||this.isTextEditing||n.keyCode===Dt.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(n){n.keyCode===Dt.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=kt.ZOOM;var n=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new G.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),n.discardActiveObject(),n.add(this.zoomArea),n.on("mouse:down",this._listeners.startZoom),n.selection=!1,n.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=kt.DEFAULT;var n=this.getCanvas(),u=this._listeners,b=u.startZoom,T=u.moveZoom,B=u.stopZoom;n.selection=!0,n.defaultCursor="auto",n.off({"mouse:down":b,"mouse:move":T,"mouse:up":B}),this._changeObjectsEventedState(!0),n.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=kt.HAND;var n=this.getCanvas();this._changeObjectsEventedState(!1),n.discardActiveObject(),n.off("mouse:down",this._listeners.startHand),n.on("mouse:down",this._listeners.startHand),n.selection=!1,n.defaultCursor="grab",n.fire(pu)}},{key:"endHandMode",value:function(){this.zoomMode=kt.DEFAULT;var n=this.getCanvas();this._changeObjectsEventedState(!0),n.off("mouse:down",this._listeners.startHand),n.selection=!0,n.defaultCursor="auto",this._startHandPoint=null,n.fire(mu)}},{key:"_onMouseDownWithZoomMode",value:function(n){var u=n.target,b=n.e;if(!u){var T=this.getCanvas();T.selection=!1,this._startPoint=T.getPointer(b),this.zoomArea.set({width:0,height:0});var B=this._listeners,N=B.moveZoom,H=B.stopZoom;T.on({"mouse:move":N,"mouse:up":H})}}},{key:"_onMouseMoveWithZoomMode",value:function(n){var u=n.e,b=this.getCanvas(),T=b.getPointer(u),B=T.x,N=T.y,H=this.zoomArea,Z=this._startPoint,ut=Math.abs(B-Z.x),ht=Math.abs(N-Z.y);ut+ht>Xn&&(b.remove(H),H.set(this._calcRectDimensionFromPoint(B,N)),b.add(H))}},{key:"_calcRectDimensionFromPoint",value:function(n,u){var b=this.getCanvas(),T=b.getWidth(),B=b.getHeight(),N=this._startPoint,H=N.x,Z=N.y,ut=Math.min,ht=ut(H,n),gt=ut(Z,u),vt=Ae(n,H,T)-ht,pt=Ae(u,Z,B)-gt;return{left:ht,top:gt,width:vt,height:pt}}},{key:"_onMouseUpWithZoomMode",value:function(){var n=this.zoomLevel,u=this.zoomArea,b=this._listeners,T=b.moveZoom,B=b.stopZoom,N=this.getCanvas(),H=this._getCenterPoint(),Z=H.x,ut=H.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:Z,y:ut,prevZoomLevel:n,zoomLevel:n+1}),n+=1,N.zoomToPoint({x:Z,y:ut},n),this._fireZoomChanged(N,n),this.zoomLevel=n),N.off({"mouse:move":T,"mouse:up":B}),N.remove(u),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var n=this.zoomArea,u=n.left,b=n.top,T=n.width,B=n.height,N=this._startPoint,H=N.x,Z=N.y,ut=this.aspectRatio;return T<Xn&&B<Xn?{x:H,y:Z}:T>B?{x:u+ut*B/2,y:b+B/2}:{x:u+T/2,y:b+T/ut/2}}},{key:"zoom",value:function(n){for(var u=n.x,b=n.y,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,B=this.getCanvas(),N=this._centerPoints,H=N.length-1;H>=0&&!(N[H].zoomLevel<T);H-=1){var Z=N.pop(),ut=Z.x,ht=Z.y,gt=Z.prevZoomLevel;B.zoomToPoint({x:ut,y:ht},gt),this.zoomLevel=gt}B.zoomToPoint({x:u,y:b},T),this._isDefaultZoomLevel(T)||this._centerPoints.push({x:u,y:b,zoomLevel:T,prevZoomLevel:this.zoomLevel}),this.zoomLevel=T,this._fireZoomChanged(B,T)}},{key:"zoomOut",value:function(){var n=this._centerPoints;if(!!n.length){var u=this.getCanvas(),b=n.pop(),T=b.x,B=b.y,N=b.prevZoomLevel;this._isDefaultZoomLevel(N)?u.setViewportTransform([1,0,0,1,0,0]):u.zoomToPoint({x:T,y:B},N),this.zoomLevel=N,this._fireZoomChanged(u,this.zoomLevel)}}},{key:"resetZoom",value:function(){var n=this.getCanvas();n.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=cn,this._centerPoints=[],this._fireZoomChanged(n,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(n){var u=n.x,b=n.y,T=this._centerPoints;if(!!T.length){var B=this.getCanvas(),N=this.zoomLevel,H=T.pop(),Z=H.x,ut=H.y,ht=H.prevZoomLevel,gt=Z-u,vt=ut-b;B.zoomToPoint({x:Z,y:ut},ht),B.zoomToPoint({x:gt,y:vt},N),T.push({x:gt,y:vt,prevZoomLevel:ht,zoomLevel:N}),this._fireZoomChanged(B,N)}}},{key:"_onMouseDownWithHandMode",value:function(n){var u=n.target,b=n.e;if(!u){var T=this.getCanvas();if(!(this.zoomLevel<=cn)){T.selection=!1,this._startHandPoint=T.getPointer(b);var B=this._listeners,N=B.moveHand,H=B.stopHand;T.on({"mouse:move":N,"mouse:up":H})}}}},{key:"_onMouseMoveWithHandMode",value:function(n){var u=n.e,b=this.getCanvas(),T=b.getPointer(u),B=T.x,N=T.y,H=B-this._startHandPoint.x,Z=N-this._startHandPoint.y;this._movePointOfZoom({x:H,y:Z})}},{key:"_onMouseUpWithHandMode",value:function(){var n=this.getCanvas(),u=this._listeners,b=u.moveHand,T=u.stopHand;n.off({"mouse:move":b,"mouse:up":T}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(n){var u=n.viewport,b=n.zoomLevel,T=this.getCanvas();if(T.remove(this._verticalScroll),T.remove(this._horizontalScroll),!this._isDefaultZoomLevel(b)){var B=T.width,N=T.height,H=u.tl,Z=u.tr,ut=u.bl,ht=Z.x-H.x,gt=ut.y-H.y,vt=ht*ht/B,pt=gt*Vn.SIZE,Nt=Ae(H.x+H.x/B*ht,H.x,Z.x-vt),Qt=gt*Vn.MARGIN,qt=gt*Vn.BORDER_RADIUS;this._horizontalScroll.set({left:Nt,top:ut.y-pt-Qt,width:vt,height:pt,rx:qt,ry:qt});var te=ht*Zn.SIZE,Ut=gt*gt/N,de=Ae(H.y+H.y/N*gt,Z.y,ut.y-Ut),ke=ht*Zn.MARGIN,Re=ht*Zn.BORDER_RADIUS;this._verticalScroll.set({left:Z.x-te-ke,top:de,width:te,height:Ut,rx:Re,ry:Re}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,u=this.getCanvas();u.forEachObject(function(b){b.evented=n})}},{key:"_addScrollBar",value:function(){var n=this,u=this.getCanvas();u.add(this._horizontalScroll),u.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=t()(function(){u.remove(n._horizontalScroll),u.remove(n._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(n){return n===cn}},{key:"_fireZoomChanged",value:function(n,u){n.fire(ia,{viewport:n.calcViewportBoundaries(),zoomLevel:u})}},{key:"mode",get:function(){return this.zoomMode}}]),a}(Ge),Cu=yu,aa=rn.create,oa=rn.types,bu=function(){function D(v){J(this,D),this.name=v}return st(D,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(aa(oa.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(aa(oa.UN_IMPLEMENTATION,"stop"))}}]),D}(),ci=bu;function xu(D){var v=Su();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Su(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Iu=function(D){ue(a,D);var v=xu(a);function a(){return J(this,a),v.call(this,oe.CROPPER)}return st(a,[{key:"start",value:function(n){var u=n.getComponent(wt.CROPPER);u.start()}},{key:"end",value:function(n){var u=n.getComponent(wt.CROPPER);u.end()}}]),a}(ci),Mu=Iu;function _u(D){var v=Eu();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Eu(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Tu=function(D){ue(a,D);var v=_u(a);function a(){return J(this,a),v.call(this,oe.FREE_DRAWING)}return st(a,[{key:"start",value:function(n,u){var b=n.getComponent(wt.FREE_DRAWING);b.start(u)}},{key:"end",value:function(n){var u=n.getComponent(wt.FREE_DRAWING);u.end()}}]),a}(ci),wu=Tu;function Du(D){var v=Ou();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Ou(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Au=function(D){ue(a,D);var v=Du(a);function a(){return J(this,a),v.call(this,oe.LINE_DRAWING)}return st(a,[{key:"start",value:function(n,u){var b=n.getComponent(wt.LINE);b.start(u)}},{key:"end",value:function(n){var u=n.getComponent(wt.LINE);u.end()}}]),a}(ci),ku=Au;function Pu(D){var v=Lu();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Lu(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Nu=function(D){ue(a,D);var v=Pu(a);function a(){return J(this,a),v.call(this,oe.SHAPE)}return st(a,[{key:"start",value:function(n){var u=n.getComponent(wt.SHAPE);u.start()}},{key:"end",value:function(n){var u=n.getComponent(wt.SHAPE);u.end()}}]),a}(ci),ju=Nu;function Ru(D){var v=zu();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function zu(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Bu=function(D){ue(a,D);var v=Ru(a);function a(){return J(this,a),v.call(this,oe.TEXT)}return st(a,[{key:"start",value:function(n){var u=n.getComponent(wt.TEXT);u.start()}},{key:"end",value:function(n){var u=n.getComponent(wt.TEXT);u.end()}}]),a}(ci),Fu=Bu;function Hu(D){var v=Yu();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Yu(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Uu=function(D){ue(a,D);var v=Hu(a);function a(){return J(this,a),v.call(this,oe.ICON)}return st(a,[{key:"start",value:function(n){var u=n.getComponent(wt.ICON);u.start()}},{key:"end",value:function(n){var u=n.getComponent(wt.ICON);u.end()}}]),a}(ci),Wu=Uu;function Gu(D){var v=Xu();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Xu(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var Zu=function(D){ue(a,D);var v=Gu(a);function a(){return J(this,a),v.call(this,oe.ZOOM)}return st(a,[{key:"start",value:function(n){var u=n.getComponent(wt.ZOOM);u.start()}},{key:"end",value:function(n){var u=n.getComponent(wt.ZOOM);u.end()}}]),a}(ci),Vu=Zu,sa=null;function la(D){sa=D}function Ju(){return sa}function Jn(D,v){var a;if(D.type==="activeSelection"){var l;a=vi()(l=D.getObjects()).call(l,function(n){var u=n.angle,b=n.left,T=n.top,B=n.scaleX,N=n.scaleY,H=n.width,Z=n.height;G.fabric.util.addTransformToObject(n,D.calcTransformMatrix());var ut=v(n);return n.set({angle:u,left:b,top:T,width:H,height:Z,scaleX:B,scaleY:N}),ut})}else a=[v(D)];return a}function Qn(D,v,a){return a?{id:D,width:v.width,height:v.height,top:v.top,left:v.left,angle:v.angle,scaleX:v.scaleX,scaleY:v.scaleY}:(0,$.extend)({id:D},v)}function Qu(D){var v=Ku();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function Ku(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var $u=function(D){ue(a,D);var v=Qu(a);function a(l){var n;return J(this,a),n=v.call(this,wt.RESIZE,l),n._dimensions=null,n._originalDimensions=null,n}return st(a,[{key:"getCurrentDimensions",value:function(){var n=this.getCanvasImage();if(!this._dimensions&&n){var u=n.width,b=n.height;this._dimensions={width:u,height:b}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(n){this._originalDimensions=n}},{key:"resize",value:function(n){var u=this.getCanvasImage(),b=u.width,T=u.height,B=u.scaleX,N=u.scaleY,H=n.width,Z=n.height,ut={scaleX:H?H/b:B,scaleY:Z?Z/T:N};return(B!==ut.scaleX||N!==ut.scaleY)&&(u.set(ut).setCoords(),this._dimensions={width:u.width*u.scaleX,height:u.height*u.scaleY}),this.adjustCanvasDimensionBase(),Q().resolve()}},{key:"start",value:function(){var n=this.getCurrentDimensions();this.setOriginalDimensions(n)}},{key:"end",value:function(){}}]),a}(Ge),qu=$u;function th(D){var v=eh();return function(){var l=$t(D),n;if(v){var u=$t(this).constructor;n=Lt()(l,arguments,u)}else n=l.apply(this,arguments);return he(this,n)}}function eh(){if(typeof Reflect>"u"||!Lt()||Lt().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Lt()(Boolean,[],function(){})),!0}catch{return!1}}var ih=function(D){ue(a,D);var v=th(a);function a(){return J(this,a),v.call(this,oe.RESIZE)}return st(a,[{key:"start",value:function(n){var u=n.getComponent(wt.RESIZE);u.start()}},{key:"end",value:function(n){var u=n.getComponent(wt.RESIZE);u.end()}}]),a}(ci),nh=ih,pi=K().extend,un=K().stamp,ca=K().isArray,rh=K().isString,ah=K().forEachArray,oh=K().forEachOwnProperties,sh=K().CustomEvents,lh=1e3,ch=800,hn=10,uh={cssOnly:!0},hh={backstoreOnly:!0},ua=function(){function D(v){var a,l,n,u,b,T,B,N,H,Z,ut,ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt=ht.cssMaxWidth,vt=ht.cssMaxHeight;J(this,D),this.canvasImage=null,this.cssMaxWidth=gt||lh,this.cssMaxHeight=vt||ch,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=oe.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:rt()(a=this._onMouseDown).call(a,this),onObjectAdded:rt()(l=this._onObjectAdded).call(l,this),onObjectRemoved:rt()(n=this._onObjectRemoved).call(n,this),onObjectMoved:rt()(u=this._onObjectMoved).call(u,this),onObjectScaled:rt()(b=this._onObjectScaled).call(b,this),onObjectModified:rt()(T=this._onObjectModified).call(T,this),onObjectRotated:rt()(B=this._onObjectRotated).call(B,this),onObjectSelected:rt()(N=this._onObjectSelected).call(N,this),onPathCreated:rt()(H=this._onPathCreated).call(H,this),onSelectionCleared:rt()(Z=this._onSelectionCleared).call(Z,this),onSelectionCreated:rt()(ut=this._onSelectionCreated).call(ut,this)},this._setObjectCachingToFalse(),this._setCanvasElement(v),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return st(D,[{key:"destroy",value:function(){var a=this._canvas.wrapperEl;this._canvas.clear(),a.parentNode.removeChild(a),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var a=this.getComponent(wt.ZOOM);a.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var a=this.getComponent(wt.ZOOM);a.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(a){var l,n=[];ca(a)?n=a:n.push(a),(l=this._canvas).add.apply(l,F(n))}},{key:"contains",value:function(a){return this._canvas.contains(a)}},{key:"getObjects",value:function(){var a;return g()(a=this._canvas.getObjects()).call(a)}},{key:"getObject",value:function(a){return this._objects[a]}},{key:"remove",value:function(a){this._canvas.remove(a)}},{key:"removeAll",value:function(a){var l,n=this._canvas,u=g()(l=n.getObjects()).call(l);return n.remove.apply(n,F(this._canvas.getObjects())),a&&n.clear(),u}},{key:"removeObjectById",value:function(a){var l=[],n=this._canvas,u=this.getObject(a),b=u&&u.isType("group")&&!u.isEmpty();return b?(n.discardActiveObject(),u.forEachObject(function(T){l.push(T),n.remove(T)})):n.contains(u)&&(l.push(u),n.remove(u)),l}},{key:"getObjectId",value:function(a){var l=null;for(l in this._objects)if(this._objects.hasOwnProperty(l)&&a===this._objects[l])return l;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var a=this.getActiveObject(),l=a.type,n=a.left,u=a.top,b=l==="activeSelection";if(b){var T=new G.fabric.Group(F(a.getObjects()),{left:n,top:u});return this._addFabricObject(T)}return this.getObjectId(a)}},{key:"isReadyRemoveObject",value:function(){var a=this.getActiveObject();return a&&!a.isEditing}},{key:"getActiveObjects",value:function(){var a=this._canvas._activeObject;return a&&a.type==="activeSelection"?a:null}},{key:"getActiveSelectionFromObjects",value:function(a){var l=this.getCanvas();return new G.fabric.ActiveSelection(a,{canvas:l})}},{key:"setActiveObject",value:function(a){this._canvas.setActiveObject(a)}},{key:"setCropSelectionStyle",value:function(a){this.cropSelectionStyle=a}},{key:"getComponent",value:function(a){return this._componentMap[a]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(a,l){if(this._isSameDrawingMode(a))return!0;this.stopDrawingMode();var n=this._getDrawingModeInstance(a);return n&&n.start&&(n.start(this,l),this._drawingMode=a),!!n}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(oe.NORMAL)){var a=this._getDrawingModeInstance(this.getDrawingMode());a&&a.end&&a.end(this),this._drawingMode=oe.NORMAL}}},{key:"zoom",value:function(a,l){var n=a.x,u=a.y,b=this.getComponent(wt.ZOOM);b.zoom({x:n,y:u},l)}},{key:"getZoomMode",value:function(){var a=this.getComponent(wt.ZOOM);return a.mode}},{key:"startZoomInMode",value:function(){var a=this.getComponent(wt.ZOOM);a.startZoomInMode()}},{key:"endZoomInMode",value:function(){var a=this.getComponent(wt.ZOOM);a.endZoomInMode()}},{key:"zoomOut",value:function(){var a=this.getComponent(wt.ZOOM);a.zoomOut()}},{key:"startHandMode",value:function(){var a=this.getComponent(wt.ZOOM);a.startHandMode()}},{key:"endHandMode",value:function(){var a=this.getComponent(wt.ZOOM);a.endHandMode()}},{key:"resetZoom",value:function(){var a=this.getComponent(wt.ZOOM);a.resetZoom()}},{key:"toDataURL",value:function(a){var l=this.getComponent(wt.CROPPER);l.changeVisibility(!1);var n=this._canvas&&this._canvas.toDataURL(a);return l.changeVisibility(!0),n}},{key:"setCanvasImage",value:function(a,l){l&&un(l),this.imageName=a,this.canvasImage=l}},{key:"setCssMaxDimension",value:function(a){this.cssMaxWidth=a.width||this.cssMaxWidth,this.cssMaxHeight=a.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;a||(a=this.canvasImage);var l=a.getBoundingRect(),n=l.width,u=l.height,b=this._calcMaxDimension(n,u);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(b.width,"px"),"max-height":"".concat(b.height,"px")}),this.setCanvasBackstoreDimension({width:n,height:u}),this._canvas.centerObject(a)}},{key:"setCanvasCssDimension",value:function(a){this._canvas.setDimensions(a,uh)}},{key:"setCanvasBackstoreDimension",value:function(a){this._canvas.setDimensions(a,hh)}},{key:"setImageProperties",value:function(a,l){var n=this.canvasImage;!n||(n.set(a).setCoords(),l&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(a){var l,n=this,u=rt()(l=this._callbackAfterLoadingImageObject).call(l,this);return new(Q())(function(b){G.fabric.Image.fromURL(a,function(T){u(T),b(n.createObjectProperties(T))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(wt.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(a){this.getComponent(wt.CROPPER).setCropzoneRect(a)}},{key:"getCroppedImageData",value:function(a){return this.getComponent(wt.CROPPER).getCroppedImageData(a)}},{key:"setBrush",value:function(a){var l=this._drawingMode,n=wt.FREE_DRAWING;l===oe.LINE_DRAWING&&(n=wt.LINE),this.getComponent(n).setBrush(a)}},{key:"setDrawingShape",value:function(a,l){this.getComponent(wt.SHAPE).setStates(a,l)}},{key:"setIconStyle",value:function(a,l){this.getComponent(wt.ICON).setStates(a,l)}},{key:"registerPaths",value:function(a){this.getComponent(wt.ICON).registerPaths(a)}},{key:"changeCursor",value:function(a){var l=this.getCanvas();l.defaultCursor=a,l.renderAll()}},{key:"hasFilter",value:function(a){return this.getComponent(wt.FILTER).hasFilter(a)}},{key:"setSelectionStyle",value:function(a){pi(Ft.SELECTION_STYLE,a)}},{key:"setObjectProperties",value:function(a,l){var n=this.getObject(a),u=pi({},l);return n.set(u),n.setCoords(),this.getCanvas().renderAll(),u}},{key:"getObjectProperties",value:function(a,l){var n=this.getObject(a),u={};return rh(l)?u[l]=n[l]:ca(l)?ah(l,function(b){u[b]=n[b]}):oh(l,function(b,T){u[T]=n[T]}),u}},{key:"getObjectPosition",value:function(a,l,n){var u=this.getObject(a);return u?u.getPointByOrigin(l,n):null}},{key:"setObjectPosition",value:function(a,l){var n=this.getObject(a),u=l.x,b=l.y,T=l.originX,B=l.originY;if(!n)return!1;var N=n.getPointByOrigin(T,B),H=n.getPointByOrigin("center","center"),Z=H.x-N.x,ut=H.y-N.y;return n.set({left:u+Z,top:b+ut}),n.setCoords(),!0}},{key:"getCanvasSize",value:function(){var a=this.getCanvasImage();return{width:a?a.width:0,height:a?a.height:0}}},{key:"createStaticCanvas",value:function(){var a=new G.fabric.StaticCanvas;return a.set({enableRetinaScaling:!1}),a}},{key:"_getDrawingModeInstance",value:function(a){return this._drawingModeMap[a]}},{key:"_setObjectCachingToFalse",value:function(){G.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(a){var l,n;a.nodeType?l=a:l=document.querySelector(a),l.nodeName.toUpperCase()!=="CANVAS"&&(n=document.createElement("canvas"),l.appendChild(n)),this._canvas=new G.fabric.Canvas(n,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new Mu),this._register(this._drawingModeMap,new wu),this._register(this._drawingModeMap,new ku),this._register(this._drawingModeMap,new ju),this._register(this._drawingModeMap,new Fu),this._register(this._drawingModeMap,new Wu),this._register(this._drawingModeMap,new Vu),this._register(this._drawingModeMap,new nh)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new jl(this)),this._register(this._componentMap,new ql(this)),this._register(this._componentMap,new nc(this)),this._register(this._componentMap,new sc(this)),this._register(this._componentMap,new hc(this)),this._register(this._componentMap,new Cc(this)),this._register(this._componentMap,new Ec(this)),this._register(this._componentMap,new Ac(this)),this._register(this._componentMap,new Uc(this)),this._register(this._componentMap,new uu(this)),this._register(this._componentMap,new Cu(this)),this._register(this._componentMap,new qu(this))}},{key:"_register",value:function(a,l){a[l.getName()]=l}},{key:"_isSameDrawingMode",value:function(a){return this.getDrawingMode()===a}},{key:"_calcMaxDimension",value:function(a,l){var n=this.cssMaxWidth/a,u=this.cssMaxHeight/l,b=Math.min(a,this.cssMaxWidth),T=Math.min(l,this.cssMaxHeight);return n<1&&n<u?(b=a*n,T=l*n):u<1&&u<n&&(b=a*u,T=l*u),{width:Math.floor(b),height:Math.floor(T)}}},{key:"_callbackAfterLoadingImageObject",value:function(a){var l=this.getCanvasImage().getCenterPoint();a.set(Ft.SELECTION_STYLE),a.set({left:l.x,top:l.y,crossOrigin:"Anonymous"}),this.getCanvas().add(a).setActiveObject(a)}},{key:"_attachCanvasEvents",value:function(){var a=this._canvas,l=this._handler;a.on({"mouse:down":l.onMouseDown,"object:added":l.onObjectAdded,"object:removed":l.onObjectRemoved,"object:moving":l.onObjectMoved,"object:scaling":l.onObjectScaled,"object:modified":l.onObjectModified,"object:rotating":l.onObjectRotated,"path:created":l.onPathCreated,"selection:cleared":l.onSelectionCleared,"selection:created":l.onSelectionCreated,"selection:updated":l.onObjectSelected})}},{key:"_onMouseDown",value:function(a){var l=this,n=a.e,u=a.target,b=this._canvas.getPointer(n);if(u){var T=u.type,B=Jn(u,function(N){return Qn(l.getObjectId(N),N,T==="activeSelection")});la(B)}this.fire(xt.MOUSE_DOWN,n,b)}},{key:"_onObjectAdded",value:function(a){var l=a.target;l.isType("cropzone")||this._addFabricObject(l)}},{key:"_onObjectRemoved",value:function(a){var l=a.target;this._removeFabricObject(un(l))}},{key:"_onObjectMoved",value:function(a){var l=this;this._lazyFire(xt.OBJECT_MOVED,function(n){return l.createObjectProperties(n)},a.target)}},{key:"_onObjectScaled",value:function(a){var l=this;this._lazyFire(xt.OBJECT_SCALED,function(n){return l.createObjectProperties(n)},a.target)}},{key:"_onObjectModified",value:function(a){var l=a.target;if(l.type==="activeSelection"){var n=l.getObjects();It()(n).call(n,function(u){return u.fire("modifiedInGroup",l)})}this.fire(xt.OBJECT_MODIFIED,l,this.getObjectId(l))}},{key:"_onObjectRotated",value:function(a){var l=this;this._lazyFire(xt.OBJECT_ROTATED,function(n){return l.createObjectProperties(n)},a.target)}},{key:"_lazyFire",value:function(a,l,n){var u=this,b=n&&n.canvasEventDelegation,T=b?n.canvasEventDelegation(a):"none";T==="unregistered"&&n.canvasEventRegister(a,function(B){u.fire(a,l(B))}),T==="none"&&this.fire(a,l(n))}},{key:"_onObjectSelected",value:function(a){var l=a.target,n=this.createObjectProperties(l);this.fire(xt.OBJECT_ACTIVATED,n)}},{key:"_onPathCreated",value:function(a){var l=a.path.getCenterPoint(),n=l.x,u=l.y;a.path.set(pi({left:n,top:u},Ft.SELECTION_STYLE));var b=this.createObjectProperties(a.path);this.fire(xt.ADD_OBJECT,b)}},{key:"_onSelectionCleared",value:function(){this.fire(xt.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(a){var l=a.target,n=this.createObjectProperties(l);this.fire(xt.OBJECT_ACTIVATED,n),this.fire(xt.SELECTION_CREATED,a.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(a){this._canvas.forEachObject(function(l){l.selectable=a,l.hoverCursor=a?"move":"crosshair"})}},{key:"createObjectProperties",value:function(a){var l=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],n={id:un(a),type:a.type};if(pi(n,Ni(a,l)),ve(["i-text","text"],a.type))pi(n,this._createTextProperties(a,n));else if(ve(["rect","triangle","circle"],a.type)){var u=this.getComponent(wt.SHAPE);pi(n,{fill:u.makeFillPropertyForUserEvent(a)})}return n}},{key:"_createTextProperties",value:function(a){var l=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],n={};return pi(n,Ni(a,l)),n}},{key:"_addFabricObject",value:function(a){var l=un(a);return this._objects[l]=a,l}},{key:"_removeFabricObject",value:function(a){delete this._objects[a]}},{key:"resetTargetObjectForCopyPaste",value:function(){var a=this.getActiveObject();a&&(this.targetObjectForCopyPaste=a)}},{key:"pasteObject",value:function(){var a=this;if(!this.targetObjectForCopyPaste)return Q().resolve([]);var l=this.targetObjectForCopyPaste,n=l.type==="activeSelection",u=n?l.getObjects():[l],b=null;return this.discardSelection(),this._cloneObject(u).then(function(T){if(T.length>1)b=a.getActiveSelectionFromObjects(T);else{var B=yt(T,1);b=B[0]}a.targetObjectForCopyPaste=b,a.setActiveObject(b)})}},{key:"_cloneObject",value:function(a){var l=this,n=vi()(K()).call(K(),a,function(u){return l._cloneObjectItem(u)});return Q().all(n)}},{key:"_cloneObjectItem",value:function(a){var l=this;return this._copyFabricObjectForPaste(a).then(function(n){var u=l.createObjectProperties(n);return l.add(n),l.fire(xt.ADD_OBJECT,u),n})}},{key:"_copyFabricObjectForPaste",value:function(a){var l=this,n=function(b,T){return T?b-hn:b+hn};return this._copyFabricObject(a).then(function(u){var b=u.left,T=u.top,B=u.width,N=u.height,H=l.getCanvasSize(),Z=H.width,ut=H.height,ht=b+B/2,gt=T+N/2;return u.set(K().extend({left:n(b,ht+hn>Z),top:n(T,gt+hn>ut)},Ft.SELECTION_STYLE)),u})}},{key:"_copyFabricObject",value:function(a){var l=this;return new(Q())(function(n){a.clone(function(u){var b=l.getComponent(wt.SHAPE);Bt(u)&&b.processForCopiedObject(u,a),n(u)})})}},{key:"getCurrentDimensions",value:function(){var a=this.getComponent(wt.RESIZE);return a.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var a=this.getComponent(wt.RESIZE);return a.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(a){var l=this.getComponent(wt.RESIZE);l.setOriginalDimensions(a)}},{key:"resize",value:function(a){var l=this.getComponent(wt.RESIZE);return l.resize(a)}}]),D}();sh.mixin(ua);var fh=ua,ha=K().isUndefined,dh=It()(K()),gh=K().CustomEvents,vh=xt.MOUSE_DOWN,ph=xt.OBJECT_MOVED,mh=xt.OBJECT_SCALED,yh=xt.OBJECT_ACTIVATED,Ch=xt.OBJECT_ROTATED,fa=xt.OBJECT_ADDED,bh=xt.OBJECT_MODIFIED,xh=xt.ADD_TEXT,Sh=xt.ADD_OBJECT,Ih=xt.TEXT_EDITING,Mh=xt.TEXT_CHANGED,_h=xt.ICON_CREATE_RESIZE,Eh=xt.ICON_CREATE_END,da=xt.SELECTION_CLEARED,ga=xt.SELECTION_CREATED,Th=xt.ADD_OBJECT_AFTER,Kn=function(){function D(v,a){var l,n,u,b,T,B,N,H,Z,ut,ht,gt,vt,pt,Nt,Qt;if(J(this,D),a=K().extend({includeUI:!1,usageStatistics:!0},a),this.mode=null,this.activeObjectId=null,a.includeUI){var qt=a.includeUI;qt.usageStatistics=a.usageStatistics,this.ui=new Tl(v,qt,this.getActions()),a=this.ui.setUiDefaultSelectionStyle(a)}this._invoker=new Zo,this._graphics=new fh(this.ui?this.ui.getEditorArea():v,{cssMaxWidth:a.cssMaxWidth,cssMaxHeight:a.cssMaxHeight}),this._handlers={keydown:rt()(l=this._onKeyDown).call(l,this),mousedown:rt()(n=this._onMouseDown).call(n,this),objectActivated:rt()(u=this._onObjectActivated).call(u,this),objectMoved:rt()(b=this._onObjectMoved).call(b,this),objectScaled:rt()(T=this._onObjectScaled).call(T,this),objectRotated:rt()(B=this._onObjectRotated).call(B,this),objectAdded:rt()(N=this._onObjectAdded).call(N,this),objectModified:rt()(H=this._onObjectModified).call(H,this),createdPath:this._onCreatedPath,addText:rt()(Z=this._onAddText).call(Z,this),addObject:rt()(ut=this._onAddObject).call(ut,this),textEditing:rt()(ht=this._onTextEditing).call(ht,this),textChanged:rt()(gt=this._onTextChanged).call(gt,this),iconCreateResize:rt()(vt=this._onIconCreateResize).call(vt,this),iconCreateEnd:rt()(pt=this._onIconCreateEnd).call(pt,this),selectionCleared:rt()(Nt=this._selectionCleared).call(Nt,this),selectionCreated:rt()(Qt=this._selectionCreated).call(Qt,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(a.selectionStyle,{applyCropSelectionStyle:a.applyCropSelectionStyle,applyGroupSelectionStyle:a.applyGroupSelectionStyle}),a.usageStatistics&&$i(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),G.fabric.enableGLFiltering=!1}return st(D,[{key:"_attachColorPickerInputBoxEvents",value:function(){var a=this;this.ui.on(xt.INPUT_BOX_EDITING_STARTED,function(){a.isColorPickerInputBoxEditing=!0}),this.ui.on(xt.INPUT_BOX_EDITING_STOPPED,function(){a.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(xt.INPUT_BOX_EDITING_STARTED),this.ui.off(xt.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(a,l){var n=l.applyCropSelectionStyle,u=l.applyGroupSelectionStyle;a&&this._graphics.setSelectionStyle(a),n&&this._graphics.setCropSelectionStyle(a),u&&this.on("selectionCreated",function(b){b.type==="activeSelection"&&b.set(a)})}},{key:"_attachInvokerEvents",value:function(){var a,l,n=this,u=xt.UNDO_STACK_CHANGED,b=xt.REDO_STACK_CHANGED,T=xt.EXECUTE_COMMAND,B=xt.AFTER_UNDO,N=xt.AFTER_REDO,H=xt.HAND_STARTED,Z=xt.HAND_STOPPED;if(this._invoker.on(u,rt()(a=this.fire).call(a,this,u)),this._invoker.on(b,rt()(l=this.fire).call(l,this,b)),this.ui){var ut=this._graphics.getCanvas();this._invoker.on(T,function(ht){return n.ui.fire(T,ht)}),this._invoker.on(B,function(ht){return n.ui.fire(B,ht)}),this._invoker.on(N,function(ht){return n.ui.fire(N,ht)}),ut.on(H,function(){return n.ui.fire(H)}),ut.on(Z,function(){return n.ui.fire(Z)})}}},{key:"_attachGraphicsEvents",value:function(){var a;this._graphics.on((a={},X(a,vh,this._handlers.mousedown),X(a,ph,this._handlers.objectMoved),X(a,mh,this._handlers.objectScaled),X(a,Ch,this._handlers.objectRotated),X(a,yh,this._handlers.objectActivated),X(a,fa,this._handlers.objectAdded),X(a,bh,this._handlers.objectModified),X(a,xh,this._handlers.addText),X(a,Sh,this._handlers.addObject),X(a,Ih,this._handlers.textEditing),X(a,Mh,this._handlers.textChanged),X(a,_h,this._handlers.iconCreateResize),X(a,Eh,this._handlers.iconCreateEnd),X(a,da,this._handlers.selectionCleared),X(a,ga,this._handlers.selectionCreated),a))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(a){var l=a.ctrlKey,n=a.keyCode,u=a.metaKey,b=l||u;b&&(n===Dt.C?this._graphics.resetTargetObjectForCopyPaste():n===Dt.V?(this._graphics.pasteObject(),this.clearRedoStack()):n===Dt.Z?this.undo().catch(function(){}):n===Dt.Y&&this.redo().catch(function(){}));var T=n===Dt.BACKSPACE||n===Dt.DEL,B=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&B&&T&&(a.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var a=this._graphics.getActiveObjectIdForRemove();this.removeObject(a)}},{key:"_onMouseDown",value:function(a,l){this.fire(xt.MOUSE_DOWN,a,l)}},{key:"_pushAddObjectCommand",value:function(a){var l=ye.create(Yt.ADD_OBJECT,this._graphics,a);this._invoker.pushUndoStack(l)}},{key:"_pushModifyObjectCommand",value:function(a){var l=this,n=a.type,u=Jn(a,function(T){return Qn(l._graphics.getObjectId(T),T,n==="activeSelection")}),b=ye.create(Yt.CHANGE_SELECTION,this._graphics,u);b.execute(this._graphics,u),this._invoker.pushUndoStack(b)}},{key:"_onObjectActivated",value:function(a){this.fire(xt.OBJECT_ACTIVATED,a)}},{key:"_onObjectMoved",value:function(a){this.fire(xt.OBJECT_MOVED,a)}},{key:"_onObjectScaled",value:function(a){this.fire(xt.OBJECT_SCALED,a)}},{key:"_onObjectRotated",value:function(a){this.fire(xt.OBJECT_ROTATED,a)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Yt.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(a){this._graphics.changeSelectableAll(a)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(a){for(var l,n,u,b=arguments.length,T=new Array(b>1?b-1:0),B=1;B<b;B++)T[B-1]=arguments[B];var N=V()(l=[this._graphics]).call(l,T);return(n=this._invoker).execute.apply(n,V()(u=[a]).call(u,F(N)))}},{key:"executeSilent",value:function(a){for(var l,n,u,b=arguments.length,T=new Array(b>1?b-1:0),B=1;B<b;B++)T[B-1]=arguments[B];var N=V()(l=[this._graphics]).call(l,T);return(n=this._invoker).executeSilent.apply(n,V()(u=[a]).call(u,F(N)))}},{key:"undo",value:function(){for(var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=Q().resolve(),u=0;u<l;u+=1)n=n.then(function(){return a._invoker.undo()});return n}},{key:"redo",value:function(){for(var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=Q().resolve(),u=0;u<l;u+=1)n=n.then(function(){return a._invoker.redo()});return n}},{key:"zoom",value:function(a){var l=a.x,n=a.y,u=a.zoomLevel;this._graphics.zoom({x:l,y:n},u)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(a,l){if(!a)return Q().reject(Rt.invalidParameters);var n=nt().createObjectURL(a);return l=l||a.name,this.loadImageFromURL(n,l).then(function(u){return nt().revokeObjectURL(a),u})}},{key:"loadImageFromURL",value:function(a,l){return!l||!a?Q().reject(Rt.invalidParameters):this.execute(Yt.LOAD_IMAGE,l,a)}},{key:"addImageObject",value:function(a){return a?this.execute(Yt.ADD_IMAGE_OBJECT,a):Q().reject(Rt.invalidParameters)}},{key:"startDrawingMode",value:function(a,l){return this._graphics.startDrawingMode(a,l)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(a){var l=this._graphics.getCroppedImageData(a);return l?this.loadImageFromURL(l.url,l.imageName):Q().reject(Rt.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(a){this._graphics.setCropzoneRect(a)}},{key:"_flip",value:function(a){return this.execute(Yt.FLIP_IMAGE,a)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(a,l,n){var u=null;return n?u=this.executeSilent(Yt.ROTATE_IMAGE,a,l):u=this.execute(Yt.ROTATE_IMAGE,a,l),u}},{key:"rotate",value:function(a,l){return this._rotate("rotate",a,l)}},{key:"setAngle",value:function(a,l){return this._rotate("setAngle",a,l)}},{key:"setBrush",value:function(a){this._graphics.setBrush(a)}},{key:"setDrawingShape",value:function(a,l){this._graphics.setDrawingShape(a,l)}},{key:"setDrawingIcon",value:function(a,l){this._graphics.setIconStyle(a,l)}},{key:"addShape",value:function(a,l){return l=l||{},this._setPositions(l),this.execute(Yt.ADD_SHAPE,a,l)}},{key:"changeShape",value:function(a,l,n){var u=n?"executeSilent":"execute";return this[u](Yt.CHANGE_SHAPE,a,l)}},{key:"addText",value:function(a,l){return a=a||"",l=l||{},this.execute(Yt.ADD_TEXT,a,l)}},{key:"changeText",value:function(a,l){return l=l||"",this.execute(Yt.CHANGE_TEXT,a,l)}},{key:"changeTextStyle",value:function(a,l,n){var u=n?"executeSilent":"execute";return this[u](Yt.CHANGE_TEXT_STYLE,a,l)}},{key:"_changeActivateMode",value:function(a){a!=="ICON"&&this.getDrawingMode()!==a&&this.startDrawingMode(a)}},{key:"_onTextChanged",value:function(a){this.fire(xt.TEXT_CHANGED,a)}},{key:"_onIconCreateResize",value:function(a){this.fire(xt.ICON_CREATE_RESIZE,a)}},{key:"_onIconCreateEnd",value:function(a){this.fire(xt.ICON_CREATE_END,a)}},{key:"_onTextEditing",value:function(){this.fire(xt.TEXT_EDITING)}},{key:"_onAddText",value:function(a){this.fire(xt.ADD_TEXT,{originPosition:a.originPosition,clientPosition:a.clientPosition})}},{key:"_onAddObject",value:function(a){var l=this._graphics.getObject(a.id);this._invoker.fire(xt.EXECUTE_COMMAND,Ee(l.type)),this._pushAddObjectCommand(l)}},{key:"_onObjectAdded",value:function(a){this.fire(fa,a),this.fire(Th,a)}},{key:"_onObjectModified",value:function(a){a.type!==Et.CROPZONE&&(this._invoker.fire(xt.EXECUTE_COMMAND,Ee(a.type)),this._pushModifyObjectCommand(a))}},{key:"_selectionCleared",value:function(){this.fire(da)}},{key:"_selectionCreated",value:function(a){this.fire(ga,a)}},{key:"registerIcons",value:function(a){this._graphics.registerPaths(a)}},{key:"changeCursor",value:function(a){this._graphics.changeCursor(a)}},{key:"addIcon",value:function(a,l){return l=l||{},this._setPositions(l),this.execute(Yt.ADD_ICON,a,l)}},{key:"changeIconColor",value:function(a,l){return this.execute(Yt.CHANGE_ICON_COLOR,a,l)}},{key:"removeObject",value:function(a){var l=this._graphics.getObject(a),n=l.type;return this.execute(Yt.REMOVE_OBJECT,a,Ee(n))}},{key:"hasFilter",value:function(a){return this._graphics.hasFilter(a)}},{key:"removeFilter",value:function(a){return this.execute(Yt.REMOVE_FILTER,a)}},{key:"applyFilter",value:function(a,l,n){var u=n?"executeSilent":"execute";return this[u](Yt.APPLY_FILTER,a,l)}},{key:"toDataURL",value:function(a){return this._graphics.toDataURL(a)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(a){return a?this.execute(Yt.RESIZE_CANVAS_DIMENSION,a):Q().reject(Rt.invalidParameters)}},{key:"destroy",value:function(){var a=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),dh(this,function(l,n){a[n]=null},this)}},{key:"_setPositions",value:function(a){var l=this._graphics.getCenter();ha(a.left)&&(a.left=l.left),ha(a.top)&&(a.top=l.top)}},{key:"setObjectProperties",value:function(a,l){return this.execute(Yt.SET_OBJECT_PROPERTIES,a,l)}},{key:"setObjectPropertiesQuietly",value:function(a,l){this._graphics.setObjectProperties(a,l)}},{key:"getObjectProperties",value:function(a,l){var n=this._graphics.getObject(a);return n?this._graphics.getObjectProperties(a,l):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(a,l,n){return this._graphics.getObjectPosition(a,l,n)}},{key:"setObjectPosition",value:function(a,l){return this.execute(Yt.SET_OBJECT_POSITION,a,l)}},{key:"resize",value:function(a){return this.execute(Yt.RESIZE_IMAGE,a)}}]),D}();Dl.mixin(Kn),gh.mixin(Kn);var wh=Kn,Dh=wt.ICON,Oh={name:Yt.ADD_ICON,execute:function(v,a,l){var n=this,u=v.getComponent(Dh);return u.add(a,l).then(function(b){return n.undoData.object=v.getObject(b.id),b})},undo:function(v){return v.remove(this.undoData.object),Q().resolve()}};ye.register(Oh);var Ah={name:Yt.ADD_IMAGE_OBJECT,execute:function(v,a){var l=this;return v.addImageObject(a).then(function(n){return l.undoData.object=v.getObject(n.id),n})},undo:function(v){return v.remove(this.undoData.object),Q().resolve()}};ye.register(Ah);var kh={name:Yt.ADD_OBJECT,execute:function(v,a){return new(Q())(function(l,n){v.contains(a)?n(Rt.addedObject):(v.add(a),l(a))})},undo:function(v,a){return new(Q())(function(l,n){v.contains(a)?(v.remove(a),l(a)):n(Rt.noObject)})}};ye.register(kh);var Ph=wt.SHAPE,Lh={name:Yt.ADD_SHAPE,execute:function(v,a,l){var n=this,u=v.getComponent(Ph);return u.add(a,l).then(function(b){var T=b.id;return n.undoData.object=v.getObject(T),b})},undo:function(v){return v.remove(this.undoData.object),Q().resolve()}};ye.register(Lh);var Nh=wt.TEXT,jh={name:Yt.ADD_TEXT,execute:function(v,a,l){var n=this,u=v.getComponent(Nh);if(this.undoData.object){var b=this.undoData.object;return new(Q())(function(T,B){v.contains(b)?B(Rt.redo):(v.add(b),T(b))})}return u.add(a,l).then(function(T){var B=T.id,N=v.getObject(B);return n.undoData.object=N,la(Jn(N,function(){return Qn(B,N,!1)})),T})},undo:function(v){return v.remove(this.undoData.object),Q().resolve()}};ye.register(jh);var va=wt.FILTER,pa=null;function Rh(D,v,a){var l={};return D==="mask"&&(l.object=a.mask),l.options=v,l}var zh={name:Yt.APPLY_FILTER,execute:function(v,a,l,n){var u=v.getComponent(va);if(a==="mask"){var b=v.getObject(l.maskObjId);if(!(b&&b.isType("image")))return Q().reject(Rt.invalidParameters);K().extend(l,{mask:b}),v.remove(l.mask)}if(!this.isRedo){var T=u.getOptions(a),B=Rh(a,T,l);pa=this.setUndoData(B,pa,n)}return u.add(a,l)},undo:function(v,a){var l=v.getComponent(va);if(a==="mask"){var n=this.undoData.object;return v.add(n),v.setActiveObject(n),l.remove(a)}return this.undoData.options?l.add(a,this.undoData.options):l.remove(a)}};ye.register(zh);var ma=wt.ICON,Bh={name:Yt.CHANGE_ICON_COLOR,execute:function(v,a,l){var n=this;return new(Q())(function(u,b){var T=v.getComponent(ma),B=v.getObject(a);B||b(Rt.noObject),n.undoData.object=B,n.undoData.color=T.getColor(B),T.setColor(l,B),u()})},undo:function(v){var a=v.getComponent(ma),l=this.undoData,n=l.object,u=l.color;return a.setColor(u,n),Q().resolve()}};ye.register(Bh);var ya=wt.SHAPE,Ca=null;function Fh(D,v){var a={object:v,options:{}};return K().forEachOwnProperties(D,function(l,n){a.options[n]=v[n]}),a}var Hh={name:Yt.CHANGE_SHAPE,execute:function(v,a,l,n){var u=v.getComponent(ya),b=v.getObject(a);if(!b)return Q().reject(Rt.noObject);if(!this.isRedo){var T=Fh(l,b);Ca=this.setUndoData(T,Ca,n)}return u.change(b,l)},undo:function(v){var a=v.getComponent(ya),l=this.undoData,n=l.object,u=l.options;return a.change(n,u)}};ye.register(Hh);var ba=wt.TEXT,Yh={name:Yt.CHANGE_TEXT,execute:function(v,a,l){var n=v.getComponent(ba),u=v.getObject(a);return u?(this.undoData.object=u,this.undoData.text=n.getText(u),n.change(u,l)):Q().reject(Rt.noObject)},undo:function(v){var a=v.getComponent(ba),l=this.undoData,n=l.object,u=l.text;return a.change(n,u)}};ye.register(Yh);var xa=wt.TEXT,Sa=null;function Uh(D,v){var a={object:v,styles:{}};return K().forEachOwnProperties(D,function(l,n){var u=v[n];a.styles[n]=u}),a}var Wh={name:Yt.CHANGE_TEXT_STYLE,execute:function(v,a,l,n){var u=v.getComponent(xa),b=v.getObject(a);if(!b)return Q().reject(Rt.noObject);if(!this.isRedo){var T=Uh(l,b);Sa=this.setUndoData(T,Sa,n)}return u.setStyle(b,l)},undo:function(v){var a=v.getComponent(xa),l=this.undoData,n=l.object,u=l.styles;return a.setStyle(n,u)}};ye.register(Wh);var Gh={name:Yt.CLEAR_OBJECTS,execute:function(v){var a=this;return new(Q())(function(l){a.undoData.objects=v.removeAll(),l()})},undo:function(v){return v.add(this.undoData.objects),Q().resolve()}};ye.register(Gh);var Ia=wt.FLIP,Xh={name:Yt.FLIP_IMAGE,execute:function(v,a){var l=v.getComponent(Ia);return this.undoData.setting=l.getCurrentSetting(),l[a]()},undo:function(v){var a=v.getComponent(Ia);return a.set(this.undoData.setting)}};ye.register(Xh);var Ma=wt.IMAGE_LOADER,Zh={name:Yt.LOAD_IMAGE,execute:function(v,a,l){var n,u=v.getComponent(Ma),b=u.getCanvasImage(),T=b?b.width:0,B=b?b.height:0,N=Fi()(n=v.removeAll(!0)).call(n,function(H){return H.type!=="cropzone"});return It()(N).call(N,function(H){H.evented=!0}),this.undoData={name:u.getImageName(),image:b,objects:N},u.load(a,l).then(function(H){return{oldWidth:T,oldHeight:B,newWidth:H.width,newHeight:H.height}})},undo:function(v){var a=v.getComponent(Ma),l=this.undoData,n=l.objects,u=l.name,b=l.image;return v.removeAll(!0),v.add(n),a.load(u,b)}};ye.register(Zh);var _a=wt.FILTER,Vh={name:Yt.REMOVE_FILTER,execute:function(v,a){var l=v.getComponent(_a);return this.undoData.options=l.getOptions(a),l.remove(a)},undo:function(v,a){var l=v.getComponent(_a),n=this.undoData.options;return l.add(a,n)}};ye.register(Vh);var Jh={name:Yt.REMOVE_OBJECT,execute:function(v,a){var l=this;return new(Q())(function(n,u){l.undoData.objects=v.removeObjectById(a),l.undoData.objects.length?n():u(Rt.noObject)})},undo:function(v){return v.add(this.undoData.objects),Q().resolve()}};ye.register(Jh);var Qh={name:Yt.RESIZE_CANVAS_DIMENSION,execute:function(v,a){var l=this;return new(Q())(function(n){l.undoData.size={width:v.cssMaxWidth,height:v.cssMaxHeight},v.setCssMaxDimension(a),v.adjustCanvasDimension(),n()})},undo:function(v){return v.setCssMaxDimension(this.undoData.size),v.adjustCanvasDimension(),Q().resolve()}};ye.register(Qh);var Ea=wt.ROTATION,Ta=null;function Kh(D){return{angle:D.getCurrentAngle()}}var $h={name:Yt.ROTATE_IMAGE,execute:function(v,a,l,n){var u=v.getComponent(Ea);if(!this.isRedo){var b=Kh(u);Ta=this.setUndoData(b,Ta,n)}return u[a](l)},undo:function(v){var a=v.getComponent(Ea),l=yt(this.args,3),n=l[1],u=l[2];return n==="setAngle"?a[n](this.undoData.angle):a.rotate(-u)}};ye.register($h);var qh={name:Yt.SET_OBJECT_PROPERTIES,execute:function(v,a,l){var n=this,u=v.getObject(a);return u?(this.undoData.props={},K().forEachOwnProperties(l,function(b,T){n.undoData.props[T]=u[T]}),v.setObjectProperties(a,l),Q().resolve()):Q().reject(Rt.noObject)},undo:function(v,a){var l=this.undoData.props;return v.setObjectProperties(a,l),Q().resolve()}};ye.register(qh);var tf={name:Yt.SET_OBJECT_POSITION,execute:function(v,a,l){var n=v.getObject(a);return n?(this.undoData.objectId=a,this.undoData.props=v.getObjectProperties(a,["left","top"]),v.setObjectPosition(a,l),v.renderAll(),Q().resolve()):Q().reject(Rt.noObject)},undo:function(v){var a=this.undoData,l=a.objectId,n=a.props;return v.setObjectProperties(l,n),v.renderAll(),Q().resolve()}};ye.register(tf);var ef={name:Yt.CHANGE_SELECTION,execute:function(v,a){return this.isRedo?It()(a).call(a,function(l){v.setObjectProperties(l.id,l)}):this.undoData=Ju(),Q().resolve()},undo:function(v){var a;return It()(a=this.undoData).call(a,function(l){v.setObjectProperties(l.id,l)}),Q().resolve()}};ye.register(ef);var wa=wt.RESIZE,nf={name:Yt.RESIZE_IMAGE,execute:function(v,a){var l=v.getComponent(wa),n=l.getOriginalDimensions();return n||(n=l.getCurrentDimensions()),this.undoData.dimensions=n,l.resize(a)},undo:function(v){var a=v.getComponent(wa);return a.resize(this.undoData.dimensions)}};ye.register(nf);var rf=wh}(),Y=Y.default,Y}()})})(Ro);var wd=ff(Ro.exports);export{rd as C,wd as I,Td as W,Ed as i};
